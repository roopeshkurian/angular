var AS=Object.create;var Pc=Object.defineProperty,RS=Object.defineProperties,MS=Object.getOwnPropertyDescriptor,PS=Object.getOwnPropertyDescriptors,NS=Object.getOwnPropertyNames,qv=Object.getOwnPropertySymbols,FS=Object.getPrototypeOf,Kv=Object.prototype.hasOwnProperty,kS=Object.prototype.propertyIsEnumerable;var Xv=(n,e,t)=>e in n?Pc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D=(n,e)=>{for(var t in e||={})Kv.call(e,t)&&Xv(n,t,e[t]);if(qv)for(var t of qv(e))kS.call(e,t)&&Xv(n,t,e[t]);return n},me=(n,e)=>RS(n,PS(e));var Qv=n=>e=>{var t=n[e];if(t)return t();throw new Error("Module not found in bundle: "+e)};var LS=(n,e)=>()=>(n&&(e=n(n=0)),e);var Nc=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),el=(n,e)=>{for(var t in e)Pc(n,t,{get:e[t],enumerable:!0})},VS=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of NS(e))!Kv.call(n,r)&&r!==t&&Pc(n,r,{get:()=>e[r],enumerable:!(i=MS(e,r))||i.enumerable});return n};var dn=(n,e,t)=>(t=n!=null?AS(FS(n)):{},VS(e||!n||!n.__esModule?Pc(t,"default",{value:n,enumerable:!0}):t,n));var kt=(n,e,t)=>new Promise((i,r)=>{var s=l=>{try{a(t.next(l))}catch(u){r(u)}},o=l=>{try{a(t.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});var DE=Nc(()=>{"use strict"});var NH,gg=LS(()=>{NH=Qv({"./locale/locale.js":()=>DE()})});var vs=Nc((vg,ma)=>{"use strict";gg();(function(n,e){typeof vg=="object"&&typeof ma<"u"?ma.exports=e():typeof define=="function"&&define.amd?define(e):n.moment=e()})(vg,function(){"use strict";var n;function e(){return n.apply(null,arguments)}function t(c){return c instanceof Array||Object.prototype.toString.call(c)==="[object Array]"}function i(c){return c!=null&&Object.prototype.toString.call(c)==="[object Object]"}function r(c,d){return Object.prototype.hasOwnProperty.call(c,d)}function s(c){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(c).length===0;for(var d in c)if(r(c,d))return;return 1}function o(c){return c===void 0}function a(c){return typeof c=="number"||Object.prototype.toString.call(c)==="[object Number]"}function l(c){return c instanceof Date||Object.prototype.toString.call(c)==="[object Date]"}function u(c,d){for(var p=[],g=c.length,C=0;C<g;++C)p.push(d(c[C],C));return p}function h(c,d){for(var p in d)r(d,p)&&(c[p]=d[p]);return r(d,"toString")&&(c.toString=d.toString),r(d,"valueOf")&&(c.valueOf=d.valueOf),c}function f(c,d,p,g){return Eo(c,d,p,g,!0).utc()}function m(c){return c._pf==null&&(c._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),c._pf}function v(c){if(c._isValid==null){var d=m(c),p=S.call(d.parsedDateParts,function(g){return g!=null}),p=!isNaN(c._d.getTime())&&d.overflow<0&&!d.empty&&!d.invalidEra&&!d.invalidMonth&&!d.invalidWeekday&&!d.weekdayMismatch&&!d.nullInput&&!d.invalidFormat&&!d.userInvalidated&&(!d.meridiem||d.meridiem&&p);if(c._strict&&(p=p&&d.charsLeftOver===0&&d.unusedTokens.length===0&&d.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(c))return p;c._isValid=p}return c._isValid}function w(c){var d=f(NaN);return c!=null?h(m(d),c):m(d).userInvalidated=!0,d}var S=Array.prototype.some||function(c){for(var d=Object(this),p=d.length>>>0,g=0;g<p;g++)if(g in d&&c.call(this,d[g],g,d))return!0;return!1},P=e.momentProperties=[],R=!1;function M(c,d){var p,g,C,T=P.length;if(o(d._isAMomentObject)||(c._isAMomentObject=d._isAMomentObject),o(d._i)||(c._i=d._i),o(d._f)||(c._f=d._f),o(d._l)||(c._l=d._l),o(d._strict)||(c._strict=d._strict),o(d._tzm)||(c._tzm=d._tzm),o(d._isUTC)||(c._isUTC=d._isUTC),o(d._offset)||(c._offset=d._offset),o(d._pf)||(c._pf=m(d)),o(d._locale)||(c._locale=d._locale),0<T)for(p=0;p<T;p++)o(C=d[g=P[p]])||(c[g]=C);return c}function x(c){M(this,c),this._d=new Date(c._d!=null?c._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),R===!1&&(R=!0,e.updateOffset(this),R=!1)}function L(c){return c instanceof x||c!=null&&c._isAMomentObject!=null}function z(c){e.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+c)}function Y(c,d){var p=!0;return h(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,c),p){for(var g,C,T=[],k=arguments.length,H=0;H<k;H++){if(g="",typeof arguments[H]=="object"){for(C in g+=`
[`+H+"] ",arguments[0])r(arguments[0],C)&&(g+=C+": "+arguments[0][C]+", ");g=g.slice(0,-2)}else g=arguments[H];T.push(g)}z(c+`
Arguments: `+Array.prototype.slice.call(T).join("")+`
`+new Error().stack),p=!1}return d.apply(this,arguments)},d)}var U={};function pe(c,d){e.deprecationHandler!=null&&e.deprecationHandler(c,d),U[c]||(z(d),U[c]=!0)}function Z(c){return typeof Function<"u"&&c instanceof Function||Object.prototype.toString.call(c)==="[object Function]"}function We(c,d){var p,g=h({},c);for(p in d)r(d,p)&&(i(c[p])&&i(d[p])?(g[p]={},h(g[p],c[p]),h(g[p],d[p])):d[p]!=null?g[p]=d[p]:delete g[p]);for(p in c)r(c,p)&&!r(d,p)&&i(c[p])&&(g[p]=h({},g[p]));return g}function it(c){c!=null&&this.set(c)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var pt=Object.keys||function(c){var d,p=[];for(d in c)r(c,d)&&p.push(d);return p};function Fe(c,d,p){var g=""+Math.abs(c);return(0<=c?p?"+":"":"-")+Math.pow(10,Math.max(0,d-g.length)).toString().substr(1)+g}var lt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,qt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Mt={},Ct={};function q(c,d,p,g){var C=typeof g=="string"?function(){return this[g]()}:g;c&&(Ct[c]=C),d&&(Ct[d[0]]=function(){return Fe(C.apply(this,arguments),d[1],d[2])}),p&&(Ct[p]=function(){return this.localeData().ordinal(C.apply(this,arguments),c)})}function ii(c,d){return c.isValid()?(d=on(d,c.localeData()),Mt[d]=Mt[d]||function(p){for(var g,C=p.match(lt),T=0,k=C.length;T<k;T++)Ct[C[T]]?C[T]=Ct[C[T]]:C[T]=(g=C[T]).match(/\[[\s\S]/)?g.replace(/^\[|\]$/g,""):g.replace(/\\/g,"");return function(H){for(var K="",W=0;W<k;W++)K+=Z(C[W])?C[W].call(H,p):C[W];return K}}(d),Mt[d](c)):c.localeData().invalidDate()}function on(c,d){var p=5;function g(C){return d.longDateFormat(C)||C}for(qt.lastIndex=0;0<=p&&qt.test(c);)c=c.replace(qt,g),qt.lastIndex=0,--p;return c}var hi={};function xt(c,d){var p=c.toLowerCase();hi[p]=hi[p+"s"]=hi[d]=c}function Xt(c){return typeof c=="string"?hi[c]||hi[c.toLowerCase()]:void 0}function Bn(c){var d,p,g={};for(p in c)r(c,p)&&(d=Xt(p))&&(g[d]=c[p]);return g}var fi={};function gt(c,d){fi[c]=d}function Pi(c){return c%4==0&&c%100!=0||c%400==0}function yt(c){return c<0?Math.ceil(c)||0:Math.floor(c)}function Ee(d){var d=+d,p=0;return p=d!=0&&isFinite(d)?yt(d):p}function Yi(c,d){return function(p){return p!=null?(re(this,c,p),e.updateOffset(this,d),this):Cn(this,c)}}function Cn(c,d){return c.isValid()?c._d["get"+(c._isUTC?"UTC":"")+d]():NaN}function re(c,d,p){c.isValid()&&!isNaN(p)&&(d==="FullYear"&&Pi(c.year())&&c.month()===1&&c.date()===29?(p=Ee(p),c._d["set"+(c._isUTC?"UTC":"")+d](p,c.month(),Et(p,c.month()))):c._d["set"+(c._isUTC?"UTC":"")+d](p))}var F=/\d/,Te=/\d\d/,bt=/\d{3}/,ks=/\d{4}/,Qr=/[+-]?\d{6}/,te=/\d\d?/,J=/\d\d\d\d?/,ve=/\d\d\d\d\d\d?/,xe=/\d{1,3}/,Zr=/\d{1,4}/,Kr=/[+-]?\d{1,6}/,ze=/\d+/,Je=/[+-]?\d+/,pi=/Z|[+-]\d\d:?\d\d/gi,yn=/Z|[+-]\d\d(?::?\d\d)?/gi,mi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Q(c,d,p){zr[c]=Z(d)?d:function(g,C){return g&&p?p:d}}function Ur(c,d){return r(zr,c)?zr[c](d._strict,d._locale):new RegExp(oi(c.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(p,g,C,T,k){return g||C||T||k})))}function oi(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var zr={},Un={};function $e(c,d){var p,g,C=d;for(typeof c=="string"&&(c=[c]),a(d)&&(C=function(T,k){k[d]=Ee(T)}),g=c.length,p=0;p<g;p++)Un[c[p]]=C}function gr(c,d){$e(c,function(p,g,C,T){C._w=C._w||{},d(p,C._w,C,T)})}var Tt,Vt=0,wi=1,dt=2,we=3,Kt=4,Si=5,bn=6,$r=7,As=8;function Et(c,d){if(isNaN(c)||isNaN(d))return NaN;var p=(d%(p=12)+p)%p;return c+=(d-p)/12,p==1?Pi(c)?29:28:31-p%7%2}Tt=Array.prototype.indexOf||function(c){for(var d=0;d<this.length;++d)if(this[d]===c)return d;return-1},q("M",["MM",2],"Mo",function(){return this.month()+1}),q("MMM",0,0,function(c){return this.localeData().monthsShort(this,c)}),q("MMMM",0,0,function(c){return this.localeData().months(this,c)}),xt("month","M"),gt("month",8),Q("M",te),Q("MM",te,Te),Q("MMM",function(c,d){return d.monthsShortRegex(c)}),Q("MMMM",function(c,d){return d.monthsRegex(c)}),$e(["M","MM"],function(c,d){d[wi]=Ee(c)-1}),$e(["MMM","MMMM"],function(c,d,p,g){g=p._locale.monthsParse(c,g,p._strict),g!=null?d[wi]=g:m(p).invalidMonth=c});var En="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),jr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,y=mi,I=mi;function N(c,d){var p;if(c.isValid()){if(typeof d=="string"){if(/^\d+$/.test(d))d=Ee(d);else if(!a(d=c.localeData().monthsParse(d)))return}p=Math.min(c.date(),Et(c.year(),d)),c._d["set"+(c._isUTC?"UTC":"")+"Month"](d,p)}}function $(c){return c!=null?(N(this,c),e.updateOffset(this,!0),this):Cn(this,"Month")}function X(){function c(k,H){return H.length-k.length}for(var d,p=[],g=[],C=[],T=0;T<12;T++)d=f([2e3,T]),p.push(this.monthsShort(d,"")),g.push(this.months(d,"")),C.push(this.months(d,"")),C.push(this.monthsShort(d,""));for(p.sort(c),g.sort(c),C.sort(c),T=0;T<12;T++)p[T]=oi(p[T]),g[T]=oi(g[T]);for(T=0;T<24;T++)C[T]=oi(C[T]);this._monthsRegex=new RegExp("^("+C.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+p.join("|")+")","i")}function se(c){return Pi(c)?366:365}q("Y",0,0,function(){var c=this.year();return c<=9999?Fe(c,4):"+"+c}),q(0,["YY",2],0,function(){return this.year()%100}),q(0,["YYYY",4],0,"year"),q(0,["YYYYY",5],0,"year"),q(0,["YYYYYY",6,!0],0,"year"),xt("year","y"),gt("year",1),Q("Y",Je),Q("YY",te,Te),Q("YYYY",Zr,ks),Q("YYYYY",Kr,Qr),Q("YYYYYY",Kr,Qr),$e(["YYYYY","YYYYYY"],Vt),$e("YYYY",function(c,d){d[Vt]=c.length===2?e.parseTwoDigitYear(c):Ee(c)}),$e("YY",function(c,d){d[Vt]=e.parseTwoDigitYear(c)}),$e("Y",function(c,d){d[Vt]=parseInt(c,10)}),e.parseTwoDigitYear=function(c){return Ee(c)+(68<Ee(c)?1900:2e3)};var Rc=Yi("FullYear",!0);function oe(c,d,p,g,C,T,k){var H;return c<100&&0<=c?(H=new Date(c+400,d,p,g,C,T,k),isFinite(H.getFullYear())&&H.setFullYear(c)):H=new Date(c,d,p,g,C,T,k),H}function ue(c){var d;return c<100&&0<=c?((d=Array.prototype.slice.call(arguments))[0]=c+400,d=new Date(Date.UTC.apply(null,d)),isFinite(d.getUTCFullYear())&&d.setUTCFullYear(c)):d=new Date(Date.UTC.apply(null,arguments)),d}function ie(c,d,p){return p=7+d-p,p-(7+ue(c,0,p).getUTCDay()-d)%7-1}function ee(c,k,H,g,C){var T,k=1+7*(k-1)+(7+H-g)%7+ie(c,g,C),H=k<=0?se(T=c-1)+k:k>se(c)?(T=c+1,k-se(c)):(T=c,k);return{year:T,dayOfYear:H}}function ke(c,d,p){var g,C,T=ie(c.year(),d,p),T=Math.floor((c.dayOfYear()-T-1)/7)+1;return T<1?g=T+It(C=c.year()-1,d,p):T>It(c.year(),d,p)?(g=T-It(c.year(),d,p),C=c.year()+1):(C=c.year(),g=T),{week:g,year:C}}function It(c,C,p){var g=ie(c,C,p),C=ie(c+1,C,p);return(se(c)-g+C)/7}q("w",["ww",2],"wo","week"),q("W",["WW",2],"Wo","isoWeek"),xt("week","w"),xt("isoWeek","W"),gt("week",5),gt("isoWeek",5),Q("w",te),Q("ww",te,Te),Q("W",te),Q("WW",te,Te),gr(["w","ww","W","WW"],function(c,d,p,g){d[g.substr(0,1)]=Ee(c)});function Bt(c,d){return c.slice(d,7).concat(c.slice(0,d))}q("d",0,"do","day"),q("dd",0,0,function(c){return this.localeData().weekdaysMin(this,c)}),q("ddd",0,0,function(c){return this.localeData().weekdaysShort(this,c)}),q("dddd",0,0,function(c){return this.localeData().weekdays(this,c)}),q("e",0,0,"weekday"),q("E",0,0,"isoWeekday"),xt("day","d"),xt("weekday","e"),xt("isoWeekday","E"),gt("day",11),gt("weekday",11),gt("isoWeekday",11),Q("d",te),Q("e",te),Q("E",te),Q("dd",function(c,d){return d.weekdaysMinRegex(c)}),Q("ddd",function(c,d){return d.weekdaysShortRegex(c)}),Q("dddd",function(c,d){return d.weekdaysRegex(c)}),gr(["dd","ddd","dddd"],function(c,d,p,g){g=p._locale.weekdaysParse(c,g,p._strict),g!=null?d.d=g:m(p).invalidWeekday=c}),gr(["d","e","E"],function(c,d,p,g){d[g]=Ee(c)});var Di="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),an="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),vr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ln=mi,wn=mi,Rs=mi;function _r(){function c(W,Ie){return Ie.length-W.length}for(var d,p,g,C=[],T=[],k=[],H=[],K=0;K<7;K++)g=f([2e3,1]).day(K),d=oi(this.weekdaysMin(g,"")),p=oi(this.weekdaysShort(g,"")),g=oi(this.weekdays(g,"")),C.push(d),T.push(p),k.push(g),H.push(d),H.push(p),H.push(g);C.sort(c),T.sort(c),k.sort(c),H.sort(c),this._weekdaysRegex=new RegExp("^("+H.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+T.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+C.join("|")+")","i")}function cn(){return this.hours()%12||12}function Cr(c,d){q(c,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),d)})}function yr(c,d){return d._meridiemParse}q("H",["HH",2],0,"hour"),q("h",["hh",2],0,cn),q("k",["kk",2],0,function(){return this.hours()||24}),q("hmm",0,0,function(){return""+cn.apply(this)+Fe(this.minutes(),2)}),q("hmmss",0,0,function(){return""+cn.apply(this)+Fe(this.minutes(),2)+Fe(this.seconds(),2)}),q("Hmm",0,0,function(){return""+this.hours()+Fe(this.minutes(),2)}),q("Hmmss",0,0,function(){return""+this.hours()+Fe(this.minutes(),2)+Fe(this.seconds(),2)}),Cr("a",!0),Cr("A",!1),xt("hour","h"),gt("hour",13),Q("a",yr),Q("A",yr),Q("H",te),Q("h",te),Q("k",te),Q("HH",te,Te),Q("hh",te,Te),Q("kk",te,Te),Q("hmm",J),Q("hmmss",ve),Q("Hmm",J),Q("Hmmss",ve),$e(["H","HH"],we),$e(["k","kk"],function(c,d,p){c=Ee(c),d[we]=c===24?0:c}),$e(["a","A"],function(c,d,p){p._isPm=p._locale.isPM(c),p._meridiem=c}),$e(["h","hh"],function(c,d,p){d[we]=Ee(c),m(p).bigHour=!0}),$e("hmm",function(c,d,p){var g=c.length-2;d[we]=Ee(c.substr(0,g)),d[Kt]=Ee(c.substr(g)),m(p).bigHour=!0}),$e("hmmss",function(c,d,p){var g=c.length-4,C=c.length-2;d[we]=Ee(c.substr(0,g)),d[Kt]=Ee(c.substr(g,2)),d[Si]=Ee(c.substr(C)),m(p).bigHour=!0}),$e("Hmm",function(c,d,p){var g=c.length-2;d[we]=Ee(c.substr(0,g)),d[Kt]=Ee(c.substr(g))}),$e("Hmmss",function(c,d,p){var g=c.length-4,C=c.length-2;d[we]=Ee(c.substr(0,g)),d[Kt]=Ee(c.substr(g,2)),d[Si]=Ee(c.substr(C))}),mi=Yi("Hours",!0);var zn,Ms={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:En,monthsShort:jr,week:{dow:0,doy:6},weekdays:Di,weekdaysMin:vr,weekdaysShort:an,meridiemParse:/[ap]\.?m?\.?/i},vt={},br={};function Wr(c){return c&&c.toLowerCase().replace("_","-")}function Gr(c){for(var d,p,g,C,T=0;T<c.length;){for(d=(C=Wr(c[T]).split("-")).length,p=(p=Wr(c[T+1]))?p.split("-"):null;0<d;){if(g=Sn(C.slice(0,d).join("-")))return g;if(p&&p.length>=d&&function(k,H){for(var K=Math.min(k.length,H.length),W=0;W<K;W+=1)if(k[W]!==H[W])return W;return K}(C,p)>=d-1)break;d--}T++}return zn}function Sn(c){var d;if(vt[c]===void 0&&typeof ma<"u"&&ma&&ma.exports&&c.match("^[^/\\\\]*$")!=null)try{d=zn._abbr,NH("./locale/"+c),Dn(d)}catch{vt[c]=null}return vt[c]}function Dn(c,d){return c&&((d=o(d)?un(c):Co(c,d))?zn=d:typeof console<"u"&&console.warn&&console.warn("Locale "+c+" not found. Did you forget to load it?")),zn._abbr}function Co(c,d){if(d===null)return delete vt[c],null;var p,g=Ms;if(d.abbr=c,vt[c]!=null)pe("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),g=vt[c]._config;else if(d.parentLocale!=null)if(vt[d.parentLocale]!=null)g=vt[d.parentLocale]._config;else{if((p=Sn(d.parentLocale))==null)return br[d.parentLocale]||(br[d.parentLocale]=[]),br[d.parentLocale].push({name:c,config:d}),null;g=p._config}return vt[c]=new it(We(g,d)),br[c]&&br[c].forEach(function(C){Co(C.name,C.config)}),Dn(c),vt[c]}function un(c){var d;if(!(c=c&&c._locale&&c._locale._abbr?c._locale._abbr:c))return zn;if(!t(c)){if(d=Sn(c))return d;c=[c]}return Gr(c)}function Ps(c){var d=c._a;return d&&m(c).overflow===-2&&(d=d[wi]<0||11<d[wi]?wi:d[dt]<1||d[dt]>Et(d[Vt],d[wi])?dt:d[we]<0||24<d[we]||d[we]===24&&(d[Kt]!==0||d[Si]!==0||d[bn]!==0)?we:d[Kt]<0||59<d[Kt]?Kt:d[Si]<0||59<d[Si]?Si:d[bn]<0||999<d[bn]?bn:-1,m(c)._overflowDayOfYear&&(d<Vt||dt<d)&&(d=dt),m(c)._overflowWeeks&&d===-1&&(d=$r),m(c)._overflowWeekday&&d===-1&&(d=As),m(c).overflow=d),c}var xc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bo=/Z|[+-]\d\d(?::?\d\d)?/,Ni=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],$n=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ja=/^\/?Date\((-?\d+)/i,Wa=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,of={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function jn(c){var d,p,g,C,T,k,K=c._i,H=xc.exec(K)||yo.exec(K),K=Ni.length,W=$n.length;if(H){for(m(c).iso=!0,d=0,p=K;d<p;d++)if(Ni[d][1].exec(H[1])){C=Ni[d][0],g=Ni[d][2]!==!1;break}if(C==null)c._isValid=!1;else{if(H[3]){for(d=0,p=W;d<p;d++)if($n[d][1].exec(H[3])){T=(H[2]||" ")+$n[d][0];break}if(T==null)return void(c._isValid=!1)}if(g||T==null){if(H[4]){if(!bo.exec(H[4]))return void(c._isValid=!1);k="Z"}c._f=C+(T||"")+(k||""),Ga(c)}else c._isValid=!1}}else c._isValid=!1}function af(c,d,p,g,C,T){return c=[function(k){k=parseInt(k,10);{if(k<=49)return 2e3+k;if(k<=999)return 1900+k}return k}(c),jr.indexOf(d),parseInt(p,10),parseInt(g,10),parseInt(C,10)],T&&c.push(parseInt(T,10)),c}function Tc(c){var d,p,g,C,T=Wa.exec(c._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));T?(d=af(T[4],T[3],T[2],T[5],T[6],T[7]),p=T[1],g=d,C=c,p&&an.indexOf(p)!==new Date(g[0],g[1],g[2]).getDay()?(m(C).weekdayMismatch=!0,C._isValid=!1):(c._a=d,c._tzm=(p=T[8],g=T[9],C=T[10],p?of[p]:g?0:60*(((p=parseInt(C,10))-(g=p%100))/100)+g),c._d=ue.apply(null,c._a),c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),m(c).rfc2822=!0)):c._isValid=!1}function wt(c,d,p){return c??d??p}function Wn(c){var d,p,g,C,T,k,H,K,W,Ie,_e,Pt=[];if(!c._d){for(g=c,C=new Date(e.now()),p=g._useUTC?[C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate()]:[C.getFullYear(),C.getMonth(),C.getDate()],c._w&&c._a[dt]==null&&c._a[wi]==null&&((C=(g=c)._w).GG!=null||C.W!=null||C.E!=null?(K=1,W=4,T=wt(C.GG,g._a[Vt],ke(ht(),1,4).year),k=wt(C.W,1),((H=wt(C.E,1))<1||7<H)&&(Ie=!0)):(K=g._locale._week.dow,W=g._locale._week.doy,_e=ke(ht(),K,W),T=wt(C.gg,g._a[Vt],_e.year),k=wt(C.w,_e.week),C.d!=null?((H=C.d)<0||6<H)&&(Ie=!0):C.e!=null?(H=C.e+K,(C.e<0||6<C.e)&&(Ie=!0)):H=K),k<1||k>It(T,K,W)?m(g)._overflowWeeks=!0:Ie!=null?m(g)._overflowWeekday=!0:(_e=ee(T,k,H,K,W),g._a[Vt]=_e.year,g._dayOfYear=_e.dayOfYear)),c._dayOfYear!=null&&(C=wt(c._a[Vt],p[Vt]),(c._dayOfYear>se(C)||c._dayOfYear===0)&&(m(c)._overflowDayOfYear=!0),Ie=ue(C,0,c._dayOfYear),c._a[wi]=Ie.getUTCMonth(),c._a[dt]=Ie.getUTCDate()),d=0;d<3&&c._a[d]==null;++d)c._a[d]=Pt[d]=p[d];for(;d<7;d++)c._a[d]=Pt[d]=c._a[d]==null?d===2?1:0:c._a[d];c._a[we]===24&&c._a[Kt]===0&&c._a[Si]===0&&c._a[bn]===0&&(c._nextDay=!0,c._a[we]=0),c._d=(c._useUTC?ue:oe).apply(null,Pt),T=c._useUTC?c._d.getUTCDay():c._d.getDay(),c._tzm!=null&&c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),c._nextDay&&(c._a[we]=24),c._w&&c._w.d!==void 0&&c._w.d!==T&&(m(c).weekdayMismatch=!0)}}function Ga(c){if(c._f===e.ISO_8601)jn(c);else if(c._f===e.RFC_2822)Tc(c);else{c._a=[],m(c).empty=!0;for(var d,p,g,C,T,k=""+c._i,H=k.length,K=0,W=on(c._f,c._locale).match(lt)||[],Ie=W.length,_e=0;_e<Ie;_e++)p=W[_e],(d=(k.match(Ur(p,c))||[])[0])&&(0<(g=k.substr(0,k.indexOf(d))).length&&m(c).unusedInput.push(g),k=k.slice(k.indexOf(d)+d.length),K+=d.length),Ct[p]?(d?m(c).empty=!1:m(c).unusedTokens.push(p),g=p,T=c,(C=d)!=null&&r(Un,g)&&Un[g](C,T._a,T,g)):c._strict&&!d&&m(c).unusedTokens.push(p);m(c).charsLeftOver=H-K,0<k.length&&m(c).unusedInput.push(k),c._a[we]<=12&&m(c).bigHour===!0&&0<c._a[we]&&(m(c).bigHour=void 0),m(c).parsedDateParts=c._a.slice(0),m(c).meridiem=c._meridiem,c._a[we]=function(Pt,Ut,Tn){return Tn==null?Ut:Pt.meridiemHour!=null?Pt.meridiemHour(Ut,Tn):Pt.isPM!=null?((Pt=Pt.isPM(Tn))&&Ut<12&&(Ut+=12),Ut=Pt||Ut!==12?Ut:0):Ut}(c._locale,c._a[we],c._meridiem),(H=m(c).era)!==null&&(c._a[Vt]=c._locale.erasConvertYear(H,c._a[Vt])),Wn(c),Ps(c)}}function Ya(c){var d,p,g,C=c._i,T=c._f;return c._locale=c._locale||un(c._l),C===null||T===void 0&&C===""?w({nullInput:!0}):(typeof C=="string"&&(c._i=C=c._locale.preparse(C)),L(C)?new x(Ps(C)):(l(C)?c._d=C:t(T)?function(k){var H,K,W,Ie,_e,Pt,Ut=!1,Tn=k._f.length;if(Tn===0)return m(k).invalidFormat=!0,k._d=new Date(NaN);for(Ie=0;Ie<Tn;Ie++)_e=0,Pt=!1,H=M({},k),k._useUTC!=null&&(H._useUTC=k._useUTC),H._f=k._f[Ie],Ga(H),v(H)&&(Pt=!0),_e=(_e+=m(H).charsLeftOver)+10*m(H).unusedTokens.length,m(H).score=_e,Ut?_e<W&&(W=_e,K=H):(W==null||_e<W||Pt)&&(W=_e,K=H,Pt&&(Ut=!0));h(k,K||H)}(c):T?Ga(c):o(T=(C=c)._i)?C._d=new Date(e.now()):l(T)?C._d=new Date(T.valueOf()):typeof T=="string"?(p=C,(d=ja.exec(p._i))!==null?p._d=new Date(+d[1]):(jn(p),p._isValid===!1&&(delete p._isValid,Tc(p),p._isValid===!1&&(delete p._isValid,p._strict?p._isValid=!1:e.createFromInputFallback(p))))):t(T)?(C._a=u(T.slice(0),function(k){return parseInt(k,10)}),Wn(C)):i(T)?(d=C)._d||(g=(p=Bn(d._i)).day===void 0?p.date:p.day,d._a=u([p.year,p.month,g,p.hour,p.minute,p.second,p.millisecond],function(k){return k&&parseInt(k,10)}),Wn(d)):a(T)?C._d=new Date(T):e.createFromInputFallback(C),v(c)||(c._d=null),c))}function Eo(c,d,p,g,C){var T={};return d!==!0&&d!==!1||(g=d,d=void 0),p!==!0&&p!==!1||(g=p,p=void 0),(i(c)&&s(c)||t(c)&&c.length===0)&&(c=void 0),T._isAMomentObject=!0,T._useUTC=T._isUTC=C,T._l=p,T._i=c,T._f=d,T._strict=g,(C=new x(Ps(Ya(C=T))))._nextDay&&(C.add(1,"d"),C._nextDay=void 0),C}function ht(c,d,p,g){return Eo(c,d,p,g,!1)}e.createFromInputFallback=Y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(c){c._d=new Date(c._i+(c._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){},J=Y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=ht.apply(null,arguments);return this.isValid()&&c.isValid()?c<this?this:c:w()}),ve=Y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=ht.apply(null,arguments);return this.isValid()&&c.isValid()?this<c?this:c:w()});function qa(c,d){var p,g;if(!(d=d.length===1&&t(d[0])?d[0]:d).length)return ht();for(p=d[0],g=1;g<d.length;++g)d[g].isValid()&&!d[g][c](p)||(p=d[g]);return p}var Ns=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Er(d){var d=Bn(d),p=d.year||0,g=d.quarter||0,C=d.month||0,T=d.week||d.isoWeek||0,k=d.day||0,H=d.hour||0,K=d.minute||0,W=d.second||0,Ie=d.millisecond||0;this._isValid=function(_e){var Pt,Ut,Tn=!1,df=Ns.length;for(Pt in _e)if(r(_e,Pt)&&(Tt.call(Ns,Pt)===-1||_e[Pt]!=null&&isNaN(_e[Pt])))return!1;for(Ut=0;Ut<df;++Ut)if(_e[Ns[Ut]]){if(Tn)return!1;parseFloat(_e[Ns[Ut]])!==Ee(_e[Ns[Ut]])&&(Tn=!0)}return!0}(d),this._milliseconds=+Ie+1e3*W+6e4*K+1e3*H*60*60,this._days=+k+7*T,this._months=+C+3*g+12*p,this._data={},this._locale=un(),this._bubble()}function Yr(c){return c instanceof Er}function Xa(c){return c<0?-1*Math.round(-1*c):Math.round(c)}function Gn(c,d){q(c,0,0,function(){var p=this.utcOffset(),g="+";return p<0&&(p=-p,g="-"),g+Fe(~~(p/60),2)+d+Fe(~~p%60,2)})}Gn("Z",":"),Gn("ZZ",""),Q("Z",yn),Q("ZZ",yn),$e(["Z","ZZ"],function(c,d,p){p._useUTC=!0,p._tzm=wo(yn,c)});var Ka=/([\+\-]|\d\d)/gi;function wo(c,p){var p=(p||"").match(c);return p===null?null:(p=60*(c=((p[p.length-1]||[])+"").match(Ka)||["-",0,0])[1]+Ee(c[2]))===0?0:c[0]==="+"?p:-p}function So(c,d){var p;return d._isUTC?(d=d.clone(),p=(L(c)||l(c)?c:ht(c)).valueOf()-d.valueOf(),d._d.setTime(d._d.valueOf()+p),e.updateOffset(d,!1),d):ht(c).local()}function Qa(c){return-Math.round(c._d.getTimezoneOffset())}function Za(){return!!this.isValid()&&this._isUTC&&this._offset===0}e.updateOffset=function(){};var xn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ic=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Fi(c,d){var p,g=c,C=null;return Yr(c)?g={ms:c._milliseconds,d:c._days,M:c._months}:a(c)||!isNaN(+c)?(g={},d?g[d]=+c:g.milliseconds=+c):(C=xn.exec(c))?(p=C[1]==="-"?-1:1,g={y:0,d:Ee(C[dt])*p,h:Ee(C[we])*p,m:Ee(C[Kt])*p,s:Ee(C[Si])*p,ms:Ee(Xa(1e3*C[bn]))*p}):(C=Ic.exec(c))?(p=C[1]==="-"?-1:1,g={y:Yn(C[2],p),M:Yn(C[3],p),w:Yn(C[4],p),d:Yn(C[5],p),h:Yn(C[6],p),m:Yn(C[7],p),s:Yn(C[8],p)}):g==null?g={}:typeof g=="object"&&("from"in g||"to"in g)&&(d=function(T,k){var H;return!T.isValid()||!k.isValid()?{milliseconds:0,months:0}:(k=So(k,T),T.isBefore(k)?H=Ja(T,k):((H=Ja(k,T)).milliseconds=-H.milliseconds,H.months=-H.months),H)}(ht(g.from),ht(g.to)),(g={}).ms=d.milliseconds,g.M=d.months),C=new Er(g),Yr(c)&&r(c,"_locale")&&(C._locale=c._locale),Yr(c)&&r(c,"_isValid")&&(C._isValid=c._isValid),C}function Yn(c,d){return c=c&&parseFloat(c.replace(",",".")),(isNaN(c)?0:c)*d}function Ja(c,d){var p={};return p.months=d.month()-c.month()+12*(d.year()-c.year()),c.clone().add(p.months,"M").isAfter(d)&&--p.months,p.milliseconds=+d-+c.clone().add(p.months,"M"),p}function Oc(c,d){return function(p,g){var C;return g===null||isNaN(+g)||(pe(d,"moment()."+d+"(period, number) is deprecated. Please use moment()."+d+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),C=p,p=g,g=C),de(this,Fi(p,g),c),this}}function de(c,k,p,g){var C=k._milliseconds,T=Xa(k._days),k=Xa(k._months);c.isValid()&&(g=g==null||g,k&&N(c,Cn(c,"Month")+k*p),T&&re(c,"Date",Cn(c,"Date")+T*p),C&&c._d.setTime(c._d.valueOf()+C*p),g&&e.updateOffset(c,T||k))}Fi.fn=Er.prototype,Fi.invalid=function(){return Fi(NaN)},En=Oc(1,"add"),Di=Oc(-1,"subtract");function O(c){return typeof c=="string"||c instanceof String}function j(c){return L(c)||l(c)||O(c)||a(c)||function(d){var p=t(d),g=!1;return p&&(g=d.filter(function(C){return!a(C)&&O(d)}).length===0),p&&g}(c)||function(d){var p,g,C=i(d)&&!s(d),T=!1,k=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],H=k.length;for(p=0;p<H;p+=1)g=k[p],T=T||r(d,g);return C&&T}(c)||c==null}function ae(c,C){if(c.date()<C.date())return-ae(C,c);var p=12*(C.year()-c.year())+(C.month()-c.month()),g=c.clone().add(p,"months"),C=C-g<0?(C-g)/(g-c.clone().add(p-1,"months")):(C-g)/(c.clone().add(1+p,"months")-g);return-(p+C)||0}function ct(c){return c===void 0?this._locale._abbr:((c=un(c))!=null&&(this._locale=c),this)}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",vr=Y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(c){return c===void 0?this.localeData():this.locale(c)});function Qt(){return this._locale}var Zt=126227808e5;function Ht(c,d){return(c%d+d)%d}function qn(c,d,p){return c<100&&0<=c?new Date(c+400,d,p)-Zt:new Date(c,d,p).valueOf()}function qr(c,d,p){return c<100&&0<=c?Date.UTC(c+400,d,p)-Zt:Date.UTC(c,d,p)}function ni(c,d){return d.erasAbbrRegex(c)}function Do(){for(var c=[],d=[],p=[],g=[],C=this.eras(),T=0,k=C.length;T<k;++T)d.push(oi(C[T].name)),c.push(oi(C[T].abbr)),p.push(oi(C[T].narrow)),g.push(oi(C[T].name)),g.push(oi(C[T].abbr)),g.push(oi(C[T].narrow));this._erasRegex=new RegExp("^("+g.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+d.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+p.join("|")+")","i")}function Fs(c,d){q(0,[c,c.length],0,d)}function zv(c,d,p,g,C){var T;return c==null?ke(this,g,C).year:(T=It(c,g,C),(function(k,H,K,W,Ie){return k=ee(k,H,K,W,Ie),H=ue(k.year,0,k.dayOfYear),this.year(H.getUTCFullYear()),this.month(H.getUTCMonth()),this.date(H.getUTCDate()),this}).call(this,c,d=T<d?T:d,p,g,C))}q("N",0,0,"eraAbbr"),q("NN",0,0,"eraAbbr"),q("NNN",0,0,"eraAbbr"),q("NNNN",0,0,"eraName"),q("NNNNN",0,0,"eraNarrow"),q("y",["y",1],"yo","eraYear"),q("y",["yy",2],0,"eraYear"),q("y",["yyy",3],0,"eraYear"),q("y",["yyyy",4],0,"eraYear"),Q("N",ni),Q("NN",ni),Q("NNN",ni),Q("NNNN",function(c,d){return d.erasNameRegex(c)}),Q("NNNNN",function(c,d){return d.erasNarrowRegex(c)}),$e(["N","NN","NNN","NNNN","NNNNN"],function(c,d,p,g){g=p._locale.erasParse(c,g,p._strict),g?m(p).era=g:m(p).invalidEra=c}),Q("y",ze),Q("yy",ze),Q("yyy",ze),Q("yyyy",ze),Q("yo",function(c,d){return d._eraYearOrdinalRegex||ze}),$e(["y","yy","yyy","yyyy"],Vt),$e(["yo"],function(c,d,p,g){var C;p._locale._eraYearOrdinalRegex&&(C=c.match(p._locale._eraYearOrdinalRegex)),p._locale.eraYearOrdinalParse?d[Vt]=p._locale.eraYearOrdinalParse(c,C):d[Vt]=parseInt(c,10)}),q(0,["gg",2],0,function(){return this.weekYear()%100}),q(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fs("gggg","weekYear"),Fs("ggggg","weekYear"),Fs("GGGG","isoWeekYear"),Fs("GGGGG","isoWeekYear"),xt("weekYear","gg"),xt("isoWeekYear","GG"),gt("weekYear",1),gt("isoWeekYear",1),Q("G",Je),Q("g",Je),Q("GG",te,Te),Q("gg",te,Te),Q("GGGG",Zr,ks),Q("gggg",Zr,ks),Q("GGGGG",Kr,Qr),Q("ggggg",Kr,Qr),gr(["gggg","ggggg","GGGG","GGGGG"],function(c,d,p,g){d[g.substr(0,2)]=Ee(c)}),gr(["gg","GG"],function(c,d,p,g){d[g]=e.parseTwoDigitYear(c)}),q("Q",0,"Qo","quarter"),xt("quarter","Q"),gt("quarter",7),Q("Q",F),$e("Q",function(c,d){d[wi]=3*(Ee(c)-1)}),q("D",["DD",2],"Do","date"),xt("date","D"),gt("date",9),Q("D",te),Q("DD",te,Te),Q("Do",function(c,d){return c?d._dayOfMonthOrdinalParse||d._ordinalParse:d._dayOfMonthOrdinalParseLenient}),$e(["D","DD"],dt),$e("Do",function(c,d){d[dt]=Ee(c.match(te)[0])}),Zr=Yi("Date",!0),q("DDD",["DDDD",3],"DDDo","dayOfYear"),xt("dayOfYear","DDD"),gt("dayOfYear",4),Q("DDD",xe),Q("DDDD",bt),$e(["DDD","DDDD"],function(c,d,p){p._dayOfYear=Ee(c)}),q("m",["mm",2],0,"minute"),xt("minute","m"),gt("minute",14),Q("m",te),Q("mm",te,Te),$e(["m","mm"],Kt);var Xr,ks=Yi("Minutes",!1),Kr=(q("s",["ss",2],0,"second"),xt("second","s"),gt("second",15),Q("s",te),Q("ss",te,Te),$e(["s","ss"],Si),Yi("Seconds",!1));for(q("S",0,0,function(){return~~(this.millisecond()/100)}),q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),q(0,["SSS",3],0,"millisecond"),q(0,["SSSS",4],0,function(){return 10*this.millisecond()}),q(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),q(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),q(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),q(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),q(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),xt("millisecond","ms"),gt("millisecond",16),Q("S",xe,F),Q("SS",xe,Te),Q("SSS",xe,bt),Xr="SSSS";Xr.length<=9;Xr+="S")Q(Xr,ze);function DS(c,d){d[bn]=Ee(1e3*("0."+c))}for(Xr="S";Xr.length<=9;Xr+="S")$e(Xr,DS);Qr=Yi("Milliseconds",!1),q("z",0,0,"zoneAbbr"),q("zz",0,0,"zoneName"),F=x.prototype;function $v(c){return c}F.add=En,F.calendar=function(p,C){arguments.length===1&&(arguments[0]?j(arguments[0])?(p=arguments[0],C=void 0):function(T){for(var k=i(T)&&!s(T),H=!1,K=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],W=0;W<K.length;W+=1)H=H||r(T,K[W]);return k&&H}(arguments[0])&&(C=arguments[0],p=void 0):C=p=void 0);var p=p||ht(),g=So(p,this).startOf("day"),g=e.calendarFormat(this,g)||"sameElse",C=C&&(Z(C[g])?C[g].call(this,p):C[g]);return this.format(C||this.localeData().calendar(g,this,ht(p)))},F.clone=function(){return new x(this)},F.diff=function(c,d,p){var g,C,T;if(!this.isValid())return NaN;if(!(g=So(c,this)).isValid())return NaN;switch(C=6e4*(g.utcOffset()-this.utcOffset()),d=Xt(d)){case"year":T=ae(this,g)/12;break;case"month":T=ae(this,g);break;case"quarter":T=ae(this,g)/3;break;case"second":T=(this-g)/1e3;break;case"minute":T=(this-g)/6e4;break;case"hour":T=(this-g)/36e5;break;case"day":T=(this-g-C)/864e5;break;case"week":T=(this-g-C)/6048e5;break;default:T=this-g}return p?T:yt(T)},F.endOf=function(c){var d,p;if((c=Xt(c))===void 0||c==="millisecond"||!this.isValid())return this;switch(p=this._isUTC?qr:qn,c){case"year":d=p(this.year()+1,0,1)-1;break;case"quarter":d=p(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":d=p(this.year(),this.month()+1,1)-1;break;case"week":d=p(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":d=p(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":d=p(this.year(),this.month(),this.date()+1)-1;break;case"hour":d=this._d.valueOf(),d+=36e5-Ht(d+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":d=this._d.valueOf(),d+=6e4-Ht(d,6e4)-1;break;case"second":d=this._d.valueOf(),d+=1e3-Ht(d,1e3)-1;break}return this._d.setTime(d),e.updateOffset(this,!0),this},F.format=function(c){return c=c||(this.isUtc()?e.defaultFormatUtc:e.defaultFormat),c=ii(this,c),this.localeData().postformat(c)},F.from=function(c,d){return this.isValid()&&(L(c)&&c.isValid()||ht(c).isValid())?Fi({to:this,from:c}).locale(this.locale()).humanize(!d):this.localeData().invalidDate()},F.fromNow=function(c){return this.from(ht(),c)},F.to=function(c,d){return this.isValid()&&(L(c)&&c.isValid()||ht(c).isValid())?Fi({from:this,to:c}).locale(this.locale()).humanize(!d):this.localeData().invalidDate()},F.toNow=function(c){return this.to(ht(),c)},F.get=function(c){return Z(this[c=Xt(c)])?this[c]():this},F.invalidAt=function(){return m(this).overflow},F.isAfter=function(c,d){return c=L(c)?c:ht(c),!(!this.isValid()||!c.isValid())&&((d=Xt(d)||"millisecond")==="millisecond"?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(d).valueOf())},F.isBefore=function(c,d){return c=L(c)?c:ht(c),!(!this.isValid()||!c.isValid())&&((d=Xt(d)||"millisecond")==="millisecond"?this.valueOf()<c.valueOf():this.clone().endOf(d).valueOf()<c.valueOf())},F.isBetween=function(c,d,p,g){return c=L(c)?c:ht(c),d=L(d)?d:ht(d),!!(this.isValid()&&c.isValid()&&d.isValid())&&((g=g||"()")[0]==="("?this.isAfter(c,p):!this.isBefore(c,p))&&(g[1]===")"?this.isBefore(d,p):!this.isAfter(d,p))},F.isSame=function(p,d){var p=L(p)?p:ht(p);return!(!this.isValid()||!p.isValid())&&((d=Xt(d)||"millisecond")==="millisecond"?this.valueOf()===p.valueOf():(p=p.valueOf(),this.clone().startOf(d).valueOf()<=p&&p<=this.clone().endOf(d).valueOf()))},F.isSameOrAfter=function(c,d){return this.isSame(c,d)||this.isAfter(c,d)},F.isSameOrBefore=function(c,d){return this.isSame(c,d)||this.isBefore(c,d)},F.isValid=function(){return v(this)},F.lang=vr,F.locale=ct,F.localeData=Qt,F.max=ve,F.min=J,F.parsingFlags=function(){return h({},m(this))},F.set=function(c,d){if(typeof c=="object")for(var p=function(T){var k,H=[];for(k in T)r(T,k)&&H.push({unit:k,priority:fi[k]});return H.sort(function(K,W){return K.priority-W.priority}),H}(c=Bn(c)),g=p.length,C=0;C<g;C++)this[p[C].unit](c[p[C].unit]);else if(Z(this[c=Xt(c)]))return this[c](d);return this},F.startOf=function(c){var d,p;if((c=Xt(c))===void 0||c==="millisecond"||!this.isValid())return this;switch(p=this._isUTC?qr:qn,c){case"year":d=p(this.year(),0,1);break;case"quarter":d=p(this.year(),this.month()-this.month()%3,1);break;case"month":d=p(this.year(),this.month(),1);break;case"week":d=p(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":d=p(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":d=p(this.year(),this.month(),this.date());break;case"hour":d=this._d.valueOf(),d-=Ht(d+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":d=this._d.valueOf(),d-=Ht(d,6e4);break;case"second":d=this._d.valueOf(),d-=Ht(d,1e3);break}return this._d.setTime(d),e.updateOffset(this,!0),this},F.subtract=Di,F.toArray=function(){var c=this;return[c.year(),c.month(),c.date(),c.hour(),c.minute(),c.second(),c.millisecond()]},F.toObject=function(){var c=this;return{years:c.year(),months:c.month(),date:c.date(),hours:c.hours(),minutes:c.minutes(),seconds:c.seconds(),milliseconds:c.milliseconds()}},F.toDate=function(){return new Date(this.valueOf())},F.toISOString=function(c){if(!this.isValid())return null;var d=(c=c!==!0)?this.clone().utc():this;return d.year()<0||9999<d.year()?ii(d,c?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Z(Date.prototype.toISOString)?c?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",ii(d,"Z")):ii(d,c?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},F.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var c,d="moment",p="";return this.isLocal()||(d=this.utcOffset()===0?"moment.utc":"moment.parseZone",p="Z"),d="["+d+'("]',c=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(d+c+"-MM-DD[T]HH:mm:ss.SSS"+(p+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(F[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},F.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},F.eraName=function(){for(var c,d=this.localeData().eras(),p=0,g=d.length;p<g;++p)if(c=this.clone().startOf("day").valueOf(),d[p].since<=c&&c<=d[p].until||d[p].until<=c&&c<=d[p].since)return d[p].name;return""},F.eraNarrow=function(){for(var c,d=this.localeData().eras(),p=0,g=d.length;p<g;++p)if(c=this.clone().startOf("day").valueOf(),d[p].since<=c&&c<=d[p].until||d[p].until<=c&&c<=d[p].since)return d[p].narrow;return""},F.eraAbbr=function(){for(var c,d=this.localeData().eras(),p=0,g=d.length;p<g;++p)if(c=this.clone().startOf("day").valueOf(),d[p].since<=c&&c<=d[p].until||d[p].until<=c&&c<=d[p].since)return d[p].abbr;return""},F.eraYear=function(){for(var c,d,p=this.localeData().eras(),g=0,C=p.length;g<C;++g)if(c=p[g].since<=p[g].until?1:-1,d=this.clone().startOf("day").valueOf(),p[g].since<=d&&d<=p[g].until||p[g].until<=d&&d<=p[g].since)return(this.year()-e(p[g].since).year())*c+p[g].offset;return this.year()},F.year=Rc,F.isLeapYear=function(){return Pi(this.year())},F.weekYear=function(c){return zv.call(this,c,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},F.isoWeekYear=function(c){return zv.call(this,c,this.isoWeek(),this.isoWeekday(),1,4)},F.quarter=F.quarters=function(c){return c==null?Math.ceil((this.month()+1)/3):this.month(3*(c-1)+this.month()%3)},F.month=$,F.daysInMonth=function(){return Et(this.year(),this.month())},F.week=F.weeks=function(c){var d=this.localeData().week(this);return c==null?d:this.add(7*(c-d),"d")},F.isoWeek=F.isoWeeks=function(c){var d=ke(this,1,4).week;return c==null?d:this.add(7*(c-d),"d")},F.weeksInYear=function(){var c=this.localeData()._week;return It(this.year(),c.dow,c.doy)},F.weeksInWeekYear=function(){var c=this.localeData()._week;return It(this.weekYear(),c.dow,c.doy)},F.isoWeeksInYear=function(){return It(this.year(),1,4)},F.isoWeeksInISOWeekYear=function(){return It(this.isoWeekYear(),1,4)},F.date=Zr,F.day=F.days=function(c){if(!this.isValid())return c!=null?this:NaN;var d,p,g=this._isUTC?this._d.getUTCDay():this._d.getDay();return c!=null?(d=c,p=this.localeData(),c=typeof d!="string"?d:isNaN(d)?typeof(d=p.weekdaysParse(d))=="number"?d:null:parseInt(d,10),this.add(c-g,"d")):g},F.weekday=function(c){if(!this.isValid())return c!=null?this:NaN;var d=(this.day()+7-this.localeData()._week.dow)%7;return c==null?d:this.add(c-d,"d")},F.isoWeekday=function(c){return this.isValid()?c!=null?(d=c,p=this.localeData(),p=typeof d=="string"?p.weekdaysParse(d)%7||7:isNaN(d)?null:d,this.day(this.day()%7?p:p-7)):this.day()||7:c!=null?this:NaN;var d,p},F.dayOfYear=function(c){var d=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return c==null?d:this.add(c-d,"d")},F.hour=F.hours=mi,F.minute=F.minutes=ks,F.second=F.seconds=Kr,F.millisecond=F.milliseconds=Qr,F.utcOffset=function(c,d,p){var g,C=this._offset||0;if(!this.isValid())return c!=null?this:NaN;if(c==null)return this._isUTC?C:Qa(this);if(typeof c=="string"){if((c=wo(yn,c))===null)return this}else Math.abs(c)<16&&!p&&(c*=60);return!this._isUTC&&d&&(g=Qa(this)),this._offset=c,this._isUTC=!0,g!=null&&this.add(g,"m"),C!==c&&(!d||this._changeInProgress?de(this,Fi(c-C,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},F.utc=function(c){return this.utcOffset(0,c)},F.local=function(c){return this._isUTC&&(this.utcOffset(0,c),this._isUTC=!1,c&&this.subtract(Qa(this),"m")),this},F.parseZone=function(){var c;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((c=wo(pi,this._i))!=null?this.utcOffset(c):this.utcOffset(0,!0)),this},F.hasAlignedHourOffset=function(c){return!!this.isValid()&&(c=c?ht(c).utcOffset():0,(this.utcOffset()-c)%60==0)},F.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},F.isLocal=function(){return!!this.isValid()&&!this._isUTC},F.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},F.isUtc=Za,F.isUTC=Za,F.zoneAbbr=function(){return this._isUTC?"UTC":""},F.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},F.dates=Y("dates accessor is deprecated. Use date instead.",Zr),F.months=Y("months accessor is deprecated. Use month instead",$),F.years=Y("years accessor is deprecated. Use year instead",Rc),F.zone=Y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(c,d){return c!=null?(this.utcOffset(c=typeof c!="string"?-c:c,d),this):-this.utcOffset()}),F.isDSTShifted=Y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var c,d={};return M(d,this),(d=Ya(d))._a?(c=(d._isUTC?f:ht)(d._a),this._isDSTShifted=this.isValid()&&0<function(p,g,C){for(var T=Math.min(p.length,g.length),k=Math.abs(p.length-g.length),H=0,K=0;K<T;K++)(C&&p[K]!==g[K]||!C&&Ee(p[K])!==Ee(g[K]))&&H++;return H+k}(d._a,c.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),Te=it.prototype;function Ac(c,d,p,T){var C=un(),T=f().set(T,d);return C[p](T,c)}function jv(c,d,p){if(a(c)&&(d=c,c=void 0),c=c||"",d!=null)return Ac(c,d,p,"month");for(var g=[],C=0;C<12;C++)g[C]=Ac(c,C,p,"month");return g}function lf(c,d,p,g){d=(typeof c=="boolean"?a(d)&&(p=d,d=void 0):(d=c,c=!1,a(p=d)&&(p=d,d=void 0)),d||"");var C,T=un(),k=c?T._week.dow:0,H=[];if(p!=null)return Ac(d,(p+k)%7,g,"day");for(C=0;C<7;C++)H[C]=Ac(d,(C+k)%7,g,"day");return H}Te.calendar=function(c,d,p){return Z(c=this._calendar[c]||this._calendar.sameElse)?c.call(d,p):c},Te.longDateFormat=function(c){var d=this._longDateFormat[c],p=this._longDateFormat[c.toUpperCase()];return d||!p?d:(this._longDateFormat[c]=p.match(lt).map(function(g){return g==="MMMM"||g==="MM"||g==="DD"||g==="dddd"?g.slice(1):g}).join(""),this._longDateFormat[c])},Te.invalidDate=function(){return this._invalidDate},Te.ordinal=function(c){return this._ordinal.replace("%d",c)},Te.preparse=$v,Te.postformat=$v,Te.relativeTime=function(c,d,p,g){var C=this._relativeTime[p];return Z(C)?C(c,d,p,g):C.replace(/%d/i,c)},Te.pastFuture=function(c,d){return Z(c=this._relativeTime[0<c?"future":"past"])?c(d):c.replace(/%s/i,d)},Te.set=function(c){var d,p;for(p in c)r(c,p)&&(Z(d=c[p])?this[p]=d:this["_"+p]=d);this._config=c,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Te.eras=function(c,d){for(var p,g=this._eras||un("en")._eras,C=0,T=g.length;C<T;++C){switch(typeof g[C].since){case"string":p=e(g[C].since).startOf("day"),g[C].since=p.valueOf();break}switch(typeof g[C].until){case"undefined":g[C].until=1/0;break;case"string":p=e(g[C].until).startOf("day").valueOf(),g[C].until=p.valueOf();break}}return g},Te.erasParse=function(c,d,p){var g,C,T,k,H,K=this.eras();for(c=c.toUpperCase(),g=0,C=K.length;g<C;++g)if(T=K[g].name.toUpperCase(),k=K[g].abbr.toUpperCase(),H=K[g].narrow.toUpperCase(),p)switch(d){case"N":case"NN":case"NNN":if(k===c)return K[g];break;case"NNNN":if(T===c)return K[g];break;case"NNNNN":if(H===c)return K[g];break}else if(0<=[T,k,H].indexOf(c))return K[g]},Te.erasConvertYear=function(c,d){var p=c.since<=c.until?1:-1;return d===void 0?e(c.since).year():e(c.since).year()+(d-c.offset)*p},Te.erasAbbrRegex=function(c){return r(this,"_erasAbbrRegex")||Do.call(this),c?this._erasAbbrRegex:this._erasRegex},Te.erasNameRegex=function(c){return r(this,"_erasNameRegex")||Do.call(this),c?this._erasNameRegex:this._erasRegex},Te.erasNarrowRegex=function(c){return r(this,"_erasNarrowRegex")||Do.call(this),c?this._erasNarrowRegex:this._erasRegex},Te.months=function(c,d){return c?(t(this._months)?this._months:this._months[(this._months.isFormat||_).test(d)?"format":"standalone"])[c.month()]:t(this._months)?this._months:this._months.standalone},Te.monthsShort=function(c,d){return c?(t(this._monthsShort)?this._monthsShort:this._monthsShort[_.test(d)?"format":"standalone"])[c.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Te.monthsParse=function(c,d,p){var g,C;if(this._monthsParseExact)return(function(_e,k,H){var K,W,Ie,_e=_e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],K=0;K<12;++K)Ie=f([2e3,K]),this._shortMonthsParse[K]=this.monthsShort(Ie,"").toLocaleLowerCase(),this._longMonthsParse[K]=this.months(Ie,"").toLocaleLowerCase();return H?k==="MMM"?(W=Tt.call(this._shortMonthsParse,_e))!==-1?W:null:(W=Tt.call(this._longMonthsParse,_e))!==-1?W:null:k==="MMM"?(W=Tt.call(this._shortMonthsParse,_e))!==-1||(W=Tt.call(this._longMonthsParse,_e))!==-1?W:null:(W=Tt.call(this._longMonthsParse,_e))!==-1||(W=Tt.call(this._shortMonthsParse,_e))!==-1?W:null}).call(this,c,d,p);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),g=0;g<12;g++)if(C=f([2e3,g]),p&&!this._longMonthsParse[g]&&(this._longMonthsParse[g]=new RegExp("^"+this.months(C,"").replace(".","")+"$","i"),this._shortMonthsParse[g]=new RegExp("^"+this.monthsShort(C,"").replace(".","")+"$","i")),p||this._monthsParse[g]||(C="^"+this.months(C,"")+"|^"+this.monthsShort(C,""),this._monthsParse[g]=new RegExp(C.replace(".",""),"i")),p&&d==="MMMM"&&this._longMonthsParse[g].test(c)||p&&d==="MMM"&&this._shortMonthsParse[g].test(c)||!p&&this._monthsParse[g].test(c))return g},Te.monthsRegex=function(c){return this._monthsParseExact?(r(this,"_monthsRegex")||X.call(this),c?this._monthsStrictRegex:this._monthsRegex):(r(this,"_monthsRegex")||(this._monthsRegex=I),this._monthsStrictRegex&&c?this._monthsStrictRegex:this._monthsRegex)},Te.monthsShortRegex=function(c){return this._monthsParseExact?(r(this,"_monthsRegex")||X.call(this),c?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,"_monthsShortRegex")||(this._monthsShortRegex=y),this._monthsShortStrictRegex&&c?this._monthsShortStrictRegex:this._monthsShortRegex)},Te.week=function(c){return ke(c,this._week.dow,this._week.doy).week},Te.firstDayOfYear=function(){return this._week.doy},Te.firstDayOfWeek=function(){return this._week.dow},Te.weekdays=function(c,d){return d=t(this._weekdays)?this._weekdays:this._weekdays[c&&c!==!0&&this._weekdays.isFormat.test(d)?"format":"standalone"],c===!0?Bt(d,this._week.dow):c?d[c.day()]:d},Te.weekdaysMin=function(c){return c===!0?Bt(this._weekdaysMin,this._week.dow):c?this._weekdaysMin[c.day()]:this._weekdaysMin},Te.weekdaysShort=function(c){return c===!0?Bt(this._weekdaysShort,this._week.dow):c?this._weekdaysShort[c.day()]:this._weekdaysShort},Te.weekdaysParse=function(c,d,p){var g,C;if(this._weekdaysParseExact)return(function(_e,k,H){var K,W,Ie,_e=_e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],K=0;K<7;++K)Ie=f([2e3,1]).day(K),this._minWeekdaysParse[K]=this.weekdaysMin(Ie,"").toLocaleLowerCase(),this._shortWeekdaysParse[K]=this.weekdaysShort(Ie,"").toLocaleLowerCase(),this._weekdaysParse[K]=this.weekdays(Ie,"").toLocaleLowerCase();return H?k==="dddd"?(W=Tt.call(this._weekdaysParse,_e))!==-1?W:null:k==="ddd"?(W=Tt.call(this._shortWeekdaysParse,_e))!==-1?W:null:(W=Tt.call(this._minWeekdaysParse,_e))!==-1?W:null:k==="dddd"?(W=Tt.call(this._weekdaysParse,_e))!==-1||(W=Tt.call(this._shortWeekdaysParse,_e))!==-1||(W=Tt.call(this._minWeekdaysParse,_e))!==-1?W:null:k==="ddd"?(W=Tt.call(this._shortWeekdaysParse,_e))!==-1||(W=Tt.call(this._weekdaysParse,_e))!==-1||(W=Tt.call(this._minWeekdaysParse,_e))!==-1?W:null:(W=Tt.call(this._minWeekdaysParse,_e))!==-1||(W=Tt.call(this._weekdaysParse,_e))!==-1||(W=Tt.call(this._shortWeekdaysParse,_e))!==-1?W:null}).call(this,c,d,p);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),g=0;g<7;g++)if(C=f([2e3,1]).day(g),p&&!this._fullWeekdaysParse[g]&&(this._fullWeekdaysParse[g]=new RegExp("^"+this.weekdays(C,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[g]=new RegExp("^"+this.weekdaysShort(C,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[g]=new RegExp("^"+this.weekdaysMin(C,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[g]||(C="^"+this.weekdays(C,"")+"|^"+this.weekdaysShort(C,"")+"|^"+this.weekdaysMin(C,""),this._weekdaysParse[g]=new RegExp(C.replace(".",""),"i")),p&&d==="dddd"&&this._fullWeekdaysParse[g].test(c)||p&&d==="ddd"&&this._shortWeekdaysParse[g].test(c)||p&&d==="dd"&&this._minWeekdaysParse[g].test(c)||!p&&this._weekdaysParse[g].test(c))return g},Te.weekdaysRegex=function(c){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||_r.call(this),c?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,"_weekdaysRegex")||(this._weekdaysRegex=ln),this._weekdaysStrictRegex&&c?this._weekdaysStrictRegex:this._weekdaysRegex)},Te.weekdaysShortRegex=function(c){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||_r.call(this),c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=wn),this._weekdaysShortStrictRegex&&c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Te.weekdaysMinRegex=function(c){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||_r.call(this),c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Rs),this._weekdaysMinStrictRegex&&c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Te.isPM=function(c){return(c+"").toLowerCase().charAt(0)==="p"},Te.meridiem=function(c,d,p){return 11<c?p?"pm":"PM":p?"am":"AM"},Dn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(c){var d=c%10;return c+(Ee(c%100/10)===1?"th":d==1?"st":d==2?"nd":d==3?"rd":"th")}}),e.lang=Y("moment.lang is deprecated. Use moment.locale instead.",Dn),e.langData=Y("moment.langData is deprecated. Use moment.localeData instead.",un);var wr=Math.abs;function Wv(c,d,p,g){return d=Fi(d,p),c._milliseconds+=g*d._milliseconds,c._days+=g*d._days,c._months+=g*d._months,c._bubble()}function Gv(c){return c<0?Math.floor(c):Math.ceil(c)}function Yv(c){return 4800*c/146097}function cf(c){return 146097*c/4800}function Sr(c){return function(){return this.as(c)}}xe=Sr("ms"),bt=Sr("s"),En=Sr("m"),ve=Sr("h"),J=Sr("d"),Di=Sr("w"),mi=Sr("M"),ks=Sr("Q"),Kr=Sr("y");function Ls(c){return function(){return this.isValid()?this._data[c]:NaN}}var Qr=Ls("milliseconds"),Zr=Ls("seconds"),Rc=Ls("minutes"),Te=Ls("hours"),xS=Ls("days"),TS=Ls("months"),IS=Ls("years"),Dr=Math.round,xo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function OS(c,d,p,g){var W=Fi(c).abs(),Ie=Dr(W.as("s")),C=Dr(W.as("m")),T=Dr(W.as("h")),k=Dr(W.as("d")),H=Dr(W.as("M")),K=Dr(W.as("w")),W=Dr(W.as("y")),Ie=(Ie<=p.ss?["s",Ie]:Ie<p.s&&["ss",Ie])||C<=1&&["m"]||C<p.m&&["mm",C]||T<=1&&["h"]||T<p.h&&["hh",T]||k<=1&&["d"]||k<p.d&&["dd",k];return(Ie=(Ie=p.w!=null?Ie||K<=1&&["w"]||K<p.w&&["ww",K]:Ie)||H<=1&&["M"]||H<p.M&&["MM",H]||W<=1&&["y"]||["yy",W])[2]=d,Ie[3]=0<+c,Ie[4]=g,(function(_e,Pt,Ut,Tn,df){return df.relativeTime(Pt||1,!!Ut,_e,Tn)}).apply(null,Ie)}var uf=Math.abs;function To(c){return(0<c)-(c<0)||+c}function Mc(){if(!this.isValid())return this.localeData().invalidDate();var c,d,p,g,C,T,k,H=uf(this._milliseconds)/1e3,K=uf(this._days),W=uf(this._months),Ie=this.asSeconds();return Ie?(c=yt(H/60),d=yt(c/60),H%=60,c%=60,p=yt(W/12),W%=12,g=H?H.toFixed(3).replace(/\.?0+$/,""):"",C=To(this._months)!==To(Ie)?"-":"",T=To(this._days)!==To(Ie)?"-":"",k=To(this._milliseconds)!==To(Ie)?"-":"",(Ie<0?"-":"")+"P"+(p?C+p+"Y":"")+(W?C+W+"M":"")+(K?T+K+"D":"")+(d||c||H?"T":"")+(d?k+d+"H":"")+(c?k+c+"M":"")+(H?k+g+"S":"")):"P0D"}var Ke=Er.prototype;return Ke.isValid=function(){return this._isValid},Ke.abs=function(){var c=this._data;return this._milliseconds=wr(this._milliseconds),this._days=wr(this._days),this._months=wr(this._months),c.milliseconds=wr(c.milliseconds),c.seconds=wr(c.seconds),c.minutes=wr(c.minutes),c.hours=wr(c.hours),c.months=wr(c.months),c.years=wr(c.years),this},Ke.add=function(c,d){return Wv(this,c,d,1)},Ke.subtract=function(c,d){return Wv(this,c,d,-1)},Ke.as=function(c){if(!this.isValid())return NaN;var d,p,g=this._milliseconds;if((c=Xt(c))==="month"||c==="quarter"||c==="year")switch(d=this._days+g/864e5,p=this._months+Yv(d),c){case"month":return p;case"quarter":return p/3;case"year":return p/12}else switch(d=this._days+Math.round(cf(this._months)),c){case"week":return d/7+g/6048e5;case"day":return d+g/864e5;case"hour":return 24*d+g/36e5;case"minute":return 1440*d+g/6e4;case"second":return 86400*d+g/1e3;case"millisecond":return Math.floor(864e5*d)+g;default:throw new Error("Unknown unit "+c)}},Ke.asMilliseconds=xe,Ke.asSeconds=bt,Ke.asMinutes=En,Ke.asHours=ve,Ke.asDays=J,Ke.asWeeks=Di,Ke.asMonths=mi,Ke.asQuarters=ks,Ke.asYears=Kr,Ke.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Ee(this._months/12):NaN},Ke._bubble=function(){var c=this._milliseconds,d=this._days,p=this._months,g=this._data;return 0<=c&&0<=d&&0<=p||c<=0&&d<=0&&p<=0||(c+=864e5*Gv(cf(p)+d),p=d=0),g.milliseconds=c%1e3,c=yt(c/1e3),g.seconds=c%60,c=yt(c/60),g.minutes=c%60,c=yt(c/60),g.hours=c%24,d+=yt(c/24),p+=c=yt(Yv(d)),d-=Gv(cf(c)),c=yt(p/12),p%=12,g.days=d,g.months=p,g.years=c,this},Ke.clone=function(){return Fi(this)},Ke.get=function(c){return c=Xt(c),this.isValid()?this[c+"s"]():NaN},Ke.milliseconds=Qr,Ke.seconds=Zr,Ke.minutes=Rc,Ke.hours=Te,Ke.days=xS,Ke.weeks=function(){return yt(this.days()/7)},Ke.months=TS,Ke.years=IS,Ke.humanize=function(c,d){if(!this.isValid())return this.localeData().invalidDate();var p=!1,g=xo;return typeof c=="object"&&(d=c,c=!1),typeof c=="boolean"&&(p=c),typeof d=="object"&&(g=Object.assign({},xo,d),d.s!=null&&d.ss==null&&(g.ss=d.s-1)),c=this.localeData(),d=OS(this,!p,g,c),p&&(d=c.pastFuture(+this,d)),c.postformat(d)},Ke.toISOString=Mc,Ke.toString=Mc,Ke.toJSON=Mc,Ke.locale=ct,Ke.localeData=Qt,Ke.toIsoString=Y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mc),Ke.lang=vr,q("X",0,0,"unix"),q("x",0,0,"valueOf"),Q("x",Je),Q("X",/[+-]?\d+(\.\d{1,3})?/),$e("X",function(c,d,p){p._d=new Date(1e3*parseFloat(c))}),$e("x",function(c,d,p){p._d=new Date(Ee(c))}),e.version="2.29.4",n=ht,e.fn=F,e.min=function(){return qa("isBefore",[].slice.call(arguments,0))},e.max=function(){return qa("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=f,e.unix=function(c){return ht(1e3*c)},e.months=function(c,d){return jv(c,d,"months")},e.isDate=l,e.locale=Dn,e.invalid=w,e.duration=Fi,e.isMoment=L,e.weekdays=function(c,d,p){return lf(c,d,p,"weekdays")},e.parseZone=function(){return ht.apply(null,arguments).parseZone()},e.localeData=un,e.isDuration=Yr,e.monthsShort=function(c,d){return jv(c,d,"monthsShort")},e.weekdaysMin=function(c,d,p){return lf(c,d,p,"weekdaysMin")},e.defineLocale=Co,e.updateLocale=function(c,d){var p,g;return d!=null?(g=Ms,vt[c]!=null&&vt[c].parentLocale!=null?vt[c].set(We(vt[c]._config,d)):(d=We(g=(p=Sn(c))!=null?p._config:g,d),p==null&&(d.abbr=c),(g=new it(d)).parentLocale=vt[c],vt[c]=g),Dn(c)):vt[c]!=null&&(vt[c].parentLocale!=null?(vt[c]=vt[c].parentLocale,c===Dn()&&Dn(c)):vt[c]!=null&&delete vt[c]),vt[c]},e.locales=function(){return pt(vt)},e.weekdaysShort=function(c,d,p){return lf(c,d,p,"weekdaysShort")},e.normalizeUnits=Xt,e.relativeTimeRounding=function(c){return c===void 0?Dr:typeof c=="function"&&(Dr=c,!0)},e.relativeTimeThreshold=function(c,d){return xo[c]!==void 0&&(d===void 0?xo[c]:(xo[c]=d,c==="s"&&(xo.ss=d-1),!0))},e.calendarFormat=function(c,d){return(c=c.diff(d,"days",!0))<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"},e.prototype=F,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var Fg=Nc((Pg,Ng)=>{"use strict";(function(n,e){typeof Pg=="object"&&typeof Ng<"u"?Ng.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.autocomplete=e())})(Pg,function(){"use strict";function n(e){var t=document,i=e.container||t.createElement("div"),r=e.preventSubmit||0;i.id=i.id||"autocomplete-"+x();var s=i.style,o=e.debounceWaitMs||0,a=e.disableAutoSelect||!1,l=i.parentElement,u=[],h="",f=2,m=e.showOnFocus,v,w=0,S,P=!1,R=!1;if(e.minLength!==void 0&&(f=e.minLength),!e.input)throw new Error("input undefined");var M=e.input;i.className="autocomplete "+(e.className||""),i.setAttribute("role","listbox"),M.setAttribute("role","combobox"),M.setAttribute("aria-expanded","false"),M.setAttribute("aria-autocomplete","list"),M.setAttribute("aria-controls",i.id),M.setAttribute("aria-owns",i.id),M.setAttribute("aria-activedescendant",""),M.setAttribute("aria-haspopup","listbox"),s.position="absolute";function x(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function L(){var re=i.parentNode;re&&re.removeChild(i)}function z(){S&&window.clearTimeout(S)}function Y(){i.parentNode||(l||t.body).appendChild(i)}function U(){return!!i.parentNode}function pe(){w++,u=[],h="",v=void 0,M.setAttribute("aria-activedescendant",""),M.setAttribute("aria-expanded","false"),L()}function Z(){if(!U())return;M.setAttribute("aria-expanded","true"),s.height="auto",s.width=M.offsetWidth+"px";var re=0,F;function bt(){var te=t.documentElement,J=te.clientTop||t.body.clientTop||0,ve=te.clientLeft||t.body.clientLeft||0,xe=window.pageYOffset||te.scrollTop,ze=window.pageXOffset||te.scrollLeft;F=M.getBoundingClientRect();var Je=F.top+M.offsetHeight+xe-J,pi=F.left+ze-ve;s.top=Je+"px",s.left=pi+"px",re=window.innerHeight-(F.top+M.offsetHeight),re<0&&(re=0),s.top=Je+"px",s.bottom="",s.left=pi+"px",s.maxHeight=re+"px"}bt(),bt(),e.customize&&F&&e.customize(M,F,i,re)}function We(){i.textContent="",M.setAttribute("aria-activedescendant","");var re=function(ve,xe,ze){var Je=t.createElement("div");return Je.textContent=ve.label||"",Je};e.render&&(re=e.render);var F=function(ve,xe){var ze=t.createElement("div");return ze.textContent=ve,ze};e.renderGroup&&(F=e.renderGroup);var bt=t.createDocumentFragment(),te=x();if(u.forEach(function(ve,xe){if(ve.group&&ve.group!==te){te=ve.group;var ze=F(ve.group,h);ze&&(ze.className+=" group",bt.appendChild(ze))}var Je=re(ve,h,xe);Je&&(Je.id=i.id+"_"+xe,Je.setAttribute("role","option"),Je.addEventListener("click",function(pi){R=!0;try{e.onSelect(ve,M)}finally{R=!1}pe(),pi.preventDefault(),pi.stopPropagation()}),ve===v&&(Je.className+=" selected",Je.setAttribute("aria-selected","true"),M.setAttribute("aria-activedescendant",Je.id)),bt.appendChild(Je))}),i.appendChild(bt),u.length<1)if(e.emptyMsg){var J=t.createElement("div");J.id=i.id+"_"+x(),J.className="empty",J.textContent=e.emptyMsg,i.appendChild(J),M.setAttribute("aria-activedescendant",J.id)}else{pe();return}Y(),Z(),qt()}function it(){U()&&We()}function pt(){it()}function Fe(re){re.target!==i?it():re.preventDefault()}function lt(){R||fi(0)}function qt(){var re=i.getElementsByClassName("selected");if(re.length>0){var F=re[0],bt=F.previousElementSibling;if(bt&&bt.className.indexOf("group")!==-1&&!bt.previousElementSibling&&(F=bt),F.offsetTop<i.scrollTop)i.scrollTop=F.offsetTop;else{var te=F.offsetTop+F.offsetHeight,J=i.scrollTop+i.offsetHeight;te>J&&(i.scrollTop+=te-J)}}}function Mt(){var re=u.indexOf(v);v=re===-1?void 0:u[(re+u.length-1)%u.length],q(re)}function Ct(){var re=u.indexOf(v);v=u.length<1?void 0:re===-1?u[0]:u[(re+1)%u.length],q(re)}function q(re){u.length>0&&(on(re),ii(u.indexOf(v)),qt())}function ii(re){var F=t.getElementById(i.id+"_"+re);F&&(F.classList.add("selected"),F.setAttribute("aria-selected","true"),M.setAttribute("aria-activedescendant",F.id))}function on(re){var F=t.getElementById(i.id+"_"+re);F&&(F.classList.remove("selected"),F.removeAttribute("aria-selected"),M.removeAttribute("aria-activedescendant"))}function hi(re,F){var bt=U();if(F==="Escape")pe();else{if(!bt||u.length<1)return;F==="ArrowUp"?Mt():Ct()}re.preventDefault(),bt&&re.stopPropagation()}function xt(re){if(v){r===2&&re.preventDefault(),R=!0;try{e.onSelect(v,M)}finally{R=!1}pe()}r===1&&re.preventDefault()}function Xt(re){var F=re.key;switch(F){case"ArrowUp":case"ArrowDown":case"Escape":hi(re,F);break;case"Enter":xt(re);break}}function Bn(){m&&fi(1)}function fi(re){M.value.length>=f||re===1?(z(),S=window.setTimeout(function(){return gt(M.value,re,M.selectionStart||0)},re===0||re===2?o:0)):pe()}function gt(re,F,bt){if(!P){var te=++w;e.fetch(re,function(J){w===te&&J&&(u=J,h=re,v=u.length<1||a?void 0:u[0],We())},F,bt)}}function Pi(re){if(e.keyup){e.keyup({event:re,fetch:function(){return fi(0)}});return}!U()&&re.key==="ArrowDown"&&fi(0)}function yt(re){e.click&&e.click({event:re,fetch:function(){return fi(2)}})}function Ee(){setTimeout(function(){t.activeElement!==M&&pe()},200)}function Yi(){gt(M.value,3,M.selectionStart||0)}i.addEventListener("mousedown",function(re){re.stopPropagation(),re.preventDefault()}),i.addEventListener("focus",function(){return M.focus()}),L();function Cn(){M.removeEventListener("focus",Bn),M.removeEventListener("keyup",Pi),M.removeEventListener("click",yt),M.removeEventListener("keydown",Xt),M.removeEventListener("input",lt),M.removeEventListener("blur",Ee),window.removeEventListener("resize",pt),t.removeEventListener("scroll",Fe,!0),M.removeAttribute("role"),M.removeAttribute("aria-expanded"),M.removeAttribute("aria-autocomplete"),M.removeAttribute("aria-controls"),M.removeAttribute("aria-activedescendant"),M.removeAttribute("aria-owns"),M.removeAttribute("aria-haspopup"),z(),pe(),P=!0}return M.addEventListener("keyup",Pi),M.addEventListener("click",yt),M.addEventListener("keydown",Xt),M.addEventListener("input",lt),M.addEventListener("blur",Ee),M.addEventListener("focus",Bn),window.addEventListener("resize",pt),t.addEventListener("scroll",Fe,!0),{destroy:Cn,fetch:Yi}}return n})});var Id=Nc((Lg,Vg)=>{"use strict";(function(n,e){typeof Lg=="object"&&typeof Vg<"u"?Vg.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.DOMPurify=e())})(Lg,function(){"use strict";let{entries:n,setPrototypeOf:e,isFrozen:t,getPrototypeOf:i,getOwnPropertyDescriptor:r}=Object,{freeze:s,seal:o,create:a}=Object,{apply:l,construct:u}=typeof Reflect<"u"&&Reflect;s||(s=function(J){return J}),o||(o=function(J){return J}),l||(l=function(J,ve,xe){return J.apply(ve,xe)}),u||(u=function(J,ve){return new J(...ve)});let h=z(Array.prototype.forEach),f=z(Array.prototype.pop),m=z(Array.prototype.push),v=z(String.prototype.toLowerCase),w=z(String.prototype.toString),S=z(String.prototype.match),P=z(String.prototype.replace),R=z(String.prototype.indexOf),M=z(String.prototype.trim),x=z(RegExp.prototype.test),L=Y(TypeError);function z(te){return function(J){for(var ve=arguments.length,xe=new Array(ve>1?ve-1:0),ze=1;ze<ve;ze++)xe[ze-1]=arguments[ze];return l(te,J,xe)}}function Y(te){return function(){for(var J=arguments.length,ve=new Array(J),xe=0;xe<J;xe++)ve[xe]=arguments[xe];return u(te,ve)}}function U(te,J){let ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v;e&&e(te,null);let xe=J.length;for(;xe--;){let ze=J[xe];if(typeof ze=="string"){let Je=ve(ze);Je!==ze&&(t(J)||(J[xe]=Je),ze=Je)}te[ze]=!0}return te}function pe(te){let J=a(null);for(let[ve,xe]of n(te))r(te,ve)!==void 0&&(J[ve]=xe);return J}function Z(te,J){for(;te!==null;){let xe=r(te,J);if(xe){if(xe.get)return z(xe.get);if(typeof xe.value=="function")return z(xe.value)}te=i(te)}function ve(xe){return console.warn("fallback value for",xe),null}return ve}let We=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),it=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pt=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Fe=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lt=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qt=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Mt=s(["#text"]),Ct=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),q=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ii=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),on=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hi=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xt=o(/<%[\w\W]*|[\w\W]*%>/gm),Xt=o(/\${[\w\W]*}/gm),Bn=o(/^data-[\-\w.\u00B7-\uFFFF]/),fi=o(/^aria-[\-\w]+$/),gt=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Pi=o(/^(?:\w+script|data):/i),yt=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ee=o(/^html$/i);var Yi=Object.freeze({__proto__:null,MUSTACHE_EXPR:hi,ERB_EXPR:xt,TMPLIT_EXPR:Xt,DATA_ATTR:Bn,ARIA_ATTR:fi,IS_ALLOWED_URI:gt,IS_SCRIPT_OR_DATA:Pi,ATTR_WHITESPACE:yt,DOCTYPE_NAME:Ee});let Cn=function(){return typeof window>"u"?null:window},re=function(J,ve){if(typeof J!="object"||typeof J.createPolicy!="function")return null;let xe=null,ze="data-tt-policy-suffix";ve&&ve.hasAttribute(ze)&&(xe=ve.getAttribute(ze));let Je="dompurify"+(xe?"#"+xe:"");try{return J.createPolicy(Je,{createHTML(pi){return pi},createScriptURL(pi){return pi}})}catch{return console.warn("TrustedTypes policy "+Je+" could not be created."),null}};function F(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cn(),J=de=>F(de);if(J.version="3.0.6",J.removed=[],!te||!te.document||te.document.nodeType!==9)return J.isSupported=!1,J;let{document:ve}=te,xe=ve,ze=xe.currentScript,{DocumentFragment:Je,HTMLTemplateElement:pi,Node:yn,Element:mi,NodeFilter:Q,NamedNodeMap:Ur=te.NamedNodeMap||te.MozNamedAttrMap,HTMLFormElement:oi,DOMParser:zr,trustedTypes:Un}=te,$e=mi.prototype,gr=Z($e,"cloneNode"),Tt=Z($e,"nextSibling"),Vt=Z($e,"childNodes"),wi=Z($e,"parentNode");if(typeof pi=="function"){let de=ve.createElement("template");de.content&&de.content.ownerDocument&&(ve=de.content.ownerDocument)}let dt,we="",{implementation:Kt,createNodeIterator:Si,createDocumentFragment:bn,getElementsByTagName:$r}=ve,{importNode:As}=xe,Et={};J.isSupported=typeof n=="function"&&typeof wi=="function"&&Kt&&Kt.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:En,ERB_EXPR:jr,TMPLIT_EXPR:_,DATA_ATTR:y,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:$}=Yi,{IS_ALLOWED_URI:X}=Yi,se=null,oe=U({},[...We,...it,...pt,...lt,...Mt]),ue=null,ie=U({},[...Ct,...q,...ii,...on]),ee=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ke=null,It=null,Bt=!0,Di=!0,an=!1,vr=!0,ln=!1,wn=!1,Rs=!1,_r=!1,cn=!1,Cr=!1,yr=!1,zn=!0,Ms=!1,vt="user-content-",br=!0,Wr=!1,Gr={},Sn=null,Dn=U({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Co=null,un=U({},["audio","video","img","source","image","track"]),Ps=null,xc=U({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yo="http://www.w3.org/1998/Math/MathML",bo="http://www.w3.org/2000/svg",Ni="http://www.w3.org/1999/xhtml",$n=Ni,ja=!1,Wa=null,of=U({},[yo,bo,Ni],w),jn=null,af=["application/xhtml+xml","text/html"],Tc="text/html",wt=null,Wn=null,Ga=ve.createElement("form"),Ya=function(O){return O instanceof RegExp||O instanceof Function},Eo=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wn&&Wn===O)){if((!O||typeof O!="object")&&(O={}),O=pe(O),jn=af.indexOf(O.PARSER_MEDIA_TYPE)===-1?jn=Tc:jn=O.PARSER_MEDIA_TYPE,wt=jn==="application/xhtml+xml"?w:v,se="ALLOWED_TAGS"in O?U({},O.ALLOWED_TAGS,wt):oe,ue="ALLOWED_ATTR"in O?U({},O.ALLOWED_ATTR,wt):ie,Wa="ALLOWED_NAMESPACES"in O?U({},O.ALLOWED_NAMESPACES,w):of,Ps="ADD_URI_SAFE_ATTR"in O?U(pe(xc),O.ADD_URI_SAFE_ATTR,wt):xc,Co="ADD_DATA_URI_TAGS"in O?U(pe(un),O.ADD_DATA_URI_TAGS,wt):un,Sn="FORBID_CONTENTS"in O?U({},O.FORBID_CONTENTS,wt):Dn,ke="FORBID_TAGS"in O?U({},O.FORBID_TAGS,wt):{},It="FORBID_ATTR"in O?U({},O.FORBID_ATTR,wt):{},Gr="USE_PROFILES"in O?O.USE_PROFILES:!1,Bt=O.ALLOW_ARIA_ATTR!==!1,Di=O.ALLOW_DATA_ATTR!==!1,an=O.ALLOW_UNKNOWN_PROTOCOLS||!1,vr=O.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ln=O.SAFE_FOR_TEMPLATES||!1,wn=O.WHOLE_DOCUMENT||!1,cn=O.RETURN_DOM||!1,Cr=O.RETURN_DOM_FRAGMENT||!1,yr=O.RETURN_TRUSTED_TYPE||!1,_r=O.FORCE_BODY||!1,zn=O.SANITIZE_DOM!==!1,Ms=O.SANITIZE_NAMED_PROPS||!1,br=O.KEEP_CONTENT!==!1,Wr=O.IN_PLACE||!1,X=O.ALLOWED_URI_REGEXP||gt,$n=O.NAMESPACE||Ni,ee=O.CUSTOM_ELEMENT_HANDLING||{},O.CUSTOM_ELEMENT_HANDLING&&Ya(O.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=O.CUSTOM_ELEMENT_HANDLING.tagNameCheck),O.CUSTOM_ELEMENT_HANDLING&&Ya(O.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=O.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),O.CUSTOM_ELEMENT_HANDLING&&typeof O.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=O.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ln&&(Di=!1),Cr&&(cn=!0),Gr&&(se=U({},[...Mt]),ue=[],Gr.html===!0&&(U(se,We),U(ue,Ct)),Gr.svg===!0&&(U(se,it),U(ue,q),U(ue,on)),Gr.svgFilters===!0&&(U(se,pt),U(ue,q),U(ue,on)),Gr.mathMl===!0&&(U(se,lt),U(ue,ii),U(ue,on))),O.ADD_TAGS&&(se===oe&&(se=pe(se)),U(se,O.ADD_TAGS,wt)),O.ADD_ATTR&&(ue===ie&&(ue=pe(ue)),U(ue,O.ADD_ATTR,wt)),O.ADD_URI_SAFE_ATTR&&U(Ps,O.ADD_URI_SAFE_ATTR,wt),O.FORBID_CONTENTS&&(Sn===Dn&&(Sn=pe(Sn)),U(Sn,O.FORBID_CONTENTS,wt)),br&&(se["#text"]=!0),wn&&U(se,["html","head","body"]),se.table&&(U(se,["tbody"]),delete ke.tbody),O.TRUSTED_TYPES_POLICY){if(typeof O.TRUSTED_TYPES_POLICY.createHTML!="function")throw L('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof O.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw L('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');dt=O.TRUSTED_TYPES_POLICY,we=dt.createHTML("")}else dt===void 0&&(dt=re(Un,ze)),dt!==null&&typeof we=="string"&&(we=dt.createHTML(""));s&&s(O),Wn=O}},ht=U({},["mi","mo","mn","ms","mtext"]),qa=U({},["foreignobject","desc","title","annotation-xml"]),Ns=U({},["title","style","font","a","script"]),Er=U({},it);U(Er,pt),U(Er,Fe);let Yr=U({},lt);U(Yr,qt);let Xa=function(O){let j=wi(O);(!j||!j.tagName)&&(j={namespaceURI:$n,tagName:"template"});let ae=v(O.tagName),ct=v(j.tagName);return Wa[O.namespaceURI]?O.namespaceURI===bo?j.namespaceURI===Ni?ae==="svg":j.namespaceURI===yo?ae==="svg"&&(ct==="annotation-xml"||ht[ct]):!!Er[ae]:O.namespaceURI===yo?j.namespaceURI===Ni?ae==="math":j.namespaceURI===bo?ae==="math"&&qa[ct]:!!Yr[ae]:O.namespaceURI===Ni?j.namespaceURI===bo&&!qa[ct]||j.namespaceURI===yo&&!ht[ct]?!1:!Yr[ae]&&(Ns[ae]||!Er[ae]):!!(jn==="application/xhtml+xml"&&Wa[O.namespaceURI]):!1},Gn=function(O){m(J.removed,{element:O});try{O.parentNode.removeChild(O)}catch{O.remove()}},Ka=function(O,j){try{m(J.removed,{attribute:j.getAttributeNode(O),from:j})}catch{m(J.removed,{attribute:null,from:j})}if(j.removeAttribute(O),O==="is"&&!ue[O])if(cn||Cr)try{Gn(j)}catch{}else try{j.setAttribute(O,"")}catch{}},wo=function(O){let j=null,ae=null;if(_r)O="<remove></remove>"+O;else{let Zt=S(O,/^[\r\n\t ]+/);ae=Zt&&Zt[0]}jn==="application/xhtml+xml"&&$n===Ni&&(O='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+O+"</body></html>");let ct=dt?dt.createHTML(O):O;if($n===Ni)try{j=new zr().parseFromString(ct,jn)}catch{}if(!j||!j.documentElement){j=Kt.createDocument($n,"template",null);try{j.documentElement.innerHTML=ja?we:ct}catch{}}let Qt=j.body||j.documentElement;return O&&ae&&Qt.insertBefore(ve.createTextNode(ae),Qt.childNodes[0]||null),$n===Ni?$r.call(j,wn?"html":"body")[0]:wn?j.documentElement:Qt},So=function(O){return Si.call(O.ownerDocument||O,O,Q.SHOW_ELEMENT|Q.SHOW_COMMENT|Q.SHOW_TEXT,null)},Qa=function(O){return O instanceof oi&&(typeof O.nodeName!="string"||typeof O.textContent!="string"||typeof O.removeChild!="function"||!(O.attributes instanceof Ur)||typeof O.removeAttribute!="function"||typeof O.setAttribute!="function"||typeof O.namespaceURI!="string"||typeof O.insertBefore!="function"||typeof O.hasChildNodes!="function")},Za=function(O){return typeof yn=="function"&&O instanceof yn},xn=function(O,j,ae){Et[O]&&h(Et[O],ct=>{ct.call(J,j,ae,Wn)})},Ic=function(O){let j=null;if(xn("beforeSanitizeElements",O,null),Qa(O))return Gn(O),!0;let ae=wt(O.nodeName);if(xn("uponSanitizeElement",O,{tagName:ae,allowedTags:se}),O.hasChildNodes()&&!Za(O.firstElementChild)&&x(/<[/\w]/g,O.innerHTML)&&x(/<[/\w]/g,O.textContent))return Gn(O),!0;if(!se[ae]||ke[ae]){if(!ke[ae]&&Yn(ae)&&(ee.tagNameCheck instanceof RegExp&&x(ee.tagNameCheck,ae)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(ae)))return!1;if(br&&!Sn[ae]){let ct=wi(O)||O.parentNode,Qt=Vt(O)||O.childNodes;if(Qt&&ct){let Zt=Qt.length;for(let Ht=Zt-1;Ht>=0;--Ht)ct.insertBefore(gr(Qt[Ht],!0),Tt(O))}}return Gn(O),!0}return O instanceof mi&&!Xa(O)||(ae==="noscript"||ae==="noembed"||ae==="noframes")&&x(/<\/no(script|embed|frames)/i,O.innerHTML)?(Gn(O),!0):(ln&&O.nodeType===3&&(j=O.textContent,h([En,jr,_],ct=>{j=P(j,ct," ")}),O.textContent!==j&&(m(J.removed,{element:O.cloneNode()}),O.textContent=j)),xn("afterSanitizeElements",O,null),!1)},Fi=function(O,j,ae){if(zn&&(j==="id"||j==="name")&&(ae in ve||ae in Ga))return!1;if(!(Di&&!It[j]&&x(y,j))){if(!(Bt&&x(I,j))){if(!ue[j]||It[j]){if(!(Yn(O)&&(ee.tagNameCheck instanceof RegExp&&x(ee.tagNameCheck,O)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(O))&&(ee.attributeNameCheck instanceof RegExp&&x(ee.attributeNameCheck,j)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(j))||j==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&x(ee.tagNameCheck,ae)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(ae))))return!1}else if(!Ps[j]){if(!x(X,P(ae,$,""))){if(!((j==="src"||j==="xlink:href"||j==="href")&&O!=="script"&&R(ae,"data:")===0&&Co[O])){if(!(an&&!x(N,P(ae,$,"")))){if(ae)return!1}}}}}}return!0},Yn=function(O){return O.indexOf("-")>0},Ja=function(O){xn("beforeSanitizeAttributes",O,null);let{attributes:j}=O;if(!j)return;let ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ue},ct=j.length;for(;ct--;){let Qt=j[ct],{name:Zt,namespaceURI:Ht,value:qn}=Qt,qr=wt(Zt),ni=Zt==="value"?qn:M(qn);if(ae.attrName=qr,ae.attrValue=ni,ae.keepAttr=!0,ae.forceKeepAttr=void 0,xn("uponSanitizeAttribute",O,ae),ni=ae.attrValue,ae.forceKeepAttr||(Ka(Zt,O),!ae.keepAttr))continue;if(!vr&&x(/\/>/i,ni)){Ka(Zt,O);continue}ln&&h([En,jr,_],Fs=>{ni=P(ni,Fs," ")});let Do=wt(O.nodeName);if(Fi(Do,qr,ni)){if(Ms&&(qr==="id"||qr==="name")&&(Ka(Zt,O),ni=vt+ni),dt&&typeof Un=="object"&&typeof Un.getAttributeType=="function"&&!Ht)switch(Un.getAttributeType(Do,qr)){case"TrustedHTML":{ni=dt.createHTML(ni);break}case"TrustedScriptURL":{ni=dt.createScriptURL(ni);break}}try{Ht?O.setAttributeNS(Ht,Zt,ni):O.setAttribute(Zt,ni),f(J.removed)}catch{}}}xn("afterSanitizeAttributes",O,null)},Oc=function de(O){let j=null,ae=So(O);for(xn("beforeSanitizeShadowDOM",O,null);j=ae.nextNode();)xn("uponSanitizeShadowNode",j,null),!Ic(j)&&(j.content instanceof Je&&de(j.content),Ja(j));xn("afterSanitizeShadowDOM",O,null)};return J.sanitize=function(de){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=null,ae=null,ct=null,Qt=null;if(ja=!de,ja&&(de="<!-->"),typeof de!="string"&&!Za(de))if(typeof de.toString=="function"){if(de=de.toString(),typeof de!="string")throw L("dirty is not a string, aborting")}else throw L("toString is not a function");if(!J.isSupported)return de;if(Rs||Eo(O),J.removed=[],typeof de=="string"&&(Wr=!1),Wr){if(de.nodeName){let qn=wt(de.nodeName);if(!se[qn]||ke[qn])throw L("root node is forbidden and cannot be sanitized in-place")}}else if(de instanceof yn)j=wo("<!---->"),ae=j.ownerDocument.importNode(de,!0),ae.nodeType===1&&ae.nodeName==="BODY"||ae.nodeName==="HTML"?j=ae:j.appendChild(ae);else{if(!cn&&!ln&&!wn&&de.indexOf("<")===-1)return dt&&yr?dt.createHTML(de):de;if(j=wo(de),!j)return cn?null:yr?we:""}j&&_r&&Gn(j.firstChild);let Zt=So(Wr?de:j);for(;ct=Zt.nextNode();)Ic(ct)||(ct.content instanceof Je&&Oc(ct.content),Ja(ct));if(Wr)return de;if(cn){if(Cr)for(Qt=bn.call(j.ownerDocument);j.firstChild;)Qt.appendChild(j.firstChild);else Qt=j;return(ue.shadowroot||ue.shadowrootmode)&&(Qt=As.call(xe,Qt,!0)),Qt}let Ht=wn?j.outerHTML:j.innerHTML;return wn&&se["!doctype"]&&j.ownerDocument&&j.ownerDocument.doctype&&j.ownerDocument.doctype.name&&x(Ee,j.ownerDocument.doctype.name)&&(Ht="<!DOCTYPE "+j.ownerDocument.doctype.name+`>
`+Ht),ln&&h([En,jr,_],qn=>{Ht=P(Ht,qn," ")}),dt&&yr?dt.createHTML(Ht):Ht},J.setConfig=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Eo(de),Rs=!0},J.clearConfig=function(){Wn=null,Rs=!1},J.isValidAttribute=function(de,O,j){Wn||Eo({});let ae=wt(de),ct=wt(O);return Fi(ae,ct,j)},J.addHook=function(de,O){typeof O=="function"&&(Et[de]=Et[de]||[],m(Et[de],O))},J.removeHook=function(de){if(Et[de])return f(Et[de])},J.removeHooks=function(de){Et[de]&&(Et[de]=[])},J.removeAllHooks=function(){Et={}},J}var bt=F();return bt})});var Zv=null;var hf=1;function qi(n){let e=Zv;return Zv=n,e}var Jv={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function HS(n){if(!(mf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hf)){if(!n.producerMustRecompute(n)&&!ff(n)){n.dirty=!1,n.lastCleanEpoch=hf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=hf}}function e_(n){return n&&(n.nextProducerIndex=0),qi(n)}function t_(n,e){if(qi(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(mf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)pf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ff(n){Fc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(HS(t),i!==t.version))return!0}return!1}function i_(n){if(Fc(n),mf(n))for(let e=0;e<n.producerNode.length;e++)pf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function pf(n,e){if(BS(n),Fc(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)pf(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Fc(r),r.producerIndexOfThis[i]=e}}function mf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Fc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function BS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function US(){throw new Error}var zS=US;function n_(n){zS=n}function Me(n){return typeof n=="function"}function Io(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var kc=Io(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function tl(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ri=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Me(i))try{i()}catch(s){e=s instanceof kc?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{r_(s)}catch(o){e=e??[],o instanceof kc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new kc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)r_(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&tl(t,e)}remove(e){let{_finalizers:t}=this;t&&tl(t,e),e instanceof n&&e._removeParent(this)}};ri.EMPTY=(()=>{let n=new ri;return n.closed=!0,n})();var gf=ri.EMPTY;function Lc(n){return n instanceof ri||n&&"closed"in n&&Me(n.remove)&&Me(n.add)&&Me(n.unsubscribe)}function r_(n){Me(n)?n():n.unsubscribe()}var In={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oo={setTimeout(n,e,...t){let{delegate:i}=Oo;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Oo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Vc(n){Oo.setTimeout(()=>{let{onUnhandledError:e}=In;if(e)e(n);else throw n})}function il(){}var s_=(()=>vf("C",void 0,void 0))();function o_(n){return vf("E",void 0,n)}function a_(n){return vf("N",n,void 0)}function vf(n,e,t){return{kind:n,value:e,error:t}}var Vs=null;function Ao(n){if(In.useDeprecatedSynchronousErrorHandling){let e=!Vs;if(e&&(Vs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Vs;if(Vs=null,t)throw i}}else n()}function l_(n){In.useDeprecatedSynchronousErrorHandling&&Vs&&(Vs.errorThrown=!0,Vs.error=n)}var Hs=class extends ri{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Lc(e)&&e.add(this)):this.destination=WS}static create(e,t,i){return new On(e,t,i)}next(e){this.isStopped?Cf(a_(e),this):this._next(e)}error(e){this.isStopped?Cf(o_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cf(s_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$S=Function.prototype.bind;function _f(n,e){return $S.call(n,e)}var yf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Hc(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Hc(i)}else Hc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hc(t)}}},On=class extends Hs{constructor(e,t,i){super();let r;if(Me(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&In.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&_f(e.next,s),error:e.error&&_f(e.error,s),complete:e.complete&&_f(e.complete,s)}):r=e}this.destination=new yf(r)}};function Hc(n){In.useDeprecatedSynchronousErrorHandling?l_(n):Vc(n)}function jS(n){throw n}function Cf(n,e){let{onStoppedNotification:t}=In;t&&Oo.setTimeout(()=>t(n,e))}var WS={closed:!0,next:il,error:jS,complete:il};var Ro=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function xi(n){return n}function bf(...n){return Ef(n)}function Ef(n){return n.length===0?xi:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=YS(t)?t:new On(t,i,r);return Ao(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=c_(i),new i((r,s)=>{let o=new On({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Ro](){return this}pipe(...t){return Ef(t)(this)}toPromise(t){return t=c_(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function c_(n){var e;return(e=n??In.Promise)!==null&&e!==void 0?e:Promise}function GS(n){return n&&Me(n.next)&&Me(n.error)&&Me(n.complete)}function YS(n){return n&&n instanceof Hs||GS(n)&&Lc(n)}function wf(n){return Me(n?.lift)}function Ve(n){return e=>{if(wf(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function He(n,e,t,i,r){return new Sf(n,e,t,i,r)}var Sf=class extends Hs{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mo(){return Ve((n,e)=>{let t=null;n._refCount++;let i=He(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Po=class extends Le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,wf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ri;let t=this.getSubject();e.add(this.source.subscribe(He(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ri.EMPTY)}return e}refCount(){return Mo()(this)}};var u_=Io(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Jt=(()=>{class n extends Le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Bc(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new u_}next(t){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?gf:(this.currentObservers=null,s.push(t),new ri(()=>{this.currentObservers=null,tl(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new Le;return t.source=this,t}}return n.create=(e,t)=>new Bc(e,t),n})(),Bc=class extends Jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:gf}};var ai=class extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Df={now(){return(Df.delegate||Date).now()},delegate:void 0};var Uc=class extends Jt{constructor(e=1/0,t=1/0,i=Df){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}};var gi=new Le(n=>n.complete());function d_(n){return n&&Me(n.schedule)}function xf(n){return n[n.length-1]}function zc(n){return Me(xf(n))?n.pop():void 0}function Xn(n){return d_(xf(n))?n.pop():void 0}function h_(n,e){return typeof xf(n)=="number"?n.pop():e}function p_(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(i.next(h))}catch(f){o(f)}}function l(h){try{u(i.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):r(h.value).then(a,l)}u((i=i.apply(n,e||[])).next())})}function f_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bs(n){return this instanceof Bs?(this.v=n,this):new Bs(n)}function m_(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(m){i[m]&&(r[m]=function(v){return new Promise(function(w,S){s.push([m,v,w,S])>1||a(m,v)})})}function a(m,v){try{l(i[m](v))}catch(w){f(s[0][3],w)}}function l(m){m.value instanceof Bs?Promise.resolve(m.value.v).then(u,h):f(s[0][2],m)}function u(m){a("next",m)}function h(m){a("throw",m)}function f(m,v){m(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function g_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof f_=="function"?f_(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var $c=n=>n&&typeof n.length=="number"&&typeof n!="function";function jc(n){return Me(n?.then)}function Wc(n){return Me(n[Ro])}function Gc(n){return Symbol.asyncIterator&&Me(n?.[Symbol.asyncIterator])}function Yc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qc=qS();function Xc(n){return Me(n?.[qc])}function Kc(n){return m_(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Bs(t.read());if(r)return yield Bs(void 0);yield yield Bs(i)}}finally{t.releaseLock()}})}function Qc(n){return Me(n?.getReader)}function St(n){if(n instanceof Le)return n;if(n!=null){if(Wc(n))return XS(n);if($c(n))return KS(n);if(jc(n))return QS(n);if(Gc(n))return v_(n);if(Xc(n))return ZS(n);if(Qc(n))return JS(n)}throw Yc(n)}function XS(n){return new Le(e=>{let t=n[Ro]();if(Me(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KS(n){return new Le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function QS(n){return new Le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vc)})}function ZS(n){return new Le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function v_(n){return new Le(e=>{eD(n,e).catch(t=>e.error(t))})}function JS(n){return v_(Kc(n))}function eD(n,e){var t,i,r,s;return p_(this,void 0,void 0,function*(){try{for(t=g_(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function ki(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Zc(n,e=0){return Ve((t,i)=>{t.subscribe(He(i,r=>ki(i,n,()=>i.next(r),e),()=>ki(i,n,()=>i.complete(),e),r=>ki(i,n,()=>i.error(r),e)))})}function Jc(n,e=0){return Ve((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function __(n,e){return St(n).pipe(Jc(e),Zc(e))}function C_(n,e){return St(n).pipe(Jc(e),Zc(e))}function y_(n,e){return new Le(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function b_(n,e){return new Le(t=>{let i;return ki(t,e,()=>{i=n[qc](),ki(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>Me(i?.return)&&i.return()})}function eu(n,e){if(!n)throw new Error("Iterable cannot be null");return new Le(t=>{ki(t,e,()=>{let i=n[Symbol.asyncIterator]();ki(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function E_(n,e){return eu(Kc(n),e)}function w_(n,e){if(n!=null){if(Wc(n))return __(n,e);if($c(n))return y_(n,e);if(jc(n))return C_(n,e);if(Gc(n))return eu(n,e);if(Xc(n))return b_(n,e);if(Qc(n))return E_(n,e)}throw Yc(n)}function Nt(n,e){return e?w_(n,e):St(n)}function he(...n){let e=Xn(n);return Nt(n,e)}function No(n,e){let t=Me(n)?n:()=>n,i=r=>r.error(t());return new Le(e?r=>e.schedule(i,0,r):i)}function hn(n){return!!n&&(n instanceof Le||Me(n.lift)&&Me(n.subscribe))}var An=Io(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Tf(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let s=new On({next:o=>{i(o),s.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new An)}});n.subscribe(s)})}function Ge(n,e){return Ve((t,i)=>{let r=0;t.subscribe(He(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:tD}=Array;function iD(n,e){return tD(e)?n(...e):n(e)}function tu(n){return Ge(e=>iD(n,e))}var{isArray:nD}=Array,{getPrototypeOf:rD,prototype:sD,keys:oD}=Object;function iu(n){if(n.length===1){let e=n[0];if(nD(e))return{args:e,keys:null};if(aD(e)){let t=oD(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function aD(n){return n&&typeof n=="object"&&rD(n)===sD}function nu(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function nl(...n){let e=Xn(n),t=zc(n),{args:i,keys:r}=iu(n);if(i.length===0)return Nt([],e);let s=new Le(lD(i,e,r?o=>nu(r,o):xi));return t?s.pipe(tu(t)):s}function lD(n,e,t=xi){return i=>{S_(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)S_(e,()=>{let u=Nt(n[l],e),h=!1;u.subscribe(He(i,f=>{s[l]=f,h||(h=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function S_(n,e,t){n?ki(t,n,e):e()}function D_(n,e,t,i,r,s,o,a){let l=[],u=0,h=0,f=!1,m=()=>{f&&!l.length&&!u&&e.complete()},v=S=>u<i?w(S):l.push(S),w=S=>{s&&e.next(S),u++;let P=!1;St(t(S,h++)).subscribe(He(e,R=>{r?.(R),s?v(R):e.next(R)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;l.length&&u<i;){let R=l.shift();o?ki(e,o,()=>w(R)):w(R)}m()}catch(R){e.error(R)}}))};return n.subscribe(He(e,v,()=>{f=!0,m()})),()=>{a?.()}}function zt(n,e,t=1/0){return Me(e)?zt((i,r)=>Ge((s,o)=>e(i,s,r,o))(St(n(i,r))),t):(typeof e=="number"&&(t=e),Ve((i,r)=>D_(i,r,n,t)))}function Jr(n=1/0){return zt(xi,n)}function x_(){return Jr(1)}function xr(...n){return x_()(Nt(n,Xn(n)))}function Tr(n){return new Le(e=>{St(n()).subscribe(e)})}function If(...n){let e=zc(n),{args:t,keys:i}=iu(n),r=new Le(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let h=0;h<o;h++){let f=!1;St(t[h]).subscribe(He(s,m=>{f||(f=!0,u--),a[h]=m},()=>l--,void 0,()=>{(!l||!f)&&(u||s.next(i?nu(i,a):a),s.complete())}))}});return e?r.pipe(tu(e)):r}function Of(n,e,t){return Tr(()=>n()?e:t)}function Af(...n){let e=Xn(n),t=h_(n,1/0),i=n;return i.length?i.length===1?St(i[0]):Jr(t)(Nt(i,e)):gi}function fn(n,e){return Ve((t,i)=>{let r=0;t.subscribe(He(i,s=>n.call(e,s,r++)&&i.next(s)))})}function es(n){return Ve((e,t)=>{let i=null,r=!1,s;i=e.subscribe(He(t,void 0,void 0,o=>{s=St(n(o,es(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function T_(n,e,t,i,r){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(He(o,h=>{let f=u++;l=a?n(l,h,f):(a=!0,h),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Ir(n,e){return Me(e)?zt(n,e,1):zt(n,1)}function ts(n){return Ve((e,t)=>{let i=!1;e.subscribe(He(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Li(n){return n<=0?()=>gi:Ve((e,t)=>{let i=0;e.subscribe(He(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Rf(n){return Ge(()=>n)}function Mf(n,e=xi){return n=n??cD,Ve((t,i)=>{let r,s=!0;t.subscribe(He(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function cD(n,e){return n===e}function ru(n=uD){return Ve((e,t)=>{let i=!1;e.subscribe(He(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function uD(){return new An}function rl(n){return Ve((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kn(n,e){let t=arguments.length>=2;return i=>i.pipe(n?fn((r,s)=>n(r,s,i)):xi,Li(1),t?ts(e):ru(()=>new An))}function Fo(n){return n<=0?()=>gi:Ve((e,t)=>{let i=[];e.subscribe(He(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Pf(n,e){let t=arguments.length>=2;return i=>i.pipe(n?fn((r,s)=>n(r,s,i)):xi,Fo(1),t?ts(e):ru(()=>new An))}function Nf(n,e){return Ve(T_(n,e,arguments.length>=2,!0))}function sl(n={}){let{connector:e=()=>new Jt,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,u=0,h=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),o=l=void 0,h=f=!1},w=()=>{let S=o;v(),S?.unsubscribe()};return Ve((S,P)=>{u++,!f&&!h&&m();let R=l=l??e();P.add(()=>{u--,u===0&&!f&&!h&&(a=Ff(w,r))}),R.subscribe(P),!o&&u>0&&(o=new On({next:M=>R.next(M),error:M=>{f=!0,m(),a=Ff(v,t,M),R.error(M)},complete:()=>{h=!0,m(),a=Ff(v,i),R.complete()}}),St(S).subscribe(o))})(s)}}function Ff(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new On({next:()=>{i.unsubscribe(),n()}});return St(e(...t)).subscribe(i)}function su(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,sl({connector:()=>new Uc(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function kf(...n){let e=Xn(n);return Ve((t,i)=>{(e?xr(n,t,e):xr(n,t)).subscribe(i)})}function $t(n,e){return Ve((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(He(i,l=>{r?.unsubscribe();let u=0,h=s++;St(n(l,h)).subscribe(r=He(i,f=>i.next(e?e(l,f,h,u++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function ol(n){return Ve((e,t)=>{St(n).subscribe(He(t,()=>t.complete(),il)),!t.closed&&e.subscribe(t)})}function si(n,e,t){let i=Me(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ve((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(He(s,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),s.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):xi}function mt(n){for(let e in n)if(n[e]===mt)return e;throw Error("Could not find renamed property on target object.")}function Vi(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Vi).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function I_(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var dD=mt({__forward_ref__:mt});function lC(n){return n.__forward_ref__=lC,n.toString=function(){return Vi(this())},n}function Ti(n){return cC(n)?n():n}function cC(n){return typeof n=="function"&&n.hasOwnProperty(dD)&&n.__forward_ref__===lC}function uC(n){return n&&!!n.\u0275providers}var ye=class extends Error{constructor(e,t){super(Tp(e,t)),this.code=e}};function Tp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var hD=mt({\u0275cmp:mt}),fD=mt({\u0275dir:mt}),pD=mt({\u0275pipe:mt}),mD=mt({\u0275mod:mt}),fu=mt({\u0275fac:mt}),al=mt({__NG_ELEMENT_ID__:mt}),O_=mt({__NG_ENV_ID__:mt});function Ip(n){return typeof n=="string"?n:n==null?"":String(n)}function gD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ip(n)}function vD(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ye(-200,`Circular dependency in DI detected for ${n}${t}`)}function Op(n,e){let t=e?` in ${e}`:"";throw new ye(-201,!1)}function _D(n,e){n==null&&CD(e,n,null,"!=")}function CD(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}function fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Oi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ru(n){return A_(n,hC)||A_(n,fC)}function dC(n){return Ru(n)!==null}function A_(n,e){return n.hasOwnProperty(e)?n[e]:null}function yD(n){let e=n&&(n[hC]||n[fC]);return e||null}function R_(n){return n&&(n.hasOwnProperty(M_)||n.hasOwnProperty(bD))?n[M_]:null}var hC=mt({\u0275prov:mt}),M_=mt({\u0275inj:mt}),fC=mt({ngInjectableDef:mt}),bD=mt({ngInjectorDef:mt}),Be=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Be||{}),qf;function pC(){return qf}function pn(n){let e=qf;return qf=n,e}function mC(n,e,t){let i=Ru(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Be.Optional)return null;if(e!==void 0)return e;Op(Vi(n),"Injector")}var Xi=globalThis;var Se=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var ED={},cl=ED,Xf="__NG_DI_FLAG__",pu="ngTempTokenPath",wD="ngTokenPath",SD=/\n/gm,DD="\u0275",P_="__source",Bo;function xD(){return Bo}function is(n){let e=Bo;return Bo=n,e}function TD(n,e=Be.Default){if(Bo===void 0)throw new ye(-203,!1);return Bo===null?mC(n,void 0,e):Bo.get(n,e&Be.Optional?null:void 0,e)}function ce(n,e=Be.Default){return(pC()||TD)(Ti(n),e)}function le(n,e=Be.Default){return ce(n,Mu(e))}function Mu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Kf(n){let e=[];for(let t=0;t<n.length;t++){let i=Ti(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ye(900,!1);let r,s=Be.Default;for(let o=0;o<i.length;o++){let a=i[o],l=ID(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(ce(r,s))}else e.push(ce(i))}return e}function gC(n,e){return n[Xf]=e,n.prototype[Xf]=e,n}function ID(n){return n[Xf]}function OD(n,e,t,i){let r=n[pu];throw e[P_]&&r.unshift(e[P_]),n.message=AD(`
`+n.message,r,t,i),n[wD]=r,n[pu]=null,n}function AD(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==DD?n.slice(2):n;let r=Vi(e);if(Array.isArray(e))r=e.map(Vi).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Vi(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(SD,`
  `)}`}function gl(n){return{toString:n}.toString()}var vC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vC||{}),Jn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Jn||{}),ul={},Qn=[];function _C(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Qf(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];MD(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function RD(n){return n===3||n===4||n===6}function MD(n){return n.charCodeAt(0)===64}function Ap(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?N_(n,t,r,null,e[++i]):N_(n,t,r,null,null))}}return n}function N_(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var CC="ng-template";function PD(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if(typeof s=="string"&&r){let o=n[i++];if(t&&s==="class"&&_C(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;i<n.length&&typeof(s=n[i++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(r=!1)}return!1}function yC(n){return n.type===4&&n.value!==CC}function ND(n,e,t){let i=n.type===4&&!t?CC:n.value;return e===i}function FD(n,e,t){let i=4,r=n.attrs||[],s=VD(r),o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!Rn(i)&&!Rn(l))return!1;if(o&&Rn(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!ND(n,l,t)||l===""&&e.length===1){if(Rn(i))return!1;o=!0}}else{let u=i&8?l:e[++a];if(i&8&&n.attrs!==null){if(!PD(n.attrs,u,t)){if(Rn(i))return!1;o=!0}continue}let h=i&8?"class":l,f=kD(h,r,yC(n),t);if(f===-1){if(Rn(i))return!1;o=!0;continue}if(u!==""){let m;f>s?m="":m=r[f+1].toLowerCase();let v=i&8?m:null;if(v&&_C(v,u,0)!==-1||i&2&&u!==m){if(Rn(i))return!1;o=!0}}}}return Rn(i)||o}function Rn(n){return(n&1)===0}function kD(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return HD(e,n)}function LD(n,e,t=!1){for(let i=0;i<e.length;i++)if(FD(n,e[i],t))return!0;return!1}function VD(n){for(let e=0;e<n.length;e++){let t=n[e];if(RD(t))return e}return n.length}function HD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function F_(n,e){return n?":not("+e.trim()+")":e}function BD(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Rn(o)&&(e+=F_(s,r),r=""),i=o,s=s||!Rn(i);t++}return r!==""&&(e+=F_(s,r)),e}function UD(n){return n.map(BD).join(",")}function zD(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Rn(r))break;r=s}i++}return{attrs:e,classes:t}}function Zo(n){return gl(()=>{let e=DC(n),t=me(D({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Jn.Emulated,styles:n.styles||Qn,_:null,schemas:n.schemas||null,tView:null,id:""});xC(t);let i=n.dependencies;return t.directiveDefs=L_(i,!1),t.pipeDefs=L_(i,!0),t.id=WD(t),t})}function $D(n){return ss(n)||bC(n)}function jD(n){return n!==null}function Ai(n){return gl(()=>({type:n.type,bootstrap:n.bootstrap||Qn,declarations:n.declarations||Qn,imports:n.imports||Qn,exports:n.exports||Qn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function k_(n,e){if(n==null)return ul;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function Pu(n){return gl(()=>{let e=DC(n);return xC(e),e})}function ss(n){return n[hD]||null}function bC(n){return n[fD]||null}function EC(n){return n[pD]||null}function wC(n){let e=ss(n)||bC(n)||EC(n);return e!==null?e.standalone:!1}function SC(n,e){let t=n[mD]||null;if(!t&&e===!0)throw new Error(`Type ${Vi(n)} does not have '\u0275mod' property.`);return t}function DC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ul,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Qn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:k_(n.inputs,e),outputs:k_(n.outputs),debugInfo:null}}function xC(n){n.features?.forEach(e=>e(n))}function L_(n,e){if(!n)return null;let t=e?EC:$D;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(jD)}function WD(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Or=0,Ye=1,Ae=2,ei=3,Mn=4,Nn=5,mu=6,V_=7,os=8,zo=9,dl=10,Ki=11,hl=12,H_=13,vl=14,er=15,Rp=16,ko=17,Mp=18,Nu=19,TC=20,rs=21,Lf=22,$s=23,$o=25,IC=1;var js=7,gu=8,vu=9,mn=10,jo=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n[n.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",n}(jo||{});function Us(n){return Array.isArray(n)&&typeof n[IC]=="object"}function Pn(n){return Array.isArray(n)&&n[IC]===!0}function OC(n){return(n.flags&4)!==0}function Fu(n){return n.componentOffset>-1}function GD(n){return(n.flags&1)===1}function Jo(n){return!!n.template}function YD(n){return(n[Ae]&512)!==0}function Wo(n,e){let t=n.hasOwnProperty(fu);return t?n[fu]:null}var Zf=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function ku(){return AC}function AC(n){return n.type.prototype.ngOnChanges&&(n.setInput=XD),qD}ku.ngInherit=!0;function qD(){let n=MC(this),e=n?.current;if(e){let t=n.previous;if(t===ul)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function XD(n,e,t,i){let r=this.declaredInputs[t],s=MC(n)||KD(n,{previous:ul,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new Zf(l&&l.currentValue,e,a===ul),n[i]=e}var RC="__ngSimpleChanges__";function MC(n){return n[RC]||null}function KD(n,e){return n[RC]=e}var B_=null;var ns=function(n,e,t){B_?.(n,e,t)},QD="svg",ZD="math";function as(n){for(;Array.isArray(n);)n=n[Or];return n}function Fn(n,e){return as(e[n.index])}function PC(n,e){return n.data[e]}function ea(n,e){let t=e[n];return Us(t)?t:t[Or]}function Pp(n){return(n[Ae]&128)===128}function JD(n){return Pn(n[ei])}function U_(n,e){return e==null?null:n[e]}function NC(n){n[ko]=0}function ex(n){n[Ae]&1024||(n[Ae]|=1024,Pp(n)&&Lu(n))}function FC(n){return n[Ae]&9216||n[$s]?.dirty}function kC(n){FC(n)&&Lu(n)}function Lu(n){let e=n[ei];for(;e!==null&&!(Pn(e)&&e[Ae]&jo.HasChildViewsToRefresh||Us(e)&&e[Ae]&8192);){if(Pn(e))e[Ae]|=jo.HasChildViewsToRefresh;else if(e[Ae]|=8192,!Pp(e))break;e=e[ei]}}function LC(n,e){if((n[Ae]&256)===256)throw new ye(911,!1);n[rs]===null&&(n[rs]=[]),n[rs].push(e)}function tx(n,e){if(n[rs]===null)return;let t=n[rs].indexOf(e);t!==-1&&n[rs].splice(t,1)}var nt={lFrame:jC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ix(){return nt.lFrame.elementDepthCount}function nx(){nt.lFrame.elementDepthCount++}function rx(){nt.lFrame.elementDepthCount--}function VC(){return nt.bindingsEnabled}function sx(){return nt.skipHydrationRootTNode!==null}function ox(n){return nt.skipHydrationRootTNode===n}function ax(){nt.skipHydrationRootTNode=null}function Ii(){return nt.lFrame.lView}function cs(){return nt.lFrame.tView}function Ar(){let n=HC();for(;n!==null&&n.type===64;)n=n.parent;return n}function HC(){return nt.lFrame.currentTNode}function lx(){let n=nt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Np(n,e){let t=nt.lFrame;t.currentTNode=n,t.isParent=e}function BC(){return nt.lFrame.isParent}function cx(){nt.lFrame.isParent=!1}function ux(n){return nt.lFrame.bindingIndex=n}function Fp(){return nt.lFrame.bindingIndex++}function dx(){return nt.lFrame.inI18n}function hx(n,e){let t=nt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jf(e)}function fx(){return nt.lFrame.currentDirectiveIndex}function Jf(n){nt.lFrame.currentDirectiveIndex=n}function UC(n){nt.lFrame.currentQueryIndex=n}function px(n){let e=n[Ye];return e.type===2?e.declTNode:e.type===1?n[Nn]:null}function zC(n,e,t){if(t&Be.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&Be.Host);)if(r=px(s),r===null||(s=s[vl],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=nt.lFrame=$C();return i.currentTNode=e,i.lView=n,!0}function kp(n){let e=$C(),t=n[Ye];nt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $C(){let n=nt.lFrame,e=n===null?null:n.child;return e===null?jC(n):e}function jC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function WC(){let n=nt.lFrame;return nt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var GC=WC;function Lp(){let n=WC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function YC(){return nt.lFrame.selectedIndex}function Ws(n){nt.lFrame.selectedIndex=n}function Vp(){let n=nt.lFrame;return PC(n.tView,n.selectedIndex)}function mx(){return nt.lFrame.currentNamespace}var qC=!0;function gx(){return qC}function vx(n){qC=n}function _x(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=AC(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function XC(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function lu(n,e,t){KC(n,e,3,t)}function cu(n,e,t,i){(n[Ae]&3)===t&&KC(n,e,t,i)}function Vf(n,e){let t=n[Ae];(t&3)===e&&(t&=16383,t+=1,n[Ae]=t)}function KC(n,e,t,i){let r=i!==void 0?n[ko]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[ko]+=65536),(a<s||s==-1)&&(Cx(n,t,e,l),n[ko]=(n[ko]&4294901760)+l+2),l++}function z_(n,e){ns(4,n,e);let t=qi(null);try{e.call(n)}finally{qi(t),ns(5,n,e)}}function Cx(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[Ae]>>14<n[ko]>>16&&(n[Ae]&3)===e&&(n[Ae]+=16384,z_(a,s)):z_(a,s)}var Uo=-1,Gs=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function yx(n){return n instanceof Gs}function bx(n){return(n.flags&8)!==0}function Ex(n){return(n.flags&16)!==0}function QC(n){return n!==Uo}function _u(n){let e=n&32767;return n&32767}function wx(n){return n>>16}function Cu(n,e){let t=wx(n),i=e;for(;t>0;)i=i[vl],t--;return i}var ep=!0;function $_(n){let e=ep;return ep=n,e}var Sx=256,ZC=Sx-1,JC=5,Dx=0,Zn={};function xx(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(al)&&(i=t[al]),i==null&&(i=t[al]=Dx++);let r=i&ZC,s=1<<r;e.data[n+(r>>JC)]|=s}function yu(n,e){let t=ey(n,e);if(t!==-1)return t;let i=e[Ye];i.firstCreatePass&&(n.injectorIndex=e.length,Hf(i.data,n),Hf(e,null),Hf(i.blueprint,null));let r=Hp(n,e),s=n.injectorIndex;if(QC(r)){let o=_u(r),a=Cu(r,e),l=a[Ye].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=r,s}function Hf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ey(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Hp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=sy(r),i===null)return Uo;if(t++,r=r[vl],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Uo}function tp(n,e,t){xx(n,e,t)}function ty(n,e,t){if(t&Be.Optional||n!==void 0)return n;Op(e,"NodeInjector")}function iy(n,e,t,i){if(t&Be.Optional&&i===void 0&&(i=null),!(t&(Be.Self|Be.Host))){let r=n[zo],s=pn(void 0);try{return r?r.get(e,i,t&Be.Optional):mC(e,i,t&Be.Optional)}finally{pn(s)}}return ty(i,e,t)}function ny(n,e,t,i=Be.Default,r){if(n!==null){if(e[Ae]&2048&&!(i&Be.Self)){let o=Rx(n,e,t,i,Zn);if(o!==Zn)return o}let s=ry(n,e,t,i,Zn);if(s!==Zn)return s}return iy(e,t,i,r)}function ry(n,e,t,i,r){let s=Ox(t);if(typeof s=="function"){if(!zC(e,n,i))return i&Be.Host?ty(r,t,i):iy(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&Be.Optional))Op(t);else return o}finally{GC()}}else if(typeof s=="number"){let o=null,a=ey(n,e),l=Uo,u=i&Be.Host?e[er][Nn]:null;for((a===-1||i&Be.SkipSelf)&&(l=a===-1?Hp(n,e):e[a+8],l===Uo||!W_(i,!1)?a=-1:(o=e[Ye],a=_u(l),e=Cu(l,e)));a!==-1;){let h=e[Ye];if(j_(s,a,h.data)){let f=Tx(a,e,t,o,i,u);if(f!==Zn)return f}l=e[a+8],l!==Uo&&W_(i,e[Ye].data[a+8]===u)&&j_(s,a,e)?(o=h,a=_u(l),e=Cu(l,e)):a=-1}}return r}function Tx(n,e,t,i,r,s){let o=e[Ye],a=o.data[n+8],l=i==null?Fu(a)&&ep:i!=o&&(a.type&3)!==0,u=r&Be.Host&&s===a,h=Ix(a,o,t,l,u);return h!==null?Go(e,o,h,a):Zn}function Ix(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,u=n.directiveEnd,h=s>>20,f=i?a:a+h,m=r?a+h:u;for(let v=f;v<m;v++){let w=o[v];if(v<l&&t===w||v>=l&&w.type===t)return v}if(r){let v=o[l];if(v&&Jo(v)&&v.type===t)return l}return null}function Go(n,e,t,i){let r=n[t],s=e.data;if(yx(r)){let o=r;o.resolving&&vD(gD(s[t]));let a=$_(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?pn(o.injectImpl):null,h=zC(n,i,Be.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&_x(t,s[t],e)}finally{u!==null&&pn(u),$_(a),o.resolving=!1,GC()}}return r}function Ox(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(al)?n[al]:void 0;return typeof e=="number"?e>=0?e&ZC:Ax:e}function j_(n,e,t){let i=1<<n;return!!(t[e+(n>>JC)]&i)}function W_(n,e){return!(n&Be.Self)&&!(n&Be.Host&&e)}var zs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return ny(this._tNode,this._lView,e,Mu(i),t)}};function Ax(){return new zs(Ar(),Ii())}function Ys(n){return gl(()=>{let e=n.prototype.constructor,t=e[fu]||ip(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[fu]||ip(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function ip(n){return cC(n)?()=>{let e=ip(Ti(n));return e&&e()}:Wo(n)}function Rx(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[Ae]&2048&&!(o[Ae]&512);){let a=ry(s,o,t,i|Be.Self,Zn);if(a!==Zn)return a;let l=s.parent;if(!l){let u=o[TC];if(u){let h=u.get(t,Zn,i);if(h!==Zn)return h}l=sy(o),o=o[vl]}s=l}return r}function sy(n){let e=n[Ye],t=e.type;return t===2?e.declTNode:t===1?n[Nn]:null}var ou="__parameters__";function Mx(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function oy(n,e,t){return gl(()=>{let i=Mx(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,u,h){let f=l.hasOwnProperty(ou)?l[ou]:Object.defineProperty(l,ou,{value:[]})[ou];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Px(n){let e=Xi.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Nx(n){return typeof n=="function"}function Bp(n,e){n.forEach(t=>Array.isArray(t)?Bp(t,e):e(t))}function ay(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function bu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Fx(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}var Up=gC(oy("Optional"),8);var ly=gC(oy("SkipSelf"),4);function kx(n){let e=[],t=new Map;function i(r){let s=t.get(r);if(!s){let o=n(r);t.set(r,s=o.then(Bx))}return s}return Eu.forEach((r,s)=>{let o=[];r.templateUrl&&o.push(i(r.templateUrl).then(u=>{r.template=u}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let u=r.styles.length,h=r.styleUrls;r.styleUrls.forEach((f,m)=>{a.push(""),o.push(i(f).then(v=>{a[u+m]=v,h.splice(h.indexOf(f),1),h.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&o.push(i(r.styleUrl).then(u=>{a.push(u),r.styleUrl=void 0}));let l=Promise.all(o).then(()=>Ux(s));e.push(l)}),Vx(),Promise.all(e).then(()=>{})}var Eu=new Map,Lx=new Set;function Vx(){let n=Eu;return Eu=new Map,n}function Hx(){return Eu.size===0}function Bx(n){return typeof n=="string"?n:n.text()}function Ux(n){Lx.delete(n)}var _l=new Se("ENVIRONMENT_INITIALIZER"),cy=new Se("INJECTOR",-1),uy=new Se("INJECTOR_DEF_TYPES"),wu=class{get(e,t=cl){if(t===cl){let i=new Error(`NullInjectorError: No provider for ${Vi(e)}!`);throw i.name="NullInjectorError",i}return t}};function zx(...n){return{\u0275providers:dy(!0,n),\u0275fromNgModule:!0}}function dy(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return Bp(e,o=>{let a=o;np(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&hy(r,s),t}function hy(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];zp(r,s=>{e(s,i)})}}function np(n,e,t,i){if(n=Ti(n),!n)return!1;let r=null,s=R_(n),o=!s&&ss(n);if(!s&&!o){let l=n.ngModule;if(s=R_(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)np(u,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let u;try{Bp(s.imports,h=>{np(h,e,t,i)&&(u||=[],u.push(h))})}finally{}u!==void 0&&hy(u,e)}if(!a){let u=Wo(r)||(()=>new r);e({provide:r,useFactory:u,deps:Qn},r),e({provide:uy,useValue:r,multi:!0},r),e({provide:_l,useValue:()=>ce(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let u=n;zp(l,h=>{e(h,u)})}}else return!1;return r!==n&&n.providers!==void 0}function zp(n,e){for(let t of n)uC(t)&&(t=t.\u0275providers),Array.isArray(t)?zp(t,e):e(t)}var $x=mt({provide:String,useValue:mt});function fy(n){return n!==null&&typeof n=="object"&&$x in n}function jx(n){return!!(n&&n.useExisting)}function Wx(n){return!!(n&&n.useFactory)}function Yo(n){return typeof n=="function"}function Gx(n){return!!n.useClass}var Vu=new Se("Set Injector scope."),uu={},Yx={},Bf;function $p(){return Bf===void 0&&(Bf=new wu),Bf}var Qi=class{},fl=class extends Qi{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sp(e,o=>this.processProvider(o)),this.records.set(cy,Lo(void 0,this)),r.has("environment")&&this.records.set(Qi,Lo(void 0,this));let s=this.records.get(Vu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(uy,Qn,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=is(this),i=pn(void 0),r;try{return e()}finally{is(t),pn(i)}}get(e,t=cl,i=Be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(O_))return e[O_](this);i=Mu(i);let r,s=is(this),o=pn(void 0);try{if(!(i&Be.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=Zx(e)&&Ru(e);u&&this.injectableDefInScope(u)?l=Lo(rp(e),uu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&Be.Self?$p():this.parent;return t=i&Be.Optional&&t===cl?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[pu]=a[pu]||[]).unshift(Vi(e)),s)throw a;return OD(a,e,"R3InjectorError",this.source)}else throw a}finally{pn(o),is(s)}}resolveInjectorInitializers(){let e=is(this),t=pn(void 0),i;try{let r=this.get(_l,Qn,Be.Self);for(let s of r)s()}finally{is(e),pn(t)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Vi(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(e){e=Ti(e);let t=Yo(e)?e:Ti(e&&e.provide),i=Xx(e);if(!Yo(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Lo(void 0,uu,!0),r.factory=()=>Kf(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}else{let r=this.records.get(t)}this.records.set(t,i)}hydrate(e,t){return t.value===uu&&(t.value=Yx,t.value=t.factory()),typeof t.value=="object"&&t.value&&Qx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ti(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function rp(n){let e=Ru(n),t=e!==null?e.factory:Wo(n);if(t!==null)return t;if(n instanceof Se)throw new ye(204,!1);if(n instanceof Function)return qx(n);throw new ye(204,!1)}function qx(n){let e=n.length;if(e>0){let i=Fx(e,"?");throw new ye(204,!1)}let t=yD(n);return t!==null?()=>t.factory(n):()=>new n}function Xx(n){if(fy(n))return Lo(void 0,n.useValue);{let e=py(n);return Lo(e,uu)}}function py(n,e,t){let i;if(Yo(n)){let r=Ti(n);return Wo(r)||rp(r)}else if(fy(n))i=()=>Ti(n.useValue);else if(Wx(n))i=()=>n.useFactory(...Kf(n.deps||[]));else if(jx(n))i=()=>ce(Ti(n.useExisting));else{let r=Ti(n&&(n.useClass||n.provide));if(Kx(n))i=()=>new r(...Kf(n.deps));else return Wo(r)||rp(r)}return i}function Lo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Kx(n){return!!n.deps}function Qx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Zx(n){return typeof n=="function"||typeof n=="object"&&n instanceof Se}function sp(n,e){for(let t of n)Array.isArray(t)?sp(t,e):t&&uC(t)?sp(t.\u0275providers,e):e(t)}function us(n,e){n instanceof fl&&n.assertNotDestroyed();let t,i=is(n),r=pn(void 0);try{return e()}finally{is(i),pn(r)}}function Jx(n){if(!pC()&&!xD())throw new ye(-203,!1)}function G_(n,e=null,t=null,i){let r=my(n,e,t,i);return r.resolveInjectorInitializers(),r}function my(n,e=null,t=null,i,r=new Set){let s=[t||Qn,zx(n)];return i=i||(typeof n=="object"?void 0:Vi(n)),new fl(s,e||$p(),i||null,r)}var kn=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return G_({name:""},r,i,"");{let s=i.name??"";return G_({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=cl,e.NULL=new wu,e.\u0275prov=fe({token:e,providedIn:"any",factory:()=>ce(cy)}),e.__NG_ELEMENT_ID__=-1;let n=e;return n})();var op;function gy(n){op=n}function eT(){if(op!==void 0)return op;if(typeof document<"u")return document;throw new ye(210,!1)}var Hu=new Se("AppId",{providedIn:"root",factory:()=>tT}),tT="ng",jp=new Se("Platform Initializer"),qs=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Wp=new Se("CSP nonce",{providedIn:"root",factory:()=>eT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function vy(n){return n instanceof Function?n():n}function iT(n){return(n??le(kn)).get(qs)==="browser"}function _y(n){return(n.flags&128)===128}var Xs=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Xs||{});var Cy=new Map,nT=0;function rT(){return nT++}function sT(n){Cy.set(n[Nu],n)}function oT(n){Cy.delete(n[Nu])}var Y_="__ngContext__";function qo(n,e){Us(e)?(n[Y_]=e[Nu],sT(e)):n[Y_]=e}var aT;function Gp(n,e){return aT(n,e)}function Yp(n){let e=n[ei];return Pn(e)?e[ei]:e}function yy(n){return Ey(n[hl])}function by(n){return Ey(n[Mn])}function Ey(n){for(;n!==null&&!Pn(n);)n=n[Mn];return n}function Vo(n,e,t,i,r){if(i!=null){let s,o=!1;Pn(i)?s=i:Us(i)&&(o=!0,i=i[Or]);let a=as(i);n===0&&t!==null?r==null?xy(e,t,a):Su(e,t,a,r||null,!0):n===1&&t!==null?Su(e,t,a,r||null,!0):n===2?ST(e,a,o):n===3&&e.destroyNode(a),s!=null&&xT(e,n,s,t,r)}}function wy(n,e,t){return n.createElement(e,t)}function lT(n,e){let t=e[Ki];Cl(n,e,t,2,null,null),e[Or]=null,e[Nn]=null}function cT(n,e,t,i,r,s){i[Or]=r,i[Nn]=e,Cl(n,i,t,1,r,s)}function uT(n,e){Cl(n,e,e[Ki],2,null,null)}function dT(n){let e=n[hl];if(!e)return Uf(n[Ye],n);for(;e;){let t=null;if(Us(e))t=e[hl];else{let i=e[mn];i&&(t=i)}if(!t){for(;e&&!e[Mn]&&e!==n;)Us(e)&&Uf(e[Ye],e),e=e[ei];e===null&&(e=n),Us(e)&&Uf(e[Ye],e),t=e&&e[Mn]}e=t}}function hT(n,e,t,i){let r=mn+i,s=t.length;i>0&&(t[r-1][Mn]=e),i<s-mn?(e[Mn]=t[r],ay(t,mn+i,e)):(t.push(e),e[Mn]=null),e[ei]=t;let o=e[Rp];o!==null&&t!==o&&fT(o,e);let a=e[Mp];a!==null&&a.insertView(n),kC(e),e[Ae]|=128}function fT(n,e){let t=n[vu],r=e[ei][ei][er];e[er]!==r&&(n[Ae]|=jo.HasTransplantedViews),t===null?n[vu]=[e]:t.push(e)}function Sy(n,e){let t=n[vu],i=t.indexOf(e),r=e[ei];t.splice(i,1)}function ap(n,e){if(n.length<=mn)return;let t=mn+e,i=n[t];if(i){let r=i[Rp];r!==null&&r!==n&&Sy(r,i),e>0&&(n[t-1][Mn]=i[Mn]);let s=bu(n,mn+e);lT(i[Ye],i);let o=s[Mp];o!==null&&o.detachView(s[Ye]),i[ei]=null,i[Mn]=null,i[Ae]&=-129}return i}function Dy(n,e){if(!(e[Ae]&256)){let t=e[Ki];t.destroyNode&&Cl(n,e,t,3,null,null),dT(e)}}function Uf(n,e){if(!(e[Ae]&256)){e[Ae]&=-129,e[Ae]|=256,e[$s]&&i_(e[$s]),mT(n,e),pT(n,e),e[Ye].type===1&&e[Ki].destroy();let t=e[Rp];if(t!==null&&Pn(e[ei])){t!==e[ei]&&Sy(t,e);let i=e[Mp];i!==null&&i.detachView(n)}oT(e)}}function pT(n,e){let t=n.cleanup,i=e[V_];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[V_]=null);let r=e[rs];if(r!==null){e[rs]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function mT(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Gs)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];ns(4,a,l);try{l.call(a)}finally{ns(5,a,l)}}else{ns(4,r,s);try{s.call(r)}finally{ns(5,r,s)}}}}}function gT(n,e,t){return vT(n,e.parent,t)}function vT(n,e,t){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return t[Or];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===Jn.None||s===Jn.Emulated)return null}return Fn(i,t)}}function Su(n,e,t,i,r){n.insertBefore(e,t,i,r)}function xy(n,e,t){n.appendChild(e,t)}function q_(n,e,t,i,r){i!==null?Su(n,e,t,i,r):xy(n,e,t)}function _T(n,e,t,i){n.removeChild(e,t,i)}function qp(n,e){return n.parentNode(e)}function CT(n,e){return n.nextSibling(e)}function yT(n,e,t){return ET(n,e,t)}function bT(n,e,t){return n.type&40?Fn(n,t):null}var ET=bT,X_;function wT(n,e,t,i){let r=gT(n,i,e),s=e[Ki],o=i.parent||e[Nn],a=yT(o,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)q_(s,r,t[l],a,!1);else q_(s,r,t,a,!1);X_!==void 0&&X_(s,i,e,t,r)}function du(n,e){if(e!==null){let t=e.type;if(t&3)return Fn(e,n);if(t&4)return lp(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return du(n,i);{let r=n[e.index];return Pn(r)?lp(-1,r):as(r)}}else{if(t&32)return Gp(e,n)()||as(n[e.index]);{let i=Ty(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Yp(n[er]);return du(r,i)}else return du(n,e.next)}}}return null}function Ty(n,e){if(e!==null){let i=n[er][Nn],r=e.projection;return i.projection[r]}return null}function lp(n,e){let t=mn+n+1;if(t<e.length){let i=e[t],r=i[Ye].firstChild;if(r!==null)return du(i,r)}return e[js]}function ST(n,e,t){let i=qp(n,e);i&&_T(n,i,e,t)}function Xp(n,e,t,i,r,s,o){for(;t!=null;){let a=i[t.index],l=t.type;if(o&&e===0&&(a&&qo(as(a),i),t.flags|=2),(t.flags&32)!==32)if(l&8)Xp(n,e,t.child,i,r,s,!1),Vo(e,n,r,a,s);else if(l&32){let u=Gp(t,i),h;for(;h=u();)Vo(e,n,r,h,s);Vo(e,n,r,a,s)}else l&16?DT(n,e,i,t,r,s):Vo(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Cl(n,e,t,i,r,s){Xp(t,i,n.firstChild,e,r,s,!1)}function DT(n,e,t,i,r,s){let o=t[er],l=o[Nn].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];Vo(e,n,r,h,s)}else{let u=l,h=o[ei];_y(i)&&(u.flags|=128),Xp(n,e,u,h,r,s,!0)}}function xT(n,e,t,i,r){let s=t[js],o=as(t);s!==o&&Vo(e,n,i,s,r);for(let a=mn;a<t.length;a++){let l=t[a];Cl(l[Ye],l,n,e,i,s)}}function TT(n,e,t){n.setAttribute(e,"style",t)}function Iy(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Oy(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&Qf(n,e,i),r!==null&&Iy(n,e,r),s!==null&&TT(n,e,s)}var IT="h",OT="b";var AT=(n,e,t)=>null;function Kp(n,e,t=!1){return AT(n,e,t)}var cp=class{},Du=class{};function RT(n){let e=Error(`No component factory found for ${Vi(n)}.`);return e[MT]=n,e}var MT="ngComponent";var up=class{resolveComponentFactory(e){throw RT(e)}},Bu=(()=>{let e=class e{};e.NULL=new up;let n=e;return n})();function PT(){return Qp(Ar(),Ii())}function Qp(n,e){return new Ks(Fn(n,e))}var Ks=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=PT;let n=e;return n})();var pl=class{};var NT=(()=>{let e=class e{};e.\u0275prov=fe({token:e,providedIn:"root",factory:()=>null});let n=e;return n})(),Xo=class{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}},FT=new Xo("17.0.7"),zf={};function xu(n,e,t,i,r=!1){for(;t!==null;){let s=e[t.index];s!==null&&i.push(as(s)),Pn(s)&&kT(s,i);let o=t.type;if(o&8)xu(n,e,t.child,i);else if(o&32){let a=Gp(t,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=Ty(e,t);if(Array.isArray(a))i.push(...a);else{let l=Yp(e[er]);xu(l[Ye],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function kT(n,e){for(let t=mn;t<n.length;t++){let i=n[t],r=i[Ye].firstChild;r!==null&&xu(i[Ye],i,r,e)}n[js]!==n[Or]&&e.push(n[js])}var Ay=[];function LT(n){return n[$s]??VT(n)}function VT(n){let e=Ay.pop()??Object.create(BT);return e.lView=n,e}function HT(n){n.lView[$s]!==n&&(n.lView=null,Ay.push(n))}var BT=me(D({},Jv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Lu(n.lView)},consumerOnSignalRead(){this.lView[$s]=this}}),UT="ngOriginalError";function $f(n){return n[UT]}var tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&$f(e);for(;t&&$f(t);)t=$f(t);return t||null}},Ry=new Se("",{providedIn:"root",factory:()=>le(tr).handleError.bind(void 0)});var My=!1,zT=new Se("",{providedIn:"root",factory:()=>My});var Uu={};function zu(n){Py(cs(),Ii(),YC()+n,!1)}function Py(n,e,t,i){if(!i)if((e[Ae]&3)===3){let s=n.preOrderCheckHooks;s!==null&&lu(e,s,t)}else{let s=n.preOrderHooks;s!==null&&cu(e,s,0,t)}Ws(t)}function vi(n,e=Be.Default){let t=Ii();if(t===null)return ce(n,e);let i=Ar();return ny(i,t,Ti(n),e)}function Ny(){let n="invalid";throw new Error(n)}function $T(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ws(~r);else{let s=r,o=t[++i],a=t[++i];hx(o,s);let l=e[s];a(2,l)}}}finally{Ws(-1)}}function Zp(n,e,t,i,r,s,o,a,l,u,h){let f=e.blueprint.slice();return f[Or]=r,f[Ae]=i|4|128|8,(u!==null||n&&n[Ae]&2048)&&(f[Ae]|=2048),NC(f),f[ei]=f[vl]=n,f[os]=t,f[dl]=o||n&&n[dl],f[Ki]=a||n&&n[Ki],f[zo]=l||n&&n[zo]||null,f[Nn]=s,f[Nu]=rT(),f[mu]=h,f[TC]=u,f[er]=e.type==2?n[er]:f,f}function Fy(n,e,t,i,r){let s=n.data[e];if(s===null)s=jT(n,e,t,i,r),dx()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=lx();s.injectorIndex=o===null?-1:o.injectorIndex}return Np(s,!0),s}function jT(n,e,t,i,r){let s=HC(),o=BC(),a=o?s:s&&s.parent,l=n.data[e]=QT(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function ky(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Ly(n,e,t,i,r){let s=YC(),o=i&2;try{Ws(-1),o&&e.length>$o&&Py(n,e,$o,!1),ns(o?2:0,r),t(i,r)}finally{Ws(s),ns(o?3:1,r)}}function Vy(n,e,t){if(OC(e)){let i=qi(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{qi(i)}}}function WT(n,e,t){VC()&&(rI(n,e,t,Fn(t,e)),(t.flags&64)===64&&$y(n,e,t))}function GT(n,e,t=Fn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function Hy(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=By(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function By(n,e,t,i,r,s,o,a,l,u,h){let f=$o+i,m=f+r,v=YT(f,m),w=typeof u=="function"?u():u;return v[Ye]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:h}}function YT(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Uu);return t}function qT(n,e,t,i){let s=i.get(zT,My)||t===Jn.ShadowDom,o=n.selectRootElement(e,s);return XT(o),o}function XT(n){KT(n)}var KT=n=>null;function QT(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return sx()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function K_(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=t===null?{}:t;let s=n[r];i===null?Q_(t,e,r,s):i.hasOwnProperty(r)&&Q_(t,e,i[r],s)}return t}function Q_(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function ZT(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],l=null,u=null;for(let h=i;h<r;h++){let f=s[h],m=t?t.get(f):null,v=m?m.inputs:null,w=m?m.outputs:null;l=K_(f.inputs,h,l,v),u=K_(f.outputs,h,u,w);let S=l!==null&&o!==null&&!yC(e)?mI(l,h,o):null;a.push(S)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function JT(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Uy(n,e,t,i,r,s,o,a){let l=Fn(e,t),u=e.inputs,h;!a&&u!=null&&(h=u[i])?(em(n,t,h,i,r),Fu(e)&&eI(t,e.index)):e.type&3?(i=JT(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)):e.type&12}function eI(n,e){let t=ea(e,n);t[Ae]&16||(t[Ae]|=64)}function tI(n,e,t,i){if(VC()){let r=i===null?null:{"":-1},s=oI(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&zy(n,e,t,o,r,a),r&&aI(t,i,r)}t.mergedAttrs=Ap(t.mergedAttrs,t.attrs)}function zy(n,e,t,i,r,s){for(let u=0;u<i.length;u++)tp(yu(t,e),n,i[u].type);cI(t,n.data.length,i.length);for(let u=0;u<i.length;u++){let h=i[u];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=ky(n,e,i.length,null);for(let u=0;u<i.length;u++){let h=i[u];t.mergedAttrs=Ap(t.mergedAttrs,h.hostAttrs),uI(n,t,e,l,h),lI(l,h,r),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let f=h.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}ZT(n,t,s)}function iI(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;nI(o)!=a&&o.push(a),o.push(t,i,s)}}function nI(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function rI(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;Fu(t)&&dI(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||yu(t,e),qo(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let l=n.data[a],u=Go(e,n,a,t);if(qo(u,e),o!==null&&pI(e,a-r,u,l,t,o),Jo(l)){let h=ea(t.index,e);h[os]=Go(e,n,a,t)}}}function $y(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=fx();try{Ws(s);for(let a=i;a<r;a++){let l=n.data[a],u=e[a];Jf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&sI(l,u)}}finally{Ws(-1),Jf(o)}}function sI(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function oI(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(LD(e,o.selectors,!1))if(i||(i=[]),Jo(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let l=a.length;dp(n,e,l)}else i.unshift(o),dp(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function dp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function aI(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new ye(-301,!1);i.push(e[r],s)}}}function lI(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Jo(e)&&(t[""]=n)}}function cI(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function uI(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=Wo(r.type,!0)),o=new Gs(s,Jo(r),vi);n.blueprint[i]=o,t[i]=o,iI(n,e,i,ky(n,t,r.hostVars,Uu),r)}function dI(n,e,t){let i=Fn(e,n),r=Hy(t),s=n[dl].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Jp(n,Zp(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function hI(n,e,t,i,r,s){let o=Fn(n,e);fI(e[Ki],o,s,n.value,t,i,r)}function fI(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?Ip(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function pI(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],h=o[a++];jy(i,t,l,u,h)}}function jy(n,e,t,i,r){let s=qi(null);try{let o=n.inputTransforms;o!==null&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),n.setInput!==null?n.setInput(e,r,t,i):e[i]=r}finally{qi(s)}}function mI(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}return i}function gI(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Wy(n,e){let t=n.contentQueries;if(t!==null){let i=qi(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];UC(s),a.contentQueries(2,e[o],o)}}}finally{qi(i)}}}function Jp(n,e){return n[hl]?n[H_][Mn]=e:n[hl]=e,n[H_]=e,e}function hp(n,e,t){UC(0);let i=qi(null);try{e(n,t)}finally{qi(i)}}function vI(n,e){let t=n[zo],i=t?t.get(tr,null):null;i&&i.handleError(e)}function em(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=e[o],u=n.data[o];jy(u,l,i,a,r)}}var _I=100;function CI(n,e=!0){let t=n[dl],i=t.rendererFactory,r=t.afterRenderEventManager,s=!1;s||(i.begin?.(),r?.begin());try{yI(n)}catch(o){throw e&&vI(n,o),o}finally{s||(i.end?.(),t.inlineEffectRunner?.flush(),r?.end())}}function yI(n){fp(n,0);let e=0;for(;FC(n);){if(e===_I)throw new ye(103,!1);e++,fp(n,1)}}function bI(n,e,t,i){let r=e[Ae];if((r&256)===256)return;let s=!1;!s&&e[dl].inlineEffectRunner?.flush(),kp(e);let o=null,a=null;!s&&EI(n)&&(a=LT(e),o=e_(a));try{NC(e),ux(n.bindingStartIndex),t!==null&&Ly(n,e,t,2,i);let l=(r&3)===3;if(!s)if(l){let f=n.preOrderCheckHooks;f!==null&&lu(e,f,null)}else{let f=n.preOrderHooks;f!==null&&cu(e,f,0,null),Vf(e,0)}if(wI(e),Gy(e,0),n.contentQueries!==null&&Wy(n,e),!s)if(l){let f=n.contentCheckHooks;f!==null&&lu(e,f)}else{let f=n.contentHooks;f!==null&&cu(e,f,1),Vf(e,1)}$T(n,e);let u=n.components;u!==null&&qy(e,u,0);let h=n.viewQuery;if(h!==null&&hp(2,h,i),!s)if(l){let f=n.viewCheckHooks;f!==null&&lu(e,f)}else{let f=n.viewHooks;f!==null&&cu(e,f,2),Vf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Lf]){for(let f of e[Lf])f();e[Lf]=null}s||(e[Ae]&=-73)}catch(l){throw Lu(e),l}finally{a!==null&&(t_(a,o),HT(a)),Lp()}}function EI(n){return n.type!==2}function Gy(n,e){for(let t=yy(n);t!==null;t=by(t)){t[Ae]&=~jo.HasChildViewsToRefresh;for(let i=mn;i<t.length;i++){let r=t[i];Yy(r,e)}}}function wI(n){for(let e=yy(n);e!==null;e=by(e)){if(!(e[Ae]&jo.HasTransplantedViews))continue;let t=e[vu];for(let i=0;i<t.length;i++){let r=t[i],s=r[ei];ex(r)}}}function SI(n,e,t){let i=ea(e,n);Yy(i,t)}function Yy(n,e){Pp(n)&&fp(n,e)}function fp(n,e){let i=n[Ye],r=n[Ae],s=n[$s],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&ff(s)),s&&(s.dirty=!1),n[Ae]&=-9217,o)bI(i,n,i.template,n[os]);else if(r&8192){Gy(n,1);let a=i.components;a!==null&&qy(n,a,1)}}function qy(n,e,t){for(let i=0;i<e.length;i++)SI(n,e[i],t)}function Xy(n){for(;n;){n[Ae]|=64;let e=Yp(n);if(YD(n)&&!e)return n;n=e}return null}var Ko=class{get rootNodes(){let e=this._lView,t=e[Ye];return xu(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[os]}set context(e){this._lView[os]=e}get destroyed(){return(this._lView[Ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ei];if(Pn(e)){let t=e[gu],i=t?t.indexOf(this):-1;i>-1&&(ap(e,i),bu(t,i))}this._attachedToViewContainer=!1}Dy(this._lView[Ye],this._lView)}onDestroy(e){LC(this._lView,e)}markForCheck(){Xy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ae]&=-129}reattach(){kC(this._lView),this._lView[Ae]|=128}detectChanges(){this._lView[Ae]|=1024,CI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,uT(this._lView[Ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=e}},Qs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DI;let n=e;return n})();function DI(n){return xI(Ar(),Ii(),(n&16)===16)}function xI(n,e,t){if(Fu(n)&&!t){let i=ea(n.index,e);return new Ko(i,i)}else if(n.type&47){let i=e[er];return new Ko(i,e)}return null}var Ky=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TI,e.__NG_ENV_ID__=i=>i;let n=e;return n})(),pp=class extends Ky{constructor(e){super(),this._lView=e}onDestroy(e){return LC(this._lView,e),()=>tx(this._lView,e)}};function TI(){return new pp(Ii())}var Z_=new Set;function tm(n){Z_.has(n)||(Z_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var mp=class extends Jt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=jf(s),r&&(r=jf(r)),o&&(o=jf(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof ri&&e.add(a),a}};function jf(n){return e=>{setTimeout(n,void 0,e)}}var Ot=mp;function J_(...n){}function II(){let n=typeof Xi.requestAnimationFrame=="function",e=Xi[n?"requestAnimationFrame":"setTimeout"],t=Xi[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var _t=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ot(!1),this.onMicrotaskEmpty=new Ot(!1),this.onStable=new Ot(!1),this.onError=new Ot(!1),typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=II().nativeRequestAnimationFrame,RI(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ye(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,OI,J_,J_);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},OI={};function im(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function AI(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Xi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,gp(n),n.isCheckStableRunning=!0,im(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),gp(n))}function RI(n){let e=()=>{AI(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(MI(a))return t.invokeTask(r,s,o,a);try{return eC(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),tC(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return eC(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),tC(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,gp(n),im(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function gp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function eC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tC(n){n._nesting--,im(n)}var vp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ot,this.onMicrotaskEmpty=new Ot,this.onStable=new Ot,this.onError=new Ot}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}},Qy=new Se("",{providedIn:"root",factory:Zy});function Zy(){let n=le(_t),e=!0,t=new Le(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),i=new Le(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});let o=n.onUnstable.subscribe(()=>{_t.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}});return Af(t,i.pipe(sl()))}function MI(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function PI(n="zone.js",e){return n==="noop"?new vp:n==="zone.js"?new _t(e):n}var Ho=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ho||{}),NI={destroy(){}};function nm(n,e){!e&&Jx(nm);let t=e?.injector??le(kn);if(!iT(t))return NI;tm("NgAfterNextRender");let i=t.get(Jy),r=i.handler??=new Cp,s=e?.phase??Ho.MixedReadWrite,o=()=>{r.unregister(l),a()},a=t.get(Ky).onDestroy(o),l=new _p(t,s,()=>{o(),n()});return r.register(l),{destroy:o}}var _p=class{constructor(e,t,i){this.phase=t,this.callbackFn=i,this.zone=e.get(_t),this.errorHandler=e.get(tr,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Cp=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ho.EarlyRead]:new Set,[Ho.Write]:new Set,[Ho.MixedReadWrite]:new Set,[Ho.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new ye(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Jy=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let i of this.internalCallbacks)i();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=fe({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function FI(n,e){let t=ea(e,n),i=t[Ye];kI(i,t);let r=t[Or];r!==null&&t[mu]===null&&(t[mu]=Kp(r,t[zo])),eb(i,t,t[os])}function kI(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function eb(n,e,t){kp(e);try{let i=n.viewQuery;i!==null&&hp(1,i,t);let r=n.template;r!==null&&Ly(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Wy(n,e),n.staticViewQueries&&hp(2,n.viewQuery,t);let s=n.components;s!==null&&LI(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ae]&=-5,Lp()}}function LI(n,e){for(let t=0;t<e.length;t++)FI(n,e[t])}function yp(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=I_(r,a);else if(s==2){let l=a,u=e[++o];i=I_(i,l+": "+u+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Tu=class extends Bu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ss(e);return new Qo(t,this.ngModule)}};function iC(n){let e=[];for(let t in n)if(n.hasOwnProperty(t)){let i=n[t];e.push({propName:i,templateName:t})}return e}function VI(n){let e=n.toLowerCase();return e==="svg"?QD:e==="math"?ZD:null}var bp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Mu(i);let r=this.injector.get(e,zf,i);return r!==zf||t===zf?r:this.parentInjector.get(e,t,i)}},Qo=class extends Du{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=iC(e.inputs);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return iC(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=UD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){r=r||this.ngModule;let s=r instanceof Qi?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new bp(e,s):e,a=o.get(pl,null);if(a===null)throw new ye(407,!1);let l=o.get(NT,null),u=o.get(Jy,null),h={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u},f=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=i?qT(f,i,this.componentDef.encapsulation,o):wy(f,m,VI(m)),w=4608,S=this.componentDef.onPush?576:528,P=this.componentDef.signals?w:S,R=null;v!==null&&(R=Kp(v,o,!0));let M=By(0,null,null,1,0,null,null,null,null,null,null),x=Zp(null,M,null,P,null,null,h,f,o,null,R);kp(x);let L,z;try{let Y=this.componentDef,U,pe=null;Y.findHostDirectiveDefs?(U=[],pe=new Map,Y.findHostDirectiveDefs(Y,U,pe),U.push(Y)):U=[Y];let Z=HI(x,v),We=BI(Z,v,Y,U,x,h,f);z=PC(M,$o),v&&$I(f,Y,v,i),t!==void 0&&jI(z,this.ngContentSelectors,t),L=zI(We,Y,U,pe,x,[WI]),eb(M,x,null)}finally{Lp()}return new Ep(this.componentType,L,Qp(z,x),x,z)}},Ep=class extends cp{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ko(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;em(s[Ye],s,r,e,t),this.previousInputValues.set(e,t);let o=ea(this._tNode.index,s);Xy(o)}}get injector(){return new zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function HI(n,e){let t=n[Ye],i=$o;return n[i]=e,Fy(t,i,2,"#host",null)}function BI(n,e,t,i,r,s,o){let a=r[Ye];UI(i,n,e,o);let l=null;e!==null&&(l=Kp(e,r[zo]));let u=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let f=Zp(r,Hy(t),null,h,r[n.index],n,s,u,null,null,l);return a.firstCreatePass&&dp(a,n,i.length-1),Jp(r,f),r[n.index]=f}function UI(n,e,t,i){for(let r of n)e.mergedAttrs=Ap(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(yp(e,e.mergedAttrs,!0),t!==null&&Oy(i,t,e))}function zI(n,e,t,i,r,s){let o=Ar(),a=r[Ye],l=Fn(o,r);zy(a,r,o,t,null,i);for(let h=0;h<t.length;h++){let f=o.directiveStart+h,m=Go(r,a,f,o);qo(m,r)}$y(a,r,o),l&&qo(l,r);let u=Go(r,a,o.directiveStart+o.componentOffset,o);if(n[os]=r[os]=u,s!==null)for(let h of s)h(u,e);return Vy(a,o,n),u}function $I(n,e,t,i){if(i)Qf(n,t,["ng-version",FT.full]);else{let{attrs:r,classes:s}=zD(e.selectors[0]);r&&Qf(n,t,r),s&&s.length>0&&Iy(n,t,s.join(" "))}}function jI(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function WI(){let n=Ar();XC(Ii()[Ye],n)}function rm(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function $u(n,e,t,i){let r=Ii(),s=Fp();if(rm(r,s,e)){let o=cs(),a=Vp();hI(a,r,n,e,t,i)}return $u}function GI(n,e,t,i){return rm(n,Fp(),t)?e+Ip(t)+i:Uu}function sm(n,e,t){let i=Ii(),r=Fp();if(rm(i,r,e)){let s=cs(),o=Vp();Uy(s,o,i,n,e,i[Ki],t,!1)}return sm}function nC(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";em(n,t,s[o],o,i)}var nV=new RegExp(`^(\\d+)*(${OT}|${IT})*(.*)`);var YI=(n,e)=>null;function rC(n,e){return YI(n,e)}function sC(n,e){return!e||e.firstChild===null||_y(n)}function qI(n,e,t,i=!0){let r=e[Ye];if(hT(r,e,n,t),i){let o=lp(t,n),a=e[Ki],l=qp(a,n[js]);l!==null&&cT(r,n[Nn],a,e,l,o)}let s=e[mu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}var ta=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XI;let n=e;return n})();function XI(){let n=Ar();return QI(n,Ii())}var KI=ta,tb=class extends KI{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Qp(this._hostTNode,this._hostLView)}get injector(){return new zs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hp(this._hostTNode,this._hostLView);if(QC(e)){let t=Cu(e,this._hostLView),i=_u(e),r=t[Ye].data[i+8];return new zs(r,t)}else return new zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-mn}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=rC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,sC(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!Nx(e),a;if(o)a=t;else{let w=t||{};a=w.index,i=w.injector,r=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let l=o?e:new Qo(ss(e)),u=i||this.parentInjector;if(!s&&l.ngModule==null){let S=(o?u:this.parentInjector).get(Qi,null);S&&(s=S)}let h=ss(l.componentType??{}),f=rC(this._lContainer,h?.id??null),m=f?.firstChild??null,v=l.create(u,r,m,s);return this.insertImpl(v.hostView,a,sC(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(JD(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[ei],u=new tb(l,l[Nn],l[ei]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return qI(o,r,s,i),e.attachToViewContainerRef(),ay(Wf(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=ap(this._lContainer,t);i&&(bu(Wf(this._lContainer),t),Dy(i[Ye],i))}detach(e){let t=this._adjustIndex(e,-1),i=ap(this._lContainer,t);return i&&bu(Wf(this._lContainer),t)!=null?new Ko(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function oC(n){return n[gu]}function Wf(n){return n[gu]||(n[gu]=[])}function QI(n,e){let t,i=e[n.index];return Pn(i)?t=i:(t=gI(i,e,null,n),e[n.index]=t,Jp(e,t)),JI(t,e,n,i),new tb(t,n,e)}function ZI(n,e){let t=n[Ki],i=t.createComment(""),r=Fn(e,n),s=qp(t,r);return Su(t,s,i,CT(t,r),!1),i}var JI=e0;function e0(n,e,t,i){if(n[js])return;let r;t.type&8?r=as(i):r=ZI(e,t),n[js]=r}function t0(n,e,t,i,r,s){let o=e.consts,a=U_(o,r),l=Fy(e,n,2,i,a);return tI(e,t,l,U_(o,s)),l.attrs!==null&&yp(l,l.attrs,!1),l.mergedAttrs!==null&&yp(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function ia(n,e,t,i){let r=Ii(),s=cs(),o=$o+n,a=r[Ki],l=s.firstCreatePass?t0(o,s,r,e,t,i):s.data[o],u=i0(s,r,l,a,e,n);r[o]=u;let h=GD(l);return Np(l,!0),Oy(a,u,l),(l.flags&32)!==32&&gx()&&wT(s,r,u,l),ix()===0&&qo(u,r),nx(),h&&(WT(s,r,l),Vy(s,l,r)),i!==null&&GT(r,l),ia}function na(){let n=Ar();BC()?cx():(n=n.parent,Np(n,!1));let e=n;ox(e)&&ax(),rx();let t=cs();return t.firstCreatePass&&(XC(t,n),OC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&bx(e)&&nC(t,e,Ii(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ex(e)&&nC(t,e,Ii(),e.stylesWithoutHost,!1),na}function ds(n,e,t,i){return ia(n,e,t,i),na(),ds}var i0=(n,e,t,i,r,s)=>(vx(!0),wy(i,r,mx()));var Iu="en-US";var n0=Iu;function r0(n){_D(n,"Expected localeId to be defined"),typeof n=="string"&&(n0=n.toLowerCase().replace(/_/g,"-"))}function yl(n){return!!n&&typeof n.then=="function"}function ib(n){return!!n&&typeof n.subscribe=="function"}function om(n,e,t,i,r){let s=Ii(),o=GI(s,e,t,i);if(o!==Uu){let a=cs(),l=Vp();Uy(a,l,s,n,o,s[Ki],r,!1)}return om}function s0(n,e,t){let i=cs();if(i.firstCreatePass){let r=Jo(n);wp(t,i.data,i.blueprint,r,!0),wp(e,i.data,i.blueprint,r,!1)}}function wp(n,e,t,i,r){if(n=Ti(n),Array.isArray(n))for(let s=0;s<n.length;s++)wp(n[s],e,t,i,r);else{let s=cs(),o=Ii(),a=Ar(),l=Yo(n)?n:Ti(n.provide),u=py(n),h=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Yo(n)||!n.multi){let v=new Gs(u,r,vi),w=Yf(l,e,r?h:h+m,f);w===-1?(tp(yu(a,o),s,l),Gf(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[w]=v,o[w]=v)}else{let v=Yf(l,e,h+m,f),w=Yf(l,e,h,h+m),S=v>=0&&t[v],P=w>=0&&t[w];if(r&&!P||!r&&!S){tp(yu(a,o),s,l);let R=l0(r?a0:o0,t.length,r,i,u);!r&&P&&(t[w].providerFactory=R),Gf(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(R),o.push(R)}else{let R=nb(t[r?w:v],u,!r&&i);Gf(s,n,v>-1?v:w,R)}!r&&i&&P&&t[w].componentProviders++}}}function Gf(n,e,t,i){let r=Yo(e),s=Gx(e);if(r||s){let l=(s?Ti(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[i,l]):u[h+1].push(i,l)}else u.push(t,l)}}}function nb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Yf(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function o0(n,e,t,i){return Sp(this.multi,[])}function a0(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Go(t,t[Ye],this.providerFactory.index,i);s=a.slice(0,o),Sp(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Sp(r,s);return s}function Sp(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function l0(n,e,t,i,r){let s=new Gs(n,t,vi);return s.multi=[],s.index=e,s.componentProviders=0,nb(s,r,i&&!t),s}function rb(n,e=[]){return t=>{t.providersResolver=(i,r)=>s0(i,r?r(n):n,e)}}var ls=class{},ml=class{};var Ou=class extends ls{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tu(this);let r=SC(e);this._bootstrapComponents=vy(r.bootstrap),this._r3Injector=my(e,t,[{provide:ls,useValue:this},{provide:Bu,useValue:this.componentFactoryResolver},...i],Vi(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Au=class extends ml{constructor(e){super(),this.moduleType=e}create(e){return new Ou(this.moduleType,e,[])}};function c0(n,e,t){return new Ou(n,e,t)}var Dp=class extends ls{constructor(e){super(),this.componentFactoryResolver=new Tu(this),this.instance=null;let t=new fl([...e.providers,{provide:ls,useValue:this},{provide:Bu,useValue:this.componentFactoryResolver}],e.parent||$p(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ju(n,e,t=null){return new Dp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var u0=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=dy(!1,i.type),s=r.length>0?ju([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=fe({token:e,providedIn:"environment",factory:()=>new e(ce(Qi))});let n=e;return n})();function sb(n){tm("NgStandalone"),n.getStandaloneInjector=e=>e.get(u0).getOrCreateStandaloneInjector(n)}var au=null;function d0(n){au!==null&&(n.defaultEncapsulation!==au.defaultEncapsulation||n.preserveWhitespaces!==au.preserveWhitespaces)||(au=n)}var Wu=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),am=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ai(!1)}add(){this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Gu=(()=>{let e=class e{compileModuleSync(i){return new Au(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=SC(i),o=vy(s.declarations).reduce((a,l)=>{let u=ss(l);return u&&a.push(new Qo(u)),a},[]);return new xp(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),h0=new Se("compilerOptions");var lm=new Se(""),bl=new Se(""),Yu=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cm||(f0(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}};e.\u0275fac=function(r){return new(r||e)(ce(_t),ce(qu),ce(bl))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),qu=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return cm?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function f0(n){cm=n}var cm,Xu=new Se("Application Initializer"),ob=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=le(Xu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(yl(o))i.push(o);else if(ib(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),um=new Se("appBootstrapListener");function p0(n,e,t){let i=new Au(t);return Promise.resolve(i)}function m0(){n_(()=>{throw new ye(600,!1)})}function g0(n){return n.isBoundToModule}function v0(n,e,t){try{let i=t();return yl(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}function ab(n,e){return Array.isArray(e)?e.reduce(ab,n):D(D({},n),e)}var ir=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=le(Ry),this.zoneIsStable=le(Qy),this.componentTypes=[],this.components=[],this.isStable=le(am).hasPendingTasks.pipe($t(i=>i?he(!1):this.zoneIsStable),Mf()),this._injector=le(Qi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof Du;if(!this._injector.get(ob).done){let w="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&wC(i)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new ye(405,!1)}let a;s?a=i:a=this._injector.get(Bu).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=g0(a)?void 0:this._injector.get(ls),u=r||a.selector,h=a.create(kn.NULL,[],u,l),f=h.location.nativeElement,m=h.injector.get(lm,null);return m?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),hu(this.components,h),m?.unregisterApplication(f)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new ye(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;hu(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(um,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>hu(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ye(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function aC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var _0=(()=>{let e=class e{constructor(){this.zone=le(_t),this.applicationRef=le(ir)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function C0(n){return[{provide:_t,useFactory:n},{provide:_l,multi:!0,useFactory:()=>{let e=le(_0,{optional:!0});return()=>e.initialize()}},{provide:Ry,useFactory:y0},{provide:Qy,useFactory:Zy}]}function y0(){let n=le(_t),e=le(tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}function b0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}function E0(){return typeof $localize<"u"&&$localize.locale||Iu}var dm=new Se("LocaleId",{providedIn:"root",factory:()=>le(dm,Be.Optional|Be.SkipSelf)||E0()});var lb=new Se("PlatformDestroyListeners"),cb=(()=>{let e=class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){let s=PI(r?.ngZone,b0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return s.run(()=>{let o=c0(i.moduleType,this.injector,C0(()=>s)),a=o.injector.get(tr,null);return s.runOutsideAngular(()=>{let l=s.onError.subscribe({next:u=>{a.handleError(u)}});o.onDestroy(()=>{hu(this._modules,o),l.unsubscribe()})}),v0(a,s,()=>{let l=o.injector.get(ob);return l.runInitializers(),l.donePromise.then(()=>{let u=o.injector.get(dm,Iu);return r0(u||Iu),this._moduleDoBootstrap(o),o})})})}bootstrapModule(i,r=[]){let s=ab({},r);return p0(this.injector,s,i).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(i){let r=i.injector.get(ir);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(s=>r.bootstrap(s));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(r);else throw new ye(-403,!1);this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ye(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let i=this._injector.get(lb,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(r){return new(r||e)(ce(kn))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),ll=null,ub=new Se("AllowMultipleToken");function w0(n){if(ll&&!ll.get(ub,!1))throw new ye(400,!1);m0(),ll=n;let e=n.get(cb);return x0(n),e}function hm(n,e,t=[]){let i=`Platform: ${e}`,r=new Se(i);return(s=[])=>{let o=db();if(!o||o.injector.get(ub,!1)){let a=[...t,...s,{provide:r,useValue:!0}];n?n(a):w0(S0(a,i))}return D0(r)}}function S0(n=[],e){return kn.create({name:e,providers:[{provide:Vu,useValue:"platform"},{provide:lb,useValue:new Set([()=>ll=null])},...n]})}function D0(n){let e=db();if(!e)throw new ye(401,!1);return e}function db(){return ll?.get(cb)??null}function x0(n){n.get(jp,null)?.forEach(t=>t())}var hb=hm(null,"core",[]),fb=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(ce(ir))},e.\u0275mod=Ai({type:e}),e.\u0275inj=Oi({});let n=e;return n})();function pb(n){let e=ss(n);if(!e)return null;let t=new Qo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var fm=null;function Zs(){return fm}function _b(n){fm||(fm=n)}var Ku=class{},Ri=new Se("DocumentToken"),mm=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>le(M0))(),providedIn:"platform"});let n=e;return n})(),Cb=new Se("Location Initialized"),M0=(()=>{let e=class e extends mm{constructor(){super(),this._doc=le(Ri),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zs().getBaseHref(this._doc)}onPopState(i){let r=Zs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Zs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let n=e;return n})();function gm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function mb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function Rr(n){return n&&n[0]!=="?"?"?"+n:n}var Js=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>le(vm))(),providedIn:"root"});let n=e;return n})(),yb=new Se("appBaseHref"),vm=(()=>{let e=class e extends Js{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??le(Ri).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return gm(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Rr(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(ce(mm),ce(yb,8))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),bb=(()=>{let e=class e extends Js{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return r==null&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=gm(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(ce(mm),ce(yb,8))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),ra=(()=>{let e=class e{constructor(i){this._subject=new Ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=F0(mb(gb(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Rr(r))}normalize(i){return e.stripTrailingSlash(N0(this._basePath,gb(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Rr(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Rr(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=Rr,e.joinWithSlash=gm,e.stripTrailingSlash=mb,e.\u0275fac=function(r){return new(r||e)(ce(Js))},e.\u0275prov=fe({token:e,factory:()=>P0(),providedIn:"root"});let n=e;return n})();function P0(){return new ra(ce(Js))}function N0(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function gb(n){return n.replace(/\/index.html$/,"")}function F0(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Eb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Zu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ai({type:e}),e.\u0275inj=Oi({});let n=e;return n})(),wb="browser",k0="server";function _m(n){return n===k0}var Sb=(()=>{let e=class e{};e.\u0275prov=fe({token:e,providedIn:"root",factory:()=>new pm(ce(Ri),window)});let n=e;return n})(),pm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let t=L0(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function L0(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}var Qu=class{};var bm=class extends Ku{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Em=class n extends bm{static makeCurrent(){_b(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=H0();return t==null?null:B0(t)}resetBaseElement(){El=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Eb(document.cookie,e)}},El=null;function H0(){return El=El||document.querySelector("base"),El?El.getAttribute("href"):null}function B0(n){return new URL(n,document.baseURI).pathname}var wm=class{addToWindow(e){Xi.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new ye(5103,!1);return s},Xi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Xi.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Xi.getAllAngularTestabilities(),s=r.length,o=!1,a=function(l){o=o||l,s--,s==0&&i(o)};r.forEach(l=>{l.whenStable(a)})};Xi.frameworkStabilizers||(Xi.frameworkStabilizers=[]),Xi.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?Zs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},U0=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),Sm=new Se("EventManagerPlugins"),Ib=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new ye(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(ce(Sm),ce(_t))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),Ju=class{constructor(e){this._doc=e}},Cm="ng-app-id",Ob=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_m(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Cm}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Cm),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Cm,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(ce(Ri),ce(Hu),ce(Wp,8),ce(qs))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),ym={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xm=/%COMP%/g,Ab="%COMP%",z0=`_nghost-${Ab}`,$0=`_ngcontent-${Ab}`,j0=!0,W0=new Se("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>j0});function G0(n){return $0.replace(xm,n)}function Y0(n){return z0.replace(xm,n)}function Rb(n,e){return e.map(t=>t.replace(xm,n))}var Db=(()=>{let e=class e{constructor(i,r,s,o,a,l,u,h=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=_m(l),this.defaultRenderer=new wl(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jn.ShadowDom&&(r=me(D({},r),{encapsulation:Jn.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof ed?s.applyToHost(i):s instanceof Sl&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Jn.Emulated:o=new ed(u,h,r,this.appId,f,a,l,m);break;case Jn.ShadowDom:return new Dm(u,h,i,r,a,l,this.nonce,m);default:o=new Sl(u,h,r,f,a,l,m);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(ce(Ib),ce(Ob),ce(Hu),ce(W0),ce(Ri),ce(qs),ce(_t),ce(Wp))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),wl=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ym[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xb(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(xb(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ye(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=ym[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=ym[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Xs.DashCase|Xs.Important)?e.style.setProperty(t,i,r&Xs.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Xs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Zs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function xb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Dm=class extends wl{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Rb(r.id,r.styles);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sl=class extends wl{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?Rb(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ed=class extends Sl{constructor(e,t,i,r,s,o,a,l){let u=r+"-"+i.id;super(e,t,i,s,o,a,l,u),this.contentAttr=G0(u),this.hostAttr=Y0(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},q0=(()=>{let e=class e extends Ju{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(ce(Ri))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),Tb=["alt","control","meta","shift"],X0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},K0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Q0=(()=>{let e=class e extends Ju{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zs().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),Tb.forEach(h=>{let f=r.indexOf(h);f>-1&&(r.splice(f,1),a+=h+".")}),a+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let s=X0[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Tb.forEach(a=>{if(a!==s){let l=K0[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(ce(Ri))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})();function Z0(){Em.makeCurrent()}function J0(){return new tr}function eO(){return gy(document),document}var tO=[{provide:qs,useValue:wb},{provide:jp,useValue:Z0,multi:!0},{provide:Ri,useFactory:eO,deps:[]}],Mb=hm(hb,"browser",tO),iO=new Se(""),nO=[{provide:bl,useClass:wm,deps:[]},{provide:lm,useClass:Yu,deps:[_t,qu,bl]},{provide:Yu,useClass:Yu,deps:[_t,qu,bl]}],rO=[{provide:Vu,useValue:"root"},{provide:tr,useFactory:J0,deps:[]},{provide:Sm,useClass:q0,multi:!0,deps:[Ri,_t,qs]},{provide:Sm,useClass:Q0,multi:!0,deps:[Ri]},Db,Ob,Ib,{provide:pl,useExisting:Db},{provide:Qu,useClass:U0,deps:[]},[]],Pb=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Hu,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(ce(iO,12))},e.\u0275mod=Ai({type:e}),e.\u0275inj=Oi({providers:[...rO,...nO],imports:[Zu,fb]});let n=e;return n})();function sO(){return new Tm(ce(Ri))}var Tm=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(ce(Ri))},e.\u0275prov=fe({token:e,factory:function(r){let s=null;return r?s=new r:s=sO(),s},providedIn:"root"});let n=e;return n})();var Ne="primary",Hl=Symbol("RouteTitle"),Mm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ca(n){return new Mm(n)}function oO(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function aO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nr(n[t],e[t]))return!1;return!0}function nr(n,e){let t=n?Pm(n):void 0,i=e?Pm(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!$b(n[r],e[r]))return!1;return!0}function Pm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $b(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function jb(n){return n.length>0?n[n.length-1]:null}function gs(n){return hn(n)?n:yl(n)?Nt(Promise.resolve(n)):he(n)}var lO={exact:Gb,subset:Yb},Wb={exact:cO,subset:uO,ignored:()=>!0};function Fb(n,e,t){return lO[t.paths](n.root,e.root,t.matrixParams)&&Wb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cO(n,e){return nr(n,e)}function Gb(n,e,t){if(!to(n.segments,e.segments)||!nd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Gb(n.children[i],e.children[i],t))return!1;return!0}function uO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$b(n[t],e[t]))}function Yb(n,e,t){return qb(n,e,e.segments,t)}function qb(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!to(r,t)||e.hasChildren()||!nd(r,t,i))}else if(n.segments.length===t.length){if(!to(n.segments,t)||!nd(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Yb(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!to(n.segments,r)||!nd(n.segments,r,i)||!n.children[Ne]?!1:qb(n.children[Ne],e,s,i)}}function nd(n,e,t){return e.every((i,r)=>Wb[t](n[r].parameters,i.parameters))}var fs=class{constructor(e=new rt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){return fO.serialize(this)}},rt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rd(this)}},eo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ca(this.parameters)),this._parameterMap}toString(){return Kb(this)}};function dO(n,e){return to(n,e)&&n.every((t,i)=>nr(t.parameters,e[i].parameters))}function to(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function hO(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Ne&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Ne&&(t=t.concat(e(r,i)))}),t}var Bl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>new Rl)(),providedIn:"root"});let n=e;return n})(),Rl=class{parse(e){let t=new Fm(e);return new fs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Dl(e.root,!0)}`,i=gO(e.queryParams),r=typeof e.fragment=="string"?`#${pO(e.fragment)}`:"";return`${t}${i}${r}`}},fO=new Rl;function rd(n){return n.segments.map(e=>Kb(e)).join("/")}function Dl(n,e){if(!n.hasChildren())return rd(n);if(e){let t=n.children[Ne]?Dl(n.children[Ne],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Ne&&i.push(`${r}:${Dl(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=hO(n,(i,r)=>r===Ne?[Dl(n.children[Ne],!1)]:[`${r}:${Dl(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ne]!=null?`${rd(n)}/${t[0]}`:`${rd(n)}/(${t.join("//")})`}}function Xb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function td(n){return Xb(n).replace(/%3B/gi,";")}function pO(n){return encodeURI(n)}function Nm(n){return Xb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sd(n){return decodeURIComponent(n)}function kb(n){return sd(n.replace(/\+/g,"%20"))}function Kb(n){return`${Nm(n.path)}${mO(n.parameters)}`}function mO(n){return Object.keys(n).map(e=>`;${Nm(e)}=${Nm(n[e])}`).join("")}function gO(n){let e=Object.keys(n).map(t=>{let i=n[t];return Array.isArray(i)?i.map(r=>`${td(t)}=${td(r)}`).join("&"):`${td(t)}=${td(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}var vO=/^[^\/()?;#]+/;function Im(n){let e=n.match(vO);return e?e[0]:""}var _O=/^[^\/()?;=#]+/;function CO(n){let e=n.match(_O);return e?e[0]:""}var yO=/^[^=?&#]+/;function bO(n){let e=n.match(yO);return e?e[0]:""}var EO=/^[^&#]+/;function wO(n){let e=n.match(EO);return e?e[0]:""}var Fm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ne]=new rt(e,t)),i}parseSegment(){let e=Im(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(e),new eo(sd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=CO(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Im(this.remaining);r&&(i=r,this.capture(i))}e[sd(t)]=sd(i)}parseQueryParam(e){let t=bO(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=wO(this.remaining);o&&(i=o,this.capture(i))}let r=kb(t),s=kb(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Im(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ye(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ne);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Ne]:new rt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ye(4011,!1)}};function Qb(n){return n.segments.length>0?new rt([],{[Ne]:n}):n}function Zb(n){let e={};for(let i of Object.keys(n.children)){let r=n.children[i],s=Zb(r);if(i===Ne&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new rt(n.segments,e);return SO(t)}function SO(n){if(n.numberOfChildren===1&&n.children[Ne]){let e=n.children[Ne];return new rt(n.segments.concat(e.segments),e.children)}return n}function ua(n){return n instanceof fs}function DO(n,e,t=null,i=null){let r=Jb(n);return eE(r,e,t,i)}function Jb(n){let e;function t(s){let o={};for(let l of s.children){let u=t(l);o[l.outlet]=u}let a=new rt(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=Qb(i);return e??r}function eE(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Om(r,r,r,t,i);let s=xO(e);if(s.toRoot())return Om(r,r,new rt([],{}),t,i);let o=TO(s,r,n),a=o.processChildren?Il(o.segmentGroup,o.index,s.commands):iE(o.segmentGroup,o.index,s.commands);return Om(r,o.segmentGroup,a,t,i)}function od(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ml(n){return typeof n=="object"&&n!=null&&n.outlets}function Om(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let o;n===e?o=t:o=tE(n,e,t);let a=Qb(Zb(o));return new fs(a,s,r)}function tE(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=tE(s,e,t)}),new rt(n.segments,i)}var ad=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&od(i[0]))throw new ye(4003,!1);let r=i.find(Ml);if(r&&r!==jb(i))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ad(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new ad(t,e,i)}var aa=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function TO(n,e,t){if(n.isAbsolute)return new aa(e,!0,0);if(!t)return new aa(e,!1,NaN);if(t.parent===null)return new aa(t,!0,0);let i=od(n.commands[0])?0:1,r=t.segments.length-1+i;return IO(t,r,n.numberOfDoubleDots)}function IO(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ye(4005,!1);r=i.segments.length}return new aa(i,!1,r-s)}function OO(n){return Ml(n[0])?n[0].outlets:{[Ne]:n}}function iE(n,e,t){if(n||(n=new rt([],{})),n.segments.length===0&&n.hasChildren())return Il(n,e,t);let i=AO(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new rt(n.segments.slice(0,i.pathIndex),{});return s.children[Ne]=new rt(n.segments.slice(i.pathIndex),n.children),Il(s,0,r)}else return i.match&&r.length===0?new rt(n.segments,{}):i.match&&!n.hasChildren()?km(n,e,t):i.match?Il(n,0,r):km(n,e,t)}function Il(n,e,t){if(t.length===0)return new rt(n.segments,{});{let i=OO(t),r={};if(Object.keys(i).some(s=>s!==Ne)&&n.children[Ne]&&n.numberOfChildren===1&&n.children[Ne].segments.length===0){let s=Il(n.children[Ne],e,t);return new rt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=iE(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new rt(n.segments,r)}}function AO(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(Ml(a))break;let l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!Vb(l,u,o))return s;i+=2}else{if(!Vb(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function km(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Ml(s)){let l=RO(s.outlets);return new rt(i,l)}if(r===0&&od(t[0])){let l=n.segments[e];i.push(new eo(l.path,Lb(t[0]))),r++;continue}let o=Ml(s)?s.outlets[Ne]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&od(a)?(i.push(new eo(o,Lb(a))),r+=2):(i.push(new eo(o,{})),r++)}return new rt(i,{})}function RO(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=km(new rt([],{}),0,i))}),e}function Lb(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Vb(n,e,t){return n==t.path&&nr(e,t.parameters)}var Ol="imperative",gn=class{constructor(e,t){this.id=e,this.url=t}},da=class extends gn{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mr=class extends gn{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ps=class extends gn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ms=class extends gn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}},Pl=class extends gn{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ld=class extends gn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class extends gn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class extends gn{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Hm=class extends gn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class extends gn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zm=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$m=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jm=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wm=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gm=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cd=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Nl=class{},Fl=class{constructor(e){this.url=e}};var Ym=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ul,this.attachRef=null}},Ul=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Ym,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ud=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=qm(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=qm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Xm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Xm(e,this._root).map(t=>t.value)}};function qm(n,e){if(n===e.value)return e;for(let t of e.children){let i=qm(n,t);if(i)return i}return null}function Xm(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Xm(n,t);if(i.length)return i.unshift(e),i}return[]}var Zi=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function oa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var dd=class extends ud{constructor(e,t){super(e),this.snapshot=t,sg(this,e)}toString(){return this.snapshot.toString()}};function nE(n,e){let t=MO(n,e),i=new ai([new eo("",{})]),r=new ai({}),s=new ai({}),o=new ai({}),a=new ai(""),l=new ha(i,r,o,a,s,Ne,e,t.root);return l.snapshot=t.root,new dd(new Zi(l,[]),t)}function MO(n,e){let t={},i={},r={},s="",o=new kl([],t,r,s,i,Ne,e,null,{});return new hd("",new Zi(o,[]))}var ha=class{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ge(u=>u[Hl]))??he(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ge(e=>ca(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ge(e=>ca(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rg(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:D(D({},e.params),n.params),data:D(D({},e.data),n.data),resolve:D(D(D(D({},n.data),e.data),r?.data),n._resolvedData)}:i={params:n.params,data:n.data,resolve:D(D({},n.data),n._resolvedData??{})},r&&sE(r)&&(i.resolve[Hl]=r.title),i}var kl=class{get title(){return this.data?.[Hl]}constructor(e,t,i,r,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ca(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},hd=class extends ud{constructor(e,t){super(t),this.url=e,sg(this,t)}toString(){return rE(this._root)}};function sg(n,e){e.value._routerState=n,e.children.forEach(t=>sg(n,t))}function rE(n){let e=n.children.length>0?` { ${n.children.map(rE).join(", ")} } `:"";return`${n.value}${e}`}function Am(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),nr(e.params,t.params)||n.paramsSubject.next(t.params),aO(e.url,t.url)||n.urlSubject.next(t.url),nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Km(n,e){let t=nr(n.params,e.params)&&dO(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Km(n.parent,e.parent))}function sE(n){return typeof n.title=="string"||n.title===null}var og=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ne,this.activateEvents=new Ot,this.deactivateEvents=new Ot,this.attachEvents=new Ot,this.detachEvents=new Ot,this.parentContexts=le(Ul),this.location=le(ta),this.changeDetector=le(Qs),this.environmentInjector=le(Qi),this.inputBinder=le(vd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Qm(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Pu({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ku]});let n=e;return n})(),Qm=class{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ha?this.route:e===Ul?this.childContexts:this.parent.get(e,t)}},vd=new Se(""),Hb=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=nl([r.queryParams,r.params,r.data]).pipe($t(([o,a,l],u)=>(l=D(D(D({},o),a),l),u===0?he(l):Promise.resolve(l)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=pb(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:l}of a.inputs)i.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})();function PO(n,e,t){let i=Ll(n,e._root,t?t._root:void 0);return new dd(i,e)}function Ll(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=NO(n,e,t);return new Zi(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ll(n,a)),o}}let i=FO(e.value),r=e.children.map(s=>Ll(n,s));return new Zi(i,r)}}function NO(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ll(n,i,r);return Ll(n,i)})}function FO(n){return new ha(new ai(n.url),new ai(n.params),new ai(n.queryParams),new ai(n.fragment),new ai(n.data),n.outlet,n.component,n)}var oE="ngNavigationCancelingError";function aE(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ua(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=lE(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function lE(n,e,t){let i=new Error("NavigationCancelingError: "+(n||""));return i[oE]=!0,i.cancellationCode=e,t&&(i.url=t),i}function kO(n){return cE(n)&&ua(n.url)}function cE(n){return n&&n[oE]}var LO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Zo({type:e,selectors:[["ng-component"]],standalone:!0,features:[sb],decls:1,vars:0,template:function(r,s){r&1&&ds(0,"router-outlet")},dependencies:[og],encapsulation:2});let n=e;return n})();function VO(n,e){return n.providers&&!n._injector&&(n._injector=ju(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ag(n){let e=n.children&&n.children.map(ag),t=e?me(D({},n),{children:e}):D({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=LO),t}function rr(n){return n.outlet||Ne}function HO(n,e){let t=n.filter(i=>rr(i)===e);return t.push(...n.filter(i=>rr(i)!==e)),t}function zl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var BO=(n,e,t,i)=>Ge(r=>(new Zm(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Zm=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Am(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=oa(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=oa(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=oa(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=oa(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Gm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new jm(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Am(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Am(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=zl(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},fd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},la=class{constructor(e,t){this.component=e,this.route=t}};function UO(n,e,t){let i=n._root,r=e?e._root:null;return xl(i,r,t,[i.value])}function zO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function pa(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!dC(n)?n:e.get(n):i}function xl(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=oa(e);return n.children.forEach(o=>{$O(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Al(a,t.getContext(o),r)),r}function $O(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=jO(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new fd(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?xl(n,e,a?a.children:null,i,r):xl(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new la(a.outlet.component,o))}else o&&Al(e,a,r),r.canActivateChecks.push(new fd(i)),s.component?xl(n,null,a?a.children:null,i,r):xl(n,null,t,i,r);return r}function jO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!to(n.url,e.url);case"pathParamsOrQueryParamsChange":return!to(n.url,e.url)||!nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Km(n,e)||!nr(n.queryParams,e.queryParams);case"paramsChange":default:return!Km(n,e)}}function Al(n,e,t){let i=oa(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Al(o,e.children.getContext(s),t):Al(o,null,t):Al(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new la(e.outlet.component,r)):t.canDeactivateChecks.push(new la(null,r)):t.canDeactivateChecks.push(new la(null,r))}function $l(n){return typeof n=="function"}function WO(n){return typeof n=="boolean"}function GO(n){return n&&$l(n.canLoad)}function YO(n){return n&&$l(n.canActivate)}function qO(n){return n&&$l(n.canActivateChild)}function XO(n){return n&&$l(n.canDeactivate)}function KO(n){return n&&$l(n.canMatch)}function uE(n){return n instanceof An||n?.name==="EmptyError"}var id=Symbol("INITIAL_VALUE");function fa(){return $t(n=>nl(n.map(e=>e.pipe(Li(1),kf(id)))).pipe(Ge(e=>{for(let t of e)if(t!==!0){if(t===id)return id;if(t===!1||t instanceof fs)return t}return!0}),fn(e=>e!==id),Li(1)))}function QO(n,e){return zt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?he(me(D({},t),{guardsResult:!0})):ZO(o,i,r,n).pipe(zt(a=>a&&WO(a)?JO(i,s,n,e):he(a)),Ge(a=>me(D({},t),{guardsResult:a})))})}function ZO(n,e,t,i){return Nt(n).pipe(zt(r=>rA(r.component,r.route,t,e,i)),Kn(r=>r!==!0,!0))}function JO(n,e,t,i){return Nt(e).pipe(Ir(r=>xr(tA(r.route.parent,i),eA(r.route,i),nA(n,r.path,t),iA(n,r.route,t))),Kn(r=>r!==!0,!0))}function eA(n,e){return n!==null&&e&&e(new Wm(n)),he(!0)}function tA(n,e){return n!==null&&e&&e(new $m(n)),he(!0)}function iA(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return he(!0);let r=i.map(s=>Tr(()=>{let o=zl(e)??t,a=pa(s,o),l=YO(a)?a.canActivate(e,n):us(o,()=>a(e,n));return gs(l).pipe(Kn())}));return he(r).pipe(fa())}function nA(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>zO(o)).filter(o=>o!==null).map(o=>Tr(()=>{let a=o.guards.map(l=>{let u=zl(o.node)??t,h=pa(l,u),f=qO(h)?h.canActivateChild(i,n):us(u,()=>h(i,n));return gs(f).pipe(Kn())});return he(a).pipe(fa())}));return he(s).pipe(fa())}function rA(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return he(!0);let o=s.map(a=>{let l=zl(e)??r,u=pa(a,l),h=XO(u)?u.canDeactivate(n,e,t,i):us(l,()=>u(n,e,t,i));return gs(h).pipe(Kn())});return he(o).pipe(fa())}function sA(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return he(!0);let s=r.map(o=>{let a=pa(o,n),l=GO(a)?a.canLoad(e,t):us(n,()=>a(e,t));return gs(l)});return he(s).pipe(fa(),dE(i))}function dE(n){return bf(si(e=>{if(ua(e))throw aE(n,e)}),Ge(e=>e===!0))}function oA(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return he(!0);let s=r.map(o=>{let a=pa(o,n),l=KO(a)?a.canMatch(e,t):us(n,()=>a(e,t));return gs(l)});return he(s).pipe(fa(),dE(i))}var Vl=class{constructor(e){this.segmentGroup=e||null}},pd=class extends Error{constructor(e){super(),this.urlTree=e}};function sa(n){return No(new Vl(n))}function aA(n){return No(new ye(4e3,!1))}function lA(n){return No(lE(!1,3))}var Jm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return he(i);if(r.numberOfChildren>1||!r.children[Ne])return aA(e.redirectTo);r=r.children[Ne]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new pd(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new fs(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new rt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ye(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},eg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cA(n,e,t,i,r){let s=lg(n,e,t);return s.matched?(i=VO(e,i),oA(i,e,t,r).pipe(Ge(o=>o===!0?s:D({},eg)))):he(s)}function lg(n,e,t){if(e.path==="**")return uA(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?D({},eg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||oO)(t,n,e);if(!r)return D({},eg);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?D(D({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function uA(n){return{matched:!0,parameters:n.length>0?jb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Bb(n,e,t,i){return t.length>0&&fA(n,t,i)?{segmentGroup:new rt(e,hA(i,new rt(t,n.children))),slicedSegments:[]}:t.length===0&&pA(n,t,i)?{segmentGroup:new rt(n.segments,dA(n,e,t,i,n.children)),slicedSegments:t}:{segmentGroup:new rt(n.segments,n.children),slicedSegments:t}}function dA(n,e,t,i,r){let s={};for(let o of i)if(_d(n,t,o)&&!r[rr(o)]){let a=new rt([],{});s[rr(o)]=a}return D(D({},r),s)}function hA(n,e){let t={};t[Ne]=e;for(let i of n)if(i.path===""&&rr(i)!==Ne){let r=new rt([],{});t[rr(i)]=r}return t}function fA(n,e,t){return t.some(i=>_d(n,e,i)&&rr(i)!==Ne)}function pA(n,e,t){return t.some(i=>_d(n,e,i))}function _d(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function mA(n,e,t,i){return rr(n)!==i&&(i===Ne||!_d(e,t,n))?!1:lg(e,n,t).matched}function gA(n,e,t){return e.length===0&&!n.children[t]}var tg=class{};function vA(n,e,t,i,r,s,o="emptyOnly"){return new ig(n,e,t,i,r,o,s).recognize()}var _A=31,ig=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Jm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ye(4002,`'${e.segmentGroup}'`)}recognize(){let e=Bb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ge(t=>{let i=new kl([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ne,this.rootComponentType,null,{}),r=new Zi(i,t),s=new hd("",r),o=DO(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Ne).pipe(es(i=>{if(i instanceof pd)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Vl?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=rg(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(Ge(s=>s instanceof Zi?[s]:[]))}processChildren(e,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Nt(r).pipe(Ir(s=>{let o=i.children[s],a=HO(t,s);return this.processSegmentGroup(e,a,o,s)}),Nf((s,o)=>(s.push(...o),s)),ts(null),Pf(),zt(s=>{if(s===null)return sa(i);let o=hE(s);return CA(o),he(o)}))}processSegment(e,t,i,r,s,o){return Nt(t).pipe(Ir(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(es(l=>{if(l instanceof Vl)return he(null);throw l}))),Kn(a=>!!a),es(a=>{if(uE(a))return gA(i,r,s)?he(new tg):sa(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return mA(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):sa(r):sa(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:h}=lg(t,r,s);if(!a)return sa(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_A&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(zt(m=>this.processSegment(e,i,t,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let o=cA(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),o.pipe($t(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe($t(({routes:l})=>{let u=i._loadedInjector??e,{consumedSegments:h,remainingSegments:f,parameters:m}=a,v=new kl(h,m,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,bA(i),rr(i),i.component??i._loadedComponent??null,i,EA(i)),{segmentGroup:w,slicedSegments:S}=Bb(t,h,f,l);if(S.length===0&&w.hasChildren())return this.processChildren(u,l,w).pipe(Ge(R=>R===null?null:new Zi(v,R)));if(l.length===0&&S.length===0)return he(new Zi(v,[]));let P=rr(i)===s;return this.processSegment(u,l,w,S,P?Ne:s,!0).pipe(Ge(R=>new Zi(v,R instanceof Zi?[R]:[])))}))):sa(t)))}getChildConfig(e,t,i){return t.children?he({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?he({routes:t._loadedRoutes,injector:t._loadedInjector}):sA(e,t,i,this.urlSerializer).pipe(zt(r=>r?this.configLoader.loadChildren(e,t).pipe(si(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):lA(t))):he({routes:[],injector:e})}};function CA(n){n.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}function yA(n){let e=n.value.routeConfig;return e&&e.path===""}function hE(n){let e=[],t=new Set;for(let i of n){if(!yA(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=hE(i.children);e.push(new Zi(i.value,r))}return e.filter(i=>!t.has(i))}function bA(n){return n.data||{}}function EA(n){return n.resolve||{}}function wA(n,e,t,i,r,s){return zt(o=>vA(n,e,t,i,o.extractedUrl,r,s).pipe(Ge(({state:a,tree:l})=>me(D({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function SA(n,e){return zt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return he(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of fE(l))o.add(u);let a=0;return Nt(o).pipe(Ir(l=>s.has(l)?DA(l,i,n,e):(l.data=rg(l,l.parent,n).resolve,he(void 0))),si(()=>a++),Fo(1),zt(l=>a===o.size?he(t):gi))})}function fE(n){let e=n.children.map(t=>fE(t)).flat();return[n,...e]}function DA(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!sE(r)&&(s[Hl]=r.title),xA(s,n,e,i).pipe(Ge(o=>(n._resolvedData=o,n.data=rg(n,n.parent,t).resolve,null)))}function xA(n,e,t,i){let r=Pm(n);if(r.length===0)return he({});let s={};return Nt(r).pipe(zt(o=>TA(n[o],e,t,i).pipe(Kn(),si(a=>{s[o]=a}))),Fo(1),Rf(s),es(o=>uE(o)?gi:No(o)))}function TA(n,e,t,i){let r=zl(e)??i,s=pa(n,r),o=s.resolve?s.resolve(e,t):us(r,()=>s(e,t));return gs(o)}function Rm(n){return $t(e=>{let t=n(e);return t?Nt(t).pipe(Ge(()=>e)):he(e)})}var pE=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===Ne);return r}getResolvedTitleForRoute(i){return i.data[Hl]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>le(IA))(),providedIn:"root"});let n=e;return n})(),IA=(()=>{let e=class e extends pE{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(ce(Tm))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),jl=new Se("",{providedIn:"root",factory:()=>({})}),md=new Se("ROUTES"),cg=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=le(Gu)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return he(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=gs(i.loadComponent()).pipe(Ge(mE),si(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),rl(()=>{this.componentLoaders.delete(i)})),s=new Po(r,()=>new Jt).pipe(Mo());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=OA(r,this.compiler,i,this.onLoadEndListener).pipe(rl(()=>{this.childrenLoaders.delete(r)})),a=new Po(o,()=>new Jt).pipe(Mo());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function OA(n,e,t,i){return gs(n.loadChildren()).pipe(Ge(mE),zt(r=>r instanceof ml||Array.isArray(r)?he(r):Nt(e.compileModuleAsync(r))),Ge(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(md,[],{optional:!0,self:!0}).flat()),{routes:o.map(ag),injector:s}}))}function AA(n){return n&&typeof n=="object"&&"default"in n}function mE(n){return AA(n)?n.default:n}var ug=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>le(RA))(),providedIn:"root"});let n=e;return n})(),RA=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),gE=new Se(""),vE=new Se("");function MA(n,e,t){let i=n.get(vE),r=n.get(Ri);return n.get(_t).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=r.startViewTransition(()=>(s(),PA(n))),{onViewTransitionCreated:l}=i;return l&&us(n,()=>l({transition:a,from:e,to:t})),o})}function PA(n){return new Promise(e=>{nm(e,{injector:n})})}var dg=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Jt,this.transitionAbortSubject=new Jt,this.configLoader=le(cg),this.environmentInjector=le(Qi),this.urlSerializer=le(Bl),this.rootContexts=le(Ul),this.location=le(ra),this.inputBindingEnabled=le(vd,{optional:!0})!==null,this.titleStrategy=le(pE),this.options=le(jl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=le(ug),this.createViewTransition=le(gE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>he(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Um(s)),r=s=>this.events.next(new zm(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(me(D(D({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new ai({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ol,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fn(o=>o.id!==0),Ge(o=>me(D({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$t(o=>{this.currentTransition=o;let a=!1,l=!1;return he(o).pipe(si(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?me(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$t(u=>{let h=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!h&&f!=="reload"){let m="";return this.events.next(new ms(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),gi}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return he(u).pipe($t(m=>{let v=this.transitions?.getValue();return this.events.next(new da(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?gi:Promise.resolve(m)}),wA(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),si(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=me(D({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new ld(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:v,source:w,restoredState:S,extras:P}=u,R=new da(m,this.urlSerializer.serialize(v),w,S);this.events.next(R);let M=nE(v,this.rootComponentType).snapshot;return this.currentTransition=o=me(D({},u),{targetSnapshot:M,urlAfterRedirects:v,extras:me(D({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,he(o)}else{let m="";return this.events.next(new ms(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),gi}}),si(u=>{let h=new Lm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),Ge(u=>(this.currentTransition=o=me(D({},u),{guards:UO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),QO(this.environmentInjector,u=>this.events.next(u)),si(u=>{if(o.guardsResult=u.guardsResult,ua(u.guardsResult))throw aE(this.urlSerializer,u.guardsResult);let h=new Vm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),fn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),Rm(u=>{if(u.guards.canActivateChecks.length)return he(u).pipe(si(h=>{let f=new Hm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),$t(h=>{let f=!1;return he(h).pipe(SA(this.paramsInheritanceStrategy,this.environmentInjector),si({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",2)}}))}),si(h=>{let f=new Bm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),Rm(u=>{let h=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(si(v=>{f.component=v}),Ge(()=>{})));for(let v of f.children)m.push(...h(v));return m};return nl(h(u.targetSnapshot.root)).pipe(ts(),Li(1))}),Rm(()=>this.afterPreactivation()),$t(()=>{let{currentSnapshot:u,targetSnapshot:h}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return f?Nt(f).pipe(Ge(()=>o)):he(o)}),Ge(u=>{let h=PO(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=me(D({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),si(()=>{this.events.next(new Nl)}),BO(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Li(1),si({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),ol(this.transitionAbortSubject.pipe(si(u=>{throw u}))),rl(()=>{if(!a&&!l){let u="";this.cancelNavigationTransition(o,u,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),es(u=>{if(l=!0,cE(u))this.events.next(new ps(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),kO(u)?this.events.next(new Fl(u.url)):o.resolve(!1);else{this.events.next(new Pl(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(u))}catch(h){o.reject(h)}}return gi}))}))}cancelNavigationTransition(i,r,s){let o=new ps(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function NA(n){return n!==Ol}var FA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>le(kA))(),providedIn:"root"});let n=e;return n})(),ng=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},kA=(()=>{let e=class e extends ng{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ys(e)))(s||e)}})(),e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),_E=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:()=>(()=>le(LA))(),providedIn:"root"});let n=e;return n})(),LA=(()=>{let e=class e extends _E{constructor(){super(...arguments),this.location=le(ra),this.urlSerializer=le(Bl),this.options=le(jl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=le(ug),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fs,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=nE(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof da)this.stateMemento=this.createStateMemento();else if(i instanceof ms)this.rawUrlTree=r.initialUrl;else if(i instanceof ld){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Nl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof ps&&(i.code===3||i.code===2)?this.restoreHistory(r):i instanceof Pl?this.restoreHistory(r,!0):i instanceof Mr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=D(D({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=D(D({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ys(e)))(s||e)}})(),e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Tl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Tl||{});function CE(n,e){n.events.pipe(fn(t=>t instanceof Mr||t instanceof ps||t instanceof Pl||t instanceof ms),Ge(t=>t instanceof Mr||t instanceof ms?Tl.COMPLETE:(t instanceof ps?t.code===0||t.code===1:!1)?Tl.REDIRECTING:Tl.FAILED),fn(t=>t!==Tl.REDIRECTING),Li(1)).subscribe(()=>{e()})}function VA(n){throw n}var HA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},io=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=le(Wu),this.stateManager=le(_E),this.options=le(jl,{optional:!0})||{},this.pendingTasks=le(am),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=le(dg),this.urlSerializer=le(Bl),this.location=le(ra),this.urlHandlingStrategy=le(ug),this._events=new Jt,this.errorHandler=this.options.errorHandler||VA,this.navigated=!1,this.routeReuseStrategy=le(FA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=le(md,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!le(vd,{optional:!0}),this.eventsSubscription=new ri,this.isNgZoneEnabled=le(_t)instanceof _t&&_t.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ps&&r.code!==0&&r.code!==1)this.navigated=!0;else if(r instanceof Mr)this.navigated=!0;else if(r instanceof Fl){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||NA(s.source)};this.scheduleNavigation(a,Ol,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}zA(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ol,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)}))}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=D({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(ag),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:a,f=null;switch(l){case"merge":f=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let v=s?s.snapshot:this.routerState.snapshot.root;m=Jb(v)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return eE(m,i,f,h??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=ua(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ol,null,r)}navigate(i,r={skipLocationChange:!1}){return UA(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=D({},HA):r===!1?s=D({},BA):s=r,ua(i))return Fb(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Fb(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.keys(i).reduce((r,s)=>{let o=i[s];return o!=null&&(r[s]=o),r},{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,h;a?(l=a.resolve,u=a.reject,h=a.promise):h=new Promise((m,v)=>{l=m,u=v});let f=this.pendingTasks.add();return CE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function UA(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ye(4008,!1)}function zA(n){return!(n instanceof Nl)&&!(n instanceof Fl)}var gd=class{};var $A=(()=>{let e=class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(fn(i=>i instanceof Mr),Ir(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ju(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Nt(s).pipe(Jr())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=he(null);let o=s.pipe(zt(a=>a===null?he(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Nt([o,a]).pipe(Jr())}else return o})}};e.\u0275fac=function(r){return new(r||e)(ce(io),ce(Gu),ce(Qi),ce(gd),ce(cg))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),yE=new Se(""),jA=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof da?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Mr?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof ms&&i.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof cd&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new cd(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Ny()},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})();function WA(n){return n.routerState.root}function Wl(n,e){return{\u0275kind:n,\u0275providers:e}}function GA(){let n=le(kn);return e=>{let t=n.get(ir);if(e!==t.components[0])return;let i=n.get(io),r=n.get(bE);n.get(hg)===1&&i.initialNavigation(),n.get(EE,null,Be.Optional)?.setUpPreloading(),n.get(yE,null,Be.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var bE=new Se("",{factory:()=>new Jt}),hg=new Se("",{providedIn:"root",factory:()=>1});function YA(){return Wl(2,[{provide:hg,useValue:0},{provide:Xu,multi:!0,deps:[kn],useFactory:e=>{let t=e.get(Cb,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(io),s=e.get(bE);CE(r,()=>{i(!0)}),e.get(dg).afterPreactivation=()=>(i(!0),s.closed?he(void 0):s),r.initialNavigation()}))}}])}function qA(){return Wl(3,[{provide:Xu,multi:!0,useFactory:()=>{let e=le(io);return()=>{e.setUpLocationChangeListener()}}},{provide:hg,useValue:2}])}var EE=new Se("");function XA(n){return Wl(0,[{provide:EE,useExisting:$A},{provide:gd,useExisting:n}])}function KA(){return Wl(8,[Hb,{provide:vd,useExisting:Hb}])}function QA(n){let e=[{provide:gE,useValue:MA},{provide:vE,useValue:D({skipNextTransition:!!n?.skipInitialTransition},n)}];return Wl(9,e)}var Ub=new Se("ROUTER_FORROOT_GUARD"),ZA=[ra,{provide:Bl,useClass:Rl},io,Ul,{provide:ha,useFactory:WA,deps:[io]},cg,[]],fg=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[ZA,[],{provide:md,multi:!0,useValue:i},{provide:Ub,useFactory:iR,deps:[[io,new Up,new ly]]},{provide:jl,useValue:r||{}},r?.useHash?eR():tR(),JA(),r?.preloadingStrategy?XA(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?nR(r):[],r?.bindToComponentInputs?KA().\u0275providers:[],r?.enableViewTransitions?QA().\u0275providers:[],rR()]}}static forChild(i){return{ngModule:e,providers:[{provide:md,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(ce(Ub,8))},e.\u0275mod=Ai({type:e}),e.\u0275inj=Oi({});let n=e;return n})();function JA(){return{provide:yE,useFactory:()=>{let n=le(Sb),e=le(_t),t=le(jl),i=le(dg),r=le(Bl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jA(r,i,n,e,t)}}}function eR(){return{provide:Js,useClass:bb}}function tR(){return{provide:Js,useClass:vm}}function iR(n){return"guarded"}function nR(n){return[n.initialNavigation==="disabled"?qA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?YA().\u0275providers:[]]}var zb=new Se("");function rR(){return[{provide:zb,useFactory:GA},{provide:um,multi:!0,useExisting:zb}]}var oR=[],wE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ai({type:e}),e.\u0275inj=Oi({imports:[fg.forRoot(oR),fg]});let n=e;return n})();var pg={};el(pg,{BackendUtilityService:()=>Gl});var ft=function(n){return n.local="local",n.remote="remote",n}(ft||{});var Gl=class{constructor(e){this.rxjs=e}addRxJsResource(e){this.rxjs=e}executeBackendProcessesCallback(e,t,i,r){let s=new Date;t&&i.service.postProcess&&i.service.postProcess(t),t&&i?.internalPostProcess&&i.internalPostProcess(t),i.postProcess!==void 0&&(t instanceof Object&&(t.metrics={startTime:e,endTime:s,executionTime:s.valueOf()-e.valueOf(),itemCount:r,totalItemCount:r}),i.postProcess(t))}onBackendError(e,t){if(typeof t?.onError=="function")t.onError(e);else throw e}executeBackendCallback(e,t,i,r,s,o){if(e){i&&!i.clearFilterTriggered&&!i.clearSortTriggered&&o?.emitActionChangedCallback&&o.emitActionChangedCallback.call(this,ft.remote);let a=e.process(t);if(a instanceof Promise&&a.then)a.then(l=>{this.executeBackendProcessesCallback(r,l,e,s),o?.successCallback?.call(this,i)}).catch(l=>{o?.errorCallback?.call(this,i),this.onBackendError(l,e)});else if(this.rxjs?.isObservable(a)){let l=this.rxjs;l.isObservable(o?.httpCancelRequestSubject)&&o?.httpCancelRequestSubject.next(),a.pipe(l.takeUntil(l.iif(()=>l.isObservable(o?.httpCancelRequestSubject),o?.httpCancelRequestSubject,l.EMPTY))).subscribe(u=>{this.executeBackendProcessesCallback(r,u,e,s),o?.successCallback?.call(this,i)},u=>{o?.errorCallback?.call(this,i),this.onBackendError(u,e)})}}}refreshBackendDataset(e){let t="",i=e?.backendServiceApi;if(!i||!i.service||!i.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(i.service&&(t=i.service.buildQuery()),t&&t!==""){let r=new Date;i.preProcess&&i.preProcess();let s=e?.pagination?.totalItems??0;this.executeBackendCallback(i,t,null,r,s)}}};var mg={};el(mg,{collectionObserver:()=>no,propertyObserver:()=>Yl});function no(n,e){["pop","push","reverse","shift","unshift","splice","sort"].forEach(i=>{n[i]=(...r)=>{let s=Array.prototype[i].apply(n,r);return e.apply(n,[n,r]),s}})}function Yl(n,e,t){let i=n[e];Object.defineProperty(n,e,{configurable:!0,get(){return i},set(r){i=r,t.apply(n,[r,n[e]])}})}var bg={};el(bg,{CancelledException:()=>Cd,addTreeLevelAndAggregatorsByMutation:()=>va,addTreeLevelByMutation:()=>yd,cancellablePromise:()=>cR,castObservableToPromise:()=>Xl,decimalFormatted:()=>ga,findItemInTreeStructure:()=>so,findOrDefault:()=>or,flattenToParentChildArray:()=>Cg,formatNumber:()=>ot,getCellValueFromQueryFieldGetter:()=>Cs,getColumnFieldType:()=>uR,getDescendantProperty:()=>At,getTranslationPrefix:()=>li,isColumnDateType:()=>TE,mapFlatpickrDateFormatWithFieldType:()=>Kl,mapMomentDateFormatWithFieldType:()=>en,mapOperatorByFieldType:()=>bd,mapOperatorToShorthandDesignation:()=>Pr,mapOperatorType:()=>dR,objectWithoutKey:()=>IE,parseUtcDate:()=>hR,thousandSeparatorFormatted:()=>ro,unflattenParentChildArrayToTree:()=>yg,unsubscribeAll:()=>ys});var TH=Array.prototype.map,IH=Array.prototype.reduce;var aR=n=>n;function SE(n,e,t=aR,i=()=>{}){let r=n&&n.length?[{pointer:n,offset:0}]:[],s=[],o;for(;r.length;)for(o=r.pop();o.offset<o.pointer.length;){let a=o.pointer[o.offset],l=i(a),u=e(a);s.push(t(a,o.node,l,o.nodeId)),o.offset+=1,u&&(r.push(o),o={pointer:u,offset:0,node:a,nodeId:l})}return s}var _g=dn(vs());var V=class{};V.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"};V.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"};V.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL=2;V.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL=2;V.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL=2;V.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL=4;V.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL=void 0;V.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL=void 0;V.DEFAULT_NUMBER_DECIMAL_SEPARATOR=".";V.DEFAULT_NUMBER_THOUSAND_SEPARATOR="";V.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET=!1;V.SLIDER_DEFAULT_MIN_VALUE=0;V.SLIDER_DEFAULT_MAX_VALUE=100;V.SLIDER_DEFAULT_STEP=1;V.VALIDATION_REQUIRED_FIELD="Field is required";V.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number";V.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number";V.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}";V.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}";V.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}";V.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}";V.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}";V.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}";V.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}";V.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}";V.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}";V.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}";V.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals";V.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters";V.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters";V.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters";V.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)";V.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)";var Ln=function(n){return n.colon=":",n.comma=",",n.equalSign="=",n.pipe="|",n.semicolon=";",n.space=" ",n.tab="	",n.doubleColon="::",n.doublePipe="||",n.doubleSemicolon=";;",n}(Ln||{});var Re=function(n){return n.autoTooltip="autoTooltip",n.cellExternalCopyManager="cellExternalCopyManager",n.cellMenu="cellMenu",n.checkboxSelector="checkboxSelector",n.columnPicker="columnPicker",n.contextMenu="contextMenu",n.customTooltip="customTooltip",n.draggableGrouping="draggableGrouping",n.groupItemMetaProvider="groupItemMetaProvider",n.gridMenu="gridMenu",n.headerButton="headerButton",n.headerMenu="headerMenu",n.rowDetailView="rowDetailView",n.rowMoveManager="rowMoveManager",n.rowSelection="rowSelection",n}(Re||{});var b={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var Ji=function(n){return n.csv="csv",n.txt="txt",n.xls="xls",n.xlsx="xlsx",n}(Ji||{});var ql=function(n){return n.merge="merge",n.chain="chain",n}(ql||{});var _i=function(n){return n.columns="columns",n.filter="filter",n.pagination="pagination",n.pinning="pinning",n.rowSelection="rowSelection",n.sorter="sorter",n.treeData="treeData",n}(_i||{});var ne=function(n){return n.empty="",n.contains="Contains",n.notContains="Not_Contains",n.lessThan="LT",n.lessThanOrEqual="LE",n.greaterThan="GT",n.greaterThanOrEqual="GE",n.notEqual="NE",n.equal="EQ",n.endsWith="EndsWith",n.rangeInclusive="RangeInclusive",n.rangeExclusive="RangeExclusive",n.startsWith="StartsWith",n.in="IN",n.notIn="NOT_IN",n.inContains="IN_CONTAINS",n.notInContains="NOT_IN_CONTAINS",n.inCollection="IN_COLLECTION",n.notInCollection="NOT_IN_COLLECTION",n}(ne||{});var sr=function(n){return n.asc="asc",n.ASC="ASC",n.desc="desc",n.DESC="DESC",n}(sr||{});var st=function(n){return n[n.asc=1]="asc",n[n.desc=-1]="desc",n[n.neutral=0]="neutral",n}(st||{});var _s=function(n){return n.toggleCollapse="toggle-collapse",n.fullExpand="full-expand",n.fullCollapse="full-collapse",n.toggleExpand="toggle-expand",n}(_s||{});var lR=_g.default||_g,Cd=class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}};function cR(n){let e=!1;return n instanceof Promise?{promise:n.then(t=>{if(e)throw new Cd("Cancelled Promise");return t}),cancel:()=>e=!0}:n}function Xl(n,e,t=""){let i=e;if(e instanceof Promise)return e;if(n.isObservable(e)&&(i=n.firstValueFrom(e)),!(i instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${t} is not able to convert the Observable into a Promise.`);return i}function yd(n,e,t=0){let i=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP;if(Array.isArray(n))for(let r of n)r&&(Array.isArray(r[i])&&r[i].length>0&&(t++,yd(r[i],e,t),t--),r[e.levelPropName]=t)}function va(n,e,t=0,i=null){let r=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,{aggregator:s}=e;if(Array.isArray(n)){for(let o of n)if(o){let a=Array.isArray(o[r]);Array.isArray(o[r])&&o[r].length>0&&(s.init(o,!0),t++,va(o[r],e,t,o),t--),i&&s.isInitialized&&typeof s.accumulate=="function"&&!o?.__filteredOut&&(s.accumulate(o,a),s.storeResult(i.__treeTotals)),o[e.levelPropName]=t}}}function Cg(n,e){let t=e?.identifierPropName??"id",i=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,r=e?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,s=e?.parentPropName??V.treeDataProperties.PARENT_PROP,o=e?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP;return e?.shouldAddTreeLevelNumber&&(e?.aggregators?e.aggregators.forEach(l=>{va(n,{childrenPropName:i,levelPropName:o,aggregator:l})}):yd(n,{childrenPropName:i,levelPropName:o})),SE(n,l=>l[i],(l,u)=>D({[t]:l[t],[s]:u!==void 0?u[t]:null,[r]:!!l[i]},IE(l,i)))}function yg(n,e){let t=e?.identifierPropName??"id",i=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,r=e?.parentPropName??V.treeDataProperties.PARENT_PROP,s=e?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP,o=e?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,a=n||[],l=[],u={};return a.forEach(h=>u[h[t]]=h),Object.keys(u).forEach(h=>{let f=u[h];if(!(r in f)||f[r]===null||f[r]===void 0||f[r]==="")l.push(f);else if(f[r]in u){let m=u[f[r]];i in m||(m[i]=[]),m[i].push(f),m[o]===void 0&&(m[o]=e?.initiallyCollapsed??!1)}}),e?.aggregators?e.aggregators.forEach(h=>{va(l,{childrenPropName:i,levelPropName:s,aggregator:h},0)}):yd(l,{childrenPropName:i,levelPropName:s},0),l}function so(n,e,t){if(!t)throw new Error('findRecursive requires parameter "childrenPropertyName"');let i=n.find(e),r=n.filter(s=>s?.hasOwnProperty(t)&&s[t]);if(i)return i;if(r.length){let s=[];return r.forEach(o=>{o?.hasOwnProperty(t)&&s.push(...o[t])}),so(s,e,t)}}function ga(n,e,t,i=".",r=""){if(isNaN(+n))return n;let s=e===void 0?2:e,o=t===void 0?2:t,a=String(Math.round(+n*Math.pow(10,o))/Math.pow(10,o));for(a.indexOf(".")<0&&s>0&&(a+=".");a.length-a.indexOf(".")<=s;)a+="0";let l=a.split("."),u,h;r?u=l.length>=1?ro(l[0],r):void 0:u=l.length>=1?l[0]:a,l.length>1&&(h=l[1]);let f="";return u!==void 0&&h!==void 0?f=`${u}${i}${h}`:u!=null&&(f=u),f}function ot(n,e,t,i,r="",s="",o=".",a=""){if(isNaN(+n))return n;let l=Math.round(parseFloat(n)*1e6)/1e6;if(l<0){let u=Math.abs(l);if(i){if(!isNaN(e)||!isNaN(t))return`(${r}${ga(u,e,t,o,a)}${s})`;let h=ro(`${u}`,a);return`(${r}${h}${s})`}else{if(!isNaN(e)||!isNaN(t))return`-${r}${ga(u,e,t,o,a)}${s}`;let h=ro(`${u}`,a);return`-${r}${h}${s}`}}else{if(!isNaN(e)||!isNaN(t))return`${r}${ga(n,e,t,o,a)}${s}`;let u=ro(`${n}`,a);return`${r}${u}${s}`}}function Cs(n,e,t){if(typeof n.queryFieldNameGetterFn=="function"){let i=n.queryFieldNameGetterFn(e);i?.indexOf(".")>=0?t=At(e,i):t=e.hasOwnProperty(i)?e[i]:t}return t}function At(n,e){return!n||!e?n:e.split(".").reduce((t,i)=>t&&t[i],n)}function li(n){return n&&n.translationNamespace?n.translationNamespace+(n.translationNamespaceSeparator||""):""}function uR(n){return n.outputType||n.type||b.string}function TE(n){switch(n){case b.date:case b.dateTime:case b.dateIso:case b.dateTimeIso:case b.dateTimeShortIso:case b.dateTimeIsoAmPm:case b.dateTimeIsoAM_PM:case b.dateEuro:case b.dateEuroShort:case b.dateTimeEuro:case b.dateTimeShortEuro:case b.dateTimeEuroAmPm:case b.dateTimeEuroAM_PM:case b.dateTimeEuroShort:case b.dateTimeEuroShortAmPm:case b.dateTimeEuroShortAM_PM:case b.dateUs:case b.dateUsShort:case b.dateTimeUs:case b.dateTimeShortUs:case b.dateTimeUsAmPm:case b.dateTimeUsAM_PM:case b.dateTimeUsShort:case b.dateTimeUsShortAmPm:case b.dateTimeUsShortAM_PM:case b.dateUtc:return!0;default:return!1}}function en(n){let e;switch(n){case b.dateTime:case b.dateTimeIso:e="YYYY-MM-DD HH:mm:ss";break;case b.dateTimeIsoAmPm:e="YYYY-MM-DD hh:mm:ss a";break;case b.dateTimeIsoAM_PM:e="YYYY-MM-DD hh:mm:ss A";break;case b.dateTimeShortIso:e="YYYY-MM-DD HH:mm";break;case b.dateEuro:e="DD/MM/YYYY";break;case b.dateEuroShort:e="D/M/YY";break;case b.dateTimeEuro:e="DD/MM/YYYY HH:mm:ss";break;case b.dateTimeShortEuro:e="DD/MM/YYYY HH:mm";break;case b.dateTimeEuroAmPm:e="DD/MM/YYYY hh:mm:ss a";break;case b.dateTimeEuroAM_PM:e="DD/MM/YYYY hh:mm:ss A";break;case b.dateTimeEuroShort:e="D/M/YY H:m:s";break;case b.dateTimeEuroShortAmPm:e="D/M/YY h:m:s a";break;case b.dateTimeEuroShortAM_PM:e="D/M/YY h:m:s A";break;case b.dateUs:e="MM/DD/YYYY";break;case b.dateUsShort:e="M/D/YY";break;case b.dateTimeUs:e="MM/DD/YYYY HH:mm:ss";break;case b.dateTimeUsAmPm:e="MM/DD/YYYY hh:mm:ss a";break;case b.dateTimeUsAM_PM:e="MM/DD/YYYY hh:mm:ss A";break;case b.dateTimeUsShort:e="M/D/YY H:m:s";break;case b.dateTimeUsShortAmPm:e="M/D/YY h:m:s a";break;case b.dateTimeUsShortAM_PM:e="M/D/YY h:m:s A";break;case b.dateTimeShortUs:e="MM/DD/YYYY HH:mm";break;case b.dateUtc:e="YYYY-MM-DDTHH:mm:ss.SSSZ";break;case b.date:case b.dateIso:default:e="YYYY-MM-DD";break}return e}function Kl(n){let e;switch(n){case b.dateTime:case b.dateTimeIso:e="Y-m-d H:i:S";break;case b.dateTimeShortIso:e="Y-m-d H:i";break;case b.dateTimeIsoAmPm:case b.dateTimeIsoAM_PM:e="Y-m-d h:i:S K";break;case b.dateEuro:e="d/m/Y";break;case b.dateEuroShort:e="d/m/y";break;case b.dateTimeEuro:e="d/m/Y H:i:S";break;case b.dateTimeShortEuro:e="d/m/y H:i";break;case b.dateTimeEuroAmPm:e="d/m/Y h:i:S K";break;case b.dateTimeEuroAM_PM:e="d/m/Y h:i:s K";break;case b.dateTimeEuroShort:e="d/m/y H:i:s";break;case b.dateTimeEuroShortAmPm:e="d/m/y h:i:s K";break;case b.dateUs:e="m/d/Y";break;case b.dateUsShort:e="m/d/y";break;case b.dateTimeUs:e="m/d/Y H:i:S";break;case b.dateTimeShortUs:e="m/d/y H:i";break;case b.dateTimeUsAmPm:e="m/d/Y h:i:S K";break;case b.dateTimeUsAM_PM:e="m/d/Y h:i:s K";break;case b.dateTimeUsShort:e="m/d/y H:i:s";break;case b.dateTimeUsShortAmPm:e="m/d/y h:i:s K";break;case b.dateUtc:e="Z";break;case b.date:case b.dateIso:default:e="Y-m-d";break}return e}function dR(n){let e;switch(n){case"<":case"LT":e=ne.lessThan;break;case"<=":case"LE":e=ne.lessThanOrEqual;break;case">":case"GT":e=ne.greaterThan;break;case">=":case"GE":e=ne.greaterThanOrEqual;break;case"<>":case"!=":case"NE":e=ne.notEqual;break;case"*":case"a*":case"StartsWith":e=ne.startsWith;break;case"*z":case"EndsWith":e=ne.endsWith;break;case"=":case"==":case"EQ":e=ne.equal;break;case"IN":e=ne.in;break;case"NIN":case"NOT_IN":e=ne.notIn;break;case"Not_Contains":case"NOT_CONTAINS":e=ne.notContains;break;case"Contains":case"CONTAINS":default:e=ne.contains;break}return e}function Pr(n){let e="";switch(n){case ne.greaterThan:case">":e=">";break;case ne.greaterThanOrEqual:case">=":e=">=";break;case ne.lessThan:case"<":e="<";break;case ne.lessThanOrEqual:case"<=":e="<=";break;case ne.notEqual:case"<>":e="<>";break;case ne.equal:case"=":case"==":case"EQ":e="=";break;case ne.startsWith:case"a*":case"*":e="a*";break;case ne.endsWith:case"*z":e="*z";break;default:e=n;break}return e}function bd(n){let e;if(TE(n))e=ne.equal;else switch(n){case b.unknown:case b.string:case b.text:case b.password:case b.readonly:e=ne.contains;break;case b.float:case b.number:default:e=ne.equal;break}return e}function IE(n,e){return Object.keys(n).reduce((t,i)=>(i!==e&&(t[i]=n[i]),t),{})}function hR(n,e){let t="";if(typeof n=="string"&&/^[0-9\-\/]*$/.test(n)){let i=decodeURIComponent(n),r=lR(new Date(i));r.isValid()&&r.year().toString().length===4&&(t=e?r.utc().format():r.format())}return t}function ro(n,e=","){if(n!=null){let t=`${n}`,i=t.split(".");return i.length===2?`${i[0].replace(/\B(?=(\d{3})+(?!\d))/g,e)}.${i[1]}`:t.replace(/\B(?=(\d{3})+(?!\d))/g,e)}return n}function or(n,e,t={}){return Array.isArray(n)?n.find(e)||t:n}function ys(n){if(Array.isArray(n))for(;n.length>0;){let e=n.pop();e?.unsubscribe&&e.unsubscribe()}return n}var Mg={};el(Mg,{sortByFieldType:()=>Fr});var OE=(n,e,t)=>{t==null&&(t=st.neutral);let i=0;return n===e?i=0:n===null?i=-1:e===null?i=1:t?i=n<e?-1:1:i=n<e?1:-1,t*i};var AE=(n,e,t,i,r)=>{if(!i||!i.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');let s=n?.hasOwnProperty(i.dataKey)?n[i.dataKey]:n,o=e?.hasOwnProperty(i.dataKey)?e[i.dataKey]:e,a=i?.valueCouldBeUndefined??r?.cellValueCouldBeUndefined??!1;t==null&&(t=st.neutral);let l=0;return typeof n!="object"?l=-99e10:typeof e!="object"?l=99e10:s===null||a&&s===void 0?l=-1:o===null||a&&o===void 0?l=1:s===o?l=0:t?l=s<o?-1:1:l=s<o?1:-1,t*l};var Ag={};el(Ag,{addToArrayWhenNotExists:()=>xg,addWhiteSpaces:()=>wd,arrayRemoveItemByIndex:()=>Zl,calculateAvailableSpace:()=>oo,createDomElement:()=>E,deepCopy:()=>Ca,deepMerge:()=>Nr,destroyAllElementProps:()=>Ql,emptyElement:()=>De,emptyObject:()=>mR,findFirstAttribute:()=>fR,findWidthOrDefault:()=>tn,getHTMLFromFragment:()=>Eg,getInnerSize:()=>_a,getOffset:()=>at,getOffsetRelativeToParent:()=>wg,getStyleProp:()=>RE,hasData:()=>ya,htmlEncode:()=>ME,htmlEncodeWithPadding:()=>Sg,htmlEntityDecode:()=>pR,insertAfterElement:()=>Dg,isDefined:()=>je,isEmptyObject:()=>Sd,isNumber:()=>Ue,isObject:()=>ar,isObjectEmpty:()=>Tg,isPrimitiveOrHTML:()=>bs,isPrimitiveValue:()=>lo,objectAssignAndExtend:()=>ao,parseBoolean:()=>Jl,removeAccentFromText:()=>Es,setDeepValue:()=>lr,stripTags:()=>ti,titleCase:()=>ws,toCamelCase:()=>Ig,toKebabCase:()=>co,toSentenceCase:()=>ci,toSnakeCase:()=>gR,uniqueArray:()=>Og,uniqueObjectArray:()=>vR,windowScrollPosition:()=>Ed});function oo(n){let e=0,t=0,i=0,r=0,s=window.innerHeight??0,o=window.innerWidth??0,a=Ed(),l=a.top,u=a.left,h=at(n);if(h){let f=h.top??0,m=h.left??0;t=f-l,e=s-(f-l),i=m-u,r=o-(m-u)}return{top:t,bottom:e,left:i,right:r}}function E(n,e,t){let i=document.createElement(n);return e&&Object.keys(e).forEach(r=>{r==="innerHTML"&&console.warn(`[Slickgrid-Universal] For better CSP (Content Security Policy) support, do not use "innerHTML" directly in "createDomElement('${n}', { innerHTML: 'some html'})", it is better as separate assignment: "const elm = createDomElement('span'); elm.innerHTML = 'some html';"`);let s=e[r];typeof s=="object"?Object.assign(i[r],s):i[r]=e[r]}),t?.appendChild&&t.appendChild(i),i}function Ql(n){if(n)for(let e of Object.keys(n))Array.isArray(n[e])&&Ql(n[e]),n[e]instanceof HTMLElement&&(n[e]=null)}function De(n){for(;n?.firstChild;)n.removeChild(n.firstChild);return n}function Eg(n,e="innerHTML"){return n instanceof DocumentFragment?[].map.call(n.childNodes,t=>t[e]).join("")||n.textContent||"":n}function wg(n,e){if(!n||!e)return;let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{top:i.top-t.top,right:i.right-t.right,bottom:i.bottom-t.bottom,left:i.left-t.left}}function at(n){if(!n||!n.getBoundingClientRect)return;let e=n.getBoundingClientRect(),t=document.documentElement,i=0,r=0,s=0,o=0;return e?.top!==void 0&&e.left!==void 0&&(i=e.top+window.pageYOffset-t.clientTop,r=e.left+window.pageXOffset-t.clientLeft,o=e.right,s=e.bottom),{top:i,left:r,bottom:s,right:o}}function _a(n,e){let t=0;if(n){let i=e==="height"?"clientHeight":"clientWidth",r=e==="height"?["top","bottom"]:["left","right"];t=n[i];for(let s of r){let o=parseFloat(RE(n,`padding-${s}`)||"")||0;t-=o}}return t}function RE(n,e){return n?window.getComputedStyle(n).getPropertyValue(e):null}function fR(n,e){if(n)for(let t of e){let i=n.getAttribute(t);if(i)return i}return null}function tn(n,e="auto"){return(/^[0-9]+$/i.test(`${n}`)?`${+n}px`:n)||e}function ME(n){let e=typeof n=="string"?n:String(n),t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(e||"").toString().replace(/[&<>"']/g,i=>t[i])}function pR(n){return n.replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))}function Sg(n,e){let t=n.length,i=ME(n);if(t<e)for(let r=t;r<e;r++)i+="&nbsp;";return i}function Dg(n,e){n.parentNode?.insertBefore(e,n.nextSibling)}function Ed(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}function xg(n,e,t="id"){let i=-1;e&&typeof e=="object"&&t in e?i=n.findIndex(r=>r[t]===e[t]):i=n.findIndex(r=>r===e),i<0&&n.push(e)}function wd(n,e=" "){let t="";for(let i=0;i<n;i++)t+=e;return t}function Zl(n,e){return n.filter((t,i)=>e!==i)}function Ca(n){let e=()=>{let r={};for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=Ca(n[s]));return r},t=()=>n.map(r=>Ca(r)),i=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();return i==="object"?e():i==="array"?t():n}function Nr(n,...e){if(!e.length)return n;let t=e.shift();if(n=!ar(n)&&ar(t)?{}:n,ar(n)&&ar(t))for(let i in t)t.hasOwnProperty(i)&&(i in n?typeof n[i]!="object"||typeof t[i]!="object"?n[i]=t[i]:n[i].concat&&t[i].concat?n[i]=n[i].concat(t[i]):n[i]=Nr(n[i],t[i]):n[i]=t[i]);return Nr(n,...e)}function ao(n,...e){if(!e.length||e[0]===void 0)return n;let t=e.shift();if(n=!ar(n)&&ar(t)?{}:n,ar(n)&&ar(t))for(let i of Object.keys(t))typeof t[i]=="object"&&t[i]!==null&&ao(n[i],t[i]),(n[i]===null||n[i]===void 0)&&t[i]!==null&&t[i]!==void 0&&(n[i]=t[i]);return ao(n,...e)}function mR(n){for(let e in n)n.hasOwnProperty(e)&&delete n[e];return n=null,n={},n}function Sd(n){return n==null?!0:Object.entries(n).length===0}function je(n){return n!=null&&n!==""}function ar(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)}function lo(n){return typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n===null||n===void 0}function bs(n){return n instanceof HTMLElement||n instanceof DocumentFragment||lo(n)}function ya(n){return n!=null&&n!==""}function Ue(n,e=!1){return e?n==null||typeof n=="string"?!1:!isNaN(n):n==null||n===""?!1:!isNaN(+n)}function Tg(n){return!n||n&&typeof n=="object"&&Object.keys(n).length===0}function Jl(n){return/(true|1)/i.test(n+"")}function Es(n,e=!1){let t=typeof n.normalize=="function"?n.normalize("NFD").replace(/[\u0300-\u036f]/g,""):n;return e?t.toLowerCase():t}function lr(n,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length>1){let i=e.shift();n&&i!==void 0&&lr(n[i]=ya(n[i])&&(Array.isArray(n[i])||Object.prototype.toString.call(n[i])==="[object Object]")?n[i]:{},e,t)}else n&&e[0]&&(n[e[0]]=t)}function ws(n,e=!1){return typeof n=="string"?e?n.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()):n.charAt(0).toUpperCase()+n.slice(1):n}function Ig(n){return typeof n=="string"?n.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_\/])/g,(e,t)=>/[\s+\-_\/]/.test(e)?"":t===0?e.toLowerCase():e.toUpperCase()):n}function co(n){return typeof n=="string"?Ig(n).replace(/([A-Z])/g,"-$1").toLowerCase():n}function ci(n){if(typeof n=="string"){let e=n.replace(/([A-Z])|(\-)/g," $1").replace(/\s+/g," ").trim();return e.charAt(0).toUpperCase()+e.slice(1)}return n}function gR(n){return typeof n=="string"?Ig(n).replace(/([A-Z])/g,"_$1").toLowerCase():n}function Og(n){return Array.isArray(n)&&n.length>0?n.filter((e,t)=>n.indexOf(e)>=t):n}function vR(n,e="id"){if(Array.isArray(n)&&n.length>0){let t=[],i=new Map;for(let r of n)r&&!i.has(r[e])&&(i.set(r[e],!0),t.push({id:r[e],name:r.name}));return t}return n}var ec=Symbol("plaintext"),PE=Symbol("html"),NE=Symbol("comment"),_R=/<(\w*)>/g,CR=/<\/?([^\s\/>]+)/;function ti(n,e,t){function i(l,u,h){if(typeof l!="string"&&(Ue(l)||typeof l=="boolean"))return String(l);if(l instanceof HTMLElement&&(l=l.innerHTML),typeof l!="string"&&l!==void 0&&l!==null)throw new TypeError("'html' parameter must be a string");return s(l||"",r(u||"",h||""))}function r(l,u){return{allowable_tags:o(l),tag_replacement:u,state:ec,tag_buffer:"",depth:0,in_quote_char:""}}function s(l,u){let h=u.allowable_tags,f=u.tag_replacement,m=u.state,v=u.tag_buffer,w=u.depth,S=u.in_quote_char,P="";for(let R=0,M=l.length;R<M;R++){let x=l[R];if(m===ec)switch(x){case"<":m=PE,v+=x;break;default:P+=x;break}else if(m===PE)switch(x){case"<":if(S)break;w++;break;case">":if(S)break;if(w){w--;break}S="",m=ec,v+=">",h.has(a(v))?P+=v:P+=f,v="";break;case'"':case"'":x===S?S="":S=S||x,v+=x;break;case"-":v==="<!-"&&(m=NE),v+=x;break;case" ":case`
`:if(v==="<"){m=ec,P+="< ",v="";break}v+=x;break;default:v+=x;break}else if(m===NE)switch(x){case">":v.slice(-2)==="--"&&(m=ec),v="";break;default:v+=x;break}}return u.state=m,u.tag_buffer=v,u.depth=w,u.in_quote_char=S,P}function o(l){let u=new Set;if(typeof l=="string"){let h;for(;h=_R.exec(l);)u.add(h[1])}else typeof l[Symbol.iterator]=="function"&&(u=new Set(l));return u}function a(l){let u=CR.exec(l);return u?u[1].toLowerCase():null}return i(n,e,t)}var FE=(n,e,t,i,r)=>{t==null&&(t=st.neutral);let s=0,o=i?.valueCouldBeUndefined??r?.cellValueCouldBeUndefined??!1;return n===e?s=0:n===null||o&&n===void 0?s=-1:e===null||o&&e===void 0?s=1:(r?.ignoreAccentOnStringFilterAndSort&&(n=Es(n,!1),e=Es(e,!1)),t?s=n<e?-1:1:s=n<e?1:-1),t*s};var kE=(n,e,t,i,r)=>{let s=i?.valueCouldBeUndefined??r?.cellValueCouldBeUndefined??!1,o=isNaN(n)||n===""||n===null||s&&n===void 0?-99e10:parseFloat(n),a=isNaN(e)||e===""||e===null||s&&e===void 0?-99e10:parseFloat(e);return t*(o===a?0:o>a?1:-1)};var Rg=dn(vs());var Dd=Rg.default||Rg;function LE(n,e,t,i,r){let s=0;if(n===e)s=0;else{let o=Dd(n,i,r),a=Dd(e,i,r);o.isValid()||(o=new Date(1001,1,1)),a.isValid()||(a=new Date(1001,1,1)),s=o.valueOf()-a.valueOf()}return t*s}function ut(n){let e=n===b.date?Dd.ISO_8601:en(n);return(t,i,r)=>e===Dd.ISO_8601?LE(t,i,r,e,!1):LE(t,i,r,e,!0)}var tc={boolean:OE,date:ut(b.date),dateIso:ut(b.dateIso),dateUtc:ut(b.dateUtc),dateTime:ut(b.dateTime),dateTimeIso:ut(b.dateTimeIso),dateTimeIsoAmPm:ut(b.dateTimeIsoAmPm),dateTimeIsoAM_PM:ut(b.dateTimeIsoAM_PM),dateTimeShortIso:ut(b.dateTimeShortIso),dateEuro:ut(b.dateEuro),dateEuroShort:ut(b.dateEuroShort),dateTimeShortEuro:ut(b.dateTimeShortEuro),dateTimeEuro:ut(b.dateTimeEuro),dateTimeEuroAmPm:ut(b.dateTimeEuroAmPm),dateTimeEuroAM_PM:ut(b.dateTimeEuroAM_PM),dateTimeEuroShort:ut(b.dateTimeEuroShort),dateTimeEuroShortAmPm:ut(b.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:ut(b.dateTimeEuroShortAM_PM),dateUs:ut(b.dateUs),dateUsShort:ut(b.dateUsShort),dateTimeShortUs:ut(b.dateTimeShortUs),dateTimeUs:ut(b.dateTimeUs),dateTimeUsAmPm:ut(b.dateTimeUsAmPm),dateTimeUsAM_PM:ut(b.dateTimeUsAM_PM),dateTimeUsShort:ut(b.dateTimeUsShort),dateTimeUsShortAmPm:ut(b.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:ut(b.dateTimeUsShortAM_PM),numeric:kE,objectString:AE,string:FE};function Fr(n,e,t,i,r,s){let o=0;switch(n){case b.boolean:o=tc.boolean(e,t,i,r,s);break;case b.float:case b.integer:case b.number:o=tc.numeric(e,t,i,r,s);break;case b.date:case b.dateIso:case b.dateUtc:case b.dateTime:case b.dateTimeIso:case b.dateTimeIsoAmPm:case b.dateTimeIsoAM_PM:case b.dateTimeShortIso:case b.dateEuro:case b.dateEuroShort:case b.dateTimeShortEuro:case b.dateTimeEuro:case b.dateTimeEuroAmPm:case b.dateTimeEuroAM_PM:case b.dateTimeEuroShort:case b.dateTimeEuroShortAmPm:case b.dateTimeEuroShortAM_PM:case b.dateUs:case b.dateUsShort:case b.dateTimeShortUs:case b.dateTimeUs:case b.dateTimeUsAmPm:case b.dateTimeUsAM_PM:case b.dateTimeUsShort:case b.dateTimeUsShortAmPm:case b.dateTimeUsShortAM_PM:o=ut(n).call(this,e,t,i,r,s);break;case b.object:o=tc.objectString(e,t,i,r,s);break;case b.string:case b.text:case b.password:case b.readonly:default:o=tc.string(e,t,i,r,s);break}return o}var Hi=function(n){return n.camelCase="camelCase",n.kebabCase="kebabCase",n.lowerCase="lowerCase",n.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix",n}(Hi||{});var xd=class{get elementSource(){return this._elementSource}set elementSource(e){this._elementSource=e}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map(e=>e.name)}constructor(e){this._subscribedEvents=[],this.eventNamingStyle=Hi.camelCase,this._elementSource=e||document.createElement("div")}dispose(){this.unsubscribeAll(),this._subscribedEvents=[],clearTimeout(this._timer),this._elementSource?.remove(),this._elementSource=null}dispatchCustomEvent(e,t,i=!0,r=!0){let s={bubbles:i,cancelable:r};return t&&(s.detail=t),this._elementSource?.dispatchEvent(new CustomEvent(e,s))}getEventNameByNamingConvention(e,t){let i="";switch(this.eventNamingStyle){case Hi.camelCase:i=t!==""?`${t}${ws(e)}`:e;break;case Hi.kebabCase:i=t!==""?`${t}-${co(e)}`:co(e);break;case Hi.lowerCase:i=`${t}${e}`.toLowerCase();break;case Hi.lowerCaseWithoutOnPrefix:i=`${t}${e.replace(/^on/,"")}`.toLowerCase();break}return i}publish(e,t,i){let r=this.getEventNameByNamingConvention(e,"");return i?new Promise(s=>{clearTimeout(this._timer),this._timer=setTimeout(()=>s(this.dispatchCustomEvent(r,t,!0,!0)),i)}):this.dispatchCustomEvent(r,t,!0,!0)}subscribe(e,t){let i=this.getEventNameByNamingConvention(e,"");return this._elementSource.addEventListener(i,r=>t.call(null,r.detail)),this._subscribedEvents.push({name:i,listener:t}),{unsubscribe:()=>this.unsubscribe(i,t)}}subscribeEvent(e,t){let i=this.getEventNameByNamingConvention(e,"");return this._elementSource.addEventListener(i,t),this._subscribedEvents.push({name:i,listener:t}),{unsubscribe:()=>this.unsubscribe(i,t)}}unsubscribe(e,t,i=!0){let r=this.getEventNameByNamingConvention(e,"");this._elementSource.removeEventListener(r,t),i&&this.removeSubscribedEventWhenFound(e,t)}unsubscribeAll(e){if(Array.isArray(e)){let t;do t=e.pop(),t?.dispose?t.dispose():t?.unsubscribe&&t.unsubscribe();while(t)}else{let t=this._subscribedEvents.pop();for(;t;)this.unsubscribe(t.name,t.listener,!1),t=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(e,t){let i=this._subscribedEvents.findIndex(r=>r.name===e&&r.listener===t);i>=0&&this._subscribedEvents.splice(i,1)}};var Ug=dn(Fg());var Td=class{constructor(e){this._value=null,this._boundedEventWithListeners=[],this._elementBindings=[],this._binding=e,this._property=e.property||"",this._elementBindings=[],e.property&&e.variable&&(e.variable.hasOwnProperty(e.property)||e.property in e.variable)?this._value=e.variable[e.property]:this._value=e.variable,typeof e.variable=="object"&&Object.defineProperty(e.variable,e.property,{get:this.valueGetter.bind(this),set:this.valueSetter.bind(this)})}get boundedEventWithListeners(){return this._boundedEventWithListeners}get elementBindings(){return this._elementBindings}get property(){return this._property}dispose(){this.unbindAll(),this._boundedEventWithListeners=[],this._elementBindings=[]}valueGetter(){return this._value}valueSetter(e){if(this._value=e,Array.isArray(this._elementBindings))for(let t of this._elementBindings)t?.element&&t?.attribute&&(t.element[t.attribute]=e)}bind(e,t,i,r){return e&&e.forEach?e.forEach(s=>this.bindSingleElement(s,t,i,r)):e&&this.bindSingleElement(e,t,i,r),this}unbind(e,t,i,r,s){if(e){e.removeEventListener(t,i,r);let o=this._boundedEventWithListeners.findIndex(a=>a.uid===s);o>=0&&this._boundedEventWithListeners.splice(o,1)}}unbindAll(){let e=this._boundedEventWithListeners.pop();for(;e;){let{element:t,eventName:i,listener:r,uid:s}=e;this.unbind(t,i,r,void 0,s),e=this._boundedEventWithListeners.pop()}this._boundedEventWithListeners=[]}bindSingleElement(e,t,i,r){let s={element:e,attribute:t};if(e){if(i){let o=()=>{let a=e[t];if(this.hasData(a)&&e?.type==="number"&&(a=+a),this.valueSetter(a),(this._binding.variable.hasOwnProperty(this._binding.property)||this._binding.property in this._binding.variable)&&(this._binding.variable[this._binding.property]=this.valueGetter()),typeof r=="function")return r(this.valueGetter())};s.event=i,s.listener=o,e.addEventListener(i,o),this._boundedEventWithListeners.push({element:e,eventName:i,listener:o,uid:this.generateUuidV4()})}this._elementBindings.push(s),e[t]=this._value}}generateUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}hasData(e){return e!=null&&e!==""}};var ba=class{constructor(){this._observers=[],this._querySelectorPrefix=""}get querySelectorPrefix(){return this._querySelectorPrefix||""}set querySelectorPrefix(e){this._querySelectorPrefix=e}get observers(){return this._observers}dispose(){let e=this._observers.pop();for(;e;)e.dispose(),e=this._observers.pop();this._observers=[]}addElementBinding(e,t,i,r,s,o){let a=document.querySelectorAll(`${this.querySelectorPrefix}${i}`),l=this._observers.find(u=>u.property===e);l||(l=new Td({variable:e,property:t})),Array.isArray(s)?s.forEach(u=>l?.bind(a,r,u,o)):l?.bind(a,r,s,o),this._observers.push(l)}bindEventHandler(e,t,i,r){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach(o=>{o?.addEventListener&&o.addEventListener(t,i,r)})}setElementAttributeValue(e,t,i){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach(s=>{s.textContent="",s&&t in s&&(s[t]=i)})}};var qe=class{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(e,t,i,r,s=""){let o=Array.isArray(t)?t:[t];if(e?.forEach)e.forEach(a=>{for(let l of o)a.addEventListener(l,i,r),this._boundedEvents.push({element:a,eventName:l,listener:i,groupName:s})});else for(let a of o)e.addEventListener(a,i,r),this._boundedEvents.push({element:e,eventName:a,listener:i,groupName:s})}unbind(e,t,i){let r=Array.isArray(e)?e:[e],s=Array.isArray(t)?t:[t];for(let o of s)for(let a of r)typeof a?.removeEventListener=="function"&&a.removeEventListener(o,i)}unbindByEventName(e,t){let i=this._boundedEvents.find(r=>r.element===e&&r.eventName===t);i&&this.unbind(i.element,i.eventName,i.listener)}unbindAll(e){if(e){let t=Array.isArray(e)?e:[e];for(let i=this._boundedEvents.length-1;i>=0;--i){let r=this._boundedEvents[i];if(t.some(s=>s===r.groupName)){let{element:s,eventName:o,listener:a}=r;this.unbind(s,o,a),this._boundedEvents.splice(i,1)}}}else for(;this._boundedEvents.length>0;){let t=this._boundedEvents.pop(),{element:i,eventName:r,listener:s}=t;this.unbind(i,r,s)}}};function kg(n,e){let t=e.fetch;t&&(e.fetch=(i,r,s,o)=>{n.classList.add("slick-autocomplete-loading");let a=r;t(i,u=>{a(u),n.classList.remove("slick-autocomplete-loading")},s,o)})}var Hg=dn(Id());function Bg(n,e,t,i,r=!1,s,o){let a=t?.id??"",l=i.getOptions(),u=(n==="editor"?t?.internalColumnEditor:t?.filter)??{},f=(u?.collectionOptions??{})?.separatorBetweenTextLabels??"",m=u?.enableTranslateLabel??!1,v=l?.enableTranslate??!1,w=u?.enableRenderHtml??!1,S=l?.sanitizerOptions??{},P=u?.customStructure?.label??"label",R=u?.customStructure?.labelPrefix??"labelPrefix",M=u?.customStructure?.labelSuffix??"labelSuffix",x=u?.customStructure?.optionLabel??"value",L=u?.customStructure?.value??"value",z=E("select",{className:"ms-filter search-filter"}),Y=n==="filter"?["search-filter",`filter-${a}`]:["select-editor",`editor-${a}`];z.classList.add(...Y),z.multiple=r;let U=[],pe=!1;if(Array.isArray(e))if(e.every(Z=>typeof Z=="number"||typeof Z=="string"))for(let Z of e){let We={text:Z,value:Z};n==="filter"&&Array.isArray(o)&&(We.selected=o.findIndex(it=>it===Z)>=0),U.push(We),(We.selected&&r||We.selected&&!r&&Z!=="")&&(pe=!0)}else e.forEach(Z=>{if(Z===void 0||typeof Z=="object"&&Z[P]===void 0&&Z.labelKey===void 0)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");let We=Z.labelKey||Z[P],it=(Z.labelKey||m&&s)&&We&&v?s?.translate(We||" "):We,pt=Z[R]||"",Fe=Z[M]||"",lt=Z.hasOwnProperty(x)?Z[x]:"";lt?.toString&&(lt=lt.toString().replace(/\"/g,"'")),pt=m&&s&&pt&&typeof pt=="string"?s.translate(pt||" "):pt,Fe=m&&s&&Fe&&typeof Fe=="string"?s.translate(Fe||" "):Fe,lt=m&&s&&lt&&typeof lt=="string"?s.translate(lt||" "):lt;let Mt=[pt,typeof it=="string"||typeof it=="number"?it.toString():it,Fe].filter(ii=>ii).join(f),Ct={text:"",value:""};w&&(Mt=cr(l,Mt,S)),Ct.text=Mt;let q=Z[L];q==null&&(q=""),n==="filter"&&Array.isArray(o)&&(Ct.selected=o.findIndex(ii=>`${ii}`==`${Z[L]}`)>=0),Ct.value=`${q??""}`,U.push(Ct),(Ct.selected&&r||Ct.selected&&!r&&Z[L]!=="")&&(pe=!0)});return{selectElement:z,dataCollection:U,hasFoundSearchTerm:pe}}function cr(n,e,t){let i=e;return typeof n?.sanitizer=="function"?i=n.sanitizer(e||""):typeof Hg.default?.sanitize=="function"&&(i=(Hg.default.sanitize(e||"",t||{ADD_ATTR:["level"],RETURN_TRUSTED_TYPE:!0})||"").toString()),i}function Ea(n,e){let t=E("select",{className:"form-control"});for(let i of n){let r=document.createElement("option");r.value=i.operator,e.applyHtmlCode(r,`${Sg(i.operatorAlt||i.operator,3)}${i.descAlt||i.desc}`),t.appendChild(r)}return t}function yR(n,e,t){let i=e?.filter??{},r=i?.collectionOptions??{};if(r&&r.collectionInsideObjectProperty){let s=r.collectionInsideObjectProperty;n=At(n,s)}if(!Array.isArray(n))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');i.collection=n,t(n)}function Od(n,e,t,i,r){return kt(this,null,function*(){let s=e?.filter??{},o=s?.collectionOptions??{},a=null;if(n){let l=i?.isObservable(n)??!1;l&&i&&(a=yield Xl(i,n));let u=yield n;if(Array.isArray(u)?a=u:u?.status>=200&&u.status<300&&typeof u.json=="function"?a=yield u.json():u&&u.content&&(a=u.content),!Array.isArray(a)&&o?.collectionInsideObjectProperty){let h=a||u,f=o.collectionInsideObjectProperty;a=At(h,f||"")}if(!Array.isArray(a))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');s.collection=a,t(a),l&&bR(e,t,i,r)}return a})}function bR(n,e,t,i){let r=n?.filter??{},s=t?.createSubject();r.collectionAsync=s,i&&s&&i.push(s.subscribe(o=>yR(o,n,e)))}function vn(n,e,t,i,r){if(i?.enableTranslate&&r?.translate){let o=li(i);return r.translate(`${o}${n}`)}return(i.locales||V.locales)?.[e]??t}function VE(n,e){let t=[{operator:"",desc:vn("CONTAINS","TEXT_CONTAINS","Contains",n,e)},{operator:"<>",desc:vn("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains",n,e)},{operator:"=",desc:vn("EQUALS","TEXT_EQUALS","Equals",n,e)},{operator:"!=",desc:vn("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",n,e)},{operator:"a*",desc:vn("STARTS_WITH","TEXT_STARTS_WITH","Starts with",n,e)},{operator:"*z",desc:vn("ENDS_WITH","TEXT_ENDS_WITH","Ends with",n,e)}];return HE(n,t,"text"),t}function wa(n,e){let t=[{operator:"",desc:""},{operator:"=",desc:vn("EQUAL_TO","TEXT_EQUAL_TO","Equal to",n,e)},{operator:"<",desc:vn("LESS_THAN","TEXT_LESS_THAN","Less than",n,e)},{operator:"<=",desc:vn("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to",n,e)},{operator:">",desc:vn("GREATER_THAN","TEXT_GREATER_THAN","Greater than",n,e)},{operator:">=",desc:vn("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to",n,e)},{operator:"<>",desc:vn("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",n,e)}];return HE(n,t,"numeric"),t}function HE(n,e,t){if(n.compoundOperatorAltTexts){for(let i of e)if(n.compoundOperatorAltTexts.hasOwnProperty(t)){let r=n.compoundOperatorAltTexts[t][i.operator];i.operatorAlt=r?.operatorAlt||"",i.descAlt=r?.descAlt||""}}}var Ad=class{constructor(e,t,i){this.translaterService=e,this.collectionService=t,this.rxjs=i,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.isItemSelected=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[],this._bindEventService=new qe}get autocompleterOptions(){return this._autocompleterOptions||{}}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get collection(){return this._collection}get columnFilter(){return this.columnDef?.filter||{}}get filterDomElement(){return this._filterElm}get filterOptions(){return this.columnFilter?.filterOptions||{}}get customStructure(){let e=this.columnFilter?.customStructure,t=this.columnFilter?.type??this.columnDef?.type;return!e&&t===b.object&&this.columnDef?.dataKey&&this.columnDef?.labelKey&&(e={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),e}get defaultOperator(){return ne.equal}get gridOptions(){return this.grid?.getOptions()??{}}get instance(){return this._instance}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync&&!this.columnFilter.filterOptions)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autocompleter, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.valueName=this.customStructure?.value??"value",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this._locales=this.gridOptions?.locales??V.locales;let t=this.columnFilter.collection;return this._collection=t,this.renderDomElement(t),new Promise((i,r)=>kt(this,null,function*(){try{let s=this.columnFilter.collectionAsync,o;s&&!this.columnFilter.collection?(o=Od(s,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),i(o)):(o=t,i(t)),(s||this.columnFilter.enableCollectionWatch)&&(yield o??s,this.watchCollectionChanges())}catch(s){r(s)}}))}clear(e=!0){this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._filterElm.value="",this._filterElm.dispatchEvent(new CustomEvent("input")),this._filterElm.classList.remove("filled"))}destroy(){typeof this._instance?.destroy=="function"&&this._instance.destroy(),this._filterElm,this._filterElm?.remove?.(),this._collection=void 0,this._bindEventService.unbindAll(),ys(this.subscriptions)}getValues(){return this._filterElm?.value}setValues(e,t){e&&this._filterElm&&(this._filterElm.value=e);let i=this.getValues()!==""?"add":"remove";this._filterElm?.classList[i]("filled"),this.operator=t||this.defaultOperator}filterCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){let i=this.columnFilter.collectionFilterBy,r=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;t=this.collectionService.filterCollection(t,i,r)}return t}sortCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){let i=this.columnFilter.collectionSortBy;t=this.collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t}watchCollectionChanges(){this.columnFilter?.collection&&(no(this.columnFilter.collection,e=>{this.renderDomElement(this.columnFilter.collection||e||[])}),Yl(this.columnFilter,"collection",e=>{this.renderDomElement(e||[]),this.columnFilter.collection&&no(this.columnFilter.collection,t=>{this.renderDomElement(this.columnFilter.collection||t||[])})}))}renderDomElement(e){if(!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty){let r=this.collectionOptions.collectionInsideObjectProperty;e=At(e,r||"")}let t=e;t&&(t=this.filterCollection(t),t=this.sortCollection(t));let i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._collection=t,this._filterElm=this.createFilterElement(t,i),this._bindEventService.bind(this._filterElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._filterElm,"blur",()=>{this.isItemSelected||this.clear()})}createFilterElement(e,t){this._collection=e;let i=this.columnDef?.id??"";De(this.filterContainerElm);let r=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(r=this.columnFilter.placeholder),this._filterElm=E("input",{type:"text",ariaLabel:this.columnFilter?.ariaLabel??`${ci(i+"")} Search Filter`,autocomplete:"off",ariaAutoComplete:"none",placeholder:r,className:`form-control search-filter filter-${i} slick-autocomplete-container`,value:t??"",dataset:{columnid:`${i}`}});let s=t;Array.isArray(e)&&(e.every(a=>lo(a))?e=e.map(a=>({label:a,value:a})):e=e.map(a=>({label:a?.[this.labelName],value:a?.[this.valueName],labelPrefix:a?.[this.labelPrefixName]??"",labelSuffix:a?.[this.labelSuffixName]??""}))),this._autocompleterOptions=D({input:this._filterElm,debounceWaitMs:200,className:`slick-autocomplete ${this.filterOptions?.className??""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&this.translaterService?.translate?this.translaterService.translate("NO_ELEMENTS_FOUND"):this._locales?.TEXT_NO_ELEMENTS_FOUND??"No elements found",customize:(a,l,u)=>{u.style.width=""},onSelect:a=>{this.isItemSelected=!0,this.handleSelect(a)}},this.filterOptions),this._autocompleterOptions.renderItem?.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${co(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(e)?this._autocompleterOptions.render=this._autocompleterOptions.render?.bind(this)??this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),this.filterOptions?.fetch?(kg(this._filterElm,this._autocompleterOptions),this._instance=(0,Ug.default)(this._autocompleterOptions)):this._instance=(0,Ug.default)(me(D({},this._autocompleterOptions),{fetch:(a,l)=>{e&&l(e.filter(u=>((typeof u=="string"?u:u?.label)||"").toLowerCase().includes(a.toLowerCase())))}})),this._filterElm.value=s??"";let o=E("div",{className:"autocomplete-filter-container"});return o.appendChild(this._filterElm),o.appendChild(E("span")),t&&this._filterElm.classList.add("filled"),this.filterContainerElm.appendChild(o),this.filterContainerElm.appendChild(document.createElement("span")),this._filterElm}handleSelect(e){if(e!==void 0){let i=this.columnFilter?.filterOptions?.renderItem??!1,r=typeof e=="string"?e:i?e[this.labelName]:e.label,s=typeof e=="string"?e:i?e[this.valueName]:e.value;s=this.trimWhitespaceWhenEnabled(s);let o=s===""?"remove":"add";this._filterElm?.classList[o]("filled"),this.setValues(r),this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[s],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(e){let t=e?.target?.value??"",i=this.filterOptions.triggerOnEveryKeyStroke??!1;if(t=this.trimWhitespaceWhenEnabled(t),this._clearFilterTriggered||t===""||i){let r={columnDef:this.columnDef,shouldTriggerQuery:this._shouldTriggerQuery};this._clearFilterTriggered?r.clearFilterTriggered=this._clearFilterTriggered:(r.operator=this.operator,r.searchTerms=[t]),t!==""?(this.isItemSelected=!0,this._filterElm?.classList.add("filled")):(this.isItemSelected=!1,this._filterElm?.classList.remove("filled")),this.callback(e,r)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderRegularItem(e){let t=typeof e=="string"?e:e?.label??"";return E("div",{textContent:t||""})}renderCustomItem(e){let t=this._autocompleterOptions?.renderItem?.templateCallback(e)??"",i=document.createElement("div");return this.grid.applyHtmlCode(i,t),i}renderCollectionItem(e){let t=this.columnFilter?.enableRenderHtml??!1,i=e.labelPrefix||"",r=e.label||"",s=e.labelSuffix||"",o=i+r+s,a=cr(this.gridOptions,o)||"",l=document.createElement("div");return l[t?"innerHTML":"textContent"]=a,l}trimWhitespaceWhenEnabled(e){let t=e,i=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;return typeof e=="string"&&i&&(t=e.trim()),t}};var Rd=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ss={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Md={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Pd=Md;var Ci=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Bi=function(n){return n===!0?1:0};function zg(n,e){var t;return function(){var i=this,r=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(i,r)},e)}}var Nd=function(n){return n instanceof Array?n:[n]};function yi(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function Ze(n,e,t){var i=window.document.createElement(n);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}function ic(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function $g(n,e){if(e(n))return n;if(n.parentNode)return $g(n.parentNode,e)}function nc(n,e){var t=Ze("div","numInputWrapper"),i=Ze("input","numInput "+n),r=Ze("span","arrowUp"),s=Ze("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var o in e)i.setAttribute(o,e[o]);return t.appendChild(i),t.appendChild(r),t.appendChild(s),t}function Ui(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var jg=function(){},rc=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},BE={D:jg,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Bi(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var i=parseInt(e),r=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+t.firstDayOfWeek),r},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:jg,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:jg,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},kr={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Sa={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[Sa.w(n,e,t)]},F:function(n,e,t){return rc(Sa.n(n,e,t)-1,!1,e)},G:function(n,e,t){return Ci(Sa.h(n,e,t))},H:function(n){return Ci(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Bi(n.getHours()>11)]},M:function(n,e){return rc(n.getMonth(),!0,e)},S:function(n){return Ci(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return Ci(n.getFullYear(),4)},d:function(n){return Ci(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Ci(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return Ci(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}};var Wg=function(n){var e=n.config,t=e===void 0?Ss:e,i=n.l10n,r=i===void 0?Md:i,s=n.isMobile,o=s===void 0?!1:s;return function(a,l,u){var h=u||r;return t.formatDate!==void 0&&!o?t.formatDate(a,l,h):l.split("").map(function(f,m,v){return Sa[f]&&v[m-1]!=="\\"?Sa[f](a,h,t):f!=="\\"?f:""}).join("")}},Fd=function(n){var e=n.config,t=e===void 0?Ss:e,i=n.l10n,r=i===void 0?Md:i;return function(s,o,a,l){if(!(s!==0&&!s)){var u=l||r,h,f=s;if(s instanceof Date)h=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)h=new Date(s);else if(typeof s=="string"){var m=o||(t||Ss).dateFormat,v=String(s).trim();if(v==="today")h=new Date,a=!0;else if(t&&t.parseDate)h=t.parseDate(s,m);else if(/Z$/.test(v)||/GMT$/.test(v))h=new Date(s);else{for(var w=void 0,S=[],P=0,R=0,M="";P<m.length;P++){var x=m[P],L=x==="\\",z=m[P-1]==="\\"||L;if(kr[x]&&!z){M+=kr[x];var Y=new RegExp(M).exec(s);Y&&(w=!0)&&S[x!=="Y"?"push":"unshift"]({fn:BE[x],val:Y[++R]})}else L||(M+=".")}h=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),S.forEach(function(U){var pe=U.fn,Z=U.val;return h=pe(h,Z,u)||h}),h=w?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){t.errorHandler(new Error("Invalid date provided: "+f));return}return a===!0&&h.setHours(0,0,0,0),h}}};function zi(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var UE=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},kd=function(n,e,t){return n*3600+e*60+t},zE=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},$E={DAY:864e5};function Ld(n){var e=n.defaultHour,t=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var r=n.minDate.getHours(),s=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<r&&(e=r),e===r&&t<s&&(t=s),e===r&&t===s&&i<o&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var a=n.maxDate.getHours(),l=n.maxDate.getMinutes();e=Math.min(e,a),e===a&&(t=Math.min(l,t)),e===a&&t===l&&(i=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(a){a&&Object.keys(a).forEach(function(l){return n[l]=a[l]})},r=0,s=e;r<s.length;r++){var o=s[r];i(o)}return n});var bi=function(){return bi=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},bi.apply(this,arguments)},jE=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),r=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i},ER=300;function wR(n,e){var t={config:bi(bi({},Ss),jt.defaultConfig),l10n:Pd};t.parseDate=Fd({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=S,t._setHoursFromDate=m,t._positionCalendar=ze,t.changeMonth=hi,t.changeYear=Pi,t.clear=xt,t.close=Xt,t.onMouseOver=re,t._createElement=Ze,t.createDay=Y,t.destroy=Bn,t.isEnabled=yt,t.jumpToDate=M,t.updateValue=Et,t.open=bt,t.redraw=yn,t.set=oi,t.setDate=Un,t.toggle=dt;function i(){t.utils={getDaysInMonth:function(_,y){return _===void 0&&(_=t.currentMonth),y===void 0&&(y=t.currentYear),_===1&&(y%4===0&&y%100!==0||y%400===0)?29:t.l10n.daysInMonth[_]}}}function r(){t.element=t.input=n,t.isOpen=!1,J(),xe(),Tt(),gr(),i(),t.isMobile||z(),R(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&m(t.config.noCalendar?t.latestSelectedDateObj:void 0),Et(!1)),a();var _=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&_&&ze(),we("onReady")}function s(){var _;return((_=t.calendarContainer)===null||_===void 0?void 0:_.getRootNode()).activeElement||document.activeElement}function o(_){return _.bind(t)}function a(){var _=t.config;_.weekNumbers===!1&&_.showMonths===1||_.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var y=(t.days.offsetWidth+1)*_.showMonths;t.daysContainer.style.width=y+"px",t.calendarContainer.style.width=y+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function l(_){if(t.selectedDates.length===0){var y=t.config.minDate===void 0||zi(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),I=Ld(t.config);y.setHours(I.hours,I.minutes,I.seconds,y.getMilliseconds()),t.selectedDates=[y],t.latestSelectedDateObj=y}_!==void 0&&_.type!=="blur"&&jr(_);var N=t._input.value;f(),Et(),t._input.value!==N&&t._debouncedChange()}function u(_,y){return _%12+12*Bi(y===t.l10n.amPM[1])}function h(_){switch(_%24){case 0:case 12:return 12;default:return _%12}}function f(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var _=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,y=(parseInt(t.minuteElement.value,10)||0)%60,I=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(_=u(_,t.amPM.textContent));var N=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&zi(t.latestSelectedDateObj,t.config.minDate,!0)===0,$=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&zi(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var X=kd(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),se=kd(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),oe=kd(_,y,I);if(oe>se&&oe<X){var ue=zE(X);_=ue[0],y=ue[1],I=ue[2]}}else{if($){var ie=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;_=Math.min(_,ie.getHours()),_===ie.getHours()&&(y=Math.min(y,ie.getMinutes())),y===ie.getMinutes()&&(I=Math.min(I,ie.getSeconds()))}if(N){var ee=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;_=Math.max(_,ee.getHours()),_===ee.getHours()&&y<ee.getMinutes()&&(y=ee.getMinutes()),y===ee.getMinutes()&&(I=Math.max(I,ee.getSeconds()))}}v(_,y,I)}}function m(_){var y=_||t.latestSelectedDateObj;y&&y instanceof Date&&v(y.getHours(),y.getMinutes(),y.getSeconds())}function v(_,y,I){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(_%24,y,I||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Ci(t.config.time_24hr?_:(12+_)%12+12*Bi(_%12===0)),t.minuteElement.value=Ci(y),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Bi(_>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Ci(I)))}function w(_){var y=Ui(_),I=parseInt(y.value)+(_.delta||0);(I/1e3>1||_.key==="Enter"&&!/[^\d]/.test(I.toString()))&&Pi(I)}function S(_,y,I,N){if(y instanceof Array)return y.forEach(function($){return S(_,$,I,N)});if(_ instanceof Array)return _.forEach(function($){return S($,y,I,N)});_.addEventListener(y,I,N),t._handlers.push({remove:function(){return _.removeEventListener(y,I,N)}})}function P(){we("onChange")}function R(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(I){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+I+"]"),function(N){return S(N,"click",t[I])})}),t.isMobile){wi();return}var _=zg(F,50);if(t._debouncedChange=zg(P,ER),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&S(t.daysContainer,"mouseover",function(I){t.config.mode==="range"&&re(Ui(I))}),S(t._input,"keydown",Cn),t.calendarContainer!==void 0&&S(t.calendarContainer,"keydown",Cn),!t.config.inline&&!t.config.static&&S(window,"resize",_),window.ontouchstart!==void 0?S(window.document,"touchstart",gt):S(window.document,"mousedown",gt),S(window.document,"focus",gt,{capture:!0}),t.config.clickOpens===!0&&(S(t._input,"focus",t.open),S(t._input,"click",t.open)),t.daysContainer!==void 0&&(S(t.monthNav,"click",En),S(t.monthNav,["keyup","increment"],w),S(t.daysContainer,"click",Q)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var y=function(I){return Ui(I).select()};S(t.timeContainer,["increment"],l),S(t.timeContainer,"blur",l,{capture:!0}),S(t.timeContainer,"click",x),S([t.hourElement,t.minuteElement],["focus","click"],y),t.secondElement!==void 0&&S(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&S(t.amPM,"click",function(I){l(I)})}t.config.allowInput&&S(t._input,"blur",Yi)}function M(_,y){var I=_!==void 0?t.parseDate(_):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),N=t.currentYear,$=t.currentMonth;try{I!==void 0&&(t.currentYear=I.getFullYear(),t.currentMonth=I.getMonth())}catch(X){X.message="Invalid date supplied: "+I,t.config.errorHandler(X)}y&&t.currentYear!==N&&(we("onYearChange"),Fe()),y&&(t.currentYear!==N||t.currentMonth!==$)&&we("onMonthChange"),t.redraw()}function x(_){var y=Ui(_);~y.className.indexOf("arrow")&&L(_,y.classList.contains("arrowUp")?1:-1)}function L(_,y,I){var N=_&&Ui(_),$=I||N&&N.parentNode&&N.parentNode.firstChild,X=Kt("increment");X.delta=y,$&&$.dispatchEvent(X)}function z(){var _=window.document.createDocumentFragment();if(t.calendarContainer=Ze("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(_.appendChild(Mt()),t.innerContainer=Ze("div","flatpickr-innerContainer"),t.config.weekNumbers){var y=on(),I=y.weekWrapper,N=y.weekNumbers;t.innerContainer.appendChild(I),t.weekNumbers=N,t.weekWrapper=I}t.rContainer=Ze("div","flatpickr-rContainer"),t.rContainer.appendChild(q()),t.daysContainer||(t.daysContainer=Ze("div","flatpickr-days"),t.daysContainer.tabIndex=-1),pt(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),_.appendChild(t.innerContainer)}t.config.enableTime&&_.appendChild(Ct()),yi(t.calendarContainer,"rangeMode",t.config.mode==="range"),yi(t.calendarContainer,"animate",t.config.animate===!0),yi(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(_);var $=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!$&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var X=Ze("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(X,t.element),X.appendChild(t.element),t.altInput&&X.appendChild(t.altInput),X.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function Y(_,y,I,N){var $=yt(y,!0),X=Ze("span",_,y.getDate().toString());return X.dateObj=y,X.$i=N,X.setAttribute("aria-label",t.formatDate(y,t.config.ariaDateFormat)),_.indexOf("hidden")===-1&&zi(y,t.now)===0&&(t.todayDateElem=X,X.classList.add("today"),X.setAttribute("aria-current","date")),$?(X.tabIndex=-1,Si(y)&&(X.classList.add("selected"),t.selectedDateElem=X,t.config.mode==="range"&&(yi(X,"startRange",t.selectedDates[0]&&zi(y,t.selectedDates[0],!0)===0),yi(X,"endRange",t.selectedDates[1]&&zi(y,t.selectedDates[1],!0)===0),_==="nextMonthDay"&&X.classList.add("inRange")))):X.classList.add("flatpickr-disabled"),t.config.mode==="range"&&bn(y)&&!Si(y)&&X.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&_!=="prevMonthDay"&&N%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(y)+"</span>"),we("onDayCreate",X),X}function U(_){_.focus(),t.config.mode==="range"&&re(_)}function pe(_){for(var y=_>0?0:t.config.showMonths-1,I=_>0?t.config.showMonths:-1,N=y;N!=I;N+=_)for(var $=t.daysContainer.children[N],X=_>0?0:$.children.length-1,se=_>0?$.children.length:-1,oe=X;oe!=se;oe+=_){var ue=$.children[oe];if(ue.className.indexOf("hidden")===-1&&yt(ue.dateObj))return ue}}function Z(_,y){for(var I=_.className.indexOf("Month")===-1?_.dateObj.getMonth():t.currentMonth,N=y>0?t.config.showMonths:-1,$=y>0?1:-1,X=I-t.currentMonth;X!=N;X+=$)for(var se=t.daysContainer.children[X],oe=I-t.currentMonth===X?_.$i+y:y<0?se.children.length-1:0,ue=se.children.length,ie=oe;ie>=0&&ie<ue&&ie!=(y>0?ue:-1);ie+=$){var ee=se.children[ie];if(ee.className.indexOf("hidden")===-1&&yt(ee.dateObj)&&Math.abs(_.$i-ie)>=Math.abs(y))return U(ee)}t.changeMonth($),We(pe($),0)}function We(_,y){var I=s(),N=Ee(I||document.body),$=_!==void 0?_:N?I:t.selectedDateElem!==void 0&&Ee(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Ee(t.todayDateElem)?t.todayDateElem:pe(y>0?1:-1);$===void 0?t._input.focus():N?Z($,y):U($)}function it(_,y){for(var I=(new Date(_,y,1).getDay()-t.l10n.firstDayOfWeek+7)%7,N=t.utils.getDaysInMonth((y-1+12)%12,_),$=t.utils.getDaysInMonth(y,_),X=window.document.createDocumentFragment(),se=t.config.showMonths>1,oe=se?"prevMonthDay hidden":"prevMonthDay",ue=se?"nextMonthDay hidden":"nextMonthDay",ie=N+1-I,ee=0;ie<=N;ie++,ee++)X.appendChild(Y("flatpickr-day "+oe,new Date(_,y-1,ie),ie,ee));for(ie=1;ie<=$;ie++,ee++)X.appendChild(Y("flatpickr-day",new Date(_,y,ie),ie,ee));for(var ke=$+1;ke<=42-I&&(t.config.showMonths===1||ee%7!==0);ke++,ee++)X.appendChild(Y("flatpickr-day "+ue,new Date(_,y+1,ke%$),ke,ee));var It=Ze("div","dayContainer");return It.appendChild(X),It}function pt(){if(t.daysContainer!==void 0){ic(t.daysContainer),t.weekNumbers&&ic(t.weekNumbers);for(var _=document.createDocumentFragment(),y=0;y<t.config.showMonths;y++){var I=new Date(t.currentYear,t.currentMonth,1);I.setMonth(t.currentMonth+y),_.appendChild(it(I.getFullYear(),I.getMonth()))}t.daysContainer.appendChild(_),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&re()}}function Fe(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var _=function(N){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&N<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&N>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var y=0;y<12;y++)if(_(y)){var I=Ze("option","flatpickr-monthDropdown-month");I.value=new Date(t.currentYear,y).getMonth().toString(),I.textContent=rc(y,t.config.shorthandCurrentMonth,t.l10n),I.tabIndex=-1,t.currentMonth===y&&(I.selected=!0),t.monthsDropdownContainer.appendChild(I)}}}function lt(){var _=Ze("div","flatpickr-month"),y=window.document.createDocumentFragment(),I;t.config.showMonths>1||t.config.monthSelectorType==="static"?I=Ze("span","cur-month"):(t.monthsDropdownContainer=Ze("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),S(t.monthsDropdownContainer,"change",function(se){var oe=Ui(se),ue=parseInt(oe.value,10);t.changeMonth(ue-t.currentMonth),we("onMonthChange")}),Fe(),I=t.monthsDropdownContainer);var N=nc("cur-year",{tabindex:"-1"}),$=N.getElementsByTagName("input")[0];$.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&$.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&($.setAttribute("max",t.config.maxDate.getFullYear().toString()),$.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var X=Ze("div","flatpickr-current-month");return X.appendChild(I),X.appendChild(N),y.appendChild(X),_.appendChild(y),{container:_,yearElement:$,monthElement:I}}function qt(){ic(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var _=t.config.showMonths;_--;){var y=lt();t.yearElements.push(y.yearElement),t.monthElements.push(y.monthElement),t.monthNav.appendChild(y.container)}t.monthNav.appendChild(t.nextMonthNav)}function Mt(){return t.monthNav=Ze("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Ze("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Ze("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,qt(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(_){t.__hidePrevMonthArrow!==_&&(yi(t.prevMonthNav,"flatpickr-disabled",_),t.__hidePrevMonthArrow=_)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(_){t.__hideNextMonthArrow!==_&&(yi(t.nextMonthNav,"flatpickr-disabled",_),t.__hideNextMonthArrow=_)}}),t.currentYearElement=t.yearElements[0],$r(),t.monthNav}function Ct(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var _=Ld(t.config);t.timeContainer=Ze("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var y=Ze("span","flatpickr-time-separator",":"),I=nc("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=I.getElementsByTagName("input")[0];var N=nc("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=N.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Ci(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?_.hours:h(_.hours)),t.minuteElement.value=Ci(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():_.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(I),t.timeContainer.appendChild(y),t.timeContainer.appendChild(N),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var $=nc("flatpickr-second");t.secondElement=$.getElementsByTagName("input")[0],t.secondElement.value=Ci(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():_.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Ze("span","flatpickr-time-separator",":")),t.timeContainer.appendChild($)}return t.config.time_24hr||(t.amPM=Ze("span","flatpickr-am-pm",t.l10n.amPM[Bi((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function q(){t.weekdayContainer?ic(t.weekdayContainer):t.weekdayContainer=Ze("div","flatpickr-weekdays");for(var _=t.config.showMonths;_--;){var y=Ze("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(y)}return ii(),t.weekdayContainer}function ii(){if(t.weekdayContainer){var _=t.l10n.firstDayOfWeek,y=jE(t.l10n.weekdays.shorthand);_>0&&_<y.length&&(y=jE(y.splice(_,y.length),y.splice(0,_)));for(var I=t.config.showMonths;I--;)t.weekdayContainer.children[I].innerHTML=`
      <span class='flatpickr-weekday'>
        `+y.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function on(){t.calendarContainer.classList.add("hasWeeks");var _=Ze("div","flatpickr-weekwrapper");_.appendChild(Ze("span","flatpickr-weekday",t.l10n.weekAbbreviation));var y=Ze("div","flatpickr-weeks");return _.appendChild(y),{weekWrapper:_,weekNumbers:y}}function hi(_,y){y===void 0&&(y=!0);var I=y?_:_-t.currentMonth;I<0&&t._hidePrevMonthArrow===!0||I>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=I,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,we("onYearChange"),Fe()),pt(),we("onMonthChange"),$r())}function xt(_,y){if(_===void 0&&(_=!0),y===void 0&&(y=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,y===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var I=Ld(t.config),N=I.hours,$=I.minutes,X=I.seconds;v(N,$,X)}t.redraw(),_&&we("onChange")}function Xt(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),we("onClose")}function Bn(){t.config!==void 0&&we("onDestroy");for(var _=t._handlers.length;_--;)t._handlers[_].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var y=t.calendarContainer.parentNode;if(y.lastChild&&y.removeChild(y.lastChild),y.parentNode){for(;y.firstChild;)y.parentNode.insertBefore(y.firstChild,y);y.parentNode.removeChild(y)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(I){try{delete t[I]}catch{}})}function fi(_){return t.calendarContainer.contains(_)}function gt(_){if(t.isOpen&&!t.config.inline){var y=Ui(_),I=fi(y),N=y===t.input||y===t.altInput||t.element.contains(y)||_.path&&_.path.indexOf&&(~_.path.indexOf(t.input)||~_.path.indexOf(t.altInput)),$=!N&&!I&&!fi(_.relatedTarget),X=!t.config.ignoredFocusElements.some(function(se){return se.contains(y)});$&&X&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&l(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function Pi(_){if(!(!_||t.config.minDate&&_<t.config.minDate.getFullYear()||t.config.maxDate&&_>t.config.maxDate.getFullYear())){var y=_,I=t.currentYear!==y;t.currentYear=y||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),I&&(t.redraw(),we("onYearChange"),Fe())}}function yt(_,y){var I;y===void 0&&(y=!0);var N=t.parseDate(_,void 0,y);if(t.config.minDate&&N&&zi(N,t.config.minDate,y!==void 0?y:!t.minDateHasTime)<0||t.config.maxDate&&N&&zi(N,t.config.maxDate,y!==void 0?y:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(N===void 0)return!1;for(var $=!!t.config.enable,X=(I=t.config.enable)!==null&&I!==void 0?I:t.config.disable,se=0,oe=void 0;se<X.length;se++){if(oe=X[se],typeof oe=="function"&&oe(N))return $;if(oe instanceof Date&&N!==void 0&&oe.getTime()===N.getTime())return $;if(typeof oe=="string"){var ue=t.parseDate(oe,void 0,!0);return ue&&ue.getTime()===N.getTime()?$:!$}else if(typeof oe=="object"&&N!==void 0&&oe.from&&oe.to&&N.getTime()>=oe.from.getTime()&&N.getTime()<=oe.to.getTime())return $}return!$}function Ee(_){return t.daysContainer!==void 0?_.className.indexOf("hidden")===-1&&_.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(_):!1}function Yi(_){var y=_.target===t._input,I=t._input.value.trimEnd()!==As();y&&I&&!(_.relatedTarget&&fi(_.relatedTarget))&&t.setDate(t._input.value,!0,_.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Cn(_){var y=Ui(_),I=t.config.wrap?n.contains(y):y===t._input,N=t.config.allowInput,$=t.isOpen&&(!N||!I),X=t.config.inline&&I&&!N;if(_.keyCode===13&&I){if(N)return t.setDate(t._input.value,!0,y===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),y.blur();t.open()}else if(fi(y)||$||X){var se=!!t.timeContainer&&t.timeContainer.contains(y);switch(_.keyCode){case 13:se?(_.preventDefault(),l(),mi()):Q(_);break;case 27:_.preventDefault(),mi();break;case 8:case 46:I&&!t.config.allowInput&&(_.preventDefault(),t.clear());break;case 37:case 39:if(!se&&!I){_.preventDefault();var oe=s();if(t.daysContainer!==void 0&&(N===!1||oe&&Ee(oe))){var ue=_.keyCode===39?1:-1;_.ctrlKey?(_.stopPropagation(),hi(ue),We(pe(1),0)):We(void 0,ue)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:_.preventDefault();var ie=_.keyCode===40?1:-1;t.daysContainer&&y.$i!==void 0||y===t.input||y===t.altInput?_.ctrlKey?(_.stopPropagation(),Pi(t.currentYear-ie),We(pe(1),0)):se||We(void 0,ie*7):y===t.currentYearElement?Pi(t.currentYear-ie):t.config.enableTime&&(!se&&t.hourElement&&t.hourElement.focus(),l(_),t._debouncedChange());break;case 9:if(se){var ee=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Bt){return Bt}),ke=ee.indexOf(y);if(ke!==-1){var It=ee[ke+(_.shiftKey?-1:1)];_.preventDefault(),(It||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(y)&&_.shiftKey&&(_.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&y===t.amPM)switch(_.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],f(),Et();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],f(),Et();break}(I||fi(y))&&we("onKeyDown",_)}function re(_,y){if(y===void 0&&(y="flatpickr-day"),!(t.selectedDates.length!==1||_&&(!_.classList.contains(y)||_.classList.contains("flatpickr-disabled")))){for(var I=_?_.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),N=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),$=Math.min(I,t.selectedDates[0].getTime()),X=Math.max(I,t.selectedDates[0].getTime()),se=!1,oe=0,ue=0,ie=$;ie<X;ie+=$E.DAY)yt(new Date(ie),!0)||(se=se||ie>$&&ie<X,ie<N&&(!oe||ie>oe)?oe=ie:ie>N&&(!ue||ie<ue)&&(ue=ie));var ee=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+y));ee.forEach(function(ke){var It=ke.dateObj,Bt=It.getTime(),Di=oe>0&&Bt<oe||ue>0&&Bt>ue;if(Di){ke.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(an){ke.classList.remove(an)});return}else if(se&&!Di)return;["startRange","inRange","endRange","notAllowed"].forEach(function(an){ke.classList.remove(an)}),_!==void 0&&(_.classList.add(I<=t.selectedDates[0].getTime()?"startRange":"endRange"),N<I&&Bt===N?ke.classList.add("startRange"):N>I&&Bt===N&&ke.classList.add("endRange"),Bt>=oe&&(ue===0||Bt<=ue)&&UE(Bt,N,I)&&ke.classList.add("inRange"))})}}function F(){t.isOpen&&!t.config.static&&!t.config.inline&&ze()}function bt(_,y){if(y===void 0&&(y=t._positionElement),t.isMobile===!0){if(_){_.preventDefault();var I=Ui(_);I&&I.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),we("onOpen");return}else if(t._input.disabled||t.config.inline)return;var N=t.isOpen;t.isOpen=!0,N||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),we("onOpen"),ze(y)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(_===void 0||!t.timeContainer.contains(_.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function te(_){return function(y){var I=t.config["_"+_+"Date"]=t.parseDate(y,t.config.dateFormat),N=t.config["_"+(_==="min"?"max":"min")+"Date"];I!==void 0&&(t[_==="min"?"minDateHasTime":"maxDateHasTime"]=I.getHours()>0||I.getMinutes()>0||I.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function($){return yt($)}),!t.selectedDates.length&&_==="min"&&m(I),Et()),t.daysContainer&&(yn(),I!==void 0?t.currentYearElement[_]=I.getFullYear().toString():t.currentYearElement.removeAttribute(_),t.currentYearElement.disabled=!!N&&I!==void 0&&N.getFullYear()===I.getFullYear())}}function J(){var _=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],y=bi(bi({},JSON.parse(JSON.stringify(n.dataset||{}))),e),I={};t.config.parseDate=y.parseDate,t.config.formatDate=y.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(ee){t.config._enable=$e(ee)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(ee){t.config._disable=$e(ee)}});var N=y.mode==="time";if(!y.dateFormat&&(y.enableTime||N)){var $=jt.defaultConfig.dateFormat||Ss.dateFormat;I.dateFormat=y.noCalendar||N?"H:i"+(y.enableSeconds?":S":""):$+" H:i"+(y.enableSeconds?":S":"")}if(y.altInput&&(y.enableTime||N)&&!y.altFormat){var X=jt.defaultConfig.altFormat||Ss.altFormat;I.altFormat=y.noCalendar||N?"h:i"+(y.enableSeconds?":S K":" K"):X+(" h:i"+(y.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:te("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:te("max")});var se=function(ee){return function(ke){t.config[ee==="min"?"_minTime":"_maxTime"]=t.parseDate(ke,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:se("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:se("max")}),y.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,I,y);for(var oe=0;oe<_.length;oe++)t.config[_[oe]]=t.config[_[oe]]===!0||t.config[_[oe]]==="true";Rd.filter(function(ee){return t.config[ee]!==void 0}).forEach(function(ee){t.config[ee]=Nd(t.config[ee]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var oe=0;oe<t.config.plugins.length;oe++){var ue=t.config.plugins[oe](t)||{};for(var ie in ue)Rd.indexOf(ie)>-1?t.config[ie]=Nd(ue[ie]).map(o).concat(t.config[ie]):typeof y[ie]>"u"&&(t.config[ie]=ue[ie])}y.altInputClass||(t.config.altInputClass=ve().className+" "+t.config.altInputClass),we("onParseConfig")}function ve(){return t.config.wrap?n.querySelector("[data-input]"):n}function xe(){typeof t.config.locale!="object"&&typeof jt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=bi(bi({},jt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?jt.l10ns[t.config.locale]:void 0),kr.D="("+t.l10n.weekdays.shorthand.join("|")+")",kr.l="("+t.l10n.weekdays.longhand.join("|")+")",kr.M="("+t.l10n.months.shorthand.join("|")+")",kr.F="("+t.l10n.months.longhand.join("|")+")",kr.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var _=bi(bi({},e),JSON.parse(JSON.stringify(n.dataset||{})));_.time_24hr===void 0&&jt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Wg(t),t.parseDate=Fd({config:t.config,l10n:t.l10n})}function ze(_){if(typeof t.config.position=="function")return void t.config.position(t,_);if(t.calendarContainer!==void 0){we("onPreCalendarPosition");var y=_||t._positionElement,I=Array.prototype.reduce.call(t.calendarContainer.children,function(zn,Ms){return zn+Ms.offsetHeight},0),N=t.calendarContainer.offsetWidth,$=t.config.position.split(" "),X=$[0],se=$.length>1?$[1]:null,oe=y.getBoundingClientRect(),ue=window.innerHeight-oe.bottom,ie=X==="above"||X!=="below"&&ue<I&&oe.top>I,ee=window.pageYOffset+oe.top+(ie?-I-2:y.offsetHeight+2);if(yi(t.calendarContainer,"arrowTop",!ie),yi(t.calendarContainer,"arrowBottom",ie),!t.config.inline){var ke=window.pageXOffset+oe.left,It=!1,Bt=!1;se==="center"?(ke-=(N-oe.width)/2,It=!0):se==="right"&&(ke-=N-oe.width,Bt=!0),yi(t.calendarContainer,"arrowLeft",!It&&!Bt),yi(t.calendarContainer,"arrowCenter",It),yi(t.calendarContainer,"arrowRight",Bt);var Di=window.document.body.offsetWidth-(window.pageXOffset+oe.right),an=ke+N>window.document.body.offsetWidth,vr=Di+N>window.document.body.offsetWidth;if(yi(t.calendarContainer,"rightMost",an),!t.config.static)if(t.calendarContainer.style.top=ee+"px",!an)t.calendarContainer.style.left=ke+"px",t.calendarContainer.style.right="auto";else if(!vr)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Di+"px";else{var ln=Je();if(ln===void 0)return;var wn=window.document.body.offsetWidth,Rs=Math.max(0,wn/2-N/2),_r=".flatpickr-calendar.centerMost:before",cn=".flatpickr-calendar.centerMost:after",Cr=ln.cssRules.length,yr="{left:"+oe.left+"px;right:auto;}";yi(t.calendarContainer,"rightMost",!1),yi(t.calendarContainer,"centerMost",!0),ln.insertRule(_r+","+cn+yr,Cr),t.calendarContainer.style.left=Rs+"px",t.calendarContainer.style.right="auto"}}}}function Je(){for(var _=null,y=0;y<document.styleSheets.length;y++){var I=document.styleSheets[y];if(I.cssRules){try{I.cssRules}catch{continue}_=I;break}}return _??pi()}function pi(){var _=document.createElement("style");return document.head.appendChild(_),_.sheet}function yn(){t.config.noCalendar||t.isMobile||(Fe(),$r(),pt())}function mi(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Q(_){_.preventDefault(),_.stopPropagation();var y=function(ee){return ee.classList&&ee.classList.contains("flatpickr-day")&&!ee.classList.contains("flatpickr-disabled")&&!ee.classList.contains("notAllowed")},I=$g(Ui(_),y);if(I!==void 0){var N=I,$=t.latestSelectedDateObj=new Date(N.dateObj.getTime()),X=($.getMonth()<t.currentMonth||$.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=N,t.config.mode==="single")t.selectedDates=[$];else if(t.config.mode==="multiple"){var se=Si($);se?t.selectedDates.splice(parseInt(se),1):t.selectedDates.push($)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=$,t.selectedDates.push($),zi($,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(ee,ke){return ee.getTime()-ke.getTime()}));if(f(),X){var oe=t.currentYear!==$.getFullYear();t.currentYear=$.getFullYear(),t.currentMonth=$.getMonth(),oe&&(we("onYearChange"),Fe()),we("onMonthChange")}if($r(),pt(),Et(),!X&&t.config.mode!=="range"&&t.config.showMonths===1?U(N):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var ue=t.config.mode==="single"&&!t.config.enableTime,ie=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(ue||ie)&&mi()}P()}}var Ur={locale:[xe,ii],showMonths:[qt,a,q],minDate:[M],maxDate:[M],positionElement:[Vt],clickOpens:[function(){t.config.clickOpens===!0?(S(t._input,"focus",t.open),S(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function oi(_,y){if(_!==null&&typeof _=="object"){Object.assign(t.config,_);for(var I in _)Ur[I]!==void 0&&Ur[I].forEach(function(N){return N()})}else t.config[_]=y,Ur[_]!==void 0?Ur[_].forEach(function(N){return N()}):Rd.indexOf(_)>-1&&(t.config[_]=Nd(y));t.redraw(),Et(!0)}function zr(_,y){var I=[];if(_ instanceof Array)I=_.map(function(N){return t.parseDate(N,y)});else if(_ instanceof Date||typeof _=="number")I=[t.parseDate(_,y)];else if(typeof _=="string")switch(t.config.mode){case"single":case"time":I=[t.parseDate(_,y)];break;case"multiple":I=_.split(t.config.conjunction).map(function(N){return t.parseDate(N,y)});break;case"range":I=_.split(t.l10n.rangeSeparator).map(function(N){return t.parseDate(N,y)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(_)));t.selectedDates=t.config.allowInvalidPreload?I:I.filter(function(N){return N instanceof Date&&yt(N,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(N,$){return N.getTime()-$.getTime()})}function Un(_,y,I){if(y===void 0&&(y=!1),I===void 0&&(I=t.config.dateFormat),_!==0&&!_||_ instanceof Array&&_.length===0)return t.clear(y);zr(_,I),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),M(void 0,y),m(),t.selectedDates.length===0&&t.clear(!1),Et(y),y&&we("onChange")}function $e(_){return _.slice().map(function(y){return typeof y=="string"||typeof y=="number"||y instanceof Date?t.parseDate(y,void 0,!0):y&&typeof y=="object"&&y.from&&y.to?{from:t.parseDate(y.from,void 0),to:t.parseDate(y.to,void 0)}:y}).filter(function(y){return y})}function gr(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var _=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);_&&zr(_,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Tt(){if(t.input=ve(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Ze(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Vt()}function Vt(){t._positionElement=t.config.positionElement||t._input}function wi(){var _=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Ze("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=_,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=_==="datetime-local"?"Y-m-d\\TH:i:S":_==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}S(t.mobileInput,"change",function(y){t.setDate(Ui(y).value,!1,t.mobileFormatStr),we("onChange"),we("onClose")})}function dt(_){if(t.isOpen===!0)return t.close();t.open(_)}function we(_,y){if(t.config!==void 0){var I=t.config[_];if(I!==void 0&&I.length>0)for(var N=0;I[N]&&N<I.length;N++)I[N](t.selectedDates,t.input.value,t,y);_==="onChange"&&(t.input.dispatchEvent(Kt("change")),t.input.dispatchEvent(Kt("input")))}}function Kt(_){var y=document.createEvent("Event");return y.initEvent(_,!0,!0),y}function Si(_){for(var y=0;y<t.selectedDates.length;y++){var I=t.selectedDates[y];if(I instanceof Date&&zi(I,_)===0)return""+y}return!1}function bn(_){return t.config.mode!=="range"||t.selectedDates.length<2?!1:zi(_,t.selectedDates[0])>=0&&zi(_,t.selectedDates[1])<=0}function $r(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(_,y){var I=new Date(t.currentYear,t.currentMonth,1);I.setMonth(t.currentMonth+y),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[y].textContent=rc(I.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=I.getMonth().toString(),_.value=I.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function As(_){var y=_||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(I){return t.formatDate(I,y)}).filter(function(I,N,$){return t.config.mode!=="range"||t.config.enableTime||$.indexOf(I)===N}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function Et(_){_===void 0&&(_=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=As(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=As(t.config.altFormat)),_!==!1&&we("onValueUpdate")}function En(_){var y=Ui(_),I=t.prevMonthNav.contains(y),N=t.nextMonthNav.contains(y);I||N?hi(I?-1:1):t.yearElements.indexOf(y)>=0?y.select():y.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):y.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function jr(_){_.preventDefault();var y=_.type==="keydown",I=Ui(_),N=I;t.amPM!==void 0&&I===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Bi(t.amPM.textContent===t.l10n.amPM[0])]);var $=parseFloat(N.getAttribute("min")),X=parseFloat(N.getAttribute("max")),se=parseFloat(N.getAttribute("step")),oe=parseInt(N.value,10),ue=_.delta||(y?_.which===38?1:-1:0),ie=oe+se*ue;if(typeof N.value<"u"&&N.value.length===2){var ee=N===t.hourElement,ke=N===t.minuteElement;ie<$?(ie=X+ie+Bi(!ee)+(Bi(ee)&&Bi(!t.amPM)),ke&&L(void 0,-1,t.hourElement)):ie>X&&(ie=N===t.hourElement?ie-X-Bi(!t.amPM):$,ke&&L(void 0,1,t.hourElement)),t.amPM&&ee&&(se===1?ie+oe===23:Math.abs(ie-oe)>se)&&(t.amPM.textContent=t.l10n.amPM[Bi(t.amPM.textContent===t.l10n.amPM[0])]),N.value=Ci(ie)}}return r(),t}function Da(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),i=[],r=0;r<t.length;r++){var s=t[r];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=wR(s,e||{}),i.push(s._flatpickr)}catch(o){console.error(o)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Da(this,n)},HTMLElement.prototype.flatpickr=function(n){return Da([this],n)});var jt=function(n,e){return typeof n=="string"?Da(window.document.querySelectorAll(n),e):n instanceof Node?Da([n],e):Da(n,e)};jt.defaultConfig={};jt.l10ns={en:bi({},Pd),default:bi({},Pd)};jt.localize=function(n){jt.l10ns.default=bi(bi({},jt.l10ns.default),n)};jt.setDefaults=function(n){jt.defaultConfig=bi(bi({},jt.defaultConfig),n)};jt.parseDate=Fd({});jt.formatDate=Wg({});jt.compareDates=zi;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Da(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=jt);var Gg=jt;var Yg=dn(vs());var WE=Yg.default||Yg,xa=class{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.inputFilterType="range",this.searchTerms=[],this._bindEventService=new qe}get gridOptions(){return this.grid?.getOptions()??{}}get columnFilter(){return this.columnDef?.filter||{}}get currentDateOrDates(){return this._currentDateOrDates}get defaultOperator(){return this.inputFilterType==="compound"?ne.empty:this.gridOptions.defaultFilterRangeOperator||ne.rangeInclusive}get flatpickrOptions(){return this._flatpickrOptions||{}}get operator(){return this.inputFilterType==="compound"?this._operator||this.columnFilter.operator||this.defaultOperator:this.columnFilter?.operator??this.defaultOperator}set operator(e){this.inputFilterType==="compound"?this._operator=e:this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.inputFilterType==="compound"&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this.filterContainerElm=e.filterContainerElm;let t=this.inputFilterType==="compound"?Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"":this.searchTerms;this._filterElm=this.createDomFilterElement(t),this._bindEventService.bind(this._filterDivInputElm,"keyup",this.onTriggerEvent.bind(this)),this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(e=!0){this.flatInstance&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.flatInstance.input&&this.flatInstance.clear()),this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")}destroy(){this._bindEventService.unbindAll(),typeof this.flatInstance?.destroy=="function"&&(this.flatInstance.destroy(),this.flatInstance.element&&Ql(this.flatInstance)),De(this.filterContainerElm),De(this._filterDivInputElm),this._filterDivInputElm?.remove(),this.filterContainerElm?.remove(),this._selectOperatorElm?.remove(),this._filterElm?.remove()}hide(){typeof this.flatInstance?.close=="function"&&this.flatInstance.close()}show(){typeof this.flatInstance?.open=="function"&&this.flatInstance.open()}getValues(){return this._currentDateOrDates}setValues(e,t){let i;this.inputFilterType==="compound"?i=Array.isArray(e)?e[0]:e:typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"&&e[0].indexOf("..")>0?i=typeof e=="string"?[e]:e[0].split(".."):Array.isArray(e)&&(i=e),this.flatInstance&&(this._currentDateOrDates=e&&i?i:void 0,this.flatInstance.setDate(this._currentDateOrDates||""));let r=this.getValues()||[];if(this.getValues()||Array.isArray(r)&&r.length>0&&e?(this._filterElm.classList.add("filled"),this._filterDivInputElm.classList.add("filled")):(this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){let s=Pr(this.operator);this._selectOperatorElm.value=s}}buildDatePickerInput(e){let t=this.columnDef?.id??"",i=Kl(this.columnFilter.type||this.columnDef.type||b.dateIso),r=Kl(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||b.dateUtc),s=this.columnFilter?.filterOptions??{},o=(s?.locale??this.translaterService?.getCurrentLanguage?.())||this.gridOptions.locale||"en";o?.length>2&&(o=o.substring(0,2));let a;if(this.inputFilterType==="compound")e&&(a=e,this._currentDateOrDates=e);else if(typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"&&e[0].indexOf("..")>0?a=typeof e=="string"?[e]:e[0].split(".."):Array.isArray(e)&&(a=e),Array.isArray(a)){this._currentDateOrDates=a;let f=en(this.columnFilter.type||this.columnDef.type||b.dateIso);this._currentDateStrings=a.map(m=>WE(m).format(f))}let l={defaultDate:a||"",altInput:!0,altFormat:r,dateFormat:i,mode:this.inputFilterType==="range"?"range":"single",wrap:!0,closeOnSelect:!0,locale:o,onChange:(f,m)=>{if(this.inputFilterType==="compound")this._currentValue=m,this._currentDateOrDates=Array.isArray(f)&&f[0]||void 0;else if(Array.isArray(f)){this._currentDateOrDates=f;let w=en(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||b.dateIso);this._currentDateStrings=f.map(S=>WE(S).format(w)),this._currentValue=this._currentDateStrings.join("..")}let v=l.enableTime?new Event("keyup"):void 0;this.onTriggerEvent(v)},errorHandler:f=>{f.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${o}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};r&&(r==="Z"||r.toLowerCase().includes("h"))&&(l.enableTime=!0),this._flatpickrOptions=D(D({},l),s);let u=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(u=this.columnFilter.placeholder);let h=E("div",{className:"flatpickr"});return this.inputFilterType==="range"&&h.classList.add("search-filter",`filter-${t}`),h.appendChild(E("input",{type:"text",className:"form-control",placeholder:u,dataset:{input:"",columnid:`${t}`}})),this.flatInstance=Gg(h,this._flatpickrOptions),h}getOperatorOptionValues(){return this.columnFilter?.compoundOperatorList?this.columnFilter.compoundOperatorList:wa(this.gridOptions,this.translaterService)}createDomFilterElement(e){let t=this.columnDef?.id??"";if(De(this.filterContainerElm),this._filterDivInputElm=this.buildDatePickerInput(e),this.inputFilterType==="range")return Array.isArray(e)&&e.length>0&&e[0]!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDateOrDates=e,this._currentValue=e[0]),this._filterDivInputElm&&this.filterContainerElm.appendChild(this._filterDivInputElm),this._filterDivInputElm;{this._selectOperatorElm=Ea(this.getOperatorOptionValues(),this.grid);let i=E("div",{className:`form-group search-filter filter-${t}`}),r=E("div",{className:"input-group flatpickr"},i);if(E("div",{className:"input-group-addon input-group-prepend operator"},r).appendChild(this._selectOperatorElm),r.appendChild(this._filterDivInputElm),this.operator){let o=Pr(this.operator);this._selectOperatorElm.value=o}return e!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDateOrDates=e,this._currentValue=e),i&&this.filterContainerElm.appendChild(i),i}}onTriggerEvent(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled");else if(this.inputFilterType==="range")this._currentDateStrings?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentDateStrings?this._currentDateStrings:[this._currentValue],operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery});else if(this.inputFilterType==="compound"&&this._selectOperatorElm){let t=this._selectOperatorElm.value;this._currentValue?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),(!(this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput===void 0)||this._currentDateOrDates!==void 0)&&this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:t||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var Vd=class extends xa{constructor(e){super(e),this.translaterService=e,this.inputFilterType="compound"}};var sc=class{constructor(e){this.translaterService=e}filterCollection(e,t,i=ql.chain){let r=[];if(Array.isArray(t)){r=i===ql.merge?[]:[...e];for(let s of t)if(i===ql.merge){let o=this.singleFilterCollection(e,s);r=Og([...r,...o])}else r=this.singleFilterCollection(r,s)}else r=this.singleFilterCollection(e,t);return r}singleFilterCollection(e,t){let i=[];if(t){let r=t.property,s=t.operator||ne.equal,o=typeof t.value>"u"?"":t.value;switch(s){case ne.equal:r?i=e.filter(a=>a[r]===o):i=e.filter(a=>a===o);break;case ne.contains:r?i=e.filter(a=>a[r]?.toString().indexOf(o.toString())!==-1):i=e.filter(a=>a!=null&&a.toString().indexOf(o.toString())!==-1);break;case ne.notContains:r?i=e.filter(a=>a[r]?.toString().indexOf(o.toString())===-1):i=e.filter(a=>a!=null&&a.toString().indexOf(o.toString())===-1);break;case ne.notEqual:default:r?i=e.filter(a=>a[r]!==o):i=e.filter(a=>a!==o)}}return i}sortCollection(e,t,i,r){if(r&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let s=[];if(i){if(Array.isArray(i))s=t.sort((o,a)=>{for(let l=0,u=i.length;l<u;l++){let h=i[l];if(h?.property){let f=h.sortDesc?st.desc:st.asc,m=h.property,v=h?.fieldType??e?.type??b.string,w=r?this.translaterService?.translate&&this.translaterService.translate(o[m]||" "):o[m],S=r?this.translaterService?.translate&&this.translaterService.translate(a[m]||" "):a[m],P=Fr(v,w,S,f,e);if(P!==st.neutral)return P}}return st.neutral});else if(i?.property){let o=i.property,a=i.sortDesc?st.desc:st.asc,l=i?.fieldType??e?.type??b.string;s=t.sort((u,h)=>{let f=r?this.translaterService?.translate&&this.translaterService.translate(u[o]||" "):u[o],m=r?this.translaterService?.translate&&this.translaterService.translate(h[o]||" "):h[o],v=Fr(l,f,m,a,e);return v!==st.neutral?v:st.neutral})}else if(i&&!i.property){let o=i.sortDesc?st.desc:st.asc,a=i?.fieldType??e?.type??b.string;s=t.sort((l,u)=>{let h=r?this.translaterService?.translate&&this.translaterService.translate(l||" "):l,f=r?this.translaterService?.translate&&this.translaterService.translate(u||" "):u,m=Fr(a,h,f,o,e);return m!==st.neutral?m:st.neutral})}}return s}};var Hd=class{constructor(e,t,i){this.sharedService=e,this.backendUtilities=t,this.translaterService=i}getPickerTitleOutputString(e,t){if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let i="",r=this.sharedService.gridOptions?.[t]??{},s=this.sharedService.gridOptions?.enableTranslate??!1,o=this.sharedService.gridOptions?.locales??V.locales,a=r?.[e],l=r?.[`${e}Key`],u=this.sharedService.gridOptions,h=li(u);if(l&&this.translaterService?.translate)i=this.translaterService.translate(l||" ");else switch(e){case"commandTitle":i=a||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${h}COMMANDS`||" ")||o?.TEXT_COMMANDS;break;case"columnTitle":i=a||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${h}COLUMNS`||" ")||o?.TEXT_COLUMNS;break;case"forceFitTitle":i=a||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${h}FORCE_FIT_COLUMNS`||" ")||o?.TEXT_FORCE_FIT_COLUMNS;break;case"syncResizeTitle":i=a||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${h}SYNCHRONOUS_RESIZE`||" ")||o?.TEXT_SYNCHRONOUS_RESIZE;break;default:i=a;break}return i}readjustFrozenColumnIndexWhenNeeded(e,t,i){if(e>=0){let r=i.findIndex(s=>s.id===this.sharedService.frozenVisibleColumnId);r>=0&&r!==e&&(this.sharedService.gridOptions.frozenColumn=r,this.sharedService.slickGrid.setOptions({frozenColumn:r})),Array.isArray(i)&&Array.isArray(t)&&i.length!==t.length&&this.sharedService.slickGrid.setColumns(i)}}refreshBackendDataset(e){let t=this.sharedService.gridOptions;e&&(t=D(D({},this.sharedService.gridOptions),e),this.sharedService.gridOptions=t),this.backendUtilities?.refreshBackendDataset(t)}runOverrideFunctionWhenExists(e,t){return typeof e=="function"?!!e.call(this,t):!0}sortItems(e,t){Array.isArray(e)&&e.sort((i,r)=>i&&r&&i.hasOwnProperty(t)&&r.hasOwnProperty(t)?i[t]-r[t]:0)}translateItems(e,t,i){if(Array.isArray(e))for(let r of e)r.hasOwnProperty(t)&&(r[i]=this.translaterService?.translate?.(r[t]))}translateMenuItemsFromTitleKey(e,t="commandItems"){for(let i of e)typeof i=="object"&&(i.titleKey&&(i.title=this.translateWhenEnabledAndServiceExist(`${i.titleKey}`,`TEXT_${i.titleKey}`)),i.subMenuTitleKey&&(i.subMenuTitle=this.translateWhenEnabledAndServiceExist(`${i.subMenuTitleKey}`,`TEXT_${i.subMenuTitleKey}`))),Array.isArray(i?.[t])&&this.translateMenuItemsFromTitleKey(i?.[t])}translateWhenEnabledAndServiceExist(e,t,i){let r="",s=this.sharedService?.gridOptions,o=s?.locales??V.locales;return i?r=i:s.enableTranslate&&this.translaterService?.translate?r=this.translaterService.translate(e||" "):t in o?r=o[t]:r=t,r}};var Xe=class{constructor(e,t){if(this.event=e,this.args=t,this._isPropagationStopped=!1,this._isImmediatePropagationStopped=!1,this._isDefaultPrevented=!1,this.returnValue=void 0,this.nativeEvent=e,this._arguments=t,e){let i=["altKey","ctrlKey","metaKey","shiftKey","key","keyCode","clientX","clientY","offsetX","offsetY","pageX","pageY","bubbles","type","which","x","y"];for(let r of i)this[r]=e[r]}this.target=this.nativeEvent?this.nativeEvent.target:void 0}stopPropagation(){this._isPropagationStopped=!0,this.nativeEvent?.stopPropagation()}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=!0,this.nativeEvent&&this.nativeEvent.stopImmediatePropagation()}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}getNativeEvent(){return this.nativeEvent}preventDefault(){this.nativeEvent&&this.nativeEvent.preventDefault(),this._isDefaultPrevented=!0}isDefaultPrevented(){return this.nativeEvent?this.nativeEvent.defaultPrevented:this._isDefaultPrevented}addReturnValue(e){this.returnValue===void 0&&e!==void 0&&(this.returnValue=e)}getReturnValue(){return this.returnValue}getArguments(){return this._arguments}},B=class{get subscriberCount(){return this._handlers.length}constructor(e,t){this.eventName=e,this.pubSub=t,this._handlers=[],this._pubSubService=t}subscribe(e){this._handlers.push(e)}unsubscribe(e){for(let t=this._handlers.length-1;t>=0;t--)this._handlers[t]===e&&this._handlers.splice(t,1)}notify(e,t,i){let r=t instanceof Xe?t:new Xe(t,e);i=i||this;for(let s=0;s<this._handlers.length&&!(r.isPropagationStopped()||r.isImmediatePropagationStopped());s++){let o=this._handlers[s].call(i,r,e);r.addReturnValue(o)}if(typeof this._pubSubService?.publish=="function"&&this.eventName){let s=this._pubSubService.publish(this.eventName,{args:e,eventData:r});r.addReturnValue(s)}return r}setPubSubService(e){this._pubSubService=e}},Ce=class{constructor(){this.handlers=[]}get subscriberCount(){return this.handlers.length}subscribe(e,t){return this.handlers.push({event:e,handler:t}),e.subscribe(t),this}unsubscribe(e,t){let i=this.handlers.length;for(;i--;)if(this.handlers[i].event===e&&this.handlers[i].handler===t){this.handlers.splice(i,1),e.unsubscribe(t);return}return this}unsubscribeAll(){let e=this.handlers.length;for(;e--;)this.handlers[e].event.unsubscribe(this.handlers[e].handler);return this.handlers=[],this}},Wt=class{constructor(e,t,i,r){i===void 0&&r===void 0&&(i=e,r=t),this.fromRow=Math.min(e,i),this.fromCell=Math.min(t,r),this.toRow=Math.max(e,i),this.toCell=Math.max(t,r)}isSingleCell(){return this.fromRow===this.toRow&&this.fromCell===this.toCell}isSingleRow(){return this.fromRow===this.toRow}contains(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell}toString(){return this.isSingleCell()?`(${this.fromRow}:${this.fromCell})`:`(${this.fromRow}:${this.fromCell} - ${this.toRow}:${this.toCell})`}},Bd=class{constructor(){this.__nonDataRow=!0}},Ds=class extends Bd{constructor(){super(),this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}equals(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title}},Ud=class extends Bd{constructor(){super(),this.__groupTotals=!0,this.group=null,this.initialized=!1}},qg=class{constructor(){this.activeEditController=null}isActive(e){return e?this.activeEditController===e:this.activeEditController!==null}activate(e){if(e!==this.activeEditController){if(this.activeEditController!==null)throw new Error("SlickEditorLock.activate: an editController is still active, can't activate another editController");if(!e.commitCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .commitCurrentEdit()");if(!e.cancelCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .cancelCurrentEdit()");this.activeEditController=e}}deactivate(e){if(this.activeEditController){if(this.activeEditController!==e)throw new Error("SlickEditorLock.deactivate: specified editController is not the currently active one");this.activeEditController=null}}commitCurrentEdit(){return this.activeEditController?this.activeEditController.commitCurrentEdit():!0}cancelCurrentEdit(){return this.activeEditController?this.activeEditController.cancelCurrentEdit():!0}},A=class n{static isFunction(e){return typeof e=="function"&&typeof e.nodeType!="number"&&typeof e.item!="function"}static isPlainObject(e){if(!e||n.toString.call(e)!=="[object Object]")return!1;let t=n.getProto(e);if(!t)return!0;let i=n.hasOwn.call(t,"constructor")&&t.constructor;return typeof i=="function"&&n.fnToString.call(i)===n.ObjectFunctionString}static extend(...e){let t,i,r,s,o,a,l=e[0],u=1,h=!1,f=e.length;if(l===!0?(h=l,l=e[u]||{},u++):l=l||{},typeof l!="object"&&!n.isFunction(l)&&(l={}),f===1)return e[0];for(u===f&&(l=this,u--);u<f;u++)if(je(t=e[u]))for(i in t)s=t[i],!(i==="__proto__"||l===s)&&(h&&s&&(n.isPlainObject(s)||(o=Array.isArray(s)))?(r=l[i],o&&!Array.isArray(r)?a=[]:!o&&!n.isPlainObject(r)?a={}:a=r,o=!1,l[i]=n.extend(h,a,s)):s!==void 0&&(l[i]=s));return l}static noop(){}static height(e,t){if(e){if(t===void 0)return e.getBoundingClientRect().height;n.setStyleSize(e,"height",t)}}static width(e,t){if(!(!e||!e.getBoundingClientRect)){if(t===void 0)return e.getBoundingClientRect().width;n.setStyleSize(e,"width",t)}}static setStyleSize(e,t,i){typeof i=="function"&&(i=i()),e.style[t]=typeof i=="string"?i:`${i}px`}static isHidden(e){return e.offsetWidth===0&&e.offsetHeight===0}static parents(e,t){let i=[],r=t===":visible",s=t===":hidden";for(;(e=e.parentNode)&&e!==document&&!(!e||!e.parentNode);)s?n.isHidden(e)&&i.push(e):r?n.isHidden(e)||i.push(e):(!t||e.matches(t))&&i.push(e);return i}static toFloat(e){let t=parseFloat(e);return isNaN(t)?0:t}static show(e,t=""){Array.isArray(e)?e.forEach(i=>i.style.display=t):e.style.display=t}static hide(e){Array.isArray(e)?e.forEach(t=>t.style.display="none"):e.style.display="none"}static applyDefaults(e,t){for(let i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i])}static addSlickEventPubSubWhenDefined(e,t){if(e)for(let i in t)t[i]instanceof B&&typeof t[i].setPubSubService=="function"&&t[i].setPubSubService(e)}};A.getProto=Object.getPrototypeOf;A.class2type={};A.hasOwn=A.class2type.hasOwnProperty;A.fnToString=A.hasOwn.toString;A.ObjectFunctionString=A.fnToString.call(Object);A.storage={_storage:new WeakMap,put:function(n,e,t){this._storage.has(n)||this._storage.set(n,new Map),this._storage.get(n).set(e,t)},get:function(n,e){let t=this._storage.get(n);return t?t.get(e):null},remove:function(n,e){let t=this._storage.get(n).delete(e);return this._storage.get(n).size!==0&&this._storage.delete(n),t}};var oc=new qg,GE="slick-edit-preclick";var Ta=class{constructor(e){this.pluginName="SlickGroupItemMetadataProvider",this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new Ce,this._options=A.extend(!0,{},this._defaults,e)}get eventHandler(){return this._eventHandler}get dataView(){return this._grid?.getData()??{}}get gridOptions(){return this._grid?.getOptions()||{}}init(e,t){this._grid=e,this._options=D(D({},this._defaults),t),this._eventHandler.subscribe(e.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(e.onKeyDown,this.handleGridKeyDown.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}getOptions(){return this._options}setOptions(e){this._options=D(D({},this._options),e)}getGroupRowMetadata(e){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${e?.level||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter||void 0,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editor:null}}}}getTotalsRowMetadata(e){return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${e?.group?.level||0}`,formatter:this._options.totalsFormatter,editor:null}}defaultGroupCellFormatter(e,t,i,r,s){if(!this._options.enableExpandCollapse)return s.title;let o=s.level||0,a=this._options?.indentation??15,l=`${o*a}px`,u=s.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass,h=this.gridOptions?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;h.appendChild(E("span",{className:`${this._options.toggleCssClass} ${u}`,ariaExpanded:String(!s.collapsed),style:{marginLeft:l}}));let f=E("span",{className:this._options.groupTitleCssClass||""});return f.setAttribute("level",o),s.title instanceof HTMLElement||s.title instanceof DocumentFragment?f.appendChild(s.title):this._grid.applyHtmlCode(f,s.title??""),h.appendChild(f),h}defaultTotalsCellFormatter(e,t,i,r,s,o){return r?.groupTotalsFormatter?.(s,r,o)??""}handleGridClick(e,t){let i=e.target,r=this._grid?.getDataItem(t.row);r instanceof Ds&&i.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(r),e.stopImmediatePropagation(),e.preventDefault())}handleGridKeyDown(e){if(this._options.enableExpandCollapse&&e.key===" "){let t=this._grid?.getActiveCell();if(t){let i=this._grid.getDataItem(t.row);i instanceof Ds&&(this.handleDataViewExpandOrCollapse(i),e.stopImmediatePropagation(),e.preventDefault())}}}handleDataViewExpandOrCollapse(e){let t=this._grid?.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:t.top,ignoreDiffsAfter:t.bottom+1}),e.collapsed?this.dataView.expandGroup(e.groupingKey):this.dataView.collapseGroup(e.groupingKey)}};var zd=class{constructor(e,t){this.externalPubSub=t,this.defaults={groupItemMetadataProvider:null,inlineFilters:!1,useCSPSafeFilter:!1},this.idProperty="id",this.items=[],this.rows=[],this.idxById=new Map,this.rowsById=void 0,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.suspend=!1,this.isBulkSuspend=!1,this.bulkDeleteIds=new Map,this.sortAsc=!0,this.refreshHints={},this.prevRefreshHints={},this.filteredItems=[],this.filterCache=[],this.groupingInfoDefaults={getter:void 0,formatter:void 0,comparer:(i,r)=>i.value===r.value?0:i.value>r.value?1:-1,predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},this.groupingInfos=[],this.groups=[],this.toggledGroupsByLevel=[],this.groupingDelimiter=":|:",this.selectedRowIds=[],this.pagesize=0,this.pagenum=0,this.totalRows=0,this.onBeforePagingInfoChanged=new B("onBeforePagingInfoChanged",t),this.onGroupExpanded=new B("onGroupExpanded",t),this.onGroupCollapsed=new B("onGroupCollapsed",t),this.onPagingInfoChanged=new B("onPagingInfoChanged",t),this.onRowCountChanged=new B("onRowCountChanged",t),this.onRowsChanged=new B("onRowsChanged",t),this.onRowsOrCountChanged=new B("onRowsOrCountChanged",t),this.onSelectedRowIdsChanged=new B("onSelectedRowIdsChanged",t),this.onSetItemsCalled=new B("onSetItemsCalled",t),this._options=A.extend(!0,{},this.defaults,e)}beginUpdate(e){this.suspend=!0,this.isBulkSuspend=e===!0}endUpdate(){let e=this.isBulkSuspend;this.isBulkSuspend=!1,this.suspend=!1,e&&(this.processBulkDelete(),this.ensureIdUniqueness()),this.refresh()}destroy(){this.items=[],this.idProperty="id",this.idxById=null,this.rowsById=null,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.sortComparer=null,this.filterCache=[],this.filteredItems=[],this.compiledFilter=null,this.compiledFilterCSPSafe=null,this.compiledFilterWithCaching=null,this.compiledFilterWithCachingCSPSafe=null,this._grid&&this._grid.onSelectedRowsChanged&&this._grid.onCellCssStylesChanged&&(this._grid.onSelectedRowsChanged.unsubscribe(),this._grid.onCellCssStylesChanged.unsubscribe()),this.onRowsOrCountChanged&&this.onRowsOrCountChanged.unsubscribe()}setRefreshHints(e){this.refreshHints=e}setFilterArgs(e){this.filterArgs=e}processBulkDelete(){if(!this.idxById)return;let e,t,i=0;for(let r=0,s=this.items.length;r<s;r++){if(t=this.items[r],e=t[this.idProperty],e===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.bulkDeleteIds.has(e)?this.idxById.delete(e):(this.items[i]=t,this.idxById.set(e,i),++i)}this.items.length=i,this.bulkDeleteIds=new Map}updateIdxById(e){if(this.isBulkSuspend||!this.idxById)return;e=e||0;let t;for(let i=e,r=this.items.length;i<r;i++){if(t=this.items[i][this.idProperty],t===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.idxById.set(t,i)}}ensureIdUniqueness(){if(this.isBulkSuspend||!this.idxById)return;let e;for(let t=0,i=this.items.length;t<i;t++)if(e=this.items[t][this.idProperty],e===void 0||this.idxById.get(e)!==t)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}getItems(){return this.items}getIdPropertyName(){return this.idProperty}setItems(e,t){t!==void 0&&(this.idProperty=t),this.items=this.filteredItems=e,this.onSetItemsCalled.notify({idProperty:this.idProperty,itemCount:this.items.length},null,this),this.idxById=new Map,this.updateIdxById(),this.ensureIdUniqueness(),this.refresh()}setPagingOptions(e){this.onBeforePagingInfoChanged.notify(this.getPagingInfo(),null,this).getReturnValue()!==!1&&(je(e.pageSize)&&(this.pagesize=e.pageSize,this.pagenum=this.pagesize?Math.min(this.pagenum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1)):0),je(e.pageNum)&&(this.pagenum=Math.min(e.pageNum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1))),this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),this.refresh())}getPagingInfo(){let e=this.pagesize?Math.max(1,Math.ceil(this.totalRows/this.pagesize)):1;return{pageSize:this.pagesize,pageNum:this.pagenum,totalRows:this.totalRows,totalPages:e,dataView:this}}sort(e,t){this.sortAsc=t,this.sortComparer=e,t===!1&&this.items.reverse(),this.items.sort(e),t===!1&&this.items.reverse(),this.idxById=new Map,this.updateIdxById(),this.refresh()}reSort(){this.sortComparer&&this.sort(this.sortComparer,this.sortAsc)}getFilteredItems(){return this.filteredItems}getFilteredItemCount(){return this.filteredItems.length}getFilter(){return this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter}setFilter(e){this.filterCSPSafe=e,this.filter=e,this._options.inlineFilters&&(this.compiledFilterCSPSafe=this.compileFilterCSPSafe,this.compiledFilterWithCachingCSPSafe=this.compileFilterWithCachingCSPSafe,this.compiledFilter=this.compileFilter(this._options.useCSPSafeFilter),this.compiledFilterWithCaching=this.compileFilterWithCaching(this._options.useCSPSafeFilter)),this.refresh()}getGrouping(){return this.groupingInfos}setGrouping(e){this._options.groupItemMetadataProvider||(this._options.groupItemMetadataProvider=new Ta),this.groups=[],this.toggledGroupsByLevel=[],e=e||[],this.groupingInfos=e instanceof Array?e:[e];for(let t=0;t<this.groupingInfos.length;t++){let i=this.groupingInfos[t]=A.extend(!0,{},this.groupingInfoDefaults,this.groupingInfos[t]);i.getterIsAFn=typeof i.getter=="function",i.compiledAccumulators=[];let r=i.aggregators.length;for(;r--;)i.compiledAccumulators[r]=this.compileAccumulatorLoop(i.aggregators[r]);this.toggledGroupsByLevel[t]={}}this.refresh()}getItemByIdx(e){return this.items[e]}getIdxById(e){return this.idxById?.get(e)}ensureRowsByIdCache(){if(!this.rowsById){this.rowsById={};for(let e=0,t=this.rows.length;e<t;e++)this.rowsById[this.rows[e][this.idProperty]]=e}}getRowByItem(e){return this.ensureRowsByIdCache(),this.rowsById?.[e[this.idProperty]]}getRowById(e){return this.ensureRowsByIdCache(),this.rowsById?.[e]}getItemById(e){return this.items[this.idxById.get(e)]}mapItemsToRows(e){let t=[];this.ensureRowsByIdCache();for(let i=0,r=e.length;i<r;i++){let s=this.rowsById?.[e[i][this.idProperty]];je(s)&&(t[t.length]=s)}return t}mapIdsToRows(e){let t=[];this.ensureRowsByIdCache();for(let i=0,r=e.length;i<r;i++){let s=this.rowsById?.[e[i]];je(s)&&(t[t.length]=s)}return t}mapRowsToIds(e){let t=[];for(let i=0,r=e.length;i<r;i++)if(e[i]<this.rows.length){let s=this.rows[e[i]];t[t.length]=s[this.idProperty]}return t}updateSingleItem(e,t){if(this.idxById){if(!this.idxById.has(e))throw new Error("[SlickGrid DataView] Invalid id");if(e!==t[this.idProperty]){let i=t[this.idProperty];if(!je(i))throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(this.idxById.has(i))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");this.idxById.set(i,this.idxById.get(e)),this.idxById.delete(e),this.updated?.[e]&&delete this.updated[e],e=i}this.items[this.idxById.get(e)]=t,this.updated||(this.updated={}),this.updated[e]=!0}}updateItem(e,t){this.updateSingleItem(e,t),this.refresh()}updateItems(e,t){if(e.length!==t.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(let i=0,r=t.length;i<r;i++)this.updateSingleItem(e[i],t[i]);this.refresh()}insertItem(e,t){this.items.splice(e,0,t),this.updateIdxById(e),this.refresh()}insertItems(e,t){Array.prototype.splice.apply(this.items,[e,0].concat(t)),this.updateIdxById(e),this.refresh()}addItem(e){this.items.push(e),this.updateIdxById(this.items.length-1),this.refresh()}addItems(e){this.items=this.items.concat(e),this.updateIdxById(this.items.length-e.length),this.refresh()}deleteItem(e){if(this.idxById)if(this.isBulkSuspend)this.bulkDeleteIds.set(e,!0);else{let t=this.idxById.get(e);if(t===void 0)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(e),this.items.splice(t,1),this.updateIdxById(t),this.refresh()}}deleteItems(e){if(!(e.length===0||!this.idxById))if(this.isBulkSuspend)for(let t=0,i=e.length;t<i;t++){let r=e[t];if(this.idxById.get(r)===void 0)throw new Error("[SlickGrid DataView] Invalid id");this.bulkDeleteIds.set(r,!0)}else{let t=[];for(let i=0,r=e.length;i<r;i++){let s=e[i],o=this.idxById.get(s);if(o===void 0)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(s),t.push(o)}t.sort();for(let i=t.length-1;i>=0;--i)this.items.splice(t[i],1);this.updateIdxById(t[0]),this.refresh()}}sortedAddItem(e){if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");this.insertItem(this.sortedIndex(e),e)}sortedUpdateItem(e,t){if(!this.idxById)return;if(!this.idxById.has(e)||e!==t[this.idProperty])throw new Error("[SlickGrid DataView] Invalid or non-matching id "+this.idxById.get(e));if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");let i=this.getItemById(e);this.sortComparer(i,t)!==0?(this.deleteItem(e),this.sortedAddItem(t)):this.updateItem(e,t)}sortedIndex(e){let t=0,i=this.items.length;for(;t<i;){let r=t+i>>>1;this.sortComparer(this.items[r],e)===-1?t=r+1:i=r}return t}getItemCount(){return this.items.length}getLength(){return this.rows.length}getItem(e){let t=this.rows[e];if(t?.__group&&t.totals&&!t.totals?.initialized){let i=this.groupingInfos[t.level];i.displayTotalsRow||(this.calculateTotals(t.totals),t.title=i.formatter?i.formatter(t):t.value)}else t?.__groupTotals&&!t.initialized&&this.calculateTotals(t);return t}getItemMetadata(e){let t=this.rows[e];return t===void 0?null:t.__group?this._options.groupItemMetadataProvider.getGroupRowMetadata(t):t.__groupTotals?this._options.groupItemMetadataProvider.getTotalsRowMetadata(t):null}expandCollapseAllGroups(e,t){if(je(e))this.toggledGroupsByLevel[e]={},this.groupingInfos[e].collapsed=t,t===!0?this.onGroupCollapsed.notify({level:e,groupingKey:null}):this.onGroupExpanded.notify({level:e,groupingKey:null});else for(let i=0;i<this.groupingInfos.length;i++)this.toggledGroupsByLevel[i]={},this.groupingInfos[i].collapsed=t,t===!0?this.onGroupCollapsed.notify({level:i,groupingKey:null}):this.onGroupExpanded.notify({level:i,groupingKey:null});this.refresh()}collapseAllGroups(e){this.expandCollapseAllGroups(e,!0)}expandAllGroups(e){this.expandCollapseAllGroups(e,!1)}expandCollapseGroup(e,t,i){this.toggledGroupsByLevel[e][t]=this.groupingInfos[e].collapsed^i,this.refresh()}collapseGroup(...e){let i=Array.prototype.slice.call(e)[0],r,s;e.length===1&&i.indexOf(this.groupingDelimiter)!==-1?(r=i,s=i.split(this.groupingDelimiter).length-1):(r=e.join(this.groupingDelimiter),s=e.length-1),this.expandCollapseGroup(s,r,!0),this.onGroupCollapsed.notify({level:s,groupingKey:r})}expandGroup(...e){let i=Array.prototype.slice.call(e)[0],r,s;e.length===1&&i.indexOf(this.groupingDelimiter)!==-1?(s=i.split(this.groupingDelimiter).length-1,r=i):(s=e.length-1,r=e.join(this.groupingDelimiter)),this.expandCollapseGroup(s,r,!1),this.onGroupExpanded.notify({level:s,groupingKey:r})}getGroups(){return this.groups}extractGroups(e,t){let i,r,s=[],o={},a,l=t?t.level+1:0,u=this.groupingInfos[l];for(let h=0,f=u.predefinedValues?.length??0;h<f;h++)r=u.predefinedValues?.[h],i=o[r],i||(i=new Ds,i.value=r,i.level=l,i.groupingKey=(t?t.groupingKey+this.groupingDelimiter:"")+r,s[s.length]=i,o[r]=i);for(let h=0,f=e.length;h<f;h++)a=e[h],r=u.getterIsAFn?u.getter(a):a[u.getter],i=o[r],i||(i=new Ds,i.value=r,i.level=l,i.groupingKey=(t?t.groupingKey+this.groupingDelimiter:"")+r,s[s.length]=i,o[r]=i),i.rows[i.count++]=a;if(l<this.groupingInfos.length-1)for(let h=0;h<s.length;h++)i=s[h],i.groups=this.extractGroups(i.rows,i);return s.length&&this.addTotals(s,l),s.sort(this.groupingInfos[l].comparer),s}calculateTotals(e){let t=e.group,i=this.groupingInfos[t?.level??0],r=t.level===this.groupingInfos.length,s,o=i.aggregators.length;if(!r&&i.aggregateChildGroups){let a=t.groups?.length??0;for(;a--;)t.groups[a].totals.initialized||this.calculateTotals(t.groups[a].totals)}for(;o--;)s=i.aggregators[o],s.init(),!r&&i.aggregateChildGroups?i.compiledAccumulators[o].call(s,t.groups):i.compiledAccumulators[o].call(s,t.rows),s.storeResult(e);e.initialized=!0}addGroupTotals(e){let t=this.groupingInfos[e.level],i=new Ud;i.group=e,e.totals=i,t.lazyTotalsCalculation||this.calculateTotals(i)}addTotals(e,t){t=t||0;let i=this.groupingInfos[t],r=i.collapsed,s=this.toggledGroupsByLevel[t],o=e.length,a;for(;o--;)a=e[o],!(a.collapsed&&!i.aggregateCollapsed)&&(a.groups&&this.addTotals(a.groups,t+1),i.aggregators?.length&&(i.aggregateEmpty||a.rows.length||a.groups?.length)&&this.addGroupTotals(a),a.collapsed=r^s[a.groupingKey],a.title=i.formatter?i.formatter(a):a.value)}flattenGroupedRows(e,t){t=t||0;let i=this.groupingInfos[t],r=[],s,o=0,a;for(let l=0,u=e.length;l<u;l++){if(a=e[l],r[o++]=a,!a.collapsed){s=a.groups?this.flattenGroupedRows(a.groups,t+1):a.rows;for(let h=0,f=s.length;h<f;h++)r[o++]=s[h]}a.totals&&i.displayTotalsRow&&(!a.collapsed||i.aggregateCollapsed)&&(r[o++]=a.totals)}return r}getFunctionInfo(e){let r=e.toString().indexOf("function")>=0?/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/:/^[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,s=e.toString().match(r)||[];return{params:s[1].split(","),body:s[2]}}compileAccumulatorLoop(e){if(e.accumulate){let t=this.getFunctionInfo(e.accumulate),i=new Function("_items","for (var "+t.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+t.params[0]+" = _items[_i]; "+t.body+"}"),r="compiledAccumulatorLoop";return i.displayName=r,i.name=this.setFunctionName(i,r),i}else return function(){}}compileFilterCSPSafe(e,t){if(typeof this.filterCSPSafe!="function")return[];let i=[],r=e.length;for(let s=0;s<r;s++)this.filterCSPSafe(e[s],t)&&i.push(e[s]);return i}compileFilter(e=!1){if(e)return null;let t=this.getFunctionInfo(this.filter),i="{ continue _coreloop; }$1",r="{ _retval[_idx++] = $item$; continue _coreloop; }$1",s=t.body.replace(/return false\s*([;}]|\}|$)/gi,i).replace(/return!1([;}]|\}|$)/gi,i).replace(/return true\s*([;}]|\}|$)/gi,r).replace(/return!0([;}]|\}|$)/gi,r).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),o=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");o=o.replace(/\$filter\$/gi,s),o=o.replace(/\$item\$/gi,t.params[0]),o=o.replace(/\$args\$/gi,t.params[1]);let a=new Function("_items,_args",o),l="compiledFilter";return a.displayName=l,a.name=this.setFunctionName(a,l),a}compileFilterWithCaching(e=!1){if(e)return null;let t=this.getFunctionInfo(this.filter),i="{ continue _coreloop; }$1",r="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",s=t.body.replace(/return false\s*([;}]|\}|$)/gi,i).replace(/return!1([;}]|\}|$)/gi,i).replace(/return true\s*([;}]|\}|$)/gi,r).replace(/return!0([;}]|\}|$)/gi,r).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),o=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");o=o.replace(/\$filter\$/gi,s),o=o.replace(/\$item\$/gi,t.params[0]),o=o.replace(/\$args\$/gi,t.params[1]);let a=new Function("_items,_args,_cache",o),l="compiledFilterWithCaching";return a.displayName=l,a.name=this.setFunctionName(a,l),a}compileFilterWithCachingCSPSafe(e,t,i){if(typeof this.filterCSPSafe!="function")return[];let r=[],s=e.length;for(let o=0;o<s;o++)(i[o]||this.filterCSPSafe(e[o],t))&&r.push(e[o]);return r}setFunctionName(e,t){try{Object.defineProperty(e,"name",{writable:!0,value:t})}catch{e.name=t}}uncompiledFilter(e,t){let i=[],r=0;for(let s=0,o=e.length;s<o;s++)this.filter?.(e[s],t)&&(i[r++]=e[s]);return i}uncompiledFilterWithCaching(e,t,i){let r=[],s=0,o;for(let a=0,l=e.length;a<l;a++)o=e[a],i[a]?r[s++]=o:this.filter?.(o,t)&&(r[s++]=o,i[a]=!0);return r}getFilteredAndPagedItems(e){if(this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter){let i,r;this._options.useCSPSafeFilter?(i=this._options.inlineFilters?this.compiledFilterCSPSafe:this.uncompiledFilter,r=this._options.inlineFilters?this.compiledFilterWithCachingCSPSafe:this.uncompiledFilterWithCaching):(i=this._options.inlineFilters?this.compiledFilter:this.uncompiledFilter,r=this._options.inlineFilters?this.compiledFilterWithCaching:this.uncompiledFilterWithCaching),this.refreshHints.isFilterNarrowing?this.filteredItems=i.call(this,this.filteredItems,this.filterArgs):this.refreshHints.isFilterExpanding?this.filteredItems=r.call(this,e,this.filterArgs,this.filterCache):this.refreshHints.isFilterUnchanged||(this.filteredItems=i.call(this,e,this.filterArgs))}else this.filteredItems=this.pagesize?e:e.concat();let t;return this.pagesize?(this.filteredItems.length<=this.pagenum*this.pagesize&&(this.filteredItems.length===0?this.pagenum=0:this.pagenum=Math.floor((this.filteredItems.length-1)/this.pagesize)),t=this.filteredItems.slice(this.pagesize*this.pagenum,this.pagesize*this.pagenum+this.pagesize)):t=this.filteredItems,{totalRows:this.filteredItems.length,rows:t}}getRowDiffs(e,t){let i,r,s,o=[],a=0,l=Math.max(t.length,e.length);this.refreshHints?.ignoreDiffsBefore&&(a=Math.max(0,Math.min(t.length,this.refreshHints.ignoreDiffsBefore))),this.refreshHints?.ignoreDiffsAfter&&(l=Math.min(t.length,Math.max(0,this.refreshHints.ignoreDiffsAfter)));for(let u=a,h=e.length;u<l;u++)u>=h?o[o.length]=u:(i=t[u],r=e[u],(!i||this.groupingInfos.length&&(s=i.__nonDataRow||r.__nonDataRow)&&i.__group!==r.__group||i.__group&&!i.equals(r)||s&&(i.__groupTotals||r.__groupTotals)||i[this.idProperty]!==r[this.idProperty]||this.updated?.[i[this.idProperty]])&&(o[o.length]=u));return o}recalc(e){this.rowsById=void 0,(this.refreshHints.isFilterNarrowing!==this.prevRefreshHints.isFilterNarrowing||this.refreshHints.isFilterExpanding!==this.prevRefreshHints.isFilterExpanding)&&(this.filterCache=[]);let t=this.getFilteredAndPagedItems(e);this.totalRows=t.totalRows;let i=t.rows;this.groups=[],this.groupingInfos.length&&(this.groups=this.extractGroups(i),this.groups.length&&(i=this.flattenGroupedRows(this.groups)));let r=this.getRowDiffs(this.rows,i);return this.rows=i,r}refresh(){if(this.suspend)return;let e=A.extend(!0,{},this.getPagingInfo()),t=this.rows.length,i=this.totalRows,r=this.recalc(this.items);this.pagesize&&this.totalRows<this.pagenum*this.pagesize&&(this.pagenum=Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1),r=this.recalc(this.items)),this.updated=null,this.prevRefreshHints=this.refreshHints,this.refreshHints={},i!==this.totalRows&&this.onBeforePagingInfoChanged.notify(e,null,this).getReturnValue()!==!1&&this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),t!==this.rows.length&&this.onRowCountChanged.notify({previous:t,current:this.rows.length,itemCount:this.items.length,dataView:this,callingOnRowsChanged:r.length>0},null,this),r.length>0&&this.onRowsChanged.notify({rows:r,itemCount:this.items.length,dataView:this,calledOnRowCountChanged:t!==this.rows.length},null,this),(t!==this.rows.length||r.length>0)&&this.onRowsOrCountChanged.notify({rowsDiff:r,previousRowCount:t,currentRowCount:this.rows.length,itemCount:this.items.length,rowCountChanged:t!==this.rows.length,rowsChanged:r.length>0,dataView:this},null,this)}syncGridSelection(e,t,i){this._grid=e;let r;this.selectedRowIds=this.mapRowsToIds(e.getSelectedRows());let s=a=>{a===!1?this.selectedRowIds=[]:this.selectedRowIds.sort().join(",")!==a.sort().join(",")&&(this.selectedRowIds=a)},o=()=>{if((this.selectedRowIds||[]).length>0&&!r){r=!0;let a=this.mapIdsToRows(this.selectedRowIds||[]);if(!t){let l={grid:this._grid,ids:this.mapRowsToIds(a),rows:a,dataView:this};this.preSelectedRowIdsChangeFn(l),this.onSelectedRowIdsChanged.notify(Object.assign(l,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new Xe,this)}e.setSelectedRows(a),r=!1}};return e.onSelectedRowsChanged.subscribe((a,l)=>{if(!r){let u=this.mapRowsToIds(l.rows),h={grid:this._grid,ids:u,rows:l.rows,added:!0,dataView:this};this.preSelectedRowIdsChangeFn(h),this.onSelectedRowIdsChanged.notify(Object.assign(h,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new Xe,this)}}),this.preSelectedRowIdsChangeFn=a=>{if(!r){if(r=!0,typeof a.added>"u")s(a.ids);else{let u;a.added?i&&e.getOptions().multiSelect?u=(this.selectedRowIds?.filter(f=>this.getRowById(f)===void 0)).concat(a.ids):u=a.ids:i&&e.getOptions().multiSelect?u=this.selectedRowIds.filter(h=>a.ids.indexOf(h)===-1):u=[],s(u)}r=!1}},this.onRowsOrCountChanged.subscribe(o.bind(this)),this.onSelectedRowIdsChanged}getAllSelectedIds(){return this.selectedRowIds}getAllSelectedFilteredIds(){return this.getAllSelectedFilteredItems().map(e=>e[this.idProperty])}setSelectedIds(e,t){let i=t?.isRowBeingAdded,r=t?.shouldTriggerEvent,s=t?.applyRowSelectionToGrid;i!==!1&&(i=!0);let o=this.mapIdsToRows(e),a={grid:this._grid,ids:e,rows:o,added:i,dataView:this};this.preSelectedRowIdsChangeFn?.(a),r!==!1&&this.onSelectedRowIdsChanged.notify(Object.assign(a,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new Xe,this),s!==!1&&this._grid&&this._grid.setSelectedRows(o)}getAllSelectedItems(){let e=[];return this.getAllSelectedIds().forEach(i=>{e.push(this.getItemById(i))}),e}getAllSelectedFilteredItems(){return Array.isArray(this.selectedRowIds)?this.filteredItems.filter(t=>this.selectedRowIds.some(i=>t[this.idProperty]===i))||[]:[]}syncGridCellCssStyles(e,t){let i,r,s=a=>{i={};for(let l in a)if(a){let u=this.rows[l][this.idProperty];i[u]=a[l]}};s(e.getCellCssStyles(t));let o=()=>{if(i){r=!0,this.ensureRowsByIdCache();let a={};for(let l in i)if(i){let u=this.rowsById?.[l];je(u)&&(a[u]=i[l])}e.setCellCssStyles(t,a),r=!1}};e.onCellCssStylesChanged.subscribe((a,l)=>{r||t!==l.key||(l.hash?s(l.hash):(e.onCellCssStylesChanged.unsubscribe(),this.onRowsOrCountChanged.unsubscribe(o)))}),this.onRowsOrCountChanged.subscribe(o.bind(this))}};function YE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function hr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(t),!0).forEach(function(i){SR(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Yd(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yd=function(e){return typeof e}:Yd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(n)}function SR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vr(){return Vr=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vr.apply(this,arguments)}function DR(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function xR(n,e){if(n==null)return{};var t=DR(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}var TR="1.15.1";function Lr(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Hr=Lr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),mc=Lr(/Edge/i),qE=Lr(/firefox/i),uc=Lr(/safari/i)&&!Lr(/chrome/i)&&!Lr(/android/i),iw=Lr(/iP(ad|od|hone)/i),nw=Lr(/chrome/i)&&Lr(/android/i),rw={capture:!1,passive:!1};function et(n,e,t){n.addEventListener(e,t,!Hr&&rw)}function Qe(n,e,t){n.removeEventListener(e,t,!Hr&&rw)}function Zd(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function IR(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function ur(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&Zd(n,e):Zd(n,e))||i&&n===t)return n;if(n===t)break}while(n=IR(n))}return null}var XE=/\s+/g;function nn(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(XE," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(XE," ")}}function ge(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function Ma(n,e){var t="";if(typeof n=="string")t=n;else do{var i=ge(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function sw(n,e,t){if(n){var i=n.getElementsByTagName(e),r=0,s=i.length;if(t)for(;r<s;r++)t(i[r],r);return i}return[]}function dr(){var n=document.scrollingElement;return n||document.documentElement}function Yt(n,e,t,i,r){if(!(!n.getBoundingClientRect&&n!==window)){var s,o,a,l,u,h,f;if(n!==window&&n.parentNode&&n!==dr()?(s=n.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,h=s.height,f=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,h=window.innerHeight,f=window.innerWidth),(e||t)&&n!==window&&(r=r||n.parentNode,!Hr))do if(r&&r.getBoundingClientRect&&(ge(r,"transform")!=="none"||t&&ge(r,"position")!=="static")){var m=r.getBoundingClientRect();o-=m.top+parseInt(ge(r,"border-top-width")),a-=m.left+parseInt(ge(r,"border-left-width")),l=o+s.height,u=a+s.width;break}while(r=r.parentNode);if(i&&n!==window){var v=Ma(r||n),w=v&&v.a,S=v&&v.d;v&&(o/=S,a/=w,f/=w,h/=S,l=o+h,u=a+f)}return{top:o,left:a,bottom:l,right:u,width:f,height:h}}}function ow(n){var e=Yt(n),t=parseInt(ge(n,"padding-left")),i=parseInt(ge(n,"padding-top")),r=parseInt(ge(n,"padding-right")),s=parseInt(ge(n,"padding-bottom"));return e.top+=i+parseInt(ge(n,"border-top-width")),e.left+=t+parseInt(ge(n,"border-left-width")),e.width=n.clientWidth-t-r,e.height=n.clientHeight-i-s,e.bottom=e.top+e.height,e.right=e.left+e.width,e}function KE(n,e,t){for(var i=Is(n,!0),r=Yt(n)[e];i;){var s=Yt(i)[t],o=void 0;if(t==="top"||t==="left"?o=r>=s:o=r<=s,!o)return i;if(i===dr())break;i=Is(i,!1)}return!1}function Pa(n,e,t,i){for(var r=0,s=0,o=n.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Oe.ghost&&(i||o[s]!==Oe.dragged)&&ur(o[s],t.draggable,n,!1)){if(r===e)return o[s];r++}s++}return null}function lv(n,e){for(var t=n.lastElementChild;t&&(t===Oe.ghost||ge(t,"display")==="none"||e&&!Zd(t,e));)t=t.previousElementSibling;return t||null}function _n(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Oe.clone&&(!e||Zd(n,e))&&t++;return t}function QE(n){var e=0,t=0,i=dr();if(n)do{var r=Ma(n),s=r.a,o=r.d;e+=n.scrollLeft*s,t+=n.scrollTop*o}while(n!==i&&(n=n.parentNode));return[e,t]}function OR(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}function Is(n,e){if(!n||!n.getBoundingClientRect)return dr();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=ge(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return dr();if(i||e)return t;i=!0}}while(t=t.parentNode);return dr()}function AR(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Xg(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var dc;function aw(n,e){return function(){if(!dc){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),dc=setTimeout(function(){dc=void 0},e)}}}function RR(){clearTimeout(dc),dc=void 0}function lw(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function cw(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}var sn="Sortable"+new Date().getTime();function MR(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(ge(r,"display")==="none"||r===Oe.ghost)){n.push({target:r,rect:Yt(r)});var s=hr({},n[n.length-1].rect);if(r.thisAnimationDuration){var o=Ma(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(OR(n,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,o=0;n.forEach(function(a){var l=0,u=a.target,h=u.fromRect,f=Yt(u),m=u.prevFromRect,v=u.prevToRect,w=a.rect,S=Ma(u,!0);S&&(f.top-=S.f,f.left-=S.e),u.toRect=f,u.thisAnimationDuration&&Xg(m,f)&&!Xg(h,f)&&(w.top-f.top)/(w.left-f.left)===(h.top-f.top)/(h.left-f.left)&&(l=NR(w,m,v,r.options)),Xg(f,h)||(u.prevFromRect=h,u.prevToRect=f,l||(l=r.options.animation),r.animate(u,w,f,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),n=[]},animate:function(i,r,s,o){if(o){ge(i,"transition",""),ge(i,"transform","");var a=Ma(this.el),l=a&&a.a,u=a&&a.d,h=(r.left-s.left)/(l||1),f=(r.top-s.top)/(u||1);i.animatingX=!!h,i.animatingY=!!f,ge(i,"transform","translate3d("+h+"px,"+f+"px,0)"),this.forRepaintDummy=PR(i),ge(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ge(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){ge(i,"transition",""),ge(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function PR(n){return n.offsetWidth}function NR(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var Ia=[],Kg={initializeByDefault:!0},gc={mount:function(e){for(var t in Kg)Kg.hasOwnProperty(t)&&!(t in e)&&(e[t]=Kg[t]);Ia.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ia.push(e)},pluginEvent:function(e,t,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var s=e+"Global";Ia.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](hr({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](hr({sortable:t},i)))})},initializePlugins:function(e,t,i,r){Ia.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,Vr(i,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var i={};return Ia.forEach(function(r){typeof r.eventProperties=="function"&&Vr(i,r.eventProperties.call(t[r.pluginName],e))}),i},modifyOption:function(e,t,i){var r;return Ia.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(r=s.optionListeners[t].call(e[s.pluginName],i))}),r}};function FR(n){var e=n.sortable,t=n.rootEl,i=n.name,r=n.targetEl,s=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,u=n.newIndex,h=n.oldDraggableIndex,f=n.newDraggableIndex,m=n.originalEvent,v=n.putSortable,w=n.extraEventProperties;if(e=e||t&&t[sn],!!e){var S,P=e.options,R="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Hr&&!mc?S=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(i,!0,!0)),S.to=o||t,S.from=a||t,S.item=r||t,S.clone=s,S.oldIndex=l,S.newIndex=u,S.oldDraggableIndex=h,S.newDraggableIndex=f,S.originalEvent=m,S.pullMode=v?v.lastPutMode:void 0;var M=hr(hr({},w),gc.getEventProperties(i,e));for(var x in M)S[x]=M[x];t&&t.dispatchEvent(S),P[R]&&P[R].call(e,S)}}var kR=["evt"],$i=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,s=xR(i,kR);gc.pluginEvent.bind(Oe)(e,t,hr({dragEl:G,parentEl:Lt,ghostEl:Pe,rootEl:Rt,nextEl:fo,lastDownEl:qd,cloneEl:Ft,cloneHidden:Ts,dragStarted:ac,putSortable:ui,activeSortable:Oe.active,originalEvent:r,oldIndex:Ra,oldDraggableIndex:hc,newIndex:rn,newDraggableIndex:xs,hideGhostForTarget:fw,unhideGhostForTarget:pw,cloneNowHidden:function(){Ts=!0},cloneNowShown:function(){Ts=!1},dispatchSortableEvent:function(a){Mi({sortable:t,name:a,originalEvent:r})}},s))};function Mi(n){FR(hr({putSortable:ui,cloneEl:Ft,targetEl:G,rootEl:Rt,oldIndex:Ra,oldDraggableIndex:hc,newIndex:rn,newDraggableIndex:xs},n))}var G,Lt,Pe,Rt,fo,qd,Ft,Ts,Ra,rn,hc,xs,$d,ui,Aa=!1,Jd=!1,eh=[],uo,Vn,Qg,Zg,ZE,JE,ac,Oa,fc,pc=!1,jd=!1,Xd,Ei,Jg=[],rv=!1,th=[],nh=typeof document<"u",Wd=iw,ew=mc||Hr?"cssFloat":"float",LR=nh&&!nw&&!iw&&"draggable"in document.createElement("div"),uw=function(){if(nh){if(Hr)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),dw=function(e,t){var i=ge(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=Pa(e,0,t),o=Pa(e,1,t),a=s&&ge(s),l=o&&ge(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Yt(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Yt(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var f=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=r&&i[ew]==="none"||o&&i[ew]==="none"&&u+h>r)?"vertical":"horizontal"},VR=function(e,t,i){var r=i?e.left:e.top,s=i?e.right:e.bottom,o=i?e.width:e.height,a=i?t.left:t.top,l=i?t.right:t.bottom,u=i?t.width:t.height;return r===a||s===l||r+o/2===a+u/2},HR=function(e,t){var i;return eh.some(function(r){var s=r[sn].options.emptyInsertThreshold;if(!(!s||lv(r))){var o=Yt(r),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return i=r}}),i},hw=function(e){function t(s,o){return function(a,l,u,h){var f=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||f))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,h),o)(a,l,u,h);var m=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===m||s.join&&s.indexOf(m)>-1}}var i={},r=e.group;(!r||Yd(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},fw=function(){!uw&&Pe&&ge(Pe,"display","none")},pw=function(){!uw&&Pe&&ge(Pe,"display","")};nh&&!nw&&document.addEventListener("click",function(n){if(Jd)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Jd=!1,!1},!0);var ho=function(e){if(G){e=e.touches?e.touches[0]:e;var t=HR(e.clientX,e.clientY);if(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[sn]._onDragOver(i)}}},BR=function(e){G&&G.parentNode[sn]._isOutsideThisEl(e.target)};function Oe(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Vr({},e),n[sn]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return dw(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Oe.supportPointer!==!1&&"PointerEvent"in window&&!uc,emptyInsertThreshold:5};gc.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);hw(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:LR,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?et(n,"pointerdown",this._onTapStart):(et(n,"mousedown",this._onTapStart),et(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(et(n,"dragover",this),et(n,"dragenter",this)),eh.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Vr(this,MR())}Oe.prototype={constructor:Oe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Oa=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,G):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,r=this.options,s=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=r.filter;if(qR(i),!G&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&uc&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ur(l,r.draggable,i,!1),!(l&&l.animated)&&qd!==l)){if(Ra=_n(l),hc=_n(l,r.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Mi({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:i,fromEl:i}),$i("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(f){if(f=ur(u,f.trim(),i,!1),f)return Mi({sortable:t,rootEl:f,name:"filter",targetEl:l,fromEl:i,toEl:i}),$i("filter",t,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}r.handle&&!ur(u,r.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,i){var r=this,s=r.el,o=r.options,a=s.ownerDocument,l;if(i&&!G&&i.parentNode===s){var u=Yt(i);if(Rt=s,G=i,Lt=G.parentNode,fo=G.nextSibling,qd=i,$d=o.group,Oe.dragged=G,uo={target:G,clientX:(t||e).clientX,clientY:(t||e).clientY},ZE=uo.clientX-u.left,JE=uo.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,G.style["will-change"]="all",l=function(){if($i("delayEnded",r,{evt:e}),Oe.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!qE&&r.nativeDraggable&&(G.draggable=!0),r._triggerDragStart(e,t),Mi({sortable:r,name:"choose",originalEvent:e}),nn(G,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){sw(G,h.trim(),ev)}),et(a,"dragover",ho),et(a,"mousemove",ho),et(a,"touchmove",ho),et(a,"mouseup",r._onDrop),et(a,"touchend",r._onDrop),et(a,"touchcancel",r._onDrop),qE&&this.nativeDraggable&&(this.options.touchStartThreshold=4,G.draggable=!0),$i("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(mc||Hr))){if(Oe.eventCanceled){this._onDrop();return}et(a,"mouseup",r._disableDelayedDrag),et(a,"touchend",r._disableDelayedDrag),et(a,"touchcancel",r._disableDelayedDrag),et(a,"mousemove",r._delayedDragTouchMoveHandler),et(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&et(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){G&&ev(G),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Qe(e,"mouseup",this._disableDelayedDrag),Qe(e,"touchend",this._disableDelayedDrag),Qe(e,"touchcancel",this._disableDelayedDrag),Qe(e,"mousemove",this._delayedDragTouchMoveHandler),Qe(e,"touchmove",this._delayedDragTouchMoveHandler),Qe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?et(document,"pointermove",this._onTouchMove):t?et(document,"touchmove",this._onTouchMove):et(document,"mousemove",this._onTouchMove):(et(G,"dragend",this),et(Rt,"dragstart",this._onDragStart));try{document.selection?Kd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Aa=!1,Rt&&G){$i("dragStarted",this,{evt:t}),this.nativeDraggable&&et(document,"dragover",BR);var i=this.options;!e&&nn(G,i.dragClass,!1),nn(G,i.ghostClass,!0),Oe.active=this,e&&this._appendGhost(),Mi({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Vn){this._lastX=Vn.clientX,this._lastY=Vn.clientY,fw();for(var e=document.elementFromPoint(Vn.clientX,Vn.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Vn.clientX,Vn.clientY),e!==t);)t=e;if(G.parentNode[sn]._isOutsideThisEl(e),t)do{if(t[sn]){var i=void 0;if(i=t[sn]._onDragOver({clientX:Vn.clientX,clientY:Vn.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);pw()}},_onTouchMove:function(e){if(uo){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=Pe&&Ma(Pe,!0),a=Pe&&o&&o.a,l=Pe&&o&&o.d,u=Wd&&Ei&&QE(Ei),h=(s.clientX-uo.clientX+r.x)/(a||1)+(u?u[0]-Jg[0]:0)/(a||1),f=(s.clientY-uo.clientY+r.y)/(l||1)+(u?u[1]-Jg[1]:0)/(l||1);if(!Oe.active&&!Aa){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(Pe){o?(o.e+=h-(Qg||0),o.f+=f-(Zg||0)):o={a:1,b:0,c:0,d:1,e:h,f};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ge(Pe,"webkitTransform",m),ge(Pe,"mozTransform",m),ge(Pe,"msTransform",m),ge(Pe,"transform",m),Qg=h,Zg=f,Vn=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Pe){var e=this.options.fallbackOnBody?document.body:Rt,t=Yt(G,!0,Wd,!0,e),i=this.options;if(Wd){for(Ei=e;ge(Ei,"position")==="static"&&ge(Ei,"transform")==="none"&&Ei!==document;)Ei=Ei.parentNode;Ei!==document.body&&Ei!==document.documentElement?(Ei===document&&(Ei=dr()),t.top+=Ei.scrollTop,t.left+=Ei.scrollLeft):Ei=dr(),Jg=QE(Ei)}Pe=G.cloneNode(!0),nn(Pe,i.ghostClass,!1),nn(Pe,i.fallbackClass,!0),nn(Pe,i.dragClass,!0),ge(Pe,"transition",""),ge(Pe,"transform",""),ge(Pe,"box-sizing","border-box"),ge(Pe,"margin",0),ge(Pe,"top",t.top),ge(Pe,"left",t.left),ge(Pe,"width",t.width),ge(Pe,"height",t.height),ge(Pe,"opacity","0.8"),ge(Pe,"position",Wd?"absolute":"fixed"),ge(Pe,"zIndex","100000"),ge(Pe,"pointerEvents","none"),Oe.ghost=Pe,e.appendChild(Pe),ge(Pe,"transform-origin",ZE/parseInt(Pe.style.width)*100+"% "+JE/parseInt(Pe.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,r=e.dataTransfer,s=i.options;if($i("dragStart",this,{evt:e}),Oe.eventCanceled){this._onDrop();return}$i("setupClone",this),Oe.eventCanceled||(Ft=cw(G),Ft.removeAttribute("id"),Ft.draggable=!1,Ft.style["will-change"]="",this._hideClone(),nn(Ft,this.options.chosenClass,!1),Oe.clone=Ft),i.cloneId=Kd(function(){$i("clone",i),!Oe.eventCanceled&&(i.options.removeCloneOnHide||Rt.insertBefore(Ft,G),i._hideClone(),Mi({sortable:i,name:"clone"}))}),!t&&nn(G,s.dragClass,!0),t?(Jd=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Qe(document,"mouseup",i._onDrop),Qe(document,"touchend",i._onDrop),Qe(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(i,r,G)),et(document,"drop",i),ge(G,"transform","translateZ(0)")),Aa=!0,i._dragStartId=Kd(i._dragStarted.bind(i,t,e)),et(document,"selectstart",i),ac=!0,uc&&ge(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,r,s,o,a=this.options,l=a.group,u=Oe.active,h=$d===l,f=a.sort,m=ui||u,v,w=this,S=!1;if(rv)return;function P(q,ii){$i(q,w,hr({evt:e,isOwner:h,axis:v?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:f,fromSortable:m,target:i,completed:M,onMove:function(hi,xt){return Gd(Rt,t,G,r,hi,Yt(hi),e,xt)},changed:x},ii))}function R(){P("dragOverAnimationCapture"),w.captureAnimationState(),w!==m&&m.captureAnimationState()}function M(q){return P("dragOverCompleted",{insertion:q}),q&&(h?u._hideClone():u._showClone(w),w!==m&&(nn(G,ui?ui.options.ghostClass:u.options.ghostClass,!1),nn(G,a.ghostClass,!0)),ui!==w&&w!==Oe.active?ui=w:w===Oe.active&&ui&&(ui=null),m===w&&(w._ignoreWhileAnimating=i),w.animateAll(function(){P("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(i===G&&!G.animated||i===t&&!i.animated)&&(Oa=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(G.parentNode[sn]._isOutsideThisEl(e.target),!q&&ho(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function x(){rn=_n(G),xs=_n(G,a.draggable),Mi({sortable:w,name:"change",toEl:t,newIndex:rn,newDraggableIndex:xs,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=ur(i,a.draggable,t,!0),P("dragOver"),Oe.eventCanceled)return S;if(G.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||w._ignoreWhileAnimating===i)return M(!1);if(Jd=!1,u&&!a.disabled&&(h?f||(o=Lt!==Rt):ui===this||(this.lastPutMode=$d.checkPull(this,u,G,e))&&l.checkPut(this,u,G,e))){if(v=this._getDirection(e,i)==="vertical",r=Yt(G),P("dragOverValid"),Oe.eventCanceled)return S;if(o)return Lt=Rt,R(),this._hideClone(),P("revert"),Oe.eventCanceled||(fo?Rt.insertBefore(G,fo):Rt.appendChild(G)),M(!0);var L=lv(t,a.draggable);if(!L||jR(e,v,this)&&!L.animated){if(L===G)return M(!1);if(L&&t===e.target&&(i=L),i&&(s=Yt(i)),Gd(Rt,t,G,r,i,s,e,!!i)!==!1)return R(),L&&L.nextSibling?t.insertBefore(G,L.nextSibling):t.appendChild(G),Lt=t,x(),M(!0)}else if(L&&$R(e,v,this)){var z=Pa(t,0,a,!0);if(z===G)return M(!1);if(i=z,s=Yt(i),Gd(Rt,t,G,r,i,s,e,!1)!==!1)return R(),t.insertBefore(G,z),Lt=t,x(),M(!0)}else if(i.parentNode===t){s=Yt(i);var Y=0,U,pe=G.parentNode!==t,Z=!VR(G.animated&&G.toRect||r,i.animated&&i.toRect||s,v),We=v?"top":"left",it=KE(i,"top","top")||KE(G,"top","top"),pt=it?it.scrollTop:void 0;Oa!==i&&(U=s[We],pc=!1,jd=!Z&&a.invertSwap||pe),Y=WR(e,i,s,v,Z?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,jd,Oa===i);var Fe;if(Y!==0){var lt=_n(G);do lt-=Y,Fe=Lt.children[lt];while(Fe&&(ge(Fe,"display")==="none"||Fe===Pe))}if(Y===0||Fe===i)return M(!1);Oa=i,fc=Y;var qt=i.nextElementSibling,Mt=!1;Mt=Y===1;var Ct=Gd(Rt,t,G,r,i,s,e,Mt);if(Ct!==!1)return(Ct===1||Ct===-1)&&(Mt=Ct===1),rv=!0,setTimeout(zR,30),R(),Mt&&!qt?t.appendChild(G):i.parentNode.insertBefore(G,Mt?qt:i),it&&lw(it,0,pt-it.scrollTop),Lt=G.parentNode,U!==void 0&&!jd&&(Xd=Math.abs(U-Yt(i)[We])),x(),M(!0)}if(t.contains(G))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qe(document,"mousemove",this._onTouchMove),Qe(document,"touchmove",this._onTouchMove),Qe(document,"pointermove",this._onTouchMove),Qe(document,"dragover",ho),Qe(document,"mousemove",ho),Qe(document,"touchmove",ho)},_offUpEvents:function(){var e=this.el.ownerDocument;Qe(e,"mouseup",this._onDrop),Qe(e,"touchend",this._onDrop),Qe(e,"pointerup",this._onDrop),Qe(e,"touchcancel",this._onDrop),Qe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(rn=_n(G),xs=_n(G,i.draggable),$i("drop",this,{evt:e}),Lt=G&&G.parentNode,rn=_n(G),xs=_n(G,i.draggable),Oe.eventCanceled){this._nulling();return}Aa=!1,jd=!1,pc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),sv(this.cloneId),sv(this._dragStartId),this.nativeDraggable&&(Qe(document,"drop",this),Qe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),uc&&ge(document.body,"user-select",""),ge(G,"transform",""),e&&(ac&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),Pe&&Pe.parentNode&&Pe.parentNode.removeChild(Pe),(Rt===Lt||ui&&ui.lastPutMode!=="clone")&&Ft&&Ft.parentNode&&Ft.parentNode.removeChild(Ft),G&&(this.nativeDraggable&&Qe(G,"dragend",this),ev(G),G.style["will-change"]="",ac&&!Aa&&nn(G,ui?ui.options.ghostClass:this.options.ghostClass,!1),nn(G,this.options.chosenClass,!1),Mi({sortable:this,name:"unchoose",toEl:Lt,newIndex:null,newDraggableIndex:null,originalEvent:e}),Rt!==Lt?(rn>=0&&(Mi({rootEl:Lt,name:"add",toEl:Lt,fromEl:Rt,originalEvent:e}),Mi({sortable:this,name:"remove",toEl:Lt,originalEvent:e}),Mi({rootEl:Lt,name:"sort",toEl:Lt,fromEl:Rt,originalEvent:e}),Mi({sortable:this,name:"sort",toEl:Lt,originalEvent:e})),ui&&ui.save()):rn!==Ra&&rn>=0&&(Mi({sortable:this,name:"update",toEl:Lt,originalEvent:e}),Mi({sortable:this,name:"sort",toEl:Lt,originalEvent:e})),Oe.active&&((rn==null||rn===-1)&&(rn=Ra,xs=hc),Mi({sortable:this,name:"end",toEl:Lt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){$i("nulling",this),Rt=G=Lt=Pe=fo=Ft=qd=Ts=uo=Vn=ac=rn=xs=Ra=hc=Oa=fc=ui=$d=Oe.dragged=Oe.ghost=Oe.clone=Oe.active=null,th.forEach(function(e){e.checked=!0}),th.length=Qg=Zg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":G&&(this._onDragOver(e),UR(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,r=0,s=i.length,o=this.options;r<s;r++)t=i[r],ur(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||YR(t));return e},sort:function(e,t){var i={},r=this.el;this.toArray().forEach(function(s,o){var a=r.children[o];ur(a,this.options.draggable,r,!1)&&(i[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(r.removeChild(i[s]),r.appendChild(i[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ur(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var r=gc.modifyOption(this,e,t);typeof r<"u"?i[e]=r:i[e]=t,e==="group"&&hw(i)},destroy:function(){$i("destroy",this);var e=this.el;e[sn]=null,Qe(e,"mousedown",this._onTapStart),Qe(e,"touchstart",this._onTapStart),Qe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qe(e,"dragover",this),Qe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),eh.splice(eh.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ts){if($i("hideClone",this),Oe.eventCanceled)return;ge(Ft,"display","none"),this.options.removeCloneOnHide&&Ft.parentNode&&Ft.parentNode.removeChild(Ft),Ts=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ts){if($i("showClone",this),Oe.eventCanceled)return;G.parentNode==Rt&&!this.options.group.revertClone?Rt.insertBefore(Ft,G):fo?Rt.insertBefore(Ft,fo):Rt.appendChild(Ft),this.options.group.revertClone&&this.animate(G,Ft),ge(Ft,"display",""),Ts=!1}}};function UR(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Gd(n,e,t,i,r,s,o,a){var l,u=n[sn],h=u.options.onMove,f;return window.CustomEvent&&!Hr&&!mc?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=i,l.related=r||e,l.relatedRect=s||Yt(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),h&&(f=h.call(u,l,o)),f}function ev(n){n.draggable=!1}function zR(){rv=!1}function $R(n,e,t){var i=Yt(Pa(t.el,0,t.options,!0)),r=ow(t.el),s=10;return e?n.clientX<r.left-s||n.clientY<i.top&&n.clientX<i.right:n.clientY<r.top-s||n.clientY<i.bottom&&n.clientX<i.left}function jR(n,e,t){var i=Yt(lv(t.el,t.options.draggable)),r=ow(t.el),s=10;return e?n.clientX>r.right+s||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>r.bottom+s||n.clientX>i.right&&n.clientY>i.top}function WR(n,e,t,i,r,s,o,a){var l=i?n.clientY:n.clientX,u=i?t.height:t.width,h=i?t.top:t.left,f=i?t.bottom:t.right,m=!1;if(!o){if(a&&Xd<u*r){if(!pc&&(fc===1?l>h+u*s/2:l<f-u*s/2)&&(pc=!0),pc)m=!0;else if(fc===1?l<h+Xd:l>f-Xd)return-fc}else if(l>h+u*(1-r)/2&&l<f-u*(1-r)/2)return GR(e)}return m=m||o,m&&(l<h+u*s/2||l>f-u*s/2)?l>h+u/2?1:-1:0}function GR(n){return _n(G)<_n(n)?1:-1}function YR(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function qR(n){th.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&th.push(i)}}function Kd(n){return setTimeout(n,0)}function sv(n){return clearTimeout(n)}nh&&et(document,"touchmove",function(n){(Oe.active||Aa)&&n.cancelable&&n.preventDefault()});Oe.utils={on:et,off:Qe,css:ge,find:sw,is:function(e,t){return!!ur(e,t,e,!1)},extend:AR,throttle:aw,closest:ur,toggleClass:nn,clone:cw,index:_n,nextTick:Kd,cancelNextTick:sv,detectDirection:dw,getChild:Pa};Oe.get=function(n){return n[sn]};Oe.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Oe.utils=hr(hr({},Oe.utils),i.utils)),gc.mount(i)})};Oe.create=function(n,e){return new Oe(n,e)};Oe.version=TR;var Gt=[],lc,ov,av=!1,tv,iv,ih,cc;function XR(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?et(document,"dragover",this._handleAutoScroll):this.options.supportPointer?et(document,"pointermove",this._handleFallbackAutoScroll):i.touches?et(document,"touchmove",this._handleFallbackAutoScroll):et(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Qe(document,"dragover",this._handleAutoScroll):(Qe(document,"pointermove",this._handleFallbackAutoScroll),Qe(document,"touchmove",this._handleFallbackAutoScroll),Qe(document,"mousemove",this._handleFallbackAutoScroll)),tw(),Qd(),RR()},nulling:function(){ih=ov=lc=av=cc=tv=iv=null,Gt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var r=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(ih=t,i||this.options.forceAutoScrollFallback||mc||Hr||uc){nv(t,this.options,a,i);var l=Is(a,!0);av&&(!cc||s!==tv||o!==iv)&&(cc&&tw(),cc=setInterval(function(){var u=Is(document.elementFromPoint(s,o),!0);u!==l&&(l=u,Qd()),nv(t,r.options,u,i)},10),tv=s,iv=o)}else{if(!this.options.bubbleScroll||Is(a,!0)===dr()){Qd();return}nv(t,this.options,Is(a,!1),!1)}}},Vr(n,{pluginName:"scroll",initializeByDefault:!0})}function Qd(){Gt.forEach(function(n){clearInterval(n.pid)}),Gt=[]}function tw(){clearInterval(cc)}var nv=aw(function(n,e,t,i){if(e.scroll){var r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=dr(),u=!1,h;ov!==t&&(ov=t,Qd(),lc=e.scroll,h=e.scrollFn,lc===!0&&(lc=Is(t,!0)));var f=0,m=lc;do{var v=m,w=Yt(v),S=w.top,P=w.bottom,R=w.left,M=w.right,x=w.width,L=w.height,z=void 0,Y=void 0,U=v.scrollWidth,pe=v.scrollHeight,Z=ge(v),We=v.scrollLeft,it=v.scrollTop;v===l?(z=x<U&&(Z.overflowX==="auto"||Z.overflowX==="scroll"||Z.overflowX==="visible"),Y=L<pe&&(Z.overflowY==="auto"||Z.overflowY==="scroll"||Z.overflowY==="visible")):(z=x<U&&(Z.overflowX==="auto"||Z.overflowX==="scroll"),Y=L<pe&&(Z.overflowY==="auto"||Z.overflowY==="scroll"));var pt=z&&(Math.abs(M-r)<=o&&We+x<U)-(Math.abs(R-r)<=o&&!!We),Fe=Y&&(Math.abs(P-s)<=o&&it+L<pe)-(Math.abs(S-s)<=o&&!!it);if(!Gt[f])for(var lt=0;lt<=f;lt++)Gt[lt]||(Gt[lt]={});(Gt[f].vx!=pt||Gt[f].vy!=Fe||Gt[f].el!==v)&&(Gt[f].el=v,Gt[f].vx=pt,Gt[f].vy=Fe,clearInterval(Gt[f].pid),(pt!=0||Fe!=0)&&(u=!0,Gt[f].pid=setInterval((function(){i&&this.layer===0&&Oe.active._onTouchMove(ih);var qt=Gt[this.layer].vy?Gt[this.layer].vy*a:0,Mt=Gt[this.layer].vx?Gt[this.layer].vx*a:0;typeof h=="function"&&h.call(Oe.dragged.parentNode[sn],Mt,qt,n,ih,Gt[this.layer].el)!=="continue"||lw(Gt[this.layer].el,Mt,qt)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&m!==l&&(m=Is(m,!1)));av=u}},30),mw=function(e){var t=e.originalEvent,i=e.putSortable,r=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=i||s;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,f=document.elementFromPoint(h.clientX,h.clientY);l(),u&&!u.el.contains(f)&&(o("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function cv(){}cv.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=Pa(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:mw};Vr(cv,{pluginName:"revertOnSpill"});function uv(){}uv.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:mw};Vr(uv,{pluginName:"removeOnSpill"});Oe.mount(new XR);Oe.mount(uv,cv);var fr=Oe;var pv=dn(Id());function dv(n){let{containerElement:e}=n,{onDragInit:t,onDragStart:i,onDrag:r,onDragEnd:s}=n,o,a,l,u,h,f;e||(e=document.body);let m={dragSource:e,dragHandle:null};function v(){e&&(e.addEventListener("mousedown",P),e.addEventListener("touchstart",P))}function w(x,L,z){typeof x=="function"&&x(L,z)}function S(){e&&(e.removeEventListener("mousedown",P),e.removeEventListener("touchstart",P))}function P(x){o=x.target;let L=x?.touches?.[0]??x,{target:z}=L;if(!n.allowDragFrom||n.allowDragFrom&&o.matches(n.allowDragFrom)||n.allowDragFromClosest&&o.closest(n.allowDragFromClosest)){m.dragHandle=o;let Y=Ed();a=Y.left+L.clientX,l=Y.top+L.clientY,u=L.clientX-L.clientX,h=L.clientY-L.clientY,m=Object.assign(m,{deltaX:u,deltaY:h,startX:a,startY:l,target:z}),w(t,x,m),document.body.addEventListener("mousemove",R),document.body.addEventListener("touchmove",R),document.body.addEventListener("mouseup",M),document.body.addEventListener("touchend",M),document.body.addEventListener("touchcancel",M)}}function R(x){let L=x?.touches?.[0]??x;u=L.clientX-a,h=L.clientY-l;let{target:z}=L;f||(m=Object.assign(m,{deltaX:u,deltaY:h,startX:a,startY:l,target:z}),w(i,x,m),f=!0),m=Object.assign(m,{deltaX:u,deltaY:h,startX:a,startY:l,target:z}),w(r,x,m)}function M(x){if(document.body.removeEventListener("mousemove",R),document.body.removeEventListener("touchmove",R),document.body.removeEventListener("mouseup",M),document.body.removeEventListener("touchend",M),document.body.removeEventListener("touchcancel",M),f){let{target:L}=x;m=Object.assign(m,{target:L}),w(s,x,m),f=!1}}return v(),{destroy:S}}function hv(n){let{element:e,onMouseWheel:t}=n;function i(){e.removeEventListener("wheel",s),e.removeEventListener("mousewheel",s)}function r(){e.addEventListener("wheel",s),e.addEventListener("mousewheel",s)}function s(o){let a=o||window.event,l=0,u=0,h=0;a.wheelDelta&&(l=a.wheelDelta/120),a.detail&&(l=-a.detail/3),h=l,a.axis!==void 0&&a.axis===a.HORIZONTAL_AXIS&&(h=0,u=-1*l),a.wheelDeltaY!==void 0&&(h=a.wheelDeltaY/120),a.wheelDeltaX!==void 0&&(u=-1*a.wheelDeltaX/120),typeof t=="function"&&t(o,l,u,h)}return r(),{destroy:i}}function fv(n){let{resizeableElement:e,resizeableHandleElement:t,onResizeStart:i,onResize:r,onResizeEnd:s}=n;if(!t||typeof t.addEventListener!="function")throw new Error("[SlickResizable] You did not provide a valid html element that will be used for the handle to resize.");function o(){t.addEventListener("mousedown",u),t.addEventListener("touchstart",u)}function a(){typeof t?.removeEventListener=="function"&&(t.removeEventListener("mousedown",u),t.removeEventListener("touchstart",u))}function l(m,v){typeof m=="function"&&m(v,{resizeableElement:e,resizeableHandleElement:t})}function u(m){m.preventDefault();let v=m.touches?m.changedTouches[0]:m;l(i,v),document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseup",f),document.body.addEventListener("touchmove",h),document.body.addEventListener("touchend",f)}function h(m){m.preventDefault&&m.type!=="touchmove"&&m.preventDefault();let v=m.touches?m.changedTouches[0]:m;typeof r=="function"&&r(v,{resizeableElement:e,resizeableHandleElement:t})}function f(m){let v=m.touches?m.changedTouches[0]:m;l(s,v),document.body.removeEventListener("mousemove",h),document.body.removeEventListener("mouseup",f),document.body.removeEventListener("touchmove",h),document.body.removeEventListener("touchend",f)}return o(),{destroy:a}}var rh=class{constructor(e,t,i,r,s){this.container=e,this.data=t,this.columns=i,this.externalPubSub=s,this.slickGridVersion="5.5.0",this.cid="",this.canvas=null,this.canvas_context=null,this._defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableHtmlRendering:!0,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,autoEditNewRow:!0,autoCommitEdit:!1,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,nonce:"",editorLock:oc,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,showPreHeaderPanel:!1,preHeaderPanelHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,throwWhenFrozenNotAllViewable:!1,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:this.defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,showCellSelection:!0,viewportClass:void 0,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,scrollRenderThrottling:50,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,sanitizer:void 0,mixinDefaults:!1,shadowRoot:void 0},this._columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0,hidden:!1},this.page=0,this.offset=0,this.vScrollDir=1,this._bindingEventService=new qe,this.initialized=!1,this.uid=`slickgrid_${Math.round(1e6*Math.random())}`,this._groupHeaders=[],this._headerScroller=[],this._headers=[],this._boundAncestors=[],this.viewportH=0,this.viewportW=0,this.canvasWidth=0,this.canvasWidthL=0,this.canvasWidthR=0,this.headersWidth=0,this.headersWidthL=0,this.headersWidthR=0,this.viewportHasHScroll=!1,this.viewportHasVScroll=!1,this.headerColumnWidthDiff=0,this.headerColumnHeightDiff=0,this.cellWidthDiff=0,this.cellHeightDiff=0,this.hasFrozenRows=!1,this.frozenRowsHeight=0,this.actualFrozenRow=-1,this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.topPanelH=0,this.headerRowH=0,this.footerRowH=0,this.tabbingDirection=1,this.activeCellNode=null,this.currentEditor=null,this.rowsCache={},this.renderedRows=0,this.numVisibleRows=0,this.prevScrollTop=0,this.scrollTop=0,this.lastRenderedScrollTop=0,this.lastRenderedScrollLeft=0,this.prevScrollLeft=0,this.scrollLeft=0,this.selectedRows=[],this.plugins=[],this.cellCssClasses={},this.columnsById={},this.sortColumns=[],this.columnPosLeft=[],this.columnPosRight=[],this.pagingActive=!1,this.pagingIsLastPage=!1,this.h_editorLoader=null,this.h_render=null,this.h_postrender=null,this.h_postrenderCleanup=null,this.postProcessedRows={},this.postProcessToRow=null,this.postProcessFromRow=null,this.postProcessedCleanupQueue=[],this.postProcessgroupId=0,this.counter_rows_rendered=0,this.counter_rows_removed=0,this.cssShow={position:"absolute",visibility:"hidden",display:"block"},this._hiddenParents=[],this.oldProps=[],this.enforceFrozenRowHeightRecalc=!1,this.columnResizeDragging=!1,this.slickDraggableInstance=null,this.slickMouseWheelInstances=[],this.slickResizableInstances=[],this.logMessageMaxCount=30,this.onActiveCellChanged=new B("onActiveCellChanged",s),this.onActiveCellPositionChanged=new B("onActiveCellPositionChanged",s),this.onAddNewRow=new B("onAddNewRow",s),this.onAutosizeColumns=new B("onAutosizeColumns",s),this.onBeforeAppendCell=new B("onBeforeAppendCell",s),this.onBeforeCellEditorDestroy=new B("onBeforeCellEditorDestroy",s),this.onBeforeColumnsResize=new B("onBeforeColumnsResize",s),this.onBeforeDestroy=new B("onBeforeDestroy",s),this.onBeforeEditCell=new B("onBeforeEditCell",s),this.onBeforeFooterRowCellDestroy=new B("onBeforeFooterRowCellDestroy",s),this.onBeforeHeaderCellDestroy=new B("onBeforeHeaderCellDestroy",s),this.onBeforeHeaderRowCellDestroy=new B("onBeforeHeaderRowCellDestroy",s),this.onBeforeSetColumns=new B("onBeforeSetColumns",s),this.onBeforeSort=new B("onBeforeSort",s),this.onBeforeUpdateColumns=new B("onBeforeUpdateColumns",s),this.onCellChange=new B("onCellChange",s),this.onCellCssStylesChanged=new B("onCellCssStylesChanged",s),this.onClick=new B("onClick",s),this.onColumnsReordered=new B("onColumnsReordered",s),this.onColumnsDrag=new B("onColumnsDrag",s),this.onColumnsResized=new B("onColumnsResized",s),this.onColumnsResizeDblClick=new B("onColumnsResizeDblClick",s),this.onCompositeEditorChange=new B("onCompositeEditorChange",s),this.onContextMenu=new B("onContextMenu",s),this.onDrag=new B("onDrag",s),this.onDblClick=new B("onDblClick",s),this.onDragInit=new B("onDragInit",s),this.onDragStart=new B("onDragStart",s),this.onDragEnd=new B("onDragEnd",s),this.onFooterClick=new B("onFooterClick",s),this.onFooterContextMenu=new B("onFooterContextMenu",s),this.onFooterRowCellRendered=new B("onFooterRowCellRendered",s),this.onHeaderCellRendered=new B("onHeaderCellRendered",s),this.onHeaderClick=new B("onHeaderClick",s),this.onHeaderContextMenu=new B("onHeaderContextMenu",s),this.onHeaderMouseEnter=new B("onHeaderMouseEnter",s),this.onHeaderMouseLeave=new B("onHeaderMouseLeave",s),this.onHeaderRowCellRendered=new B("onHeaderRowCellRendered",s),this.onHeaderRowMouseEnter=new B("onHeaderRowMouseEnter",s),this.onHeaderRowMouseLeave=new B("onHeaderRowMouseLeave",s),this.onKeyDown=new B("onKeyDown",s),this.onMouseEnter=new B("onMouseEnter",s),this.onMouseLeave=new B("onMouseLeave",s),this.onRendered=new B("onRendered",s),this.onScroll=new B("onScroll",s),this.onSelectedRowsChanged=new B("onSelectedRowsChanged",s),this.onSetOptions=new B("onSetOptions",s),this.onActivateChangedOptions=new B("onActivateChangedOptions",s),this.onSort=new B("onSort",s),this.onValidationError=new B("onValidationError",s),this.onViewportChanged=new B("onViewportChanged",s),this.initialize(r)}init(){this.finishInitialization()}applyHtmlCode(e,t="",i){if(e)if(t instanceof HTMLElement||t instanceof DocumentFragment)i?.emptyTarget!==!1&&De(e),e.appendChild(t);else{if(i?.skipEmptyReassignment!==!1&&!je(t)&&!e.innerHTML)return;let s=t;if(typeof s=="number"||typeof s=="boolean")e.textContent=String(s);else{if(typeof this._options?.sanitizer=="function")s=this._options.sanitizer(t);else if(typeof pv.default?.sanitize=="function"){let o=i?.sanitizerOptions??this._options.sanitizerOptions??{ADD_ATTR:["level"],RETURN_TRUSTED_TYPE:!0};s=pv.default.sanitize(t,o)}this._options.enableHtmlRendering&&s?e.innerHTML=s:e.textContent=s}}}initialize(e){if(typeof this.container=="string"?this._container=document.querySelector(this.container):this._container=this.container,!this._container)throw new Error(`SlickGrid requires a valid container, ${this.container} does not exist in the DOM.`);if(e?.mixinDefaults?(e||(this._options={}),A.applyDefaults(this._options,this._defaults)):this._options=A.extend(!0,{},this._defaults,e),this.scrollThrottle=this.actionThrottle(this.render.bind(this),this._options.scrollRenderThrottling),this.maxSupportedCssHeight=this.maxSupportedCssHeight||this.getMaxSupportedCssHeight(),this.validateAndEnforceOptions(),this._columnDefaults.width=this._options.defaultColumnWidth,this._options.suppressCssChangesOnHiddenInit||this.cacheCssForHiddenInit(),this.updateColumnProps(),this._options.enableColumnReorder&&(!fr||!fr.create))throw new Error("SlickGrid requires Sortable.js module to be loaded");this.editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},De(this._container),this._container.style.overflow="hidden",this._container.style.outline=String(0),this._container.classList.add(this.uid),this._container.classList.add("ui-widget");let t=window.getComputedStyle(this._container);/relative|absolute|fixed/.test(t.position)||(this._container.style.position="relative"),this._focusSink=E("div",{tabIndex:0,style:{position:"fixed",width:"0px",height:"0px",top:"0px",left:"0px",outline:"0px"}},this._container),this._paneHeaderL=E("div",{className:"slick-pane slick-pane-header slick-pane-left",tabIndex:0},this._container),this._paneHeaderR=E("div",{className:"slick-pane slick-pane-header slick-pane-right",tabIndex:0},this._container),this._paneTopL=E("div",{className:"slick-pane slick-pane-top slick-pane-left",tabIndex:0},this._container),this._paneTopR=E("div",{className:"slick-pane slick-pane-top slick-pane-right",tabIndex:0},this._container),this._paneBottomL=E("div",{className:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:0},this._container),this._paneBottomR=E("div",{className:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:0},this._container),this._options.createPreHeaderPanel&&(this._preHeaderPanelScroller=E("div",{className:"slick-preheader-panel ui-state-default slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderL),this._preHeaderPanelScroller.appendChild(document.createElement("div")),this._preHeaderPanel=E("div",null,this._preHeaderPanelScroller),this._preHeaderPanelSpacer=E("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScroller),this._preHeaderPanelScrollerR=E("div",{className:"slick-preheader-panel ui-state-default slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderR),this._preHeaderPanelR=E("div",null,this._preHeaderPanelScrollerR),this._preHeaderPanelSpacerR=E("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScrollerR),this._options.showPreHeaderPanel||(A.hide(this._preHeaderPanelScroller),A.hide(this._preHeaderPanelScrollerR))),this._headerScrollerL=E("div",{className:"slick-header ui-state-default slick-state-default slick-header-left"},this._paneHeaderL),this._headerScrollerR=E("div",{className:"slick-header ui-state-default slick-state-default slick-header-right"},this._paneHeaderR),this._headerScroller.push(this._headerScrollerL),this._headerScroller.push(this._headerScrollerR),this._headerL=E("div",{className:"slick-header-columns slick-header-columns-left",style:{left:"-1000px"}},this._headerScrollerL),this._headerR=E("div",{className:"slick-header-columns slick-header-columns-right",style:{left:"-1000px"}},this._headerScrollerR),this._headers=[this._headerL,this._headerR],this._headerRowScrollerL=E("div",{className:"slick-headerrow ui-state-default slick-state-default"},this._paneTopL),this._headerRowScrollerR=E("div",{className:"slick-headerrow ui-state-default slick-state-default"},this._paneTopR),this._headerRowScroller=[this._headerRowScrollerL,this._headerRowScrollerR],this._headerRowSpacerL=E("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerL),this._headerRowSpacerR=E("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerR),this._headerRowL=E("div",{className:"slick-headerrow-columns slick-headerrow-columns-left"},this._headerRowScrollerL),this._headerRowR=E("div",{className:"slick-headerrow-columns slick-headerrow-columns-right"},this._headerRowScrollerR),this._headerRows=[this._headerRowL,this._headerRowR],this._topPanelScrollerL=E("div",{className:"slick-top-panel-scroller ui-state-default slick-state-default"},this._paneTopL),this._topPanelScrollerR=E("div",{className:"slick-top-panel-scroller ui-state-default slick-state-default"},this._paneTopR),this._topPanelScrollers=[this._topPanelScrollerL,this._topPanelScrollerR],this._topPanelL=E("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerL),this._topPanelR=E("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerR),this._topPanels=[this._topPanelL,this._topPanelR],this._options.showColumnHeader||this._headerScroller.forEach(i=>{A.hide(i)}),this._options.showTopPanel||this._topPanelScrollers.forEach(i=>{A.hide(i)}),this._options.showHeaderRow||this._headerRowScroller.forEach(i=>{A.hide(i)}),this._viewportTopL=E("div",{className:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:0},this._paneTopL),this._viewportTopR=E("div",{className:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:0},this._paneTopR),this._viewportBottomL=E("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:0},this._paneBottomL),this._viewportBottomR=E("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:0},this._paneBottomR),this._viewport=[this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR],this._options.viewportClass&&this._viewport.forEach(i=>{i.classList.add(...(this._options.viewportClass||"").split(" "))}),this._activeViewportNode=this._viewportTopL,this._canvasTopL=E("div",{className:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:0},this._viewportTopL),this._canvasTopR=E("div",{className:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:0},this._viewportTopR),this._canvasBottomL=E("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:0},this._viewportBottomL),this._canvasBottomR=E("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:0},this._viewportBottomR),this._canvas=[this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR],this.scrollbarDimensions=this.scrollbarDimensions||this.measureScrollbar(),this._activeCanvasNode=this._canvasTopL,this._preHeaderPanelSpacer&&A.width(this._preHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._headers.forEach(i=>{A.width(i,this.getHeadersWidth())}),A.width(this._headerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),A.width(this._headerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._options.createFooterRow&&(this._footerRowScrollerR=E("div",{className:"slick-footerrow ui-state-default slick-state-default"},this._paneTopR),this._footerRowScrollerL=E("div",{className:"slick-footerrow ui-state-default slick-state-default"},this._paneTopL),this._footerRowScroller=[this._footerRowScrollerL,this._footerRowScrollerR],this._footerRowSpacerL=E("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerL),A.width(this._footerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowSpacerR=E("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerR),A.width(this._footerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowL=E("div",{className:"slick-footerrow-columns slick-footerrow-columns-left"},this._footerRowScrollerL),this._footerRowR=E("div",{className:"slick-footerrow-columns slick-footerrow-columns-right"},this._footerRowScrollerR),this._footerRow=[this._footerRowL,this._footerRowR],this._options.showFooterRow||this._footerRowScroller.forEach(i=>{A.hide(i)})),this._focusSink2=this._focusSink.cloneNode(!0),this._container.appendChild(this._focusSink2),this._options.explicitInitialization||this.finishInitialization()}finishInitialization(){this.initialized||(this.initialized=!0,this.getViewportWidth(),this.getViewportHeight(),this.measureCellPaddingAndBorder(),this.disableSelection(this._headers),this._options.enableTextSelectionOnCells||this._viewport.forEach(e=>{this._bindingEventService.bind(e,"selectstart",t=>{t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement})}),this.setFrozenOptions(),this.setPaneVisibility(),this.setScroller(),this.setOverflow(),this.updateColumnCaches(),this.createColumnHeaders(),this.createColumnFooter(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this.bindAncestorScrollEvents(),this._bindingEventService.bind(this._container,"resize",this.resizeCanvas.bind(this)),this._viewport.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleScroll.bind(this))}),this._options.enableMouseWheelScrollHandler&&this._viewport.forEach(e=>{this.slickMouseWheelInstances.push(hv({element:e,onMouseWheel:this.handleMouseWheel.bind(this)}))}),this._headerScroller.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleHeaderContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleHeaderClick.bind(this))}),this._headerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleHeaderRowScroll.bind(this))}),this._options.createFooterRow&&(this._footerRow.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleFooterContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleFooterClick.bind(this))}),this._footerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleFooterRowScroll.bind(this))})),this._options.createPreHeaderPanel&&this._bindingEventService.bind(this._preHeaderPanelScroller,"scroll",this.handlePreHeaderPanelScroll.bind(this)),this._bindingEventService.bind(this._focusSink,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(this._focusSink2,"keydown",this.handleKeyDown.bind(this)),this._canvas.forEach(e=>{this._bindingEventService.bind(e,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(e,"click",this.handleClick.bind(this)),this._bindingEventService.bind(e,"dblclick",this.handleDblClick.bind(this)),this._bindingEventService.bind(e,"contextmenu",this.handleContextMenu.bind(this)),this._bindingEventService.bind(e,"mouseover",this.handleCellMouseOver.bind(this)),this._bindingEventService.bind(e,"mouseout",this.handleCellMouseOut.bind(this))}),dv&&(this.slickDraggableInstance=dv({containerElement:this._container,allowDragFrom:"div.slick-cell",allowDragFromClosest:"div.slick-cell.dnd, div.slick-cell.cell-reorder",onDragInit:this.handleDragInit.bind(this),onDragStart:this.handleDragStart.bind(this),onDrag:this.handleDrag.bind(this),onDragEnd:this.handleDragEnd.bind(this)})),this._options.suppressCssChangesOnHiddenInit||this.restoreCssFromHiddenInit())}cacheCssForHiddenInit(){this._hiddenParents=A.parents(this._container,":hidden");for(let e of this._hiddenParents){let t={};for(let i in this.cssShow)this.cssShow&&(t[i]=e.style[i],e.style[i]=this.cssShow[i]);this.oldProps.push(t)}}restoreCssFromHiddenInit(){let e=0;for(let t of this._hiddenParents){let i=this.oldProps[e++];for(let r in this.cssShow)this.cssShow&&(t.style[r]=i[r])}}hasFrozenColumns(){return this._options.frozenColumn>-1}registerPlugin(e){this.plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(let t=this.plugins.length;t>=0;t--)if(this.plugins[t]===e){this.plugins[t]?.destroy(),this.plugins.splice(t,1);break}}getPluginByName(e){for(let t=this.plugins.length-1;t>=0;t--)if(this.plugins[t]?.pluginName===e)return this.plugins[t]}setSelectionModel(e){this.selectionModel&&(this.selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged.bind(this)),this.selectionModel.destroy&&this.selectionModel.destroy()),this.selectionModel=e,this.selectionModel&&(this.selectionModel.init(this),this.selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged.bind(this)))}getSelectionModel(){return this.selectionModel}getCanvasNode(e,t){return this._getContainerElement(this.getCanvases(),e,t)}getActiveCanvasNode(e){return e===void 0?this._activeCanvasNode:(e instanceof Xe&&(e=e.getNativeEvent()),this._activeCanvasNode=e?.target.closest(".grid-canvas"),this._activeCanvasNode)}getCanvases(){return this._canvas}getViewportNode(e,t){return this._getContainerElement(this.getViewports(),e,t)}getViewports(){return this._viewport}getActiveViewportNode(e){return this.setActiveViewportNode(e),this._activeViewportNode}setActiveViewportNode(e){return e instanceof Xe&&(e=e.getNativeEvent()),this._activeViewportNode=e?.target.closest(".slick-viewport"),this._activeViewportNode}_getContainerElement(e,t,i){if(!e)return;t||(t=0),i||(i=0);let r=typeof t=="number"?t:this.getColumnIndex(t),s=this.hasFrozenRows&&i>=this.actualFrozenRow+(this._options.frozenBottom?0:1),o=this.hasFrozenColumns()&&r>this._options.frozenColumn;return e[(s?2:0)+(o?1:0)]}measureScrollbar(){let e="";this._viewport.forEach(s=>e+=s.className);let t=E("div",{className:e,style:{position:"absolute",top:"-10000px",left:"-10000px",overflow:"auto",width:"100px",height:"100px"}},document.body),i=E("div",{style:{width:"200px",height:"200px",overflow:"auto"}},t),r={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};return i.remove(),t.remove(),r}getHeadersWidth(){this.headersWidth=this.headersWidthL=this.headersWidthR=0;let e=!this._options.autoHeight,t=0,i=this.columns.length;for(t=0;t<i;t++){if(!this.columns[t]||this.columns[t].hidden)continue;let r=this.columns[t].width;this._options.frozenColumn>-1&&t>this._options.frozenColumn?this.headersWidthR+=r||0:this.headersWidthL+=r||0}return e&&(this._options.frozenColumn>-1&&t>this._options.frozenColumn?this.headersWidthR+=this.scrollbarDimensions?.width??0:this.headersWidthL+=this.scrollbarDimensions?.width??0),this.hasFrozenColumns()?(this.headersWidthL=this.headersWidthL+1e3,this.headersWidthR=Math.max(this.headersWidthR,this.viewportW)+this.headersWidthL,this.headersWidthR+=this.scrollbarDimensions?.width??0):(this.headersWidthL+=this.scrollbarDimensions?.width??0,this.headersWidthL=Math.max(this.headersWidthL,this.viewportW)+1e3),this.headersWidth=this.headersWidthL+this.headersWidthR,Math.max(this.headersWidth,this.viewportW)+1e3}getHeadersWidthL(){return this.headersWidthL=0,this.columns.forEach((e,t)=>{e.hidden||this._options.frozenColumn>-1&&t>this._options.frozenColumn||(this.headersWidthL+=e.width||0)}),this.hasFrozenColumns()?this.headersWidthL+=1e3:(this.headersWidthL+=this.scrollbarDimensions?.width??0,this.headersWidthL=Math.max(this.headersWidthL,this.viewportW)+1e3),this.headersWidthL}getHeadersWidthR(){return this.headersWidthR=0,this.columns.forEach((e,t)=>{e.hidden||this._options.frozenColumn>-1&&t>this._options.frozenColumn&&(this.headersWidthR+=e.width||0)}),this.hasFrozenColumns()&&(this.headersWidthR=Math.max(this.headersWidthR,this.viewportW)+this.getHeadersWidthL(),this.headersWidthR+=this.scrollbarDimensions?.width??0),this.headersWidthR}getCanvasWidth(){let e=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width??0):this.viewportW,t=this.columns.length;for(this.canvasWidthL=this.canvasWidthR=0;t--;)!this.columns[t]||this.columns[t].hidden||(this.hasFrozenColumns()&&t>this._options.frozenColumn?this.canvasWidthR+=this.columns[t].width||0:this.canvasWidthL+=this.columns[t].width||0);let i=this.canvasWidthL+this.canvasWidthR;if(this._options.fullWidthRows){let r=Math.max(i,e)-i;r>0&&(i+=r,this.hasFrozenColumns()?this.canvasWidthR+=r:this.canvasWidthL+=r)}return i}updateCanvasWidth(e){let t=this.canvasWidth,i=this.canvasWidthL,r=this.canvasWidthR;this.canvasWidth=this.getCanvasWidth();let s=this.canvasWidth!==t||this.canvasWidthL!==i||this.canvasWidthR!==r;if(s||this.hasFrozenColumns()||this.hasFrozenRows)if(A.width(this._canvasTopL,this.canvasWidthL),this.getHeadersWidth(),A.width(this._headerL,this.headersWidthL),A.width(this._headerR,this.headersWidthR),this.hasFrozenColumns()){let o=A.width(this._container)||0;if(o>0&&this.canvasWidthL>o&&this._options.throwWhenFrozenNotAllViewable)throw new Error("[SlickGrid] Frozen columns cannot be wider than the actual grid container width. Make sure to have less columns freezed or make your grid container wider");A.width(this._canvasTopR,this.canvasWidthR),A.width(this._paneHeaderL,this.canvasWidthL),A.setStyleSize(this._paneHeaderR,"left",this.canvasWidthL),A.setStyleSize(this._paneHeaderR,"width",this.viewportW-this.canvasWidthL),A.width(this._paneTopL,this.canvasWidthL),A.setStyleSize(this._paneTopR,"left",this.canvasWidthL),A.width(this._paneTopR,this.viewportW-this.canvasWidthL),A.width(this._headerRowScrollerL,this.canvasWidthL),A.width(this._headerRowScrollerR,this.viewportW-this.canvasWidthL),A.width(this._headerRowL,this.canvasWidthL),A.width(this._headerRowR,this.canvasWidthR),this._options.createFooterRow&&(A.width(this._footerRowScrollerL,this.canvasWidthL),A.width(this._footerRowScrollerR,this.viewportW-this.canvasWidthL),A.width(this._footerRowL,this.canvasWidthL),A.width(this._footerRowR,this.canvasWidthR)),this._options.createPreHeaderPanel&&A.width(this._preHeaderPanel,this.canvasWidth),A.width(this._viewportTopL,this.canvasWidthL),A.width(this._viewportTopR,this.viewportW-this.canvasWidthL),this.hasFrozenRows&&(A.width(this._paneBottomL,this.canvasWidthL),A.setStyleSize(this._paneBottomR,"left",this.canvasWidthL),A.width(this._viewportBottomL,this.canvasWidthL),A.width(this._viewportBottomR,this.viewportW-this.canvasWidthL),A.width(this._canvasBottomL,this.canvasWidthL),A.width(this._canvasBottomR,this.canvasWidthR))}else A.width(this._paneHeaderL,"100%"),A.width(this._paneTopL,"100%"),A.width(this._headerRowScrollerL,"100%"),A.width(this._headerRowL,this.canvasWidth),this._options.createFooterRow&&(A.width(this._footerRowScrollerL,"100%"),A.width(this._footerRowL,this.canvasWidth)),this._options.createPreHeaderPanel&&A.width(this._preHeaderPanel,this.canvasWidth),A.width(this._viewportTopL,"100%"),this.hasFrozenRows&&(A.width(this._viewportBottomL,"100%"),A.width(this._canvasBottomL,this.canvasWidthL));this.viewportHasHScroll=this.canvasWidth>=this.viewportW-(this.scrollbarDimensions?.width??0),A.width(this._headerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll?this.scrollbarDimensions?.width??0:0)),A.width(this._headerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll?this.scrollbarDimensions?.width??0:0)),this._options.createFooterRow&&(A.width(this._footerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll?this.scrollbarDimensions?.width??0:0)),A.width(this._footerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll?this.scrollbarDimensions?.width??0:0))),(s||e)&&this.applyColumnWidths()}disableSelection(e){e.forEach(t=>{t.setAttribute("unselectable","on"),t.style.mozUserSelect="none",this._bindingEventService.bind(t,"selectstart",()=>!1)})}getMaxSupportedCssHeight(){let e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?this._options.ffMaxSupportedCssHeight:this._options.maxSupportedCssHeight,i=E("div",{style:{display:"hidden"}},document.body);for(;;){let r=e*2;A.height(i,r);let s=A.height(i);if(r>t||s!==r)break;e=r}return i.remove(),e}getUID(){return this.uid}getHeaderColumnWidthDiff(){return this.headerColumnWidthDiff}getScrollbarDimensions(){return this.scrollbarDimensions}getDisplayedScrollbarDimensions(){return{width:this.viewportHasVScroll?this.scrollbarDimensions?.width??0:0,height:this.viewportHasHScroll?this.scrollbarDimensions?.height??0:0}}getAbsoluteColumnMinWidth(){return this.absoluteColumnMinWidth}bindAncestorScrollEvents(){let e=this.hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;for(;(e=e.parentNode)!==document.body&&e;)(e===this._viewportTopL||e.scrollWidth!==e.clientWidth||e.scrollHeight!==e.clientHeight)&&(this._boundAncestors.push(e),this._bindingEventService.bind(e,"scroll",this.handleActiveCellPositionChange.bind(this)))}unbindAncestorScrollEvents(){this._boundAncestors.forEach(e=>{this._bindingEventService.unbindByEventName(e,"scroll")}),this._boundAncestors=[]}updateColumnHeader(e,t,i){if(!this.initialized)return;let r=this.getColumnIndex(e);if(!je(r))return;let s=this.columns[r],o=this.getColumnByIndex(r);o&&(t!==void 0&&(this.columns[r].name=t),i!==void 0&&(this.columns[r].toolTip=i),this.trigger(this.onBeforeHeaderCellDestroy,{node:o,column:s,grid:this}),o.setAttribute("title",i||""),t!==void 0&&this.applyHtmlCode(o.children[0],t),this.trigger(this.onHeaderCellRendered,{node:o,column:s,grid:this}))}getHeader(e){if(!e)return this.hasFrozenColumns()?this._headers:this._headerL;let t=this.getColumnIndex(e.id);return this.hasFrozenColumns()?t<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL}getHeaderColumn(e){let t=typeof e=="number"?e:this.getColumnIndex(e),i=this.hasFrozenColumns()?t<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,r=this.hasFrozenColumns()?t<=this._options.frozenColumn?t:t-this._options.frozenColumn-1:t;return i.children[r]}getHeaderRow(){return this.hasFrozenColumns()?this._headerRows:this._headerRows[0]}getFooterRow(){return this.hasFrozenColumns()?this._footerRow:this._footerRow[0]}getPreHeaderPanel(){return this._preHeaderPanel}getPreHeaderPanelLeft(){return this._preHeaderPanel}getPreHeaderPanelRight(){return this._preHeaderPanelR}getHeaderRowColumn(e){let t=typeof e=="number"?e:this.getColumnIndex(e),i;return this.hasFrozenColumns()?t<=this._options.frozenColumn?i=this._headerRowL:(i=this._headerRowR,t-=this._options.frozenColumn+1):i=this._headerRowL,i.children[t]}getFooterRowColumn(e){let t=typeof e=="number"?e:this.getColumnIndex(e),i;return this.hasFrozenColumns()?t<=this._options.frozenColumn?i=this._footerRowL:(i=this._footerRowR,t-=this._options.frozenColumn+1):i=this._footerRowL,i.children[t]}createColumnFooter(){if(this._options.createFooterRow){this._footerRow.forEach(e=>{e.querySelectorAll(".slick-footerrow-column").forEach(i=>{let r=A.storage.get(i,"column");this.trigger(this.onBeforeFooterRowCellDestroy,{node:i,column:r,grid:this})})}),De(this._footerRowL),De(this._footerRowR);for(let e=0;e<this.columns.length;e++){let t=this.columns[e];if(!t||t.hidden)continue;let i=E("div",{className:`ui-state-default slick-state-default slick-footerrow-column l${e} r${e}`},this.hasFrozenColumns()&&e>this._options.frozenColumn?this._footerRowR:this._footerRowL),r=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;r&&i.classList.add(r),A.storage.put(i,"column",t),this.trigger(this.onFooterRowCellRendered,{node:i,column:t,grid:this})}}}handleHeaderMouseHoverOn(e){e?.target.classList.add("ui-state-hover","slick-state-hover")}handleHeaderMouseHoverOff(e){e?.target.classList.remove("ui-state-hover","slick-state-hover")}createColumnHeaders(){this._headers.forEach(e=>{e.querySelectorAll(".slick-header-column").forEach(i=>{let r=A.storage.get(i,"column");r&&this.trigger(this.onBeforeHeaderCellDestroy,{node:i,column:r,grid:this})})}),De(this._headerL),De(this._headerR),this.getHeadersWidth(),A.width(this._headerL,this.headersWidthL),A.width(this._headerR,this.headersWidthR),this._headerRows.forEach(e=>{e.querySelectorAll(".slick-headerrow-column").forEach(i=>{let r=A.storage.get(i,"column");r&&this.trigger(this.onBeforeHeaderRowCellDestroy,{node:this,column:r,grid:this})})}),De(this._headerRowL),De(this._headerRowR),this._options.createFooterRow&&(this._footerRowL.querySelectorAll(".slick-footerrow-column").forEach(t=>{let i=A.storage.get(t,"column");i&&this.trigger(this.onBeforeFooterRowCellDestroy,{node:this,column:i,grid:this})}),De(this._footerRowL),this.hasFrozenColumns()&&(this._footerRowR.querySelectorAll(".slick-footerrow-column").forEach(i=>{let r=A.storage.get(i,"column");r&&this.trigger(this.onBeforeFooterRowCellDestroy,{node:this,column:r,grid:this})}),De(this._footerRowR)));for(let e=0;e<this.columns.length;e++){let t=this.columns[e],i=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,r=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerRowL:this._headerRowR:this._headerRowL,s=E("div",{id:`${this.uid+t.id}`,dataset:{id:String(t.id)},className:"ui-state-default slick-state-default slick-header-column",title:t.toolTip||""},i),o=E("span",{className:"slick-column-name"},s);this.applyHtmlCode(o,t.name),A.width(s,t.width-this.headerColumnWidthDiff);let a=t.headerCssClass||null;if(a&&s.classList.add(...a.split(" ")),a=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null,a&&s.classList.add(a),this._bindingEventService.bind(s,"mouseenter",this.handleHeaderMouseEnter.bind(this)),this._bindingEventService.bind(s,"mouseleave",this.handleHeaderMouseLeave.bind(this)),A.storage.put(s,"column",t),(this._options.enableColumnReorder||t.sortable)&&(this._bindingEventService.bind(s,"mouseenter",this.handleHeaderMouseHoverOn.bind(this)),this._bindingEventService.bind(s,"mouseleave",this.handleHeaderMouseHoverOff.bind(this))),t.hasOwnProperty("headerCellAttrs")&&t.headerCellAttrs instanceof Object)for(let l in t.headerCellAttrs)t.headerCellAttrs.hasOwnProperty(l)&&s.setAttribute(l,t.headerCellAttrs[l]);if(t.sortable&&(s.classList.add("slick-header-sortable"),E("div",{className:`slick-sort-indicator ${this._options.numberedMultiColumnSort&&!this._options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":""}`},s),this._options.numberedMultiColumnSort&&this._options.sortColNumberInSeparateSpan&&E("div",{className:"slick-sort-indicator-numbered"},s)),this.trigger(this.onHeaderCellRendered,{node:s,column:t,grid:this}),this._options.showHeaderRow){let l=E("div",{className:`ui-state-default slick-state-default slick-headerrow-column l${e} r${e}`},r),u=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;u&&l.classList.add(u),this._bindingEventService.bind(l,"mouseenter",this.handleHeaderRowMouseEnter.bind(this)),this._bindingEventService.bind(l,"mouseleave",this.handleHeaderRowMouseLeave.bind(this)),A.storage.put(l,"column",t),this.trigger(this.onHeaderRowCellRendered,{node:l,column:t,grid:this})}if(this._options.createFooterRow&&this._options.showFooterRow){let l=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._footerRow[0]:this._footerRow[1]:this._footerRow[0],u=E("div",{className:`ui-state-default slick-state-default slick-footerrow-column l${e} r${e}`},l);A.storage.put(u,"column",t),this.trigger(this.onFooterRowCellRendered,{node:u,column:t,grid:this})}}this.setSortColumns(this.sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&(typeof this._options.enableColumnReorder=="function"?this._options.enableColumnReorder(this,this._headers,this.headerColumnWidthDiff,this.setColumns,this.setupColumnResize,this.columns,this.getColumnIndex,this.uid,this.trigger):this.setupColumnReorder())}setupColumnSort(){this._headers.forEach(e=>{this._bindingEventService.bind(e,"click",t=>{if(this.columnResizeDragging||t.target.classList.contains("slick-resizable-handle"))return;let i=t.target.closest(".slick-header-column");if(!i)return;let r=A.storage.get(i,"column");if(r.sortable){if(!this.getEditorLock()?.commitCurrentEdit())return;let s=this.sortColumns.slice(),o=null,a=0;for(;a<this.sortColumns.length;a++)if(this.sortColumns[a].columnId===r.id){o=this.sortColumns[a],o.sortAsc=!o.sortAsc;break}let l=!!o;this._options.tristateMultiColumnSort?(o||(o={columnId:r.id,sortAsc:r.defaultSortAsc,sortCol:r}),l&&o.sortAsc&&(this.sortColumns.splice(a,1),o=null),this._options.multiColumnSort||(this.sortColumns=[]),o&&(!l||!this._options.multiColumnSort)&&this.sortColumns.push(o)):t.metaKey&&this._options.multiColumnSort?o&&this.sortColumns.splice(a,1):((!t.shiftKey&&!t.metaKey||!this._options.multiColumnSort)&&(this.sortColumns=[]),o?this.sortColumns.length===0&&this.sortColumns.push(o):(o={columnId:r.id,sortAsc:r.defaultSortAsc,sortCol:r},this.sortColumns.push(o)));let u;this._options.multiColumnSort?u={multiColumnSort:!0,previousSortColumns:s,sortCols:this.sortColumns.map(h=>({columnId:this.columns[this.getColumnIndex(h.columnId)].id,sortCol:this.columns[this.getColumnIndex(h.columnId)],sortAsc:h.sortAsc}))}:u={multiColumnSort:!1,previousSortColumns:s,columnId:this.sortColumns.length>0?r.id:null,sortCol:this.sortColumns.length>0?r:null,sortAsc:this.sortColumns.length>0?this.sortColumns[0].sortAsc:!0},this.trigger(this.onBeforeSort,u,t).getReturnValue()!==!1&&(this.setSortColumns(this.sortColumns),this.trigger(this.onSort,u,t))}})})}currentPositionInHeader(e){let t=0;return this._headers.forEach(i=>{i.querySelectorAll(".slick-header-column").forEach((s,o)=>{s.id===e&&(t=o)})}),t}remove(e,t){let i=e.lastIndexOf(t);i>-1&&(e.splice(i,1),this.remove(e,t))}setupColumnReorder(){this.sortableSideLeftInstance?.destroy(),this.sortableSideRightInstance?.destroy();let e=null,t=()=>this._viewportScrollContainerX.scrollLeft=this._viewportScrollContainerX.scrollLeft+10,i=()=>this._viewportScrollContainerX.scrollLeft=this._viewportScrollContainerX.scrollLeft-10,r,s={animation:50,direction:"horizontal",chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dragoverBubble:!1,revertClone:!0,scroll:!this.hasFrozenColumns(),onStart:o=>{r=!this.hasFrozenColumns()||at(o.item).left>at(this._viewportScrollContainerX).left,r&&o.originalEvent.pageX>this._container.clientWidth?e||(e=setInterval(t,100)):r&&o.originalEvent.pageX<at(this._viewportScrollContainerX).left?e||(e=setInterval(i,100)):(clearInterval(e),e=null)},onEnd:o=>{clearInterval(e),e=null;let l;if(!this.getEditorLock()?.commitCurrentEdit())return;let u=this.sortableSideLeftInstance?.toArray()??[];u=u.concat(this.sortableSideRightInstance?.toArray()??[]);let h=[];for(let f=0;f<u.length;f++)h.push(this.columns[this.getColumnIndex(u[f])]);this.setColumns(h),this.trigger(this.onColumnsReordered,{impactedColumns:this.getImpactedColumns(l)}),o.stopPropagation(),this.setupColumnResize(),this.activeCellNode&&this.setFocus()}};this.sortableSideLeftInstance=fr.create(this._headerL,s),this.sortableSideRightInstance=fr.create(this._headerR,s)}getHeaderChildren(){let e=Array.from(this._headers[0].children),t=Array.from(this._headers[1].children);return e.concat(t)}getImpactedColumns(e){let t=[];if(e)for(let i=e.start;i<=e.end;i++)t.push(this.columns[i]);else t=this.columns;return t}handleResizeableHandleDoubleClick(e){let t=e.target.parentElement.id.replace(this.uid,"");this.trigger(this.onColumnsResizeDblClick,{triggeredByColumn:t})}setupColumnResize(){if(typeof fv>"u")throw new Error('SlickResizable is undefined, make sure to import "slick.interactions.js"');let e,t,i,r,s,o,a,l=-1,u=0,h=this.getHeaderChildren();for(let f=0;f<h.length;f++)h[f].querySelectorAll(".slick-resizable-handle").forEach(w=>w.remove()),!(f>=this.columns.length||!this.columns[f]||this.columns[f].hidden)&&this.columns[f].resizable&&(a===void 0&&(a=f),l=f);if(a!==void 0)for(let f=0;f<h.length;f++){let m=h[f];if(f>=this.columns.length||!this.columns[f]||this.columns[f].hidden||f<a||this._options.forceFitColumns&&f>=l)continue;let v=E("div",{className:"slick-resizable-handle",role:"separator",ariaOrientation:"horizontal"},m);this._bindingEventService.bind(v,"dblclick",this.handleResizeableHandleDoubleClick.bind(this)),this.slickResizableInstances.push(fv({resizeableElement:m,resizeableHandleElement:v,onResizeStart:(w,S)=>{let P=w.touches?w.changedTouches[0]:w;if(!this.getEditorLock()?.commitCurrentEdit())return!1;r=P.pageX,u=0,S.resizeableElement.classList.add("slick-header-column-active");let R=null,M=null;for(let z=0;z<h.length;z++)z>=this.columns.length||!this.columns[z]||this.columns[z].hidden||(this.columns[z].previousWidth=h[z].offsetWidth);if(this._options.forceFitColumns)for(R=0,M=0,e=f+1;e<this.columns.length;e++)i=this.columns[e],i&&i.resizable&&!i.hidden&&(M!==null&&(i.maxWidth?M+=i.maxWidth-(i.previousWidth||0):M=null),R+=(i.previousWidth||0)-Math.max(i.minWidth||0,this.absoluteColumnMinWidth));let x=0,L=0;for(e=0;e<=f;e++)i=this.columns[e],i&&i.resizable&&!i.hidden&&(L!==null&&(i.maxWidth?L+=i.maxWidth-(i.previousWidth||0):L=null),x+=(i.previousWidth||0)-Math.max(i.minWidth||0,this.absoluteColumnMinWidth));R===null&&(R=1e5),x===null&&(x=1e5),M===null&&(M=1e5),L===null&&(L=1e5),o=r+Math.min(R,L),s=r-Math.min(x,M)},onResize:(w,S)=>{let P=w.touches?w.changedTouches[0]:w;this.columnResizeDragging=!0;let R,M=Math.min(o,Math.max(s,P.pageX))-r,x,L=0,z=0,Y=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width??0):this.viewportW;if(M<0){for(x=M,e=f;e>=0;e--)i=this.columns[e],i&&i.resizable&&!i.hidden&&(R=Math.max(i.minWidth||0,this.absoluteColumnMinWidth),x&&(i.previousWidth||0)+x<R?(x+=(i.previousWidth||0)-R,i.width=R):(i.width=(i.previousWidth||0)+x,x=0));for(t=0;t<=f;t++)i=this.columns[t],!(!i||i.hidden)&&(this.hasFrozenColumns()&&t>this._options.frozenColumn?z+=i.width||0:L+=i.width||0);if(this._options.forceFitColumns)for(x=-M,e=f+1;e<this.columns.length;e++)i=this.columns[e],!(!i||i.hidden)&&i.resizable&&(x&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<x?(x-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth):(i.width=(i.previousWidth||0)+x,x=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?z+=i.width||0:L+=i.width||0);else for(e=f+1;e<this.columns.length;e++)i=this.columns[e],!(!i||i.hidden)&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?z+=i.width||0:L+=i.width||0);if(this._options.forceFitColumns)for(x=-M,e=f+1;e<this.columns.length;e++)i=this.columns[e],!(!i||i.hidden)&&i.resizable&&(x&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<x?(x-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth):(i.width=(i.previousWidth||0)+x,x=0))}else{for(x=M,L=0,z=0,e=f;e>=0;e--)if(i=this.columns[e],!(!i||i.hidden)&&i.resizable)if(x&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<x)x-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth;else{let U=(i.previousWidth||0)+x,pe=this.canvasWidthL+x;this.hasFrozenColumns()&&e<=this._options.frozenColumn?(U>u&&pe<Y-this._options.frozenRightViewportMinWidth&&(u=U),i.width=pe+this._options.frozenRightViewportMinWidth>Y?u:U):i.width=U,x=0}for(t=0;t<=f;t++)i=this.columns[t],!(!i||i.hidden)&&(this.hasFrozenColumns()&&t>this._options.frozenColumn?z+=i.width||0:L+=i.width||0);if(this._options.forceFitColumns)for(x=-M,e=f+1;e<this.columns.length;e++)i=this.columns[e],!(!i||i.hidden)&&i.resizable&&(R=Math.max(i.minWidth||0,this.absoluteColumnMinWidth),x&&(i.previousWidth||0)+x<R?(x+=(i.previousWidth||0)-R,i.width=R):(i.width=(i.previousWidth||0)+x,x=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?z+=i.width||0:L+=i.width||0);else for(e=f+1;e<this.columns.length;e++)i=this.columns[e],!(!i||i.hidden)&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?z+=i.width||0:L+=i.width||0)}this.hasFrozenColumns()&&L!==this.canvasWidthL&&(A.width(this._headerL,L+1e3),A.setStyleSize(this._paneHeaderR,"left",L)),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this.applyColumnWidths(),this.trigger(this.onColumnsDrag,{triggeredByColumn:S.resizeableElement,resizeHandle:S.resizeableHandleElement})},onResizeEnd:(w,S)=>{S.resizeableElement.classList.remove("slick-header-column-active");let P=S.resizeableElement.id.replace(this.uid,"");this.trigger(this.onBeforeColumnsResize,{triggeredByColumn:P}).getReturnValue()===!0&&this.applyColumnHeaderWidths();let R;for(e=0;e<this.columns.length;e++)i=this.columns[e],!(!i||i.hidden)&&(R=h[e].offsetWidth,i.previousWidth!==R&&i.rerenderOnResize&&this.invalidateAllRows());this.updateCanvasWidth(!0),this.render(),this.trigger(this.onColumnsResized,{triggeredByColumn:P}),setTimeout(()=>{this.columnResizeDragging=!1},300)}}))}}getVBoxDelta(e){let t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=getComputedStyle(e),r=0;return t.forEach(s=>r+=A.toFloat(i[s])),r}setFrozenOptions(){if(this._options.frozenColumn=this._options.frozenColumn>=0&&this._options.frozenColumn<this.columns.length?parseInt(this._options.frozenColumn,10):-1,this._options.frozenRow>-1){this.hasFrozenRows=!0,this.frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;let e=this.getDataLength();this.actualFrozenRow=this._options.frozenBottom?e-this._options.frozenRow:this._options.frozenRow}else this.hasFrozenRows=!1}setPaneVisibility(){this.hasFrozenColumns()?(A.show(this._paneHeaderR),A.show(this._paneTopR),this.hasFrozenRows?(A.show(this._paneBottomL),A.show(this._paneBottomR)):(A.hide(this._paneBottomR),A.hide(this._paneBottomL))):(A.hide(this._paneHeaderR),A.hide(this._paneTopR),A.hide(this._paneBottomR),this.hasFrozenRows?A.show(this._paneBottomL):(A.hide(this._paneBottomR),A.hide(this._paneBottomL)))}setOverflow(){this._viewportTopL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"hidden"):this.hasFrozenRows?"scroll":"auto",this._viewportTopR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?this.hasFrozenRows?"scroll":"auto":this.hasFrozenRows?"scroll":"auto",this._viewportBottomL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto":(this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll,"auto"),this._viewportBottomL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"hidden"):this.hasFrozenRows?"scroll":"auto",this._viewportBottomR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto":(this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll,"auto"),this._viewportBottomR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"auto"):(this.hasFrozenRows,"auto"),this._options.viewportClass&&(this._viewportTopL.classList.add(...this._options.viewportClass.split(" ")),this._viewportTopR.classList.add(...this._options.viewportClass.split(" ")),this._viewportBottomL.classList.add(...this._options.viewportClass.split(" ")),this._viewportBottomR.classList.add(...this._options.viewportClass.split(" ")))}setScroller(){this.hasFrozenColumns()?(this._headerScrollContainer=this._headerScrollerR,this._headerRowScrollContainer=this._headerRowScrollerR,this._footerRowScrollContainer=this._footerRowScrollerR,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomR,this._viewportScrollContainerY=this._viewportTopR):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomR:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopR):(this._headerScrollContainer=this._headerScrollerL,this._headerRowScrollContainer=this._headerRowScrollerL,this._footerRowScrollContainer=this._footerRowScrollerL,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomL,this._viewportScrollContainerY=this._viewportTopL):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomL:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopL)}measureCellPaddingAndBorder(){let e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=this._headers[0];this.headerColumnWidthDiff=this.headerColumnHeightDiff=0,this.cellWidthDiff=this.cellHeightDiff=0;let r=E("div",{className:"ui-state-default slick-state-default slick-header-column",style:{visibility:"hidden"},textContent:"-"},i),s=getComputedStyle(r);s.boxSizing!=="border-box"&&(e.forEach(a=>this.headerColumnWidthDiff+=A.toFloat(s[a])),t.forEach(a=>this.headerColumnHeightDiff+=A.toFloat(s[a]))),r.remove();let o=E("div",{className:"slick-row"},this._canvas[0]);r=E("div",{className:"slick-cell",id:"",style:{visibility:"hidden"},textContent:"-"},o),s=getComputedStyle(r),s.boxSizing!=="border-box"&&(e.forEach(a=>this.cellWidthDiff+=A.toFloat(s[a])),t.forEach(a=>this.cellHeightDiff+=A.toFloat(s[a]))),o.remove(),this.absoluteColumnMinWidth=Math.max(this.headerColumnWidthDiff,this.cellWidthDiff)}createCssRules(){this._style=document.createElement("style"),this._style.nonce=this._options.nonce||"",(this._options.shadowRoot||document.head).appendChild(this._style);let e=this._options.rowHeight-this.cellHeightDiff,t=[`.${this.uid} .slick-group-header-column { left: 1000px; }`,`.${this.uid} .slick-header-column { left: 1000px; }`,`.${this.uid} .slick-top-panel { height: ${this._options.topPanelHeight}px; }`,`.${this.uid} .slick-preheader-panel { height: ${this._options.preHeaderPanelHeight}px; }`,`.${this.uid} .slick-headerrow-columns { height: ${this._options.headerRowHeight}px; }`,`.${this.uid} .slick-footerrow-columns { height: ${this._options.footerRowHeight}px; }`,`.${this.uid} .slick-cell { height: ${e}px; }`,`.${this.uid} .slick-row { height: ${this._options.rowHeight}px; }`],i=this._style.sheet;if(i){for(let r of t)i.insertRule(r);for(let r=0;r<this.columns.length;r++)!this.columns[r]||this.columns[r].hidden||(i.insertRule(`.${this.uid} .l${r} { }`),i.insertRule(`.${this.uid} .r${r} { }`))}else this.createCssRulesAlternative(t)}createCssRulesAlternative(e){let t=document.createElement("template");t.innerHTML='<style type="text/css" rel="stylesheet" />',this._style=t.content.firstChild,(this._options.shadowRoot||document.head).appendChild(this._style);for(let i=0;i<this.columns.length;i++)!this.columns[i]||this.columns[i].hidden||(e.push(`.${this.uid} .l${i} { }`),e.push(`.${this.uid} .r${i} { }`));this._style.styleSheet?this._style.styleSheet.cssText=e.join(" "):this._style.appendChild(document.createTextNode(e.join(" ")))}getColumnCssRules(e){let t;if(!this.stylesheet){let i=(this._options.shadowRoot||document).styleSheets;for(this._options.devMode&&typeof this._options.devMode.ownerNodeIndex=="number"&&this._options.devMode.ownerNodeIndex>=0&&(i[this._options.devMode.ownerNodeIndex].ownerNode=this._style),t=0;t<i.length;t++){let a=i[t];if((a.ownerNode||a.owningElement)===this._style){this.stylesheet=a;break}}if(!this.stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");this.columnCssRulesL=[],this.columnCssRulesR=[];let r=this.stylesheet.cssRules||this.stylesheet.rules,s,o;for(t=0;t<r.length;t++){let a=r[t].selectorText;(s=/\.l\d+/.exec(a))?(o=parseInt(s[0].substr(2,s[0].length-2),10),this.columnCssRulesL[o]=r[t]):(s=/\.r\d+/.exec(a))&&(o=parseInt(s[0].substr(2,s[0].length-2),10),this.columnCssRulesR[o]=r[t])}}return{left:this.columnCssRulesL[e],right:this.columnCssRulesR[e]}}removeCssRules(){this._style?.remove(),this.stylesheet=null}destroy(e){this._bindingEventService.unbindAll(),this.slickDraggableInstance=this.destroyAllInstances(this.slickDraggableInstance),this.slickMouseWheelInstances=this.destroyAllInstances(this.slickMouseWheelInstances),this.slickResizableInstances=this.destroyAllInstances(this.slickResizableInstances),this.getEditorLock()?.cancelCurrentEdit(),this.trigger(this.onBeforeDestroy,{});let t=this.plugins.length;for(;t--;)this.unregisterPlugin(this.plugins[t]);this._options.enableColumnReorder&&typeof this.sortableSideLeftInstance?.destroy=="function"&&(this.sortableSideLeftInstance?.destroy(),this.sortableSideRightInstance?.destroy()),this.unbindAncestorScrollEvents(),this._bindingEventService.unbindByEventName(this._container,"resize"),this.removeCssRules(),this._canvas.forEach(s=>{this._bindingEventService.unbindByEventName(s,"keydown"),this._bindingEventService.unbindByEventName(s,"click"),this._bindingEventService.unbindByEventName(s,"dblclick"),this._bindingEventService.unbindByEventName(s,"contextmenu"),this._bindingEventService.unbindByEventName(s,"mouseover"),this._bindingEventService.unbindByEventName(s,"mouseout")}),this._viewport.forEach(s=>{this._bindingEventService.unbindByEventName(s,"scroll")}),this._headerScroller.forEach(s=>{this._bindingEventService.unbindByEventName(s,"contextmenu"),this._bindingEventService.unbindByEventName(s,"click")}),this._headerRowScroller.forEach(s=>{this._bindingEventService.unbindByEventName(s,"scroll")}),this._footerRow&&this._footerRow.forEach(s=>{this._bindingEventService.unbindByEventName(s,"contextmenu"),this._bindingEventService.unbindByEventName(s,"click")}),this._footerRowScroller&&this._footerRowScroller.forEach(s=>{this._bindingEventService.unbindByEventName(s,"scroll")}),this._preHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._preHeaderPanelScroller,"scroll"),this._bindingEventService.unbindByEventName(this._focusSink,"keydown"),this._bindingEventService.unbindByEventName(this._focusSink2,"keydown");let i=this._container.querySelectorAll(".slick-resizable-handle");[].forEach.call(i,s=>{this._bindingEventService.unbindByEventName(s,"dblclick")});let r=this._container.querySelectorAll(".slick-header-column");[].forEach.call(r,s=>{this._bindingEventService.unbindByEventName(s,"mouseenter"),this._bindingEventService.unbindByEventName(s,"mouseleave"),this._bindingEventService.unbindByEventName(s,"mouseenter"),this._bindingEventService.unbindByEventName(s,"mouseleave")}),De(this._container),this._container.classList.remove(this.uid),e&&this.destroyAllElements()}destroyAllInstances(e){if(e){let t=Array.isArray(e)?e:[e],i;for(;je(i=t.pop());)i&&typeof i.destroy=="function"&&i.destroy()}return e=Array.isArray(e)?[]:null,e}destroyAllElements(){this._activeCanvasNode=null,this._activeViewportNode=null,this._boundAncestors=null,this._canvas=null,this._canvasTopL=null,this._canvasTopR=null,this._canvasBottomL=null,this._canvasBottomR=null,this._container=null,this._focusSink=null,this._focusSink2=null,this._groupHeaders=null,this._groupHeadersL=null,this._groupHeadersR=null,this._headerL=null,this._headerR=null,this._headers=null,this._headerRows=null,this._headerRowL=null,this._headerRowR=null,this._headerRowSpacerL=null,this._headerRowSpacerR=null,this._headerRowScrollContainer=null,this._headerRowScroller=null,this._headerRowScrollerL=null,this._headerRowScrollerR=null,this._headerScrollContainer=null,this._headerScroller=null,this._headerScrollerL=null,this._headerScrollerR=null,this._hiddenParents=null,this._footerRow=null,this._footerRowL=null,this._footerRowR=null,this._footerRowSpacerL=null,this._footerRowSpacerR=null,this._footerRowScroller=null,this._footerRowScrollerL=null,this._footerRowScrollerR=null,this._footerRowScrollContainer=null,this._preHeaderPanel=null,this._preHeaderPanelR=null,this._preHeaderPanelScroller=null,this._preHeaderPanelScrollerR=null,this._preHeaderPanelSpacer=null,this._preHeaderPanelSpacerR=null,this._topPanels=null,this._topPanelScrollers=null,this._style=null,this._topPanelScrollerL=null,this._topPanelScrollerR=null,this._topPanelL=null,this._topPanelR=null,this._paneHeaderL=null,this._paneHeaderR=null,this._paneTopL=null,this._paneTopR=null,this._paneBottomL=null,this._paneBottomR=null,this._viewport=null,this._viewportTopL=null,this._viewportTopR=null,this._viewportBottomL=null,this._viewportBottomR=null,this._viewportScrollContainerX=null,this._viewportScrollContainerY=null}autosizeColumns(){this.legacyAutosizeColumns()}legacyAutosizeColumns(){let e,t,i=0,r=0,s=0,o=[],a=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width??0):this.viewportW;for(e=0;e<this.columns.length;e++)t=this.columns[e],!(!t||t.hidden)&&(o.push(t.width||0),r+=t.width||0,t.resizable&&(i+=(t.width||0)-Math.max(t.minWidth||0,this.absoluteColumnMinWidth)));for(s=r;r>a&&i;){let u=(r-a)/i;for(e=0;e<this.columns.length&&r>a;e++){if(t=this.columns[e],!t||t.hidden)continue;let h=o[e];if(!t.resizable||h<=t.minWidth||h<=this.absoluteColumnMinWidth)continue;let f=Math.max(t.minWidth,this.absoluteColumnMinWidth),m=Math.floor(u*(h-f))||1;m=Math.min(m,h-f),r-=m,i-=m,o[e]-=m}if(s<=r)break;s=r}for(s=r;r<a;){let u=a/r;for(e=0;e<this.columns.length&&r<a;e++){if(t=this.columns[e],!t||t.hidden)continue;let h=o[e],f;!t.resizable||t.maxWidth<=h?f=0:f=Math.min(Math.floor(u*h)-h,t.maxWidth-h||1e6)||1,r+=f,o[e]+=r<=a?f:0}if(s>=r)break;s=r}let l=!1;for(e=0;e<this.columns.length;e++)!t||t.hidden||(this.columns[e].rerenderOnResize&&this.columns[e].width!==o[e]&&(l=!0),this.columns[e].width=o[e]);this.reRenderColumns(l)}reRenderColumns(e){this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),this.trigger(this.onAutosizeColumns,{columns:this.columns}),e&&(this.invalidateAllRows(),this.render())}getVisibleColumns(){return this.columns.filter(e=>!e.hidden)}trigger(e,t,i){let r=i||new Xe(i,t),s=t||{};return s.grid=this,e.notify(s,r,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this.editController}getColumnIndex(e){return this.columnsById[e]}applyColumnHeaderWidths(){if(!this.initialized)return;let e=0,t=this.getVisibleColumns();this._headers.forEach(i=>{for(let r=0;r<i.children.length;r++,e++){let s=i.children[r],a=((t[e]||{}).width||0)-this.headerColumnWidthDiff;A.width(s)!==a&&A.width(s,a)}}),this.updateColumnCaches()}applyColumnWidths(){let e=0,t=0,i;for(let r=0;r<this.columns.length;r++)this.columns[r]?.hidden||(t=this.columns[r].width||0,i=this.getColumnCssRules(r),i.left.style.left=`${e}px`,i.right.style.right=(this._options.frozenColumn!==-1&&r>this._options.frozenColumn?this.canvasWidthR:this.canvasWidthL)-e-t+"px",this._options.frozenColumn!==r&&(e+=this.columns[r].width)),this._options.frozenColumn===r&&(e=0)}setSortColumn(e,t){this.setSortColumns([{columnId:e,sortAsc:t}])}getColumnByIndex(e){let t;return this._headers.every(i=>{let r=i.children.length;return e<r?(t=i.children[e],!1):(e-=r,!0)}),t}setSortColumns(e){this.sortColumns=e;let t=this._options.numberedMultiColumnSort&&this.sortColumns.length>1;this._headers.forEach(r=>{let s=r.querySelectorAll(".slick-header-column-sorted");s.forEach(o=>{o.classList.remove("slick-header-column-sorted")}),s=r.querySelectorAll(".slick-sort-indicator"),s.forEach(o=>{o.classList.remove("slick-sort-indicator-asc"),o.classList.remove("slick-sort-indicator-desc")}),s=r.querySelectorAll(".slick-sort-indicator-numbered"),s.forEach(o=>{o.textContent=""})});let i=1;this.sortColumns.forEach(r=>{je(r.sortAsc)||(r.sortAsc=!0);let s=this.getColumnIndex(r.columnId);if(je(s)){let o=this.getColumnByIndex(s);if(o){o.classList.add("slick-header-column-sorted");let a=o.querySelector(".slick-sort-indicator");a?.classList.add(r.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),t&&(a=o.querySelector(".slick-sort-indicator-numbered"),a&&(a.textContent=String(i)))}}i++})}getSortColumns(){return this.sortColumns}handleSelectedRangesChanged(e,t){let i=e.getNativeEvent(),r=this.selectedRows.slice(0);this.selectedRows=[];let s={};for(let o=0;o<t.length;o++)for(let a=t[o].fromRow;a<=t[o].toRow;a++){s[a]||(this.selectedRows.push(a),s[a]={});for(let l=t[o].fromCell;l<=t[o].toCell;l++)this.canCellBeSelected(a,l)&&(s[a][this.columns[l].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass||"",s),this.simpleArrayEquals(r,this.selectedRows)){let o=i?.detail?.caller??"click",a=this.getSelectedRows().filter(u=>r.indexOf(u)<0),l=r.filter(u=>this.getSelectedRows().indexOf(u)<0);this.trigger(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:r,caller:o,changedSelectedRows:a,changedUnselectedRows:l},e)}}simpleArrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&t.sort().toString()!==e.sort().toString()}getColumns(){return this.columns}updateColumnCaches(){this.columnPosLeft=[],this.columnPosRight=[];let e=0;for(let t=0,i=this.columns.length;t<i;t++)!this.columns[t]||this.columns[t].hidden||(this.columnPosLeft[t]=e,this.columnPosRight[t]=e+(this.columns[t].width||0),this._options.frozenColumn===t?e=0:e+=this.columns[t].width||0)}updateColumnProps(){this.columnsById={};for(let e=0;e<this.columns.length;e++){let t=this.columns[e];t.width&&(t.widthRequest=t.width),this._options.mixinDefaults?A.applyDefaults(t,this._columnDefaults):t=this.columns[e]=A.extend({},this._columnDefaults,t),this.columnsById[t.id]=e,t.minWidth&&(t.width||0)<t.minWidth&&(t.width=t.minWidth),t.maxWidth&&(t.width||0)>t.maxWidth&&(t.width=t.maxWidth)}}setColumns(e){this.trigger(this.onBeforeSetColumns,{previousColumns:this.columns,newColumns:e,grid:this}),this.columns=e,this.updateColumnsInternal()}updateColumns(){this.trigger(this.onBeforeUpdateColumns,{columns:this.columns,grid:this}),this.updateColumnsInternal()}updateColumnsInternal(){this.updateColumnProps(),this.updateColumnCaches(),this.initialized&&(this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooter(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this.applyColumnWidths(),this.handleScroll(),this.getSelectionModel()?.refreshSelections())}getOptions(){return this._options}setOptions(e,t,i,r){this.prepareForOptionsChange(),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),e.frozenColumn&&(this.getViewports().forEach(o=>o.scrollLeft=0),this.handleScroll());let s=A.extend(!0,{},this._options);this._options=A.extend(this._options,e),this.trigger(this.onSetOptions,{optionsBefore:s,optionsAfter:this._options}),this.internal_setOptions(t,i,r)}activateChangedOptions(e,t,i){this.prepareForOptionsChange(),this.invalidateRow(this.getDataLength()),this.trigger(this.onActivateChangedOptions,{options:this._options}),this.internal_setOptions(e,t,i)}prepareForOptionsChange(){this.getEditorLock().commitCurrentEdit()&&this.makeActiveCellNormal()}internal_setOptions(e,t,i){this._options.showColumnHeader!==void 0&&this.setColumnHeaderVisibility(this._options.showColumnHeader),this.validateAndEnforceOptions(),this.setFrozenOptions(),this._options.frozenBottom!==void 0&&(this.enforceFrozenRowHeightRecalc=!0),this._viewport.forEach(r=>{r.style.overflowY=this._options.autoHeight?"hidden":"auto"}),e||this.render(),this.setScroller(),i||this.setOverflow(),t||this.setColumns(this.columns),this._options.enableMouseWheelScrollHandler&&this._viewport&&(!this.slickMouseWheelInstances||this.slickMouseWheelInstances.length===0)?this._viewport.forEach(r=>{this.slickMouseWheelInstances.push(hv({element:r,onMouseWheel:this.handleMouseWheel.bind(this)}))}):this._options.enableMouseWheelScrollHandler===!1&&this.destroyAllInstances(this.slickMouseWheelInstances)}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}setData(e,t){this.data=e,this.invalidateAllRows(),this.updateRowCount(),t&&this.scrollTo(0)}getData(){return this.data}getDataLength(){return this.data.getLength?this.data.getLength():this.data?.length??0}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this.pagingActive||this.pagingIsLastPage)?1:0)}getDataItem(e){return this.data.getItem?this.data.getItem(e):this.data[e]}getTopPanel(){return this._topPanels[0]}getTopPanels(){return this._topPanels}hasDataView(){return!Array.isArray(this.data)}togglePanelVisibility(e,t,i){this._options[e]!==i&&(this._options[e]=i,i?(A.show(t),this.resizeCanvas()):(A.hide(t),this.resizeCanvas()))}setTopPanelVisibility(e){this.togglePanelVisibility("showTopPanel",this._topPanelScrollers,e)}setHeaderRowVisibility(e){this.togglePanelVisibility("showHeaderRow",this._headerRowScroller,e)}setColumnHeaderVisibility(e){this.togglePanelVisibility("showColumnHeader",this._headerScroller,e)}setFooterRowVisibility(e){this.togglePanelVisibility("showFooterRow",this._footerRowScroller,e)}setPreHeaderPanelVisibility(e){this.togglePanelVisibility("showPreHeaderPanel",[this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],e)}getContainerNode(){return this._container}getRowTop(e){return this._options.rowHeight*e-this.offset}getRowFromPosition(e){return Math.floor((e+this.offset)/this._options.rowHeight)}scrollTo(e){e=Math.max(e,0),e=Math.min(e,(this.th||0)-A.height(this._viewportScrollContainerY)+(this.viewportHasHScroll||this.hasFrozenColumns()?this.scrollbarDimensions?.height??0:0));let t=this.offset;this.offset=Math.round(this.page*(this.cj||0)),this.page=Math.min((this.n||0)-1,Math.floor(e/(this.ph||0)));let i=e-this.offset;if(this.offset!==t){let r=this.getVisibleRange(i);this.cleanupRows(r),this.updateRowPositions()}this.prevScrollTop!==i&&(this.vScrollDir=this.prevScrollTop+t<i+this.offset?1:-1,this.lastRenderedScrollTop=this.scrollTop=this.prevScrollTop=i,this.hasFrozenColumns()&&(this._viewportTopL.scrollTop=i),this.hasFrozenRows&&(this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=i),this._viewportScrollContainerY&&(this._viewportScrollContainerY.scrollTop=i),this.trigger(this.onViewportChanged,{}))}defaultFormatter(e,t,i){return je(i)?(i+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}getFormatter(e,t){let i=this.data?.getItemMetadata?.(e);return(i?.columns&&(i.columns[t.id]||i.columns[this.getColumnIndex(t.id)]))?.formatter||i?.formatter||t.formatter||this._options.formatterFactory?.getFormatter(t)||this._options.defaultFormatter}getEditor(e,t){let i=this.columns[t],s=this.data?.getItemMetadata?.(e)?.columns;return s?.[i.id]?.editor!==void 0?s[i.id].editor:s?.[t]?.editor!==void 0?s[t].editor:i.editor||this._options?.editorFactory?.getEditor(i)}getDataItemValueForColumn(e,t){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,t):e[t.field]}appendRowHtml(e,t,i,r,s){let o=this.getDataItem(i),a=i<s&&!o,l="slick-row"+(this.hasFrozenRows&&i<=this._options.frozenRow?" frozen":"")+(a?" loading":"")+(i===this.activeRow&&this._options.showCellSelection?" active":"")+(i%2===1?" odd":" even");o||(l+=" "+this._options.addNewRowCssClass);let u=this.data?.getItemMetadata?.(i);u?.cssClasses&&(l+=" "+u.cssClasses);let h=this.getFrozenRowOffset(i),f=E("div",{className:`ui-widget-content ${l}`,style:{top:`${this.getRowTop(i)-h}px`}}),m;e.push(f),this.hasFrozenColumns()&&(m=f.cloneNode(!0),t.push(m));let v,w;for(let S=0,P=this.columns.length;S<P;S++)if(w=this.columns[S],!(!w||w.hidden)){if(v=1,u?.columns&&(v=(u.columns[w.id]||u.columns[S])?.colspan||1,v==="*"&&(v=P-S)),this.columnPosRight[Math.min(P-1,S+v-1)]>r.leftPx){if(!w.alwaysRenderColumn&&this.columnPosLeft[S]>r.rightPx)break;this.hasFrozenColumns()&&S>this._options.frozenColumn?this.appendCellHtml(m,i,S,v,o):this.appendCellHtml(f,i,S,v,o)}else(w.alwaysRenderColumn||this.hasFrozenColumns()&&S<=this._options.frozenColumn)&&this.appendCellHtml(f,i,S,v,o);v>1&&(S+=v-1)}}appendCellHtml(e,t,i,r,s){let o=this.columns[i],a="slick-cell l"+i+" r"+Math.min(this.columns.length-1,i+r-1)+(o.cssClass?" "+o.cssClass:"");this.hasFrozenColumns()&&i<=this._options.frozenColumn&&(a+=" frozen"),t===this.activeRow&&i===this.activeCell&&this._options.showCellSelection&&(a+=" active");for(let S in this.cellCssClasses)this.cellCssClasses[S][t]?.[o.id]&&(a+=" "+this.cellCssClasses[S][t][o.id]);let l=null,u="";s&&(l=this.getDataItemValueForColumn(s,o),u=this.getFormatter(t,o)(t,i,l,o,s,this),u==null&&(u=""));let f=this.trigger(this.onBeforeAppendCell,{row:t,cell:i,value:l,dataContext:s}).getReturnValue(),m=typeof f=="string"?f:"";u?.addClasses&&(m+=(m?" ":"")+u.addClasses);let v=u?.toolTip?`${u.toolTip}`:"",w=document.createElement("div");if(w.className=`${a} ${m||""}`.trim(),w.setAttribute("title",v),o.hasOwnProperty("cellAttrs")&&o.cellAttrs instanceof Object)for(let S in o.cellAttrs)o.cellAttrs.hasOwnProperty(S)&&w.setAttribute(S,o.cellAttrs[S]);if(s){let S=bs(u)?u:u.html||u.text;this.applyHtmlCode(w,S)}e.appendChild(w),u.insertElementAfterTarget&&Dg(w,u.insertElementAfterTarget),this.rowsCache[t].cellRenderQueue.push(i),this.rowsCache[t].cellColSpans[i]=r}cleanupRows(e){for(let t in this.rowsCache)if(this.rowsCache){let i=+t,r=!0;this.hasFrozenRows&&(this._options.frozenBottom&&i>=this.actualFrozenRow||!this._options.frozenBottom&&i<=this.actualFrozenRow)&&(r=!1),(i=parseInt(t,10))!==this.activeRow&&(i<e.top||i>e.bottom)&&r&&this.removeRowFromCache(i)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render()}invalidateAllRows(){this.currentEditor&&this.makeActiveCellNormal();for(let e in this.rowsCache)this.rowsCache&&this.removeRowFromCache(+e);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidateRows(e){if(!e||!e.length)return;this.vScrollDir=0;let t=e.length;for(let i=0;i<t;i++)this.currentEditor&&this.activeRow===e[i]&&this.makeActiveCellNormal(),this.rowsCache[e[i]]&&this.removeRowFromCache(e[i]);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidateRow(e){!e&&e!==0||this.invalidateRows([e])}queuePostProcessedRowForCleanup(e,t,i){this.postProcessgroupId++;for(let r in t)t.hasOwnProperty(r)&&this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e.cellNodesByColumnIdx[+r],columnIdx:+r,rowIdx:i});e.rowNode||(e.rowNode=[]),this.postProcessedCleanupQueue.push({actionType:"R",groupId:this.postProcessgroupId,node:e.rowNode}),e.rowNode?.forEach(r=>r.remove())}queuePostProcessedCellForCleanup(e,t,i){this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e,columnIdx:t,rowIdx:i}),e.remove()}removeRowFromCache(e){let t=this.rowsCache[e];!t||!t.rowNode||(this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[e]?this.queuePostProcessedRowForCleanup(t,this.postProcessedRows[e],e):t.rowNode?.forEach(i=>i.parentElement?.removeChild(i)),delete this.rowsCache[e],delete this.postProcessedRows[e],this.renderedRows--,this.counter_rows_removed++)}applyFormatResultToCellNode(e,t,i){if(e==null&&(e=""),bs(e)){this.applyHtmlCode(t,e);return}let r=e.html||e.text;this.applyHtmlCode(t,r),e.removeClasses&&!i&&e.removeClasses.split(" ").forEach(o=>t.classList.remove(o)),e.addClasses&&e.addClasses.split(" ").forEach(o=>t.classList.add(o)),e.toolTip&&t.setAttribute("title",e.toolTip)}updateCell(e,t){let i=this.getCellNode(e,t);if(!i)return;let r=this.columns[t],s=this.getDataItem(e);if(this.currentEditor&&this.activeRow===e&&this.activeCell===t)this.currentEditor.loadValue(s);else{let o=s?this.getFormatter(e,r)(e,t,this.getDataItemValueForColumn(s,r),r,s,this):"";this.applyFormatResultToCellNode(o,i),this.invalidatePostProcessingResults(e)}}updateRow(e){let t=this.rowsCache[e];if(!t)return;this.ensureCellNodesInRowsCache(e);let i,r=this.getDataItem(e);for(let s in t.cellNodesByColumnIdx){if(!t.cellNodesByColumnIdx.hasOwnProperty(s))continue;let o=+s,a=this.columns[o],l=t.cellNodesByColumnIdx[o];e===this.activeRow&&o===this.activeCell&&this.currentEditor?this.currentEditor.loadValue(r):r?(i=this.getFormatter(e,a)(e,o,this.getDataItemValueForColumn(r,a),a,r,this),this.applyFormatResultToCellNode(i,l)):De(l)}this.invalidatePostProcessingResults(e)}getViewportRowCount(){let e=this.getViewportHeight(),t=this.getScrollbarDimensions()?.height??0;return Math.floor((e-t)/this._options.rowHeight)}getViewportHeight(){if((!this._options.autoHeight||this._options.frozenColumn!==-1)&&(this.topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta(this._topPanelScrollers[0]):0,this.headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,this.footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0),this._options.autoHeight){let e=this._paneHeaderL.offsetHeight;e+=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,e+=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0,e+=this.getCanvasWidth()>this.viewportW?this.scrollbarDimensions?.height??0:0,this.viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew()+(this._options.frozenColumn===-1?e:0)}else{let e=this._options.showColumnHeader?A.toFloat(A.height(this._headerScroller[0]))+this.getVBoxDelta(this._headerScroller[0]):0,t=this._options.createPreHeaderPanel&&this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight+this.getVBoxDelta(this._preHeaderPanelScroller):0,i=getComputedStyle(this._container);this.viewportH=A.toFloat(i.height)-A.toFloat(i.paddingTop)-A.toFloat(i.paddingBottom)-e-this.topPanelH-this.headerRowH-this.footerRowH-t}return this.numVisibleRows=Math.ceil(this.viewportH/this._options.rowHeight),this.viewportH}getViewportWidth(){return this.viewportW=parseFloat(_a(this._container,"width"))||this._options.devMode&&this._options.devMode.containerClientWidth||0,this.viewportW}resizeCanvas(){if(!this.initialized)return;if(this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.getViewportWidth(),this.getViewportHeight(),this.hasFrozenRows?this._options.frozenBottom?(this.paneTopH=this.viewportH-this.frozenRowsHeight-(this.scrollbarDimensions?.height??0),this.paneBottomH=this.frozenRowsHeight+(this.scrollbarDimensions?.height??0)):(this.paneTopH=this.frozenRowsHeight,this.paneBottomH=this.viewportH-this.frozenRowsHeight):this.paneTopH=this.viewportH,this.paneTopH+=this.topPanelH+this.headerRowH+this.footerRowH,this.hasFrozenColumns()&&this._options.autoHeight&&(this.paneTopH+=this.scrollbarDimensions?.height??0),this.viewportTopH=this.paneTopH-this.topPanelH-this.headerRowH-this.footerRowH,this._options.autoHeight){if(this.hasFrozenColumns()){let t=getComputedStyle(this._headerScrollerL);A.height(this._container,this.paneTopH+A.toFloat(t.height))}this._paneTopL.style.position="relative"}A.setStyleSize(this._paneTopL,"top",A.height(this._paneHeaderL)||(this._options.showHeaderRow?this._options.headerRowHeight:0)+(this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight:0)),A.height(this._paneTopL,this.paneTopH);let e=this._paneTopL.offsetTop+this.paneTopH;this._options.autoHeight||A.height(this._viewportTopL,this.viewportTopH),this.hasFrozenColumns()?(A.setStyleSize(this._paneTopR,"top",A.height(this._paneHeaderL)),A.height(this._paneTopR,this.paneTopH),A.height(this._viewportTopR,this.viewportTopH),this.hasFrozenRows&&(A.setStyleSize(this._paneBottomL,"top",e),A.height(this._paneBottomL,this.paneBottomH),A.setStyleSize(this._paneBottomR,"top",e),A.height(this._paneBottomR,this.paneBottomH),A.height(this._viewportBottomR,this.paneBottomH))):this.hasFrozenRows&&(A.width(this._paneBottomL,"100%"),A.height(this._paneBottomL,this.paneBottomH),A.setStyleSize(this._paneBottomL,"top",e)),this.hasFrozenRows?(A.height(this._viewportBottomL,this.paneBottomH),this._options.frozenBottom?(A.height(this._canvasBottomL,this.frozenRowsHeight),this.hasFrozenColumns()&&A.height(this._canvasBottomR,this.frozenRowsHeight)):(A.height(this._canvasTopL,this.frozenRowsHeight),this.hasFrozenColumns()&&A.height(this._canvasTopR,this.frozenRowsHeight))):A.height(this._viewportTopR,this.viewportTopH),(!this.scrollbarDimensions||!this.scrollbarDimensions.width)&&(this.scrollbarDimensions=this.measureScrollbar()),this._options.forceFitColumns&&this.legacyAutosizeColumns(),this.updateRowCount(),this.handleScroll(),this.lastRenderedScrollLeft=-1,this.render()}updatePagingStatusFromView(e){this.pagingActive=e.pageSize!==0,this.pagingIsLastPage=e.pageNum===e.totalPages-1}updateRowCount(){if(!this.initialized)return;let e=this.getDataLength(),t=this.getDataLengthIncludingAddNew(),i=0,r=this.hasFrozenRows&&!this._options.frozenBottom?A.height(this._canvasBottomL):A.height(this._canvasTopL);this.hasFrozenRows?i=this.getDataLength()-this._options.frozenRow:i=t+(this._options.leaveSpaceForNewRows?this.numVisibleRows-1:0);let s=A.height(this._viewportScrollContainerY),o=this.viewportHasVScroll;this.viewportHasVScroll=this._options.alwaysShowVerticalScroll||!this._options.autoHeight&&i*this._options.rowHeight>s,this.makeActiveCellNormal();let a=e-1;for(let u in this.rowsCache)Number(u)>a&&this.removeRowFromCache(+u);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this.activeCellNode&&this.activeRow>a&&this.resetActiveCell(),r=this.h,this._options.autoHeight?this.h=this._options.rowHeight*i:(this.th=Math.max(this._options.rowHeight*i,s-(this.scrollbarDimensions?.height??0)),this.th<this.maxSupportedCssHeight?(this.h=this.ph=this.th,this.n=1,this.cj=0):(this.h=this.maxSupportedCssHeight,this.ph=this.h/100,this.n=Math.floor(this.th/this.ph),this.cj=(this.th-this.h)/(this.n-1))),(this.h!==r||this.enforceFrozenRowHeightRecalc)&&(this.hasFrozenRows&&!this._options.frozenBottom?(A.height(this._canvasBottomL,this.h),this.hasFrozenColumns()&&A.height(this._canvasBottomR,this.h)):(A.height(this._canvasTopL,this.h),A.height(this._canvasTopR,this.h)),this.scrollTop=this._viewportScrollContainerY.scrollTop,this.enforceFrozenRowHeightRecalc=!1);let l=this.scrollTop+this.offset<=this.th-s;this.th===0||this.scrollTop===0?this.page=this.offset=0:l?this.scrollTo(this.scrollTop+this.offset):this.scrollTo(this.th-s+(this.scrollbarDimensions?.height??0)),this.h!==r&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&o!==this.viewportHasVScroll&&this.legacyAutosizeColumns(),this.updateCanvasWidth(!1)}getViewport(e,t){return this.getVisibleRange(e,t)}getVisibleRange(e,t){return e??=this.scrollTop,t??=this.scrollLeft,{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this.viewportH)+1,leftPx:t,rightPx:t+this.viewportW}}getRenderedRange(e,t){let i=this.getVisibleRange(e,t),r=Math.round(this.viewportH/this._options.rowHeight),s=this._options.minRowBuffer;return this.vScrollDir===-1?(i.top-=r,i.bottom+=s):this.vScrollDir===1?(i.top-=s,i.bottom+=r):(i.top-=s,i.bottom+=s),i.top=Math.max(0,i.top),i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom),i.leftPx-=this.viewportW,i.rightPx+=this.viewportW,i.leftPx=Math.max(0,i.leftPx),i.rightPx=Math.min(this.canvasWidth,i.rightPx),i}ensureCellNodesInRowsCache(e){let t=this.rowsCache[e];if(t?.cellRenderQueue.length&&t.rowNode?.length){let i=t.rowNode,r=Array.from(i[0].children);i.length>1&&(r=r.concat(Array.from(i[1].children)));let s=r.length-1;for(;t.cellRenderQueue.length;){let o=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[o]=r[s--]}}}cleanUpCells(e,t){if(this.hasFrozenRows&&(this._options.frozenBottom&&t>this.actualFrozenRow||t<=this.actualFrozenRow))return;let i=0,r=this.rowsCache[t],s=[];for(let l in r.cellNodesByColumnIdx){if(!r.cellNodesByColumnIdx.hasOwnProperty(l))continue;let u=+l;if(u<=this._options.frozenColumn||Array.isArray(this.columns)&&this.columns[u]&&this.columns[u].alwaysRenderColumn)continue;let h=r.cellColSpans[u];(this.columnPosLeft[u]>e.rightPx||this.columnPosRight[Math.min(this.columns.length-1,(u||0)+h-1)]<e.leftPx)&&(t===this.activeRow&&Number(u)===this.activeCell||s.push(u))}let o,a;for(;je(o=s.pop());)a=r.cellNodesByColumnIdx[o],this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[t]?.[o]?this.queuePostProcessedCellForCleanup(a,o,t):a.parentElement?.removeChild(a),delete r.cellColSpans[o],delete r.cellNodesByColumnIdx[o],this.postProcessedRows[t]&&delete this.postProcessedRows[t][o],i++}cleanUpAndRenderCells(e){let t,i=document.createElement("div"),r=[],s,o=0,a;for(let h=e.top,f=e.bottom;h<=f;h++){if(t=this.rowsCache[h],!t)continue;this.ensureCellNodesInRowsCache(h),this.cleanUpCells(e,h),s=0;let m=this.data?.getItemMetadata?.(h)??{};m=m?.columns;let v=this.getDataItem(h);for(let w=0,S=this.columns.length;w<S;w++){if(!this.columns[w]||this.columns[w].hidden)continue;if(this.columnPosLeft[w]>e.rightPx)break;if(je(a=t.cellColSpans[w])){w+=a>1?a-1:0;continue}a=1,m&&(a=(m[this.columns[w].id]||m[w])?.colspan??1,a==="*"&&(a=S-w));let P=a;this.columnPosRight[Math.min(S-1,w+P-1)]>e.leftPx&&(this.appendCellHtml(i,h,w,P,v),s++),w+=P>1?P-1:0}s&&(o+=s,r.push(h))}if(!i.children.length)return;let l,u;for(;je(l=r.pop());){t=this.rowsCache[l];let h;for(;je(h=t.cellRenderQueue.pop());)u=i.lastChild,u&&(this.hasFrozenColumns()&&h>this._options.frozenColumn?t.rowNode[1].appendChild(u):t.rowNode[0].appendChild(u),t.cellNodesByColumnIdx[h]=u)}}renderRows(e){let t=[],i=[],r=[],s=!1,o=this.getDataLength();for(let u=e.top,h=e.bottom;u<=h;u++)this.rowsCache[u]||this.hasFrozenRows&&this._options.frozenBottom&&u===this.getDataLength()||(this.renderedRows++,r.push(u),this.rowsCache[u]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},this.appendRowHtml(t,i,u,e,o),this.activeCellNode&&this.activeRow===u&&(s=!0),this.counter_rows_rendered++);if(!r.length)return;let a=document.createElement("div"),l=document.createElement("div");t.forEach(u=>a.appendChild(u)),i.forEach(u=>l.appendChild(u));for(let u=0,h=r.length;u<h;u++)this.hasFrozenRows&&r[u]>=this.actualFrozenRow?this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(r[u])&&a.firstChild&&l.firstChild&&(this.rowsCache[r[u]].rowNode=[a.firstChild,l.firstChild],this._canvasBottomL.appendChild(a.firstChild),this._canvasBottomR.appendChild(l.firstChild)):this.rowsCache?.hasOwnProperty(r[u])&&a.firstChild&&(this.rowsCache[r[u]].rowNode=[a.firstChild],this._canvasBottomL.appendChild(a.firstChild)):this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(r[u])&&a.firstChild&&l.firstChild&&(this.rowsCache[r[u]].rowNode=[a.firstChild,l.firstChild],this._canvasTopL.appendChild(a.firstChild),this._canvasTopR.appendChild(l.firstChild)):this.rowsCache?.hasOwnProperty(r[u])&&a.firstChild&&(this.rowsCache[r[u]].rowNode=[a.firstChild],this._canvasTopL.appendChild(a.firstChild));s&&(this.activeCellNode=this.getCellNode(this.activeRow,this.activeCell))}startPostProcessing(){this._options.enableAsyncPostRender&&(clearTimeout(this.h_postrender),this.h_postrender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._options.enableAsyncPostRenderCleanup&&(clearTimeout(this.h_postrenderCleanup),this.h_postrenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay))}invalidatePostProcessingResults(e){for(let t in this.postProcessedRows[e])this.postProcessedRows[e].hasOwnProperty(t)&&(this.postProcessedRows[e][t]="C");this.postProcessFromRow=Math.min(this.postProcessFromRow,e),this.postProcessToRow=Math.max(this.postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){for(let e in this.rowsCache)if(this.rowsCache){let t=e?parseInt(e,10):0;A.setStyleSize(this.rowsCache[t].rowNode[0],"top",this.getRowTop(t))}}render(){if(!this.initialized)return;this.scrollThrottle.dequeue();let e=this.getVisibleRange(),t=this.getRenderedRange();if(this.cleanupRows(t),this.lastRenderedScrollLeft!==this.scrollLeft){if(this.hasFrozenRows){let i=A.extend(!0,{},t);this._options.frozenBottom?(i.top=this.actualFrozenRow,i.bottom=this.getDataLength()):(i.top=0,i.bottom=this._options.frozenRow),this.cleanUpAndRenderCells(i)}this.cleanUpAndRenderCells(t)}this.renderRows(t),this.hasFrozenRows&&(this._options.frozenBottom?this.renderRows({top:this.actualFrozenRow,bottom:this.getDataLength()-1,leftPx:t.leftPx,rightPx:t.rightPx}):this.renderRows({top:0,bottom:this._options.frozenRow-1,leftPx:t.leftPx,rightPx:t.rightPx})),this.postProcessFromRow=e.top,this.postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this.lastRenderedScrollTop=this.scrollTop,this.lastRenderedScrollLeft=this.scrollLeft,this.h_render=null,this.trigger(this.onRendered,{startRow:e.top,endRow:e.bottom,grid:this})}handleHeaderRowScroll(){let e=this._headerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handleFooterRowScroll(){let e=this._footerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handlePreHeaderPanelScroll(){this.handleElementScroll(this._preHeaderPanelScroller)}handleElementScroll(e){let t=e.scrollLeft;t!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=t)}handleScroll(){return this.scrollTop=this._viewportScrollContainerY.scrollTop,this.scrollLeft=this._viewportScrollContainerX.scrollLeft,this._handleScroll(!1)}_handleScroll(e){let t=this._viewportScrollContainerY.scrollHeight-this._viewportScrollContainerY.clientHeight,i=this._viewportScrollContainerY.scrollWidth-this._viewportScrollContainerY.clientWidth;t=Math.max(0,t),i=Math.max(0,i),this.scrollTop>t&&(this.scrollTop=t),this.scrollLeft>i&&(this.scrollLeft=i);let r=Math.abs(this.scrollTop-this.prevScrollTop),s=Math.abs(this.scrollLeft-this.prevScrollLeft);if(s&&(this.prevScrollLeft=this.scrollLeft,this._viewportScrollContainerX.scrollLeft=this.scrollLeft,this._headerScrollContainer.scrollLeft=this.scrollLeft,this._topPanelScrollers[0].scrollLeft=this.scrollLeft,this._options.createFooterRow&&(this._footerRowScrollContainer.scrollLeft=this.scrollLeft),this._options.createPreHeaderPanel&&(this.hasFrozenColumns()?this._preHeaderPanelScrollerR.scrollLeft=this.scrollLeft:this._preHeaderPanelScroller.scrollLeft=this.scrollLeft),this.hasFrozenColumns()?(this.hasFrozenRows&&(this._viewportTopR.scrollLeft=this.scrollLeft),this._headerRowScrollerR.scrollLeft=this.scrollLeft):(this.hasFrozenRows&&(this._viewportTopL.scrollLeft=this.scrollLeft),this._headerRowScrollerL.scrollLeft=this.scrollLeft)),r&&!this._options.autoHeight)if(this.vScrollDir=this.prevScrollTop<this.scrollTop?1:-1,this.prevScrollTop=this.scrollTop,e&&(this._viewportScrollContainerY.scrollTop=this.scrollTop),this.hasFrozenColumns()&&(this.hasFrozenRows&&!this._options.frozenBottom?this._viewportBottomL.scrollTop=this.scrollTop:this._viewportTopL.scrollTop=this.scrollTop),r<this.viewportH)this.scrollTo(this.scrollTop+this.offset);else{let o=this.offset;this.h===this.viewportH?this.page=0:this.page=Math.min(this.n-1,Math.floor(this.scrollTop*((this.th-this.viewportH)/(this.h-this.viewportH))*(1/this.ph))),this.offset=Math.round(this.page*this.cj),o!==this.offset&&this.invalidateAllRows()}if(s||r){let o=Math.abs(this.lastRenderedScrollLeft-this.scrollLeft),a=Math.abs(this.lastRenderedScrollTop-this.scrollTop);(o>20||a>20)&&(this._options.forceSyncScrolling||a<this.viewportH&&o<this.viewportW?this.render():this.scrollThrottle.enqueue(),this.trigger(this.onViewportChanged,{}))}return this.trigger(this.onScroll,{scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}),!!(s||r)}actionThrottle(e,t){let i=!1,r=!1,s=()=>{i?r=!0:a()},o=()=>{r=!1},a=()=>{i=!0,setTimeout(l,t),e.call(this)},l=()=>{r?(o(),a()):i=!1};return{enqueue:s.bind(this),dequeue:o.bind(this)}}asyncPostProcessRows(){let e=this.getDataLength();for(;this.postProcessFromRow<=this.postProcessToRow;){let t=this.vScrollDir>=0?this.postProcessFromRow++:this.postProcessToRow--,i=this.rowsCache[t];if(!(!i||t>=e)){this.postProcessedRows[t]||(this.postProcessedRows[t]={}),this.ensureCellNodesInRowsCache(t);for(let r in i.cellNodesByColumnIdx){if(!i.cellNodesByColumnIdx.hasOwnProperty(r))continue;let s=+r,o=this.columns[s],a=this.postProcessedRows[t][s];if(o.asyncPostRender&&a!=="R"){let l=i.cellNodesByColumnIdx[s];l&&o.asyncPostRender(l,t,this.getDataItem(t),o,a==="C"),this.postProcessedRows[t][s]="R"}}this.h_postrender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay);return}}}asyncPostProcessCleanupRows(){if(this.postProcessedCleanupQueue.length>0){let e=this.postProcessedCleanupQueue[0].groupId;for(;this.postProcessedCleanupQueue.length>0&&this.postProcessedCleanupQueue[0].groupId===e;){let t=this.postProcessedCleanupQueue.shift();if(t?.actionType==="R"&&t.node.forEach(i=>{i.remove()}),t?.actionType==="C"){let i=this.columns[t.columnIdx];i.asyncPostRenderCleanup&&t.node&&i.asyncPostRenderCleanup(t.node,t.rowIdx,i)}}this.h_postrenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay)}}updateCellCssStylesOnRenderedRows(e,t){let i,r,s,o;for(let a in this.rowsCache)if(this.rowsCache){if(o=t?.[a],s=e?.[a],o)for(r in o)(!s||o[r]!==s[r])&&(i=this.getCellNode(+a,this.getColumnIndex(r)),i&&i.classList.remove(o[r]));if(s)for(r in s)(!o||o[r]!==s[r])&&(i=this.getCellNode(+a,this.getColumnIndex(r)),i&&i.classList.add(s[r]))}}addCellCssStyles(e,t){if(this.cellCssClasses[e])throw new Error(`SlickGrid addCellCssStyles: cell CSS hash with key "${e}" already exists.`);this.cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,null),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t,grid:this})}removeCellCssStyles(e){this.cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this.cellCssClasses[e]),delete this.cellCssClasses[e],this.trigger(this.onCellCssStylesChanged,{key:e,hash:null,grid:this}))}setCellCssStyles(e,t){let i=this.cellCssClasses[e];this.cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,i),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t,grid:this})}getCellCssStyles(e){return this.cellCssClasses[e]}flashCell(e,t,i){i=i||250;let r=(s,o)=>{o<1||setTimeout(()=>{o%2===0?s.classList.add(this._options.cellFlashingCssClass||""):s.classList.remove(this._options.cellFlashingCssClass||""),r(s,o-1)},i)};if(this.rowsCache[e]){let s=this.getCellNode(e,t);s&&r(s,5)}}handleMouseWheel(e,t,i,r){this.scrollTop=Math.max(0,this._viewportScrollContainerY.scrollTop-r*this._options.rowHeight),this.scrollLeft=this._viewportScrollContainerX.scrollLeft+i*10,this._handleScroll(!0)&&e.preventDefault()}handleDragInit(e,t){let i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;let r=this.trigger(this.onDragInit,t,e);return r.isImmediatePropagationStopped()?r.getReturnValue():!1}handleDragStart(e,t){let i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;let r=this.trigger(this.onDragStart,t,e);return r.isImmediatePropagationStopped()?r.getReturnValue():!1}handleDrag(e,t){return this.trigger(this.onDrag,t,e).getReturnValue()}handleDragEnd(e,t){this.trigger(this.onDragEnd,t,e)}handleKeyDown(e){let i=this.trigger(this.onKeyDown,{row:this.activeRow,cell:this.activeCell},e).isImmediatePropagationStopped();if(!i&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this.currentEditor?.keyCaptureList&&this.currentEditor.keyCaptureList.indexOf(String(e.which))>-1)return;e.key==="Home"?i=e.ctrlKey?this.navigateTop():this.navigateRowStart():e.key==="End"&&(i=e.ctrlKey?this.navigateBottom():this.navigateRowEnd())}if(!i)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(this._options.editable&&this.currentEditor?.keyCaptureList&&this.currentEditor.keyCaptureList.indexOf(String(e.which))>-1)return;if(e.key==="Escape"){if(!this.getEditorLock()?.isActive())return;this.cancelEditAndSetFocus()}else e.key==="PageDown"?(this.navigatePageDown(),i=!0):e.key==="PageUp"?(this.navigatePageUp(),i=!0):e.key==="ArrowLeft"?i=this.navigateLeft():e.key==="ArrowRight"?i=this.navigateRight():e.key==="ArrowUp"?i=this.navigateUp():e.key==="ArrowDown"?i=this.navigateDown():e.key==="Tab"?i=this.navigateNext():e.key==="Enter"&&(this._options.editable&&(this.currentEditor?this.activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():this.getEditorLock()?.commitCurrentEdit()&&this.makeActiveCellEditable(void 0,void 0,e)),i=!0)}else e.key==="Tab"&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(i=this.navigatePrev());i&&(e.stopPropagation(),e.preventDefault())}handleClick(e){let t=e instanceof Xe?e.getNativeEvent():e;if(!this.currentEditor&&(t.target!==document.activeElement||t.target.classList.contains("slick-cell"))){let r=this.getTextSelection();this.setFocus(),this.setTextSelection(r)}let i=this.getCellFromEvent(t);if(!(!i||this.currentEditor!==null&&this.activeRow===i.row&&this.activeCell===i.cell)&&(e=this.trigger(this.onClick,{row:i.row,cell:i.cell},e||t),!e.isImmediatePropagationStopped()&&this.canCellBeActive(i.row,i.cell)&&(!this.getEditorLock()?.isActive()||this.getEditorLock()?.commitCurrentEdit()))){this.scrollRowIntoView(i.row,!1);let r=t.target?.className===GE,s=this.columns[i.cell],o=!!(this._options.editable&&s?.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(i.row,i.cell),null,r,o,t)}}handleContextMenu(e){let t=e.target.closest(".slick-cell");t&&(this.activeCellNode===t&&this.currentEditor!==null||this.trigger(this.onContextMenu,{},e))}handleDblClick(e){let t=this.getCellFromEvent(e);!t||this.currentEditor!==null&&this.activeRow===t.row&&this.activeCell===t.cell||(this.trigger(this.onDblClick,{row:t.row,cell:t.cell},e),!e.defaultPrevented&&this._options.editable&&this.gotoCell(t.row,t.cell,!0,e))}handleHeaderMouseEnter(e){let t=A.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.trigger(this.onHeaderMouseEnter,{column:t,grid:this},e)}handleHeaderMouseLeave(e){let t=A.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.trigger(this.onHeaderMouseLeave,{column:t,grid:this},e)}handleHeaderRowMouseEnter(e){let t=A.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.trigger(this.onHeaderRowMouseEnter,{column:t,grid:this},e)}handleHeaderRowMouseLeave(e){let t=A.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.trigger(this.onHeaderRowMouseLeave,{column:t,grid:this},e)}handleHeaderContextMenu(e){let t=e.target.closest(".slick-header-column"),i=t&&A.storage.get(t,"column");this.trigger(this.onHeaderContextMenu,{column:i},e)}handleHeaderClick(e){if(this.columnResizeDragging)return;let t=e.target.closest(".slick-header-column"),i=t&&A.storage.get(t,"column");i&&this.trigger(this.onHeaderClick,{column:i},e)}handleFooterContextMenu(e){let t=e.target.closest(".slick-footerrow-column"),i=t&&A.storage.get(t,"column");this.trigger(this.onFooterContextMenu,{column:i},e)}handleFooterClick(e){let t=e.target.closest(".slick-footerrow-column"),i=t&&A.storage.get(t,"column");this.trigger(this.onFooterClick,{column:i},e)}handleCellMouseOver(e){this.trigger(this.onMouseEnter,{},e)}handleCellMouseOut(e){this.trigger(this.onMouseLeave,{},e)}cellExists(e,t){return!(e<0||e>=this.getDataLength()||t<0||t>=this.columns.length)}getCellFromPoint(e,t){let i=this.getRowFromPosition(t),r=0,s=0;for(let o=0;o<this.columns.length&&s<e;o++)!this.columns[o]||this.columns[o].hidden||(s+=this.columns[o].width,r++);return r<0&&(r=0),{row:i,cell:r-1}}getCellFromNode(e){let t=/l\d+/.exec(e.className);if(!t)throw new Error(`SlickGrid getCellFromNode: cannot get cell - ${e.className}`);return parseInt(t[0].substr(1,t[0].length-1),10)}getRowFromNode(e){for(let t in this.rowsCache)if(this.rowsCache){for(let i in this.rowsCache[t].rowNode)if(this.rowsCache[t].rowNode?.[+i]===e)return t?parseInt(t,10):0}return null}getFrozenRowOffset(e){let t=0;return this.hasFrozenRows?this._options.frozenBottom?e>=this.actualFrozenRow?this.h<this.viewportTopH?t=this.actualFrozenRow*this._options.rowHeight:t=this.h:t=0:e>=this.actualFrozenRow?t=this.frozenRowsHeight:t=0:t=0,t}getCellFromEvent(e){let t=e instanceof Xe?e.getNativeEvent():e,i=t.touches?t.touches[0]:t,r=t.target.closest(".slick-cell");if(!r)return null;let s=this.getRowFromNode(r.parentNode);if(this.hasFrozenRows){let a=0,l=at(A.parents(r,".grid-canvas")[0]);A.parents(r,".grid-canvas-bottom").length&&(a=this._options.frozenBottom?A.height(this._canvasTopL):this.frozenRowsHeight),s=this.getCellFromPoint(i.clientX-l.left,i.clientY-l.top+a+document.documentElement.scrollTop).row}let o=this.getCellFromNode(r);return!je(s)||!je(o)?null:{row:s,cell:o}}getCellNodeBox(e,t){if(!this.cellExists(e,t))return null;let i=this.getFrozenRowOffset(e),r=this.getRowTop(e)-i,s=r+this._options.rowHeight-1,o=0;for(let l=0;l<t;l++)!this.columns[l]||this.columns[l].hidden||(o+=this.columns[l].width||0,this._options.frozenColumn===l&&(o=0));let a=o+(this.columns[t]?.width||0);return{top:r,left:o,bottom:s,right:a}}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){this.tabbingDirection===-1?this._focusSink.focus():this._focusSink2.focus()}scrollCellIntoView(e,t,i){if(this.scrollRowIntoView(e,i),t<=this._options.frozenColumn)return;let r=this.getColspan(e,t);this.internalScrollColumnIntoView(this.columnPosLeft[t],this.columnPosRight[t+(r>1?r-1:0)])}internalScrollColumnIntoView(e,t){let i=this.scrollLeft+A.width(this._viewportScrollContainerX)-(this.viewportHasVScroll?this.scrollbarDimensions?.width??0:0);e<this.scrollLeft?(this._viewportScrollContainerX.scrollLeft=e,this.handleScroll(),this.render()):t>i&&(this._viewportScrollContainerX.scrollLeft=Math.min(e,t-this._viewportScrollContainerX.clientWidth),this.handleScroll(),this.render())}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this.columnPosLeft[e],this.columnPosRight[e])}setActiveCellInternal(e,t,i,r,s){if(je(this.activeCellNode)&&(this.makeActiveCellNormal(),this.activeCellNode.classList.remove("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach(o=>o.classList.remove("active"))),this.activeCellNode=e,je(this.activeCellNode)){let o=at(this.activeCellNode),a=Math.floor(at(A.parents(this.activeCellNode,".grid-canvas")[0]).top),l=A.parents(this.activeCellNode,".grid-canvas-bottom").length;this.hasFrozenRows&&l&&(a-=this._options.frozenBottom?A.height(this._canvasTopL):this.frozenRowsHeight);let u=this.getCellFromPoint(o.left,Math.ceil(o.top)-a);this.activeRow=u.row,this.activeCell=this.activePosX=this.activeCell=this.activePosX=this.getCellFromNode(this.activeCellNode),!je(t)&&this._options.autoEditNewRow&&(t=this.activeRow===this.getDataLength()||this._options.autoEdit),this._options.showCellSelection&&(this.activeCellNode.classList.add("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach(h=>h.classList.add("active"))),this._options.editable&&t&&this.isCellPotentiallyEditable(this.activeRow,this.activeCell)&&(clearTimeout(this.h_editorLoader),this._options.asyncEditorLoading?this.h_editorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,i,s)},this._options.asyncEditorLoadDelay):this.makeActiveCellEditable(void 0,i,s))}else this.activeRow=this.activeCell=null;r||this.trigger(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection?.empty)try{document.selection.empty()}catch{}else if(window.getSelection){let e=window.getSelection();e?.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,t){let i=this.getDataLength();return!(e<i&&!this.getDataItem(e)||this.columns[t].cannotTriggerInsert&&e>=i||!this.columns[t]||this.columns[t].hidden||!this.getEditor(e,t))}makeActiveCellNormal(e=!1){if(this.currentEditor){if(this.trigger(this.onBeforeCellEditorDestroy,{editor:this.currentEditor}),this.currentEditor.destroy(),this.currentEditor=null,this.activeCellNode){let t=this.getDataItem(this.activeRow);if(this.activeCellNode.classList.remove("editable"),this.activeCellNode.classList.remove("invalid"),t){let i=this.columns[this.activeCell],s=this.getFormatter(this.activeRow,i)(this.activeRow,this.activeCell,this.getDataItemValueForColumn(t,i),i,t,this);this.applyFormatResultToCellNode(s,this.activeCellNode),this.invalidatePostProcessingResults(this.activeRow)}e&&this.setFocus()}navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock()?.deactivate(this.editController)}}editActiveCell(e,t,i){this.makeActiveCellEditable(e,t,i)}makeActiveCellEditable(e,t,i){if(!this.activeCellNode)return;if(!this._options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when this._options.editable is false");if(clearTimeout(this.h_editorLoader),!this.isCellPotentiallyEditable(this.activeRow,this.activeCell))return;let r=this.columns[this.activeCell],s=this.getDataItem(this.activeRow);if(this.trigger(this.onBeforeEditCell,{row:this.activeRow,cell:this.activeCell,item:s,column:r,target:"grid"}).getReturnValue()===!1){this.setFocus();return}this.getEditorLock()?.activate(this.editController),this.activeCellNode.classList.add("editable");let o=e||this.getEditor(this.activeRow,this.activeCell);!e&&!o.suppressClearOnEdit&&De(this.activeCellNode);let a=this.data?.getItemMetadata?.(this.activeRow);a=a?.columns;let l=a&&(a[r.id]||a[this.activeCell]);this.currentEditor=new o({grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this.activeCellNode),container:this.activeCellNode,column:r,columnMetaData:l,item:s||{},event:i,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)}),s&&this.currentEditor&&(this.currentEditor.loadValue(s),t&&this.currentEditor?.preClick&&this.currentEditor.preClick()),this.serializedEditorValue=this.currentEditor?.serializeValue(),this.currentEditor?.position&&this.handleActiveCellPositionChange()}commitEditAndSetFocus(){this.getEditorLock()?.commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&!this._options.autoCommitEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock()?.cancelCurrentEdit()&&this.setFocus()}absBox(e){let t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:e.offsetWidth,height:e.offsetWidth,visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;let i=e.offsetParent;for(;(e=e.parentNode)!==document.body&&!(!e||!e.parentNode);){let r=getComputedStyle(e);t.visible&&e.scrollHeight!==e.offsetHeight&&r.overflowY!=="visible"&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!==e.offsetWidth&&r.overflowX!=="visible"&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===i&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,i=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width}return t}getActiveCellPosition(){return this.absBox(this.activeCellNode)}getGridPosition(){return this.absBox(this._container)}handleActiveCellPositionChange(){if(this.activeCellNode&&(this.trigger(this.onActiveCellPositionChanged,{}),this.currentEditor)){let e=this.getActiveCellPosition();this.currentEditor.show&&this.currentEditor.hide&&(e.visible?this.currentEditor.show():this.currentEditor.hide()),this.currentEditor.position&&this.currentEditor.position(e)}}getCellEditor(){return this.currentEditor}getActiveCell(){return this.activeCellNode?{row:this.activeRow,cell:this.activeCell}:null}getActiveCellNode(){return this.activeCellNode}getTextSelection(){let e=null;if(window.getSelection){let t=window.getSelection();(t?.rangeCount??0)>0&&(e=t.getRangeAt(0))}return e}setTextSelection(e){if(window.getSelection&&e){let t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e))}}scrollRowIntoView(e,t){if(!this.hasFrozenRows||!this._options.frozenBottom&&e>this.actualFrozenRow-1||this._options.frozenBottom&&e<this.actualFrozenRow-1){let i=A.height(this._viewportScrollContainerY),r=this.hasFrozenRows&&!this._options.frozenBottom?e-this._options.frozenRow:e,s=r*this._options.rowHeight,o=(r+1)*this._options.rowHeight-i+(this.viewportHasHScroll?this.scrollbarDimensions?.height??0:0);(r+1)*this._options.rowHeight>this.scrollTop+i+this.offset?(this.scrollTo(t?s:o),this.render()):r*this._options.rowHeight<this.scrollTop+this.offset&&(this.scrollTo(t?o:s),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){let t=e*this.numVisibleRows,i=this.scrollTop+this._options.rowHeight-1;if(this.scrollTo((this.getRowFromPosition(i)+t)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&je(this.activeRow)){let r=this.activeRow+t,s=this.getDataLengthIncludingAddNew();r>=s&&(r=s-1),r<0&&(r=0);let o=0,a=null,l=this.activePosX;for(;o<=this.activePosX;)this.canCellBeActive(r,o)&&(a=o),o+=this.getColspan(r,o);a!==null?(this.setActiveCellInternal(this.getCellNode(r,a)),this.activePosX=l):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){this.navigateToRow(this.getDataLength()-1)}navigateToRow(e){let t=this.getDataLength();if(!t)return!0;if(e<0?e=0:e>=t&&(e=t-1),this.scrollCellIntoView(e,0,!0),this._options.enableCellNavigation&&je(this.activeRow)){let i=0,r=null,s=this.activePosX;for(;i<=this.activePosX;)this.canCellBeActive(e,i)&&(r=i),i+=this.getColspan(e,i);r!==null?(this.setActiveCellInternal(this.getCellNode(e,r)),this.activePosX=s):this.resetActiveCell()}return!0}getColspan(e,t){let i=this.data?.getItemMetadata?.(e);if(!i||!i.columns)return 1;let s=(i.columns[this.columns[t].id]||i.columns[t])?.colspan;return s==="*"?s=this.columns.length-t:s=s||1,s}findFirstFocusableCell(e){let t=0;for(;t<this.columns.length;){if(this.canCellBeActive(e,t))return t;t+=this.getColspan(e,t)}return null}findLastFocusableCell(e){let t=0,i=null;for(;t<this.columns.length;)this.canCellBeActive(e,t)&&(i=t),t+=this.getColspan(e,t);return i}gotoRight(e,t,i){if(t>=this.columns.length)return null;do t+=this.getColspan(e,t);while(t<this.columns.length&&!this.canCellBeActive(e,t));return t<this.columns.length?{row:e,cell:t,posX:t}:null}gotoLeft(e,t,i){if(t<=0)return null;let r=this.findFirstFocusableCell(e);if(r===null||r>=t)return null;let s={row:e,cell:r,posX:r},o;for(;;){if(o=this.gotoRight(s.row,s.cell,s.posX),!o)return null;if(o.cell>=t)return s;s=o}}gotoDown(e,t,i){let r,s=this.getDataLengthIncludingAddNew();for(;;){if(++e>=s)return null;for(r=t=0;t<=i;)r=t,t+=this.getColspan(e,t);if(this.canCellBeActive(e,r))return{row:e,cell:r,posX:i}}}gotoUp(e,t,i){let r;for(;;){if(--e<0)return null;for(r=t=0;t<=i;)r=t,t+=this.getColspan(e,t);if(this.canCellBeActive(e,r))return{row:e,cell:r,posX:i}}}gotoNext(e,t,i){if(!je(e)&&!je(t)&&(e=t=i=0,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};let r=this.gotoRight(e,t,i);if(r)return r;let s=null,o=this.getDataLengthIncludingAddNew();for(e===o-1&&e--;++e<o;)if(s=this.findFirstFocusableCell(e),s!==null)return{row:e,cell:s,posX:s};return null}gotoPrev(e,t,i){if(!je(e)&&!je(t)&&(e=this.getDataLengthIncludingAddNew()-1,t=i=this.columns.length-1,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};let r,s;for(;!r&&(r=this.gotoLeft(e,t,i),!r);){if(--e<0)return null;t=0,s=this.findLastFocusableCell(e),s!==null&&(r={row:e,cell:s,posX:s})}return r}gotoRowStart(e,t,i){let r=this.findFirstFocusableCell(e);return r===null?null:{row:e,cell:r,posX:r}}gotoRowEnd(e,t,i){let r=this.findLastFocusableCell(e);return r===null?null:{row:e,cell:r,posX:r}}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigate(e){if(!this._options.enableCellNavigation||!this.activeCellNode&&e!=="prev"&&e!=="next")return!1;if(!this.getEditorLock()?.commitCurrentEdit())return!0;this.setFocus();let t={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};this.tabbingDirection=t[e];let s={up:this.gotoUp,down:this.gotoDown,left:this.gotoLeft,right:this.gotoRight,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd}[e].call(this,this.activeRow,this.activeCell,this.activePosX);if(s){if(this.hasFrozenRows&&this._options.frozenBottom&&s.row===this.getDataLength())return;let o=s.row===this.getDataLength();return(!this._options.frozenBottom&&s.row>=this.actualFrozenRow||this._options.frozenBottom&&s.row<this.actualFrozenRow)&&this.scrollCellIntoView(s.row,s.cell,!o&&this._options.emulatePagingWhenScrolling),this.setActiveCellInternal(this.getCellNode(s.row,s.cell)),this.activePosX=s.posX,!0}else return this.setActiveCellInternal(this.getCellNode(this.activeRow,this.activeCell)),!1}getCellNode(e,t){if(this.rowsCache[e]){this.ensureCellNodesInRowsCache(e);try{return this.rowsCache[e].cellNodesByColumnIdx.length>t?this.rowsCache[e].cellNodesByColumnIdx[t]:null}catch{return this.rowsCache[e].cellNodesByColumnIdx[t]}}return null}setActiveCell(e,t,i,r,s){this.initialized&&(e>this.getDataLength()||e<0||t>=this.columns.length||t<0||this._options.enableCellNavigation&&(this.scrollCellIntoView(e,t,!1),this.setActiveCellInternal(this.getCellNode(e,t),i,r,s)))}setActiveRow(e,t,i){this.initialized&&(e>this.getDataLength()||e<0||(t??0)>=this.columns.length||(t??0)<0||(this.activeRow=e,i||this.scrollCellIntoView(e,t||0,!1)))}canCellBeActive(e,t){if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||t>=this.columns.length||t<0||!this.columns[t]||this.columns[t].hidden)return!1;let i=this.data?.getItemMetadata?.(e);if(i?.focusable!==void 0)return!!i.focusable;let r=i?.columns;return r?.[this.columns[t].id]?.focusable!==void 0?!!r[this.columns[t].id].focusable:r?.[t]?.focusable!==void 0?!!r[t].focusable:!!this.columns[t].focusable}canCellBeSelected(e,t){if(e>=this.getDataLength()||e<0||t>=this.columns.length||t<0||!this.columns[t]||this.columns[t].hidden)return!1;let i=this.data?.getItemMetadata?.(e);if(i?.selectable!==void 0)return!!i.selectable;let r=i?.columns&&(i.columns[this.columns[t].id]||i.columns[t]);return r?.selectable!==void 0?!!r.selectable:!!this.columns[t].selectable}gotoCell(e,t,i,r){if(!this.initialized||!this.canCellBeActive(e,t)||!this.getEditorLock()?.commitCurrentEdit())return;this.scrollCellIntoView(e,t,!1);let s=this.getCellNode(e,t),o=this.columns[t],a=!!(this._options.editable&&o?.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(s,i||e===this.getDataLength()||this._options.autoEdit,null,a,r),this.currentEditor||this.setFocus()}commitCurrentEdit(){let e=this,t=e.getDataItem(e.activeRow),i=e.columns[e.activeCell];if(e.currentEditor){if(e.currentEditor.isValueChanged()){let r=e.currentEditor.validate();if(r.valid){let s=e.activeRow,o=e.activeCell,a=e.currentEditor,l=e.currentEditor.serializeValue(),u=e.serializedEditorValue;if(e.activeRow<e.getDataLength()){let h={row:s,cell:o,editor:a,serializedValue:l,prevSerializedValue:u,execute:()=>{a.applyValue(t,l),e.updateRow(s),e.trigger(e.onCellChange,{command:"execute",row:s,cell:o,item:t,column:i})},undo:()=>{a.applyValue(t,u),e.updateRow(s),e.trigger(e.onCellChange,{command:"undo",row:s,cell:o,item:t,column:i})}};e._options.editCommandHandler?(e.makeActiveCellNormal(!0),e._options.editCommandHandler(t,i,h)):(h.execute(),e.makeActiveCellNormal(!0))}else{let h={};e.currentEditor.applyValue(h,e.currentEditor.serializeValue()),e.makeActiveCellNormal(!0),e.trigger(e.onAddNewRow,{item:h,column:i})}return!e.getEditorLock()?.isActive()}else return e.activeCellNode&&(e.activeCellNode.classList.remove("invalid"),A.width(e.activeCellNode),e.activeCellNode.classList.add("invalid")),e.trigger(e.onValidationError,{editor:e.currentEditor,cellNode:e.activeCellNode,validationResults:r,row:e.activeRow,cell:e.activeCell,column:i}),e.currentEditor.focus(),!1}e.makeActiveCellNormal(!0)}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){let t=[],i=this.columns.length-1;for(let r=0;r<e.length;r++)t.push(new Wt(e[r],0,e[r],i));return t}getSelectedRows(){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");return this.selectedRows.slice(0)}setSelectedRows(e,t){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");this&&this.getEditorLock&&!this.getEditorLock()?.isActive()&&this.selectionModel.setSelectedRanges(this.rowsToRanges(e),t||"SlickGrid.setSelectedRows")}sanitizeHtmlString(e){return!this._options.sanitizer||typeof e!="string"?e:this._options.sanitizer(e)}};var sh=class{constructor(e){this.pluginName="AutoTooltips",this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this._eventHandler=new Ce,this._addonOptions=e}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e){this._addonOptions=D(D({},this._defaults),this.addonOptions),this._grid=e,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}handleMouseEnter(e){let t=this._grid.getCellFromEvent(e);if(t){let i=this._grid.getCellNode(t.row,t.cell),r;this._addonOptions&&i&&(!i.title||this._addonOptions?.replaceExisting)&&(i.clientWidth<i.scrollWidth?(r=i.textContent?.trim()??"",this._addonOptions?.maxToolTipLength&&r.length>this._addonOptions?.maxToolTipLength&&(r=r.substring(0,this._addonOptions.maxToolTipLength-3)+"...")):r="",i.title=r),i=null}}handleHeaderMouseEnter(e,t){let i=t.column,r,s=e.target;if(s&&(r=s.closest(".slick-header-column"),r&&!i?.toolTip)){let o=s.clientWidth<r.clientWidth?i?.name??"":"";r.title=o instanceof HTMLElement?ti(o.innerHTML):o}r=null}};var oh=class{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new Ce,this._bindingEventService=new qe}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){return this._grid?.getOptions()??{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(e,t){this._grid=e,this.createUndoRedoBuffer(),this._cellSelectionModel=new lh,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions=D(D({},this.getDefaultOptions()),t),this._cellExternalCopyManagerPlugin=new ah,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,(i,r)=>{this._addonOptions&&typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(i,r)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,(i,r)=>{this._addonOptions&&typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(i,r)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,(i,r)=>{this._addonOptions&&typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(i,r)})}dispose(){this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),this._cellSelectionModel?.dispose(),this._cellExternalCopyManagerPlugin?.dispose()}createUndoRedoBuffer(){let e=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:t=>{this._commandQueue[e]=t,e++,t.execute()},undo:()=>{if(e===0)return;e--;let t=this._commandQueue[e];t&&oc.cancelCurrentEdit()&&t.undo()},redo:()=>{if(e>=this._commandQueue.length)return;let t=this._commandQueue[e];e++,t&&oc.cancelCurrentEdit()&&t.execute()}}}getDefaultOptions(){let e=0;return{clipboardCommandHandler:t=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,t)},dataItemColumnValueExtractor:(t,i)=>{if(!this.gridOptions.editable||!i.editor){let r=i.exportWithFormatter!==void 0?i.exportWithFormatter:this.gridOptions.textExportOptions?.exportWithFormatter;if(i.formatter&&r){let s=i.formatter(0,0,t[i.field],i,t,this._grid),o=bs(s)?s:s.html||s.text;if(i.sanitizeDataExport||this.gridOptions.textExportOptions?.sanitizeDataExport){let a=o instanceof HTMLElement?o.innerHTML:o;return ti(a??"")}return s}}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:t=>{for(let i=0;i<t;i++)this._grid.getData().addItem({id:`newRow_${e++}`})}}}handleBodyKeyDown(e){e.key==="Z"&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}};var KR=2e3,gw=100,ah=class{constructor(){this.pluginName="CellExternalCopyManager",this.onCopyCells=new B,this.onCopyCancelled=new B,this.onPasteCells=new B,this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this._eventHandler=new Ce}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e,t){this._grid=e,this._addonOptions=D(D({},this._addonOptions),t),this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0,this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));let i=e.getSelectionModel();if(!i)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new SlickCellSelectionModel())");this._eventHandler.subscribe(i.onSelectedRangesChanged,()=>{this._grid.getEditorLock().isActive()||this._grid.focus()})}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(e){if(typeof this._addonOptions.headerColumnValueExtractor=="function"){let t=this._addonOptions.headerColumnValueExtractor(e);if(t)return t instanceof HTMLElement?ti(t.innerHTML):t}return e.name instanceof HTMLElement?ti(e.name.innerHTML):e.name}getDataItemValueForColumn(e,t,i){if(typeof this._addonOptions.dataItemColumnValueExtractor=="function"){let s=this._addonOptions.dataItemColumnValueExtractor(e,t);if(s)return s instanceof HTMLElement?ti(s.innerHTML):s}let r="";if(t)if(t.editor){let s=document.createElement("p"),o=new t.editor({container:s,column:t,event:i,position:{top:0,left:0},grid:this._grid});o.loadValue(e),r=o.serializeValue(),o.destroy(),s.remove()}else r=e[t.field||""];return r}setDataItemValueForColumn(e,t,i){if(!t?.denyPaste){if(this._addonOptions.dataItemColumnValueSetter)return this._addonOptions.dataItemColumnValueSetter(e,t,i);if(t.editor){let r=document.createElement("div"),s=new t.editor({container:r,column:t,position:{top:0,left:0},grid:this._grid});s.loadValue(e),s.applyValue(e,i),s.destroy(),r.remove()}else e[t.field]=i}}setIncludeHeaderWhenCopying(e){this._addonOptions.includeHeaderWhenCopying=e}createTextBox(e){let t=E("textarea",{value:e,style:{position:"absolute",left:"-1000px",top:`${document.body.scrollTop}px`}},this._bodyElement);return t.select(),t}decodeTabularData(e,t){let i=e.getColumns(),s=t.value.split(/[\n\f\r]/);s[s.length-1]===""&&s.pop();let o=0,a=[];this._bodyElement.removeChild(t);for(let L of s)a[o++]=L!==""?L.split("	"):[""];let l=this._grid.getActiveCell(),u=this._grid.getSelectionModel()?.getSelectedRanges(),h=u?.length?u[0]:null,f,m;if(h)f=h.fromRow,m=h.fromCell;else if(l)f=l.row,m=l.cell;else return;let v=!1,w=a.length,S=a.length?a[0].length:0;a.length===1&&a[0].length===1&&h&&(v=!0,w=h.toRow-h.fromRow+1,S=h.toCell-h.fromCell+1);let P=this._grid.getData().length-f,R=0;if(P<w&&typeof this._addonOptions.newRowCreator=="function"){let L=this._grid.getData();for(R=1;R<=w-P;R++)L.push({});this._grid.setData(L),this._grid.render()}if(f+w>this._grid.getDataLength()&&typeof this._addonOptions.newRowCreator=="function"){let L=f+w-this._grid.getDataLength();this._addonOptions.newRowCreator(L)}let x={isClipboardCommand:!0,clippedRange:a,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:v,activeRow:f,activeCell:m,destH:w,destW:S,maxDestY:this._grid.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{x.h=0;for(let z=0;z<x.destH;z++){x.oldValues[z]=[],x.w=0,x.h++;for(let Y=0;Y<x.destW;Y++){x.w++;let U=f+z,pe=m+Y;if(U<x.maxDestY&&pe<x.maxDestX){let Z=this._grid.getDataItem(U);x.oldValues[z][Y]=Z[i[pe].field],v?this.setDataItemValueForColumn(Z,i[pe],a[0][0]):this.setDataItemValueForColumn(Z,i[pe],a[z]?a[z][Y]:""),this._grid.updateCell(U,pe),this._grid.onCellChange.notify({row:U,cell:pe,item:Z,grid:this._grid,column:{}})}}}let L=new Wt(f,m,f+x.h-1,m+x.w-1);this.markCopySelection([L]),this._grid.getSelectionModel()?.setSelectedRanges([L]),this.onPasteCells.notify({ranges:[L]})},undo:()=>{for(let z=0;z<x.destH;z++)for(let Y=0;Y<x.destW;Y++){let U=f+z,pe=m+Y;if(U<x.maxDestY&&pe<x.maxDestX){let Z=this._grid.getDataItem(U);v?this.setDataItemValueForColumn(Z,i[pe],x.oldValues[0][0]):this.setDataItemValueForColumn(Z,i[pe],x.oldValues[z][Y]),this._grid.updateCell(U,pe),this._grid.onCellChange.notify({row:U,cell:pe,item:Z,grid:this._grid,column:{}})}}let L=new Wt(f,m,f+x.h-1,m+x.w-1);if(this.markCopySelection([L]),this._grid.getSelectionModel()?.setSelectedRanges([L]),this.onPasteCells.notify({ranges:[L]}),typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(new Xe,{ranges:[L]}),R>1){let z=this._grid.getData();for(;R>1;R--)z.splice(z.length-1,1);this._grid.setData(z),this._grid.render()}}};this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(x):x.execute()}handleKeyDown(e){let t;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if(e.key==="Escape"&&this._copiedRanges&&(e.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(e,{ranges:this._copiedRanges}),this._copiedRanges=null),(e.key==="c"||e.key==="Insert")&&(e.ctrlKey||e.metaKey)&&!e.shiftKey&&(typeof this._onCopyInit=="function"&&this._onCopyInit.call(this),t=this._grid.getSelectionModel()?.getSelectedRanges()??[],t.length!==0)){this._copiedRanges=t,this.markCopySelection(t),this.onCopyCells.notify({ranges:t}),typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(e,{ranges:t});let i=this._grid.getColumns(),r="";for(let s=0;s<t.length;s++){let o=t[s],a=[];for(let l=o.fromRow;l<o.toRow+1;l++){let u=[],h=this._grid.getDataItem(l);if(a.length===0&&this._addonOptions.includeHeaderWhenCopying){let f=[];for(let m=o.fromCell;m<o.toCell+1;m++)(i[m].name instanceof HTMLElement?ti(i[m].name.innerHTML):i[m].name).length>0&&!i[m].hidden&&f.push(this.getHeaderValueForColumn(i[m]));a.push(f.join("	"))}for(let f=o.fromCell;f<o.toCell+1;f++)(i[f].name instanceof HTMLElement?ti(i[f].name.innerHTML):i[f].name).length>0&&!i[f].hidden&&u.push(this.getDataItemValueForColumn(h,i[f],e));a.push(u.join("	"))}r+=a.join(`\r
`)+`\r
`}if(window.clipboardData)return window.clipboardData.setData("Text",r),!0;{let s=document.activeElement,o=this.createTextBox(r);if(o.focus(),setTimeout(()=>{this._bodyElement.removeChild(o),s?s.focus():console.log("No element to restore focus to after copy?")},this.addonOptions?.clipboardPasteDelay??gw),typeof this._onCopySuccess=="function"){let a=t.length===1?t[0].toRow+1-t[0].fromRow:t.length;this._onCopySuccess(a)}return!1}}if(!this._addonOptions.readOnlyMode&&(e.key==="v"&&(e.ctrlKey||e.metaKey)&&!e.shiftKey||e.key==="Insert"&&e.shiftKey&&!e.ctrlKey)){let i=this.createTextBox("");return setTimeout(()=>this.decodeTabularData(this._grid,i),this.addonOptions?.clipboardPasteDelay??gw),!1}}}markCopySelection(e){this.clearCopySelection();let t=this._grid.getColumns(),i={};for(let r of e)for(let s=r.fromRow;s<=r.toRow;s++){i[s]={};for(let o=r.fromCell;o<=r.toCell&&o<t.length;o++)i[s][t[o].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,i),clearTimeout(this._clearCopyTI),this._clearCopyTI=setTimeout(()=>this.clearCopySelection(),this.addonOptions?.clearCopySelectionDelay||KR)}};var pr=class{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new qe,this._eventHandler=new Ce}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuCssClass(){return this._menuPluginCssPrefix||this._menuCssPrefix}get menuElement(){return this._menuElm||document.querySelector(`.${this.menuCssClass}${this.gridUidSelector}`)}dispose(){this._eventHandler?.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),this._commandTitleElm?.remove(),this._optionTitleElm?.remove(),this.disposeAllMenus(),De(this._menuElm),this.menuElement?.remove(),this._menuElm?.remove()}disposeAllMenus(){this.disposeSubMenus(),this._bindEventService.unbindAll("parent-menu"),document.querySelectorAll(`.${this.menuCssClass}${this.gridUidSelector}`).forEach(e=>e.remove())}disposeSubMenus(){this._bindEventService.unbindAll("sub-menu"),document.querySelectorAll(`.${this.menuCssClass}.slick-submenu${this.gridUidSelector}`).forEach(e=>e.remove())}setOptions(e){this._addonOptions=D(D({},this._addonOptions),e)}addSubMenuTitleWhenExists(e,t){if(e!=="divider"&&e?.subMenuTitle){let i=document.createElement("div");i.className="slick-menu-title",i.textContent=e.subMenuTitle;let r=e.subMenuTitleCssClass;r&&i.classList.add(...r.split(" ")),t.appendChild(i)}}populateCommandOrOptionItems(e,t,i,r,s,o,a){if(s&&r&&t)for(let l of r)this.populateSingleCommandOrOptionItem(e,t,i,l,s,o,a)}populateCommandOrOptionTitle(e,t,i,r){if(t){let s=r>0,o=this._menuElm?.querySelector(`.slick-${e}-header`)??E("div",{className:`slick-${e}-header`}),a=`${e}Title`;s||(t?.[a]?(De(o),this[`_${e}TitleElm`]=E("span",{className:"slick-menu-title",textContent:t[a]}),o.appendChild(this[`_${e}TitleElm`]),o.classList.add("with-title")):o.classList.add("no-title"),i.appendChild(o))}}populateSingleCommandOrOptionItem(e,t,i,r,s,o,a){let l=null;if(s&&r&&t){let u=s?.level||0,h=this._camelPluginName==="headerButtons"?"":"-item",f=`${this._menuCssPrefix}${h}`,m=!0,v=!0;if(typeof r=="object"&&(m=this.extensionUtility.runOverrideFunctionWhenExists(r.itemVisibilityOverride,s),v=this.extensionUtility.runOverrideFunctionWhenExists(r.itemUsabilityOverride,s)),!m)return null;if(typeof r=="object"&&r.itemUsabilityOverride&&(r.disabled=!v),l=E("li",{className:f,role:"menuitem"}),typeof r=="object"&&ya(r[e])&&(l.dataset[e]=r?.[e]),i&&i.appendChild(l),typeof r=="object"&&r.divider||r==="divider")return l.classList.add(`${f}-divider`),l;if(r.disabled&&l.classList.add(`${f}-disabled`),(r.hidden||r.showOnHover)&&l.classList.add(`${f}-hidden`),r.cssClass&&l.classList.add(...r.cssClass.split(" ")),r.tooltip&&(l.title=r.tooltip),this._camelPluginName!=="headerButtons"){let S=E("div",{className:`${this._menuCssPrefix}-icon`});l.appendChild(S),r.iconCssClass?S.classList.add(...r.iconCssClass.split(" ")):!r.commandItems&&!r.optionItems&&(S.textContent="\u25E6");let P=E("span",{className:`${this._menuCssPrefix}-content`,textContent:typeof r=="object"&&r.title||""},l);r.textCssClass&&P.classList.add(...r.textCssClass.split(" "))}let w=u>0?"sub-menu":"parent-menu";if(this._bindEventService.bind(l,"click",S=>o.call(this,S,e,r,u,s?.column),void 0,w),this._addonOptions?.subMenuOpenByEvent==="mouseover"&&typeof a=="function"&&this._bindEventService.bind(l,"mouseover",S=>a.call(this,S,e,r,u),void 0,w),r.commandItems||r.optionItems){let S=document.createElement("span");S.className="sub-item-chevron",this._addonOptions.subItemChevronClass?S.classList.add(...this._addonOptions.subItemChevronClass.split(" ")):S.textContent="\u2B9E",l.classList.add("slick-submenu-item"),l.appendChild(S)}}return l}};var Na=class extends pr{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._currentCell=-1,this._currentRow=-1,this._lastMenuTypeClicked="",this._subMenuParentId=""}createParentMenu(e){this.menuElement?.remove(),this._menuElm=void 0;let t=this.grid.getCellFromEvent(e);if(t){this._currentCell=t.cell??0,this._currentRow=t.row??0;let i=this._addonOptions?.commandItems||[],r=this._addonOptions?.optionItems||[],s={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(e,s),typeof e.stopPropagation=="function"&&(this.pubSubService.publish(`on${ws(this._camelPluginName)}BeforeMenuShow`,s),typeof this.addonOptions?.onBeforeMenuShow=="function"&&this.addonOptions.onBeforeMenuShow(e,s)===!1)||(this._menuElm=this.createMenu(i,r),this._menuElm&&(this._menuElm.style.top=`${e.pageY+5}px`,this._menuElm.style.left=`${e.pageX}px`,this._menuElm.style.display="block",document.body.appendChild(this._menuElm)),this.pubSubService.publish(`on${ws(this._camelPluginName)}AfterMenuShow`,s),typeof this.addonOptions?.onAfterMenuShow=="function"&&this.addonOptions.onAfterMenuShow(e,s)===!1))return}return this._menuElm}createMenu(e,t,i=0,r){let s=this.grid.getColumns()[this._currentCell],o=this.grid.getDataItem(this._currentRow),a=r?.command||r?.option,l=i===1&&a?String(a).replace(/\s/g,""):"";l&&(this._subMenuParentId=l),i>1&&(l=this._subMenuParentId);let u=!0,h=!0;if(this._camelPluginName==="contextMenu"){if(u=this.checkIsColumnAllowed(this._addonOptions?.optionShownOverColumnIds??[],s.id),h=this.checkIsColumnAllowed(this._addonOptions?.commandShownOverColumnIds??[],s.id),!s||(!h||!e.length)&&(!u||!t.length)){this.hideMenu();return}}else if(!s||!s.cellMenu||!e.length&&!t.length)return;let f=`${this.menuCssClass} slick-menu-level-${i} ${this.gridUid}`,m=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${i}${this.gridUidSelector}`);if(m){if(m.dataset.subMenuParent===l)return m;this.disposeSubMenus()}let v=document.createElement("div");v.className=f,i>0&&(v.classList.add("slick-submenu"),l&&(v.dataset.subMenuParent=l));let w=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${this.addonOptions.maxHeight??0}px`,S=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${this.addonOptions.maxWidth??0}px`;w&&(v.style.maxHeight=w),S&&(v.style.maxWidth=S),this.addonOptions?.width&&(v.style.width=tn(this.addonOptions?.width));let P=E("button",{ariaLabel:"Close",className:"close",type:"button",textContent:"\xD7",dataset:{dismiss:this._menuCssPrefix}});if(!this.addonOptions.hideOptionSection&&u&&t.length>0){let R=E("div",{className:`${this._menuCssPrefix}-option-list`,role:"menu"},v);this.populateCommandOrOptionTitle("option",this.addonOptions,R,i),!this.addonOptions.hideCloseButton&&i<1&&this.populateCommandOrOptionCloseBtn("option",P,R),r&&i>0&&this.addSubMenuTitleWhenExists(r,R),this.populateCommandOrOptionItems("option",this.addonOptions,R,t,{cell:this._currentCell,row:this._currentRow,column:s,dataContext:o,grid:this.grid,level:i},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}if(!this.addonOptions.hideCommandSection&&h&&e.length>0){let R=E("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},v);this.populateCommandOrOptionTitle("command",this.addonOptions,R,i),!this.addonOptions.hideCloseButton&&i<1&&(!u||t.length===0||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",P,R),r&&i>0&&this.addSubMenuTitleWhenExists(r,R),this.populateCommandOrOptionItems("command",this.addonOptions,R,e,{cell:this._currentCell,row:this._currentRow,column:s,dataContext:o,grid:this.grid,level:i},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}return i++,v}closeMenu(e,t){if(this.menuElement){if(typeof this.addonOptions?.onBeforeMenuClose=="function"&&this.addonOptions.onBeforeMenuClose(e,t)===!1)return;this.hideMenu()}}hideMenu(){this.menuElement?.remove(),this._menuElm=null,this.disposeSubMenus()}checkIsColumnAllowed(e,t){return e?.length>0?e.findIndex(i=>i===t)>=0:!0}handleBodyMouseDown(e){if(this.menuElement){let t=!1,i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this.menuElement!==e.target&&!t&&!e.defaultPrevented||e.target.className==="close"&&i)&&this.closeMenu(e,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}}handleCloseButtonClicked(e){e.defaultPrevented||this.closeMenu(e,{cell:0,row:0,grid:this.grid})}handleMenuItemMouseOver(e,t,i,r=0){i?.[t]!==void 0&&i!=="divider"&&!i.disabled&&!i.divider&&(i.commandItems||i.optionItems?(this.repositionSubMenu(i,t,r,e),this._lastMenuTypeClicked=t):r===0&&this.disposeSubMenus())}handleMenuItemCommandClick(e,t,i,r=0){if(i?.[t]!==void 0&&i!=="divider"&&!i.disabled&&!i.divider&&this._currentCell!==void 0&&this._currentRow!==void 0){if(t==="option"&&!this.grid.getEditorLock().commitCurrentEdit())return;let s=this._currentCell,o=this._currentRow,a=this.grid.getColumns()[this._currentCell],l=this.grid.getDataItem(this._currentRow),u=i[t]!==void 0?i[t]:"";if(u!==void 0&&!i[`${t}Items`]){let h={cell:this._currentCell,row:this._currentRow,grid:this.grid,[t]:u,item:i,column:a,dataContext:l},f=t==="command"?"onCommand":"onOptionSelected",m=`${this._camelPluginName}:${f}`;this.pubSubService.publish(m,h),typeof this._addonOptions?.[f]=="function"&&this._addonOptions[f](e,h),typeof i.action=="function"&&i.action.call(this,e,h),e.defaultPrevented||this.closeMenu(e,{cell:s,row:o,grid:this.grid})}else(i.commandItems||i.optionItems)&&this.repositionSubMenu(i,t,r,e);this._lastMenuTypeClicked=t}}populateCommandOrOptionCloseBtn(e,t,i){this._bindEventService.bind(t,"click",s=>this.handleCloseButtonClicked(s),void 0,"parent-menu");let r=i.querySelector(`.slick-${e}-header`)??E("div",{className:`slick-${e}-header`});r?.appendChild(t),i.appendChild(r),r.classList.add("with-close")}repositionSubMenu(e,t,i,r){(r.target.classList.contains("slick-cell")||this._lastMenuTypeClicked!==t)&&this.disposeSubMenus();let s=this.createMenu(e?.commandItems||[],e?.optionItems||[],i+1,e);s&&(s.style.display="block",document.body.appendChild(s),this.repositionMenu(r,s))}repositionMenu(e,t){let i=t?.classList.contains("slick-submenu"),r=i?e.target.closest(`.${this._menuCssPrefix}-item`):e.target.closest(".slick-cell");if(t&&r){t.style.top="0px",t.style.left="0px";let s=e?.touches?.[0]??e,o=at(r),a=r&&this._camelPluginName==="cellMenu"?o?.left??0:s.pageX,l=r&&this._camelPluginName==="cellMenu"?o?.top??0:s.pageY;i&&this._camelPluginName==="contextMenu"&&(a=o?.left??0,l=o?.top??0);let u=r.offsetWidth||0,h=t?.offsetHeight||0,f=t?.offsetWidth||this._addonOptions.width||0,m=this.gridOptions.rowHeight||0,v=Number(this._addonOptions.autoAdjustDropOffset||0),w=Number(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){let{bottom:S,top:P}=oo(r),R=S+v-m,M=P-v+m;(R<h&&M>R?"top":"bottom")==="top"||this._addonOptions.dropDirection==="top"?(t.classList.remove("dropdown"),t.classList.add("dropup"),i?l-=h-v-r.clientHeight:l-=h-v):(t.classList.remove("dropup"),t.classList.add("dropdown"),l=l+v,this._camelPluginName==="cellMenu"&&(i?l+=v:l+=m+v))}if(this._addonOptions.autoAlignSide||this._addonOptions.dropSide==="left"){let S=this.grid.getGridPosition(),P=a+Number(f);i&&(P+=r.clientWidth);let R=document.documentElement.clientWidth;(P>=S.width||P>=R?"left":"right")==="left"||!i&&this._addonOptions.dropSide==="left"?(t.classList.remove("dropright"),t.classList.add("dropleft"),this._camelPluginName==="cellMenu"&&!i?a-=Number(f)-u-w:a-=Number(f)-w):(t.classList.remove("dropleft"),t.classList.add("dropright"),i?a+=w+r.offsetWidth:a+=w)}t.style.top=`${l}px`,t.style.left=`${a}px`}}};var ch=class extends Na{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.pluginName="CellMenu",this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,subMenuOpenByEvent:"mouseover"},this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(i.gridOptions.cellMenu)}init(e){this._addonOptions=D(D({},this._defaults),e),this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){let e=this.sharedService?.gridOptions,t=this.sharedService.allColumns;e?.enableTranslate&&Array.isArray(t)&&t.forEach(i=>{if(i?.cellMenu&&(Array.isArray(i.cellMenu.commandItems)||Array.isArray(i.cellMenu.optionItems))){let r=i.cellMenu.commandItems||[],s=i.cellMenu.optionItems||[];i.cellMenu.commandTitleKey&&(i.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(i.cellMenu.commandTitleKey,"TEXT_COMMANDS")||i.cellMenu.commandTitle),i.cellMenu.optionTitleKey&&(i.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(i.cellMenu.optionTitleKey,"TEXT_COMMANDS")||i.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(r,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(s,"optionItems")}})}handleCellClick(e,t){this.disposeAllMenus();let i=this.grid.getCellFromEvent(e);if(i){let r=this.grid.getDataItem(i.row),s=this.grid.getColumns()[i.cell];if(s?.cellMenu&&e.preventDefault(),this._addonOptions=D(D({},this._addonOptions),s.cellMenu),t=t||{},t.column=s,t.dataContext=r,t.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,t))return;this._menuElm=this.createParentMenu(e),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}sortMenuItems(e){e.forEach(t=>{t?.cellMenu?.commandItems&&this.extensionUtility.sortItems(t.cellMenu.commandItems||[],"positionOrder"),t?.cellMenu?.optionItems&&this.extensionUtility.sortItems(t.cellMenu.optionItems||[],"positionOrder")})}};var uh=class{constructor(e,t){this.grid=e,this.pluginName="CellRangeDecorator",this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this._options=Nr(this._defaults,t)}get addonOptions(){return this._options}get addonElement(){return this._elem}destroy(){this.hide()}init(){}hide(){this._elem?.remove(),this._elem=null}show(e){this._elem||(this._elem=E("div",{className:this._options.selectionCssClass}),Object.keys(this._options.selectionCss).forEach(r=>{this._elem.style[r]=this._options.selectionCss[r]}),this._elem.style.position="absolute",this.grid.getActiveCanvasNode()?.appendChild(this._elem));let t=this.grid.getCellNodeBox(e.fromRow,e.fromCell),i=this.grid.getCellNodeBox(e.toRow,e.toCell);return t&&i&&this._options?.offset&&(this._elem.style.top=`${t.top+this._options.offset.top}px`,this._elem.style.left=`${t.left+this._options.offset.left}px`,this._elem.style.height=`${i.bottom-t.top+this._options.offset.height}px`,this._elem.style.width=`${i.right-t.left+this._options.offset.width}px`),this._elem}};var Fa=class{constructor(e){this.pluginName="CellRangeSelector",this.onBeforeCellRangeSelected=new B,this.onCellRangeSelecting=new B,this.onCellRangeSelected=new B,this._currentlySelectedRange=null,this._canvas=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._isRowMoveRegistered=!1,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this._eventHandler=new Ce,this._options=Nr(this._defaults,e)}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridUid(){return this._gridUid||(this._grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(e){this._grid=e,this._decorator=this._options.cellDecorator||new uh(e,this._options),this._canvas=e.getCanvasNode(),this._gridOptions=e.getOptions(),this._gridUid=e.getUID(),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll(),De(this._activeCanvas),De(this._canvas),this._decorator?.destroy(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(e,t){let i=e?.touches?.[0]??e,r=this._activeViewport.scrollLeft,s=this._activeViewport.scrollTop,o=r+this._viewportWidth,a=s+this._viewportHeight,l=at(this._activeViewport),u=l?.left??0,h=l?.top??0,f=u+this._viewportWidth,m=h+this._viewportHeight,v={e,dd:t,viewport:{left:r,top:s,right:o,bottom:a,offset:{left:u,top:h,right:f,bottom:m}},offset:{x:0,y:0},isOutsideViewport:!1};return i.pageX<u?v.offset.x=i.pageX-u:i.pageX>f&&(v.offset.x=i.pageX-f),i.pageY<h?v.offset.y=h-i.pageY:i.pageY>m&&(v.offset.y=m-i.pageY),v.isOutsideViewport=!!v.offset.x||!!v.offset.y,v}stopIntervalTimer(){this._autoScrollTimerId&&(clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(e,t){if(!this._dragging&&!this._gridOptions.enableRowMoveManager)return;this._gridOptions.enableRowMoveManager||e.stopImmediatePropagation();let i=e.getNativeEvent();if(this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(i,t),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(i,t)}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let e=0,t=0;this._autoScrollTimerId=setInterval(()=>{let i=!1,r=!1;this._draggingMouseOffset.offset.x?(e+=this.addonOptions.minIntervalToShowNextCell,i=e>=this._xDelayForNextCell):e=0,this._draggingMouseOffset.offset.y?(t+=this.addonOptions.minIntervalToShowNextCell,r=t>=this._yDelayForNextCell):t=0,(i||r)&&(i&&(e=0),r&&(t=0),this.handleDragToNewPosition(i,r))},this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(e,t){let i=this._draggingMouseOffset.e.pageX,r=this._draggingMouseOffset.e.pageY,s=this._draggingMouseOffset.offset.x,o=this._draggingMouseOffset.offset.y,a=this._draggingMouseOffset.viewport.offset;e&&s&&(s>0?i=a.right+this._moveDistanceForOneCell.x:i=a.left-this._moveDistanceForOneCell.x),t&&o&&(o>0?r=a.top-this._moveDistanceForOneCell.y:r=a.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:i,pageY:r},this._draggingMouseOffset.dd)}handleDragTo(e,t){let i=e?.touches?.[0]??e,r=this._grid.getCellFromPoint(i.pageX-(at(this._activeCanvas)?.left??0)+this._columnOffset,i.pageY-(at(this._activeCanvas)?.top??0)+this._rowOffset);if(r!==void 0){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&r.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&r.cell<=this._gridOptions.frozenColumn)||this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&r.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&r.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){let s=this._grid.getCellNodeBox(r.row,r.cell);if(s){let o=this._draggingMouseOffset.viewport;(s.left<o.left||s.right>o.right||s.top<o.top||s.bottom>o.bottom)&&this._grid.scrollCellIntoView(r.row,r.cell)}}if(!this._grid.canCellBeSelected(r.row,r.cell))return;if(t?.range){t.range.end=r;let s=new Wt(t.range.start.row??0,t.range.start.cell??0,r.row,r.cell);this._decorator.show(s),this.onCellRangeSelecting.notify({range:s})}}}handleDragEnd(e,t){this._decorator.hide(),this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),this.stopIntervalTimer(),this.onCellRangeSelected.notify({range:new Wt(t.range.start.row??0,t.range.start.cell??0,t.range.end.row,t.range.end.cell)}))}handleDragInit(e){this._activeCanvas=this._grid.getActiveCanvasNode(e),this._activeViewport=this._grid.getActiveViewportNode(e);let t=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-t.width,this._viewportHeight=this._activeViewport.offsetHeight-t.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){let i=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=document.querySelector(i)?.clientHeight??0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`)?.clientWidth??0),this._grid.getEditorLock().isActive()||(e.stopImmediatePropagation(),e.preventDefault())}handleDragStart(e,t){let i=this._grid.getCellFromEvent(e);if(i&&this.onBeforeCellRangeSelected.notify(i).getReturnValue()!==!1&&this._grid.canCellBeSelected(i.row,i.cell)&&(this._dragging=!0,e.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();let r=at(this._canvas),s=t.startX-(r?.left??0);this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(s+=this._scrollLeft);let o=t.startY-(r?.top??0);this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(o+=this._scrollTop);let a=this._grid.getCellFromPoint(s,o);return t.range={start:a,end:{}},this._currentlySelectedRange=t.range,this._decorator.show(new Wt(a.row,a.cell))}handleScroll(e,t){this._scrollTop=t.scrollTop,this._scrollLeft=t.scrollLeft}};var lh=class{constructor(e){this.onSelectedRangesChanged=new B,this.pluginName="CellSelectionModel",this._cachedPageRowCount=0,this._prevKeyDown="",this._ranges=[],this._defaults={selectActiveCell:!0},this._eventHandler=new Ce,e===void 0||e.cellRangeSelector===void 0?this._selector=new Fa({selectionCss:{border:"2px solid black"}}):this._selector=e.cellRangeSelector,this._addonOptions=e}get addonOptions(){return this._addonOptions}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(e){this._grid=e,e.hasDataView()&&(this._dataView=e?.getData()??{}),this._addonOptions=D(D({},this._defaults),this._addonOptions),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),e.registerPlugin(this._selector)}destroy(){this.dispose()}dispose(){this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),this._grid?.unregisterPlugin(this._selector),this._selector?.dispose()}getSelectedRanges(){return this._ranges}rangesAreEqual(e,t){let i=e.length!==t.length;if(!i){for(let r=0;r<e.length;r++)if(e[r].fromCell!==t[r].fromCell||e[r].fromRow!==t[r].fromRow||e[r].toCell!==t[r].toCell||e[r].toRow!==t[r].toRow){i=!0;break}}return!i}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(e){let t=[];for(let i=0;i<e.length;i++){let r=e[i];this._grid.canCellBeSelected(r.fromRow,r.fromCell)&&this._grid.canCellBeSelected(r.toRow,r.toCell)&&t.push(r)}return t}resetPageRowCount(){this._cachedPageRowCount=0}setSelectedRanges(e,t="SlickCellSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!e||e.length===0))return;let i=!this.rangesAreEqual(this._ranges,e);if(this._ranges=this.removeInvalidRanges(e),i){let r=new Xe;Object.defineProperty(r,"detail",{writable:!0,configurable:!0,value:{caller:t}}),this.onSelectedRangesChanged.notify(this._ranges,r)}}handleActiveCellChange(e,t){this._prevSelectedRow=void 0;let i=je(t.cell),r=je(t.row);this._addonOptions?.selectActiveCell&&r&&i?this.setSelectedRanges([new Wt(t.row,t.cell)]):(!this._addonOptions?.selectActiveCell||!r&&!i)&&this.setSelectedRanges([])}handleBeforeCellRangeSelected(e){if(this._grid.getEditorLock().isActive())return e.stopPropagation(),!1}handleCellRangeSelected(e,t){this._grid.setActiveCell(t.range.fromRow,t.range.fromCell,!1,!1,!0),this.setSelectedRanges([t.range])}isKeyAllowed(e){return["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageDown","PageUp","Home","End"].some(t=>t===e)}handleKeyDown(e){let t,i,r=this._grid.getColumns().length,s=this._grid.getActiveCell(),o=0;if(this._dataView?o=this._dataView?.getPagingInfo().pageSize||this._dataView.getLength():o=this._grid.getDataLength(),s&&(e.shiftKey||e.ctrlKey)&&!e.altKey&&this.isKeyAllowed(e.key)&&(t=this.getSelectedRanges().slice(),t.length||t.push(new Wt(s.row,s.cell)),i=t.pop(),typeof i?.contains=="function")){i.contains(s.row,s.cell)||(i=new Wt(s.row,s.cell));let a=i.toRow-i.fromRow,l=i.toCell-i.fromCell,u=s.row===i.fromRow?1:-1,h=s.cell===i.fromCell?1:-1,f=e.key.startsWith("Arrow"),m,v=0;f&&!e.ctrlKey?(e.key==="ArrowLeft"?l-=h:e.key==="ArrowRight"?l+=h:e.key==="ArrowUp"?a-=u:e.key==="ArrowDown"&&(a+=u),v=s.row+u*a):(this._cachedPageRowCount<1&&(this._cachedPageRowCount=this._grid.getViewportRowCount()),this._prevSelectedRow===void 0&&(this._prevSelectedRow=s.row),e.shiftKey&&!e.ctrlKey&&e.key==="Home"?(m=0,v=s.row):e.shiftKey&&!e.ctrlKey&&e.key==="End"?(m=r-1,v=s.row):e.ctrlKey&&e.shiftKey&&e.key==="Home"?(m=0,v=0):e.ctrlKey&&e.shiftKey&&e.key==="End"?(m=r-1,v=o-1):e.key==="PageUp"?(this._prevSelectedRow>=0&&(v=this._prevSelectedRow-this._cachedPageRowCount),v<0&&(v=0)):e.key==="PageDown"&&(this._prevSelectedRow<=o-1&&(v=this._prevSelectedRow+this._cachedPageRowCount),v>o-1&&(v=o-1)),this._prevSelectedRow=v),m??=s.cell+h*l;let w=new Wt(s.row,s.cell,v,m);if(this.removeInvalidRanges([w]).length){t.push(w);let S=u>0?w.toRow:w.fromRow,P=h>0?w.toCell:w.fromCell;f?(this._grid.scrollRowIntoView(S),this._grid.scrollCellIntoView(S,P,!1)):(this._grid.scrollRowIntoView(v),this._grid.scrollCellIntoView(v,P,!1))}else t.push(i);this.setSelectedRanges(t),e.preventDefault(),e.stopPropagation(),this._prevKeyDown=e.key}}};var mr=class{constructor(e){this.pluginName="RowSelectionModel",this.onSelectedRangesChanged=new B,this._inHandler=!1,this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this._eventHandler=new Ce,this._options=D(D({},this._defaults),e)}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()}init(e){this._grid=e,this._options=D(D({},this._defaults),this._options),this._selector=this.addonOptions.cellRangeSelector,!this._selector&&this._options.dragToSelect&&(this._selector=new Fa({selectionCss:{border:"none"},autoScroll:this._options.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),this._selector?.destroy(),this._selector?.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(e){this.setSelectedRanges(this.rowsToRanges(e),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(e,t="SlickRowSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!e||e.length===0))return;this._ranges=e;let i=new Xe;Object.defineProperty(i,"detail",{writable:!0,configurable:!0,value:{caller:t}}),this.onSelectedRangesChanged.notify(this._ranges,i)}getRowsRange(e,t){let i,r=[];for(i=e;i<=t;i++)r.push(i);for(i=t;i<e;i++)r.push(i);return r}handleBeforeCellRangeSelected(e,t){let i=!1;if(this.gridOptions.enableRowMoveManager&&(i=this.isHandlerColumn(t.cell)??!1),this._grid.getEditorLock().isActive()||i)return e.stopPropagation(),!1;this._grid.setActiveCell(t.row,t.cell)}handleCellRangeSelected(e,t){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new Wt(t.range.fromRow,0,t.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(e,t){this._options.selectActiveRow&&t.row!==null&&this.setSelectedRanges([new Wt(t.row,0,t.row,this._grid.getColumns().length-1)])}handleClick(e){let t=this._grid.getCellFromEvent(e);if(!t||!this._grid.canCellBeActive(t.row,t.cell)||!this.gridOptions.multiSelect||!e.ctrlKey&&!e.shiftKey&&!e.metaKey)return!1;let i=this.rangesToRows(this._ranges),r=i.indexOf(t.row);if(r===-1&&(e.ctrlKey||e.metaKey))i.push(t.row),this._grid.setActiveCell(t.row,t.cell);else if(r!==-1&&(e.ctrlKey||e.metaKey))i=i.filter(o=>o!==t.row),this._grid.setActiveCell(t.row,t.cell);else if(i.length&&e.shiftKey){let o=i.pop(),a=Math.min(t.row,o),l=Math.max(t.row,o);i=[];for(let u=a;u<=l;u++)u!==o&&i.push(u);i.push(o),this._grid.setActiveCell(t.row,t.cell)}let s=this.rowsToRanges(i);return this.setSelectedRanges(s),e.stopImmediatePropagation(),!0}handleKeyDown(e){let t=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.key==="ArrowUp"||e.key==="ArrowDown")){let i=this.getSelectedRows();i.sort((a,l)=>a-l),i.length||(i=[t.row]);let r,s=i[0],o=i[i.length-1];if(e.key==="ArrowDown"?r=t.row<o||s===o?++o:++s:r=t.row<o?--o:--s,r>=0&&r<this._grid.getDataLength()){this._grid.scrollRowIntoView(r);let a=this.rowsToRanges(this.getRowsRange(s,o));this.setSelectedRanges(a)}e.preventDefault(),e.stopPropagation()}}isHandlerColumn(e){let i=this._grid.getColumns()[e].behavior||"";return/move|selectAndMove/.test(i)}rangesToRows(e){let t=[];for(let i=0;i<e.length;i++)for(let r=e[i].fromRow;r<=e[i].toRow;r++)t.push(r);return t}rowsToRanges(e){let t=[],i=this._grid.getColumns().length-1;for(let r of e)t.push(new Wt(r,0,r,i));return t}};var vc=class{constructor(e,t){this.pubSubService=e,this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"_checkbox_selector",hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30,applySelectOnAllPages:!0,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._isUsingDataView=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new qe,this._eventHandler=new Ce,this._addonOptions=D(D({},this._defaults),t)}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){return this._grid?.getOptions()??{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(e){this._selectedRowsLookup=e}init(e){this._grid=e,this._isUsingDataView=!Array.isArray(e.getData()),this._isUsingDataView&&(this._dataView=e.getData()),this.gridOptions.backendServiceApi&&(this._addonOptions.applySelectOnAllPages=!1),this._eventHandler.subscribe(e.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(e.onClick,this.handleClick.bind(this)).subscribe(e.onKeyDown,this.handleKeyDown.bind(this)),this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,this.handleDataViewSelectedIdsChanged.bind(this)).subscribe(this._dataView.onPagingInfoChanged,this.handleDataViewSelectedIdsChanged.bind(this)),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(e),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),(!this._rowSelectionModel||!this._grid.getSelectionModel())&&(this._rowSelectionModel=new mr(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&setTimeout(()=>this.selectRows(this.gridOptions.preselectedRows||[])),typeof this._addonOptions.selectableOverride=="function"&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(e,t){if(this._addonOptions=D(D({},this._defaults),t.checkboxSelector),Array.isArray(e)&&t){let i=this.getColumnDefinition();if(!e.some(r=>r.id===i.id)){let r=t?.checkboxSelector?.columnIndexPosition??0;r>0?e.splice(r,0,i):e.unshift(i),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(e){if(this._addonOptions=D(D({},this._addonOptions),e),this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?this.hideSelectAllFromColumnHeaderTitleRow():(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{let t=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");if(t){t.style.display="flex",t.ariaChecked=String(this._isSelectAllChecked);let i=t.querySelector('input[type="checkbox"]');i&&(i.ariaChecked=String(this._isSelectAllChecked),i.checked=this._isSelectAllChecked)}}}deSelectRows(e){let t=[];for(let i of e)this._selectedRowsLookup[i]&&(t[t.length]=i);this._grid.setSelectedRows(this._grid.getSelectedRows().filter(i=>t.indexOf(i)<0),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(e){let t=[];for(let r of e)this._selectedRowsLookup[r]&&(t[t.length]=r);let i=this._grid.getSelectedRows()?.concat(t);this._grid.setSelectedRows(i)}getColumnDefinition(){let e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":`<input id="header-selector${this._selectAll_UID}" type="checkbox"><label for="header-selector${this._selectAll_UID}"></label>`,toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:e,cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,sortable:!1,width:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"","","")}hideSelectAllFromColumnHeaderFilterRow(){let e=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");e&&(e.style.display="none")}toggleRowSelection(e){this.toggleRowSelectionWithEvent(null,e)}toggleRowSelectionWithEvent(e,t){let i=this._grid.getDataItem(t);if(!this.checkSelectableOverride(t,i,this._grid))return;let r=this._grid.getSelectedRows();this._addonOptions.onRowToggleStart&&this._addonOptions.onRowToggleStart(e,{row:t,previousSelectedRows:r});let s=this._selectedRowsLookup[t]?this._grid.getSelectedRows().filter(o=>o!==t):this._grid.getSelectedRows().concat(t);this._grid.setSelectedRows(s,"click.toggle"),this._grid.setActiveCell(t,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(e,{row:t,previousSelectedRows:r})}selectableOverride(e){this._selectableOverride=e}addCheckboxToFilterHeaderRow(e){this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{if(i.column.field===(this._addonOptions.field||"_checkbox_selector")){De(i.node);let r=E("span",{id:"filter-checkbox-selectall-container",ariaChecked:"false"});r.appendChild(E("input",{type:"checkbox",id:`header-filter-selector${this._selectAll_UID}`})),r.appendChild(E("label",{htmlFor:`header-filter-selector${this._selectAll_UID}`})),i.node.appendChild(r),this._headerRowNode=i.node,this._bindEventService.bind(r,"click",s=>this.handleHeaderClick(s,i))}})}checkboxSelectionFormatter(e,t,i,r,s,o){if(s&&this.checkSelectableOverride(e,s,o)){let a=this.createUID()+e;return`<input id="selector${a}" type="checkbox" ${this._selectedRowsLookup[e]?'checked="checked" aria-checked="true"':'aria-checked="false"'}><label for="selector${a}"></label>`}return null}checkSelectableOverride(e,t,i){return typeof this._selectableOverride=="function"?this._selectableOverride(e,t,i):!0}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(this._checkboxColumnCellIndex===null){this._checkboxColumnCellIndex=0;let e=this._grid.getColumns();for(let t=0;t<e.length;t++)e[t].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=t)}return this._checkboxColumnCellIndex}handleDataViewSelectedIdsChanged(){let e=this._dataView.getAllSelectedFilteredIds(),t=this._dataView.getFilteredItems(),i=0;if(typeof this._selectableOverride=="function"&&e.length>0)for(let r=0;r<this._dataView.getItemCount();r++){let s=this._dataView.getItemByIdx(r),o=this._dataView.getIdPropertyName(),a=s[o];t.findIndex(u=>u[o]===a)>=0&&!this.checkSelectableOverride(r,s,this._grid)&&i++}if(this._isSelectAllChecked=e.length+i>=t.length,!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){let r=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`);r&&(r.ariaChecked=String(this._isSelectAllChecked),r.checked=this._isSelectAllChecked)}}handleClick(e,t){if(this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&e.target.type==="checkbox"){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}this.toggleRowSelectionWithEvent(e,t.row),e.stopPropagation(),e.stopImmediatePropagation()}}handleHeaderClick(e,t){if(t.column.id===this._addonOptions.columnId&&e.target.type==="checkbox"){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}let i=e.target.checked,r=i?"click.selectAll":"click.unselectAll",s=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(e,{previousSelectedRows:s,caller:r});let o=[];if(i){let a=[];for(let l=0;l<this._grid.getDataLength();l++){let u=this._grid.getDataItem(l);!u.__group&&!u.__groupTotals&&this.checkSelectableOverride(l,u,this._grid)&&a.push(l)}o=a,i=!0}if(this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages){let a=[],l=this._dataView.getFilteredItems();for(let u=0;u<l.length;u++){let h=l[u];this.checkSelectableOverride(u,h,this._grid)&&a.push(h[this._dataView.getIdPropertyName()])}this._dataView.setSelectedIds(a,{isRowBeingAdded:i})}this._grid.setSelectedRows(o,r),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(e,{rows:o,previousSelectedRows:s,caller:r}),e.stopPropagation(),e.stopImmediatePropagation()}}handleKeyDown(e,t){e.key===" "&&this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&((!this._grid.getEditorLock().isActive()||this._grid.getEditorLock().commitCurrentEdit())&&this.toggleRowSelectionWithEvent(e,t.row),e.preventDefault(),e.stopImmediatePropagation())}handleSelectedRowsChanged(){let e=this._grid.getSelectedRows(),t={},i=0,r=0,s=0,o=0;if(typeof this._selectableOverride=="function")for(s=0;s<this._grid.getDataLength();s++){let l=this._grid.getDataItem(s);this.checkSelectableOverride(r,l,this._grid)||o++}let a=[];for(r=0;r<e.length;r++){i=e[r];let l=this._grid.getDataItem(i);this.checkSelectableOverride(r,l,this._grid)?(t[i]=!0,t[i]!==this._selectedRowsLookup[i]&&(this._grid.invalidateRow(i),delete this._selectedRowsLookup[i])):a.push(i)}for(let l in this._selectedRowsLookup)l!==void 0&&this._grid.invalidateRow(+l);if(this._selectedRowsLookup=t,this._grid.render(),this._isSelectAllChecked=(e?.length??0)+o>=this._grid.getDataLength(),(!this._isUsingDataView||!this._addonOptions.applySelectOnAllPages)&&(!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow)){let l=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`);l&&(l.ariaChecked=String(this._isSelectAllChecked),l.checked=this._isSelectAllChecked)}if(a.length>0){for(let l of a){let u=e.indexOf(l);e.splice(u,1)}this._grid.setSelectedRows(e,"click.toggle")}}renderSelectAllCheckbox(e){let t=e?' checked="checked" aria-checked="true"':' aria-checked="false"';this._grid.updateColumnHeader(this._addonOptions.columnId||"",`<input id="header-selector${this._selectAll_UID}" type="checkbox"${t}><label for="header-selector${this._selectAll_UID}"></label>`,this._addonOptions.toolTip)}};var ka=class extends pr{constructor(e,t,i,r,s){super(e,i,r),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=r,this.sortService=s,this.onAfterMenuShow=new B,this.onBeforeMenuShow=new B,this.onMenuClose=new B,this.onCommand=new B,this.onColumnsChanged=new B,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._commandMenuElm=null,this._headerElm=null,this._isMenuOpen=!1,this._subMenuParentId="",this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:250,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",subMenuOpenByEvent:"mouseover",headerColumnValueExtractor:o=>o.name},this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID()??"",this.initEventHandlers(),this.init()}get addonOptions(){return this._addonOptions||{}}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.grid?.getOptions()||{}}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,La.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,(e,t)=>{if(t&&t.optionsBefore&&t.optionsAfter){let i=t.optionsBefore.frozenColumn>=0&&t.optionsAfter.frozenColumn===-1,r=t.optionsBefore.frozenColumn===-1&&t.optionsAfter.frozenColumn>=0;(i||r)&&this.recreateGridMenu()}})}init(){this._gridUid=this.grid.getUID()??"",this._userOriginalGridMenu=D({},this.sharedService.gridOptions.gridMenu),this._addonOptions=D(D(D({},this._defaults),this.getDefaultGridMenuOptions()),this.sharedService.gridOptions.gridMenu),this.sharedService.gridOptions.gridMenu=this._addonOptions;let e=this._userOriginalGridMenu.commandItems,t=this._userOriginalGridMenu&&Array.isArray(e)?e:[];this._addonOptions.commandItems=[...t,...this.addGridMenuCustomCommands(t)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this._addonOptions.commandItems,"positionOrder"),this._addonOptions.commandItems=this._addonOptions.commandItems,this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){this._bindEventService.unbindAll(),this._menuElm?.remove(),this._menuElm=null,this._gridMenuButtonElm?.remove(),this._headerElm&&(this._headerElm.style.width="100%")}createColumnPickerContainer(){this._menuElm&&(hh.call(this,this._menuElm),this._listElm=E("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(this._menuElm,"click",fh.bind(this),void 0,"parent-menu"))}createGridMenu(){let e=this._gridUid?`.${this._gridUid}`:"",t=this._addonOptions?.menuWidth||this._defaults.menuWidth,i=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left",r=this.grid.getContainerNode();if(this._headerElm=r.querySelector(`.slick-header-${i}`),this._headerElm&&this._addonOptions){if(this._headerElm.style.width=`calc(100% - ${t}px)`,(this._addonOptions.resizeOnShowHeaderRow??this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){let a=r.querySelector(`${e} .slick-headerrow`);a&&(a.style.width=`calc(100% - ${t}px)`)}(this._addonOptions.showButton??this._defaults.showButton)&&(this._gridMenuButtonElm=E("button",{className:"slick-grid-menu-button",ariaLabel:"Grid Menu"}),this._addonOptions?.iconCssClass&&this._gridMenuButtonElm.classList.add(...this._addonOptions.iconCssClass.split(" ")),this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement.firstChild),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))),this.sharedService.gridOptions.gridMenu=D(D({},this._defaults),this._addonOptions),this.translateTitleLabels(this._addonOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}createCommandMenu(e,t=0,i){let r=i?.command,s=t===1&&r?r.replace(/\s/g,""):"";s&&(this._subMenuParentId=s),t>1&&(s=this._subMenuParentId);let o=`${this.menuCssClass} slick-menu-level-${t} ${this._gridUid}`,a=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${t}${this.gridUidSelector}`);if(a){if(a.dataset.subMenuParent===s)return a;this.disposeSubMenus()}let l=E("div",{role:"menu",className:o,ariaLabel:t>1?"SubMenu":"Grid Menu"});t>0&&(l.classList.add("slick-submenu"),s&&(l.dataset.subMenuParent=s));let u={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns(),level:t};return this._commandMenuElm=this.recreateCommandList(e,l,u,i),t++,l}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(e){let t={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",t),!(typeof this._addonOptions?.onMenuClose=="function"&&this._addonOptions.onMenuClose(e,t)===!1||this.onMenuClose.notify(t,null,this).getReturnValue()===!1)){if(this._isMenuOpen=!1,typeof this.grid?.autosizeColumns=="function"){let i=this.grid.getUID()||"";this._areVisibleColumnDifferent&&i&&document.querySelector(`.${i}`)!==null&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=null}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(e,t,i,r){let s=e?.touches?.[0]??e,o=t.classList.contains("slick-submenu"),a=o?e.target.closest(".slick-menu-item"):s.target;if(a){let l=i||this._gridMenuButtonElm,u=at(i),h=at(a),f=r??this._addonOptions,m=getComputedStyle(l),v=parseInt(m?.width??this._defaults?.menuWidth,10),w=t?.offsetWidth??0,S=f?.contentMinWidth??this._defaults.contentMinWidth??0,P=(S>w?S:w)||0,R=u?.top??0,M=u?.right??0,x,L;if(o?(L=h?.top??0,x=h?.left??0):(L=R+l.offsetHeight,x=f?.dropSide==="right"?M-v:M-P),o){let Z=t?.clientHeight||0,{bottom:We,top:it}=oo(a);(We<Z&&it>We?"top":"bottom")==="top"?(t.classList.remove("dropdown"),t.classList.add("dropup"),L-=Z-a.clientHeight):(t.classList.remove("dropup"),t.classList.add("dropdown"))}let z=this.grid.getGridPosition(),Y=x+Number(w);o&&(Y+=a.clientWidth);let U=document.documentElement.clientWidth;(Y>=z.width||Y>=U?"left":"right")==="left"||!o&&f?.dropSide==="left"?(t.classList.remove("dropright"),t.classList.add("dropleft"),o&&(x-=Number(w))):(t.classList.remove("dropleft"),t.classList.add("dropright"),o&&(x+=a.offsetWidth)),t.style.top=`${L}px`,t.style.left=`${x}px`,S>0&&(t.style.minWidth=`${S}px`),t.style.opacity="1",t.style.display="block"}}openGridMenu(){let e=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!1});Object.defineProperty(e,"target",{writable:!0,configurable:!0,value:E("button",{className:"slick-grid-menu-button"})}),this.showGridMenu(e)}showGridMenu(e,t){let i=e?.touches?.[0]??e;if(e.preventDefault(),De(this._menuElm),this._menuElm?.remove(),this._addonOptions){let r={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},s=D(D({},this._addonOptions),t);if(s&&!this.extensionUtility.runOverrideFunctionWhenExists(s.menuUsabilityOverride,r)||typeof e.stopPropagation=="function"&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",r),typeof s?.onBeforeMenuShow=="function"&&s.onBeforeMenuShow(e,r)===!1||this.onBeforeMenuShow.notify(r,null,this).getReturnValue()===!1))return;this._menuElm=this.createCommandMenu(this._addonOptions?.commandItems??[]),this.createColumnPickerContainer(),La.call(this),this._columnCheckboxes=[],ph.call(this,s),document.body.appendChild(this._menuElm),this._menuElm.style.opacity="0";let o=(s?.marginBottom!==void 0?s.marginBottom:this._defaults.marginBottom)||0;this._menuElm.style.minHeight=tn(s?.minHeight,""),s?.height!==void 0?this._menuElm.style.height=tn(s.height,""):this._menuElm.style.maxHeight=tn(s?.maxHeight,`${window.innerHeight-i.clientY-o}px`);let a=e.target.nodeName==="BUTTON"?e.target:e.target.querySelector("button");a||(a=e.target.parentElement),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm),this.repositionMenu(e,this._menuElm,a,s),this._isMenuOpen=!0,this.pubSubService.publish("onGridMenuAfterMenuShow",r),typeof s?.onAfterMenuShow=="function"&&s.onAfterMenuShow(e,r),this.onAfterMenuShow.notify(r,null,this)}}translateGridMenu(){if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";let e=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...e,...this.addGridMenuCustomCommands(e)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions?.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._addonOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name")}}translateTitleLabels(e){e&&(e.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),e.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),e.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(e){let t=this.gridOptions.backendServiceApi||null,i=[],r=this.gridOptions,s=li(r),o=this._addonOptions?.commandLabels;if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearFrozenColumnsCommand){let l="clear-pinning";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconClearFrozenColumnsCommand||"fa fa-times",titleKey:`${s}${o?.clearFrozenColumnsCommandKey??"CLEAR_PINNING"}`,disabled:!1,command:l,positionOrder:52})}if(this.gridOptions&&this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearAllFiltersCommand){let l="clear-filter";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconClearAllFiltersCommand||"fa fa-filter text-danger",titleKey:`${s}${o?.clearAllFiltersCommandKey??"CLEAR_ALL_FILTERS"}`,disabled:!1,command:l,positionOrder:50})}if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideToggleFilterCommand){let l="toggle-filter";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconToggleFilterCommand||"fa fa-random",titleKey:`${s}${o?.toggleFilterCommandKey??"TOGGLE_FILTER_ROW"}`,disabled:!1,command:l,positionOrder:53})}if(t&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideRefreshDatasetCommand){let l="refresh-dataset";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconRefreshDatasetCommand||"fa fa-refresh",titleKey:`${s}${o?.refreshDatasetCommandKey??"REFRESH_DATASET"}`,disabled:!1,command:l,positionOrder:57})}}if(this.gridOptions.showPreHeaderPanel&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideTogglePreHeaderCommand){let l="toggle-preheader";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconTogglePreHeaderCommand||"fa fa-random",titleKey:`${s}${o?.togglePreHeaderCommandKey??"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:l,positionOrder:53})}if(this.gridOptions.enableSorting&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearAllSortingCommand){let l="clear-sorting";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconClearAllSortingCommand||"fa fa-unsorted text-danger",titleKey:`${s}${o?.clearAllSortingCommandKey??"CLEAR_ALL_SORTING"}`,disabled:!1,command:l,positionOrder:51})}if(this.gridOptions?.enableTextExport&&this._addonOptions&&!this._addonOptions.hideExportCsvCommand){let l="export-csv";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconExportCsvCommand||"fa fa-download",titleKey:`${s}${o?.exportCsvCommandKey??"EXPORT_TO_CSV"}`,disabled:!1,command:l,positionOrder:54})}if(this.gridOptions&&this.gridOptions.enableExcelExport&&this._addonOptions&&!this._addonOptions.hideExportExcelCommand){let l="export-excel";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${s}${o?.exportExcelCommandKey??"EXPORT_TO_EXCEL"}`,disabled:!1,command:l,positionOrder:55})}if(this.gridOptions?.enableTextExport&&this._addonOptions&&!this._addonOptions.hideExportTextDelimitedCommand){let l="export-text-delimited";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===l)||i.push({iconCssClass:this._addonOptions.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${s}${o?.exportTextDelimitedCommandKey??"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:l,positionOrder:56})}let a=this._addonOptions?.commandItems||[];return this.gridOptions&&this._addonOptions&&(Array.isArray(i)&&i.length>0||Array.isArray(a)&&a.length>0)&&(this._addonOptions.commandTitle=this._addonOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu")),i}executeGridMenuInternalCustomCommands(e,t){let i=this.sharedService?.externalRegisteredResources||[];if(t?.command)switch(t.command){case"clear-pinning":let r=[...this.sharedService.visibleColumns],s={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(s),this.sharedService.gridOptions.frozenColumn=s.frozenColumn,this.sharedService.gridOptions.frozenRow=s.frozenRow,this.sharedService.gridOptions.frozenBottom=s.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=s.enableMouseWheelScrollHandler,Array.isArray(r)&&this.grid.setColumns(r),this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":let a=i.find(m=>m.className==="TextExportService");a?.exportToFile?a.exportToFile({delimiter:Ln.comma,format:Ji.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"export-excel":let l=i.find(m=>m.className==="ExcelExportService");l?.exportToExcel?l.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");break;case"export-text-delimited":let u=i.find(m=>m.className==="TextExportService");u?.exportToFile?u.exportToFile({delimiter:Ln.tab,format:Ji.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"toggle-filter":let h=this.gridOptions?.showHeaderRow??!1;h=!h,this.grid.setHeaderRowVisibility(h),h===!0&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":let f=this.gridOptions?.showPreHeaderPanel??!1;this.grid.setPreHeaderPanelVisibility(!f);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset();break;default:break}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"fa fa-bars",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(e){if(this.menuElement){let t=!1,i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this._isMenuOpen&&this.menuElement!==e.target&&!t&&!e.defaultPrevented||e.target.className==="close"&&i)&&this.hideMenu(e)}}handleMenuItemCommandClick(e,t,i,r=0){if(i!=="divider"&&!i.disabled&&!i.divider)if((i.command||"")&&!i.commandItems){let o={grid:this.grid,command:i.command,item:i,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(e,o),this.pubSubService.publish("onGridMenuCommand",o),typeof this._addonOptions?.onCommand=="function"&&this._addonOptions.onCommand(e,o),this.onCommand.notify(o,null,this),typeof i.action=="function"&&i.action.call(this,e,o),!this._addonOptions?.leaveOpen&&!e.defaultPrevented&&this.hideMenu(e),e.preventDefault(),e.stopPropagation()}else i.commandItems&&this.repositionSubMenu(e,i,r)}handleMenuItemMouseOver(e,t,i,r=0){i!=="divider"&&!i.disabled&&!i.divider&&(i.commandItems?this.repositionSubMenu(e,i,r):r===0&&this.disposeSubMenus())}recreateCommandList(e,t,i,r){let s=i.level||0;if(e.length>0){let o=E("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},t);if(s===0){this.populateCommandOrOptionTitle("command",this.addonOptions,o,s);let a=t.querySelector(".slick-command-header")??E("div",{className:"slick-command-header"});a.classList.add("with-close"),dh.call(this,a),o.appendChild(a)}return r&&s>0&&this.addSubMenuTitleWhenExists(r,o),this.populateCommandOrOptionItems("command",this._addonOptions,o,e,i,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),o}return null}repositionSubMenu(e,t,i){let r=t?.commandItems||[],s=this.createCommandMenu(r,i+1,t);s.style.display="block",document.body.appendChild(s),this.repositionMenu(e,s)}};function dh(n){let t=E("button",{type:"button",className:"close",ariaLabel:"Close",textContent:"\xD7",dataset:{dismiss:this instanceof po?"slick-column-picker":"slick-grid-menu"}});n.appendChild(t)}function hh(n){let e=this;e.addonOptions?.columnTitle&&(e._columnTitleElm=E("div",{className:"slick-menu-title",textContent:e.addonOptions?.columnTitle??e._defaults.columnTitle},n))}function fh(n){let e=this,t=e instanceof po?"columnPicker":"gridMenu";if(n.target.dataset.option==="autoresize"){let i=e.getVisibleColumns();n.target.ariaChecked=String(n.target.checked);let r=n.target.checked;e.grid.setOptions({forceFitColumns:r}),e.grid.setColumns(i);return}if(n.target.dataset.option==="syncresize"){n.target.ariaChecked=String(n.target.checked),e.grid.setOptions({syncColumnCellResize:!!n.target.checked});return}if(n.target.type==="checkbox"){e._areVisibleColumnDifferent=!0,n.target.ariaChecked=String(n.target.checked);let i=n.target.checked,r=n.target.dataset.columnid||"",s=[];if(e._columnCheckboxes.forEach((l,u)=>{l.checked&&s.push(e.columns[u])}),!s.length){n.target.checked=!0;return}if(e.grid.setColumns(s),(!e.sharedService.visibleColumns||Array.isArray(s)&&s.length!==e.sharedService.visibleColumns.length)&&(e.sharedService.visibleColumns=s),e.gridOptions.enableRowSelection&&i){let l=e.grid.getSelectedRows();e.grid.setSelectedRows(l)}let o=e.gridOptions.frozenColumn??-1;o>=0&&e.extensionUtility.readjustFrozenColumnIndexWhenNeeded(o,e.columns,s);let a={columnId:r,showing:i,allColumns:e.columns,visibleColumns:s,columns:s,grid:e.grid};e.pubSubService.publish(`on${ws(t)}ColumnsChanged`,a),typeof e.addonOptions?.onColumnsChanged=="function"&&e.addonOptions.onColumnsChanged(n,a),e.onColumnsChanged.notify(a,null,e)}}function ph(n){let e=this,t=e instanceof ka?"gridmenu-":"";for(let i of e.columns){let r=i.id,s=document.createElement("li");i.excludeFromColumnPicker&&(s.className="hidden");let o=E("input",{type:"checkbox",id:`${e._gridUid}-${t}colpicker-${r}`,dataset:{columnid:`${r}`}});e.grid.getColumnIndex(r)>=0&&(o.ariaChecked="true",o.checked=!0),s.appendChild(o),e._columnCheckboxes.push(o);let u=(typeof n?.headerColumnValueExtractor=="function"?n.headerColumnValueExtractor:e._defaults.headerColumnValueExtractor)(i,e.gridOptions),h=document.createElement("label");h.htmlFor=`${e._gridUid}-${t}colpicker-${r}`,this.grid.applyHtmlCode(h,u),s.appendChild(h),e._listElm.appendChild(s)}if((!n.hideForceFitButton||!n.hideSyncResizeButton)&&e._listElm.appendChild(document.createElement("hr")),!n?.hideForceFitButton){let i=document.createElement("li");i.appendChild(E("input",{type:"checkbox",id:`${e._gridUid}-${t}colpicker-forcefit`,ariaChecked:String(e.gridOptions.forceFitColumns),checked:e.gridOptions.forceFitColumns,dataset:{option:"autoresize"}})),i.appendChild(E("label",{htmlFor:`${e._gridUid}-${t}colpicker-forcefit`,textContent:n?.forceFitTitle??""})),e._listElm.appendChild(i)}if(!n?.hideSyncResizeButton){let i=document.createElement("li");i.appendChild(E("input",{type:"checkbox",id:`${e._gridUid}-${t}colpicker-syncresize`,ariaChecked:String(e.gridOptions.syncColumnCellResize),checked:e.gridOptions.syncColumnCellResize,dataset:{option:"syncresize"}})),i.appendChild(E("label",{htmlFor:`${e._gridUid}-${t}colpicker-syncresize`,textContent:n?.syncResizeTitle??""})),e._listElm.appendChild(i)}}function La(){let n=this,e=n.grid.getColumns().slice(0),t=new Array(n.columns.length);for(let i=0;i<t.length;i++)n.grid.getColumnIndex(n.columns[i].id)===void 0?t[i]=n.columns[i]:t[i]=e.shift();n._columns=t}var po=class{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.onColumnsChanged=new B,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._menuElm=null,this._columnCheckboxes=[],this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:200,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:r=>r.name},this._bindEventService=new qe,this._eventHandler=new Ce,this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID?.()??"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.sharedService.gridOptions??{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){this._gridUid=this.grid.getUID()??"",this.gridOptions.columnPicker=D(D({},this._defaults),this.gridOptions.columnPicker),this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,La.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),void 0,"body"),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this),void 0,"body")}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this.disposeMenu()}disposeMenu(){this._bindEventService.unbindAll("parent-menu"),this._listElm?.remove(),this._menuElm?.remove(),this._menuElm=null}createPickerMenu(){let e=E("div",{ariaExpanded:"true",className:`slick-column-picker ${this._gridUid}`,role:"menu"});return La.call(this),hh.call(this,e),dh.call(this,e),this._listElm=E("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(e,"click",fh.bind(this),void 0,"parent-menu"),document.body.appendChild(e),e}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.translateTitleLabels(this.addonOptions)}handleBodyMouseDown(e){(this._menuElm!==e.target&&!this._menuElm?.contains(e.target)||e.target.className==="close"&&e.target.closest(".slick-column-picker"))&&this.disposeMenu()}handleHeaderContextMenu(e){e.preventDefault(),De(this._listElm),this._columnCheckboxes=[],this._menuElm=this.createPickerMenu(),ph.call(this,this.addonOptions),document.body.appendChild(this._menuElm),this.repositionMenu(e)}repositionMenu(e){let t=e?.touches?.[0]??e;this._menuElm&&(this._menuElm.style.top=`${t.pageY-10}px`,this._menuElm.style.left=`${t.pageX-10}px`,this._menuElm.style.minHeight=tn(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=tn(this.addonOptions.maxHeight,`${window.innerHeight-t.clientY}px`),this._menuElm.style.display="block",this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm))}translateTitleLabels(e){e&&(e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"))}};var mh=dn(vs());var Va=(n,e,t,i,r,s)=>{let o=i.params||{};if(!o.formatters||!Array.isArray(o.formatters))throw new Error(`[Slickgrid-Universal] The multiple formatter requires the "formatters" to be provided as a column params.
    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }`);let a=o.formatters,l=t;return a.forEach((u,h)=>{if(typeof u!="function")throw new Error(`[Slickgrid-Universal] the "params.formatters" at index(${h}) to be used by "Formatters.multiple" is invalid, please verify all formatter functions.`);l=u.call(void 0,n,e,l,i,r,s)}),l};function vw(n,e){if(Array.isArray(n)){for(let t of n)if(t.editor)if(t.formatter&&t.formatter!==Va&&t.formatter!==e){let i=t.formatter;t.formatter=Va,t.params=me(D({},t.params),{formatters:[i,e]})}else t.formatter&&t.formatter===Va&&t.params?t.params.formatters.findIndex(i=>i===e)===-1&&(t.params.formatters=[...t.params.formatters,e]):t.formatter=e}}function tt(n,e,t,i){let r,s,o="",a="";switch(t){case"currency":r=V.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL,s=V.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL;break;case"decimal":r=V.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL,s=V.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL;break;case"percent":r=V.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL,s=V.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL;break;default:break}let l=e&&typeof e.getOptions=="function"?e.getOptions():{},u=Br("minDecimal",n,l,r),h=Br("maxDecimal",n,l,s),f=Br("decimalSeparator",n,l,V.DEFAULT_NUMBER_DECIMAL_SEPARATOR),m=Br("thousandSeparator",n,l,V.DEFAULT_NUMBER_THOUSAND_SEPARATOR),v=Br("displayNegativeNumberWithParentheses",n,l,V.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET),w=Br("currencyPrefix",n,l,""),S=Br("currencySuffix",n,l,"");return i==="cell"&&(o=Br("numberPrefix",n,l,""),a=Br("numberSuffix",n,l,"")),{minDecimal:u,maxDecimal:h,decimalSeparator:f,thousandSeparator:m,wrapNegativeNumber:v,currencyPrefix:w,currencySuffix:S,numberPrefix:o,numberSuffix:a}}function Br(n,e,t,i){let r=e&&e.params;return r&&r.hasOwnProperty(n)?r[n]:t?.formatterOptions?.hasOwnProperty(n)?t.formatterOptions[n]:i}function Dt(n,e){let t=en(n);return(i,r,s,o,a,l)=>{let h=(l&&typeof l.getOptions=="function"?l.getOptions():{})?.formatterOptions?.dateSeparator??e,f=o?.type??b.date,m=en(f),v=o?.params?.parseDateAsUtc??!1,w=(0,mh.default)(s,m,!1).isValid(),S=s;if(s&&w&&(S=v?mh.default.utc(s).format(t):(0,mh.default)(s).format(t)),S&&h!==e){let P=new RegExp(e,"ig");S=S.replace(P,h)}return S}}function _w(n,e,t,i,r,s){let o=!1;t?.hasOwnProperty("exportWithFormatter")?o=!!t.exportWithFormatter:s?.hasOwnProperty("exportWithFormatter")&&(o=!!s.exportWithFormatter);let a;i&&t.exportCustomFormatter?a=t.exportCustomFormatter:o&&t.formatter&&(a=t.formatter);let l=mo(a,n,e,t,i,r);return s?.sanitizeDataExport&&typeof l=="string"?ti(l):l}function mo(n,e,t,i,r,s){let o="",l=i.field||i.id||"";if(typeof i.field=="string"&&i.field.indexOf(".")>0){let h=i.field.split(".");l=h.length>0?h[0]:i.field}let u=r?.hasOwnProperty(l)?r[l]:null;if(typeof n=="function"){let h=n(e,t,u,i,r,s),f=bs(h)?h:h.html||h.text;f instanceof DocumentFragment?o=Eg(f):o=f instanceof HTMLElement?f.innerHTML:f}else o=r?.hasOwnProperty(l)?u:"";return o==null&&(o=""),typeof o=="object"&&!(o instanceof Date)&&Object.entries(o).length===0&&(o=""),o}var gh=class extends Na{constructor(e,t,i,r){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.treeDataService=r,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[],subMenuOpenByEvent:"mouseover"},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(i.gridOptions.contextMenu)}init(e){this._addonOptions=D(D({},this._defaults),e);let t=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...t,...this.addMenuCustomCommands(t)],this._addonOptions=D({},this._addonOptions),this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleOnContextMenu.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){let e=this.sharedService?.gridOptions??{},t=this.sharedService.gridOptions.contextMenu;if(t&&e?.enableTranslate){let i=t.commandItems||[],r=t.optionItems||[];t.commandTitleKey&&(t.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(t.commandTitleKey,"TEXT_COMMANDS")||t.commandTitle),t.optionTitleKey&&(t.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(t.optionTitleKey,"TEXT_COMMANDS")||t.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(i,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(r,"optionItems")}}handleOnContextMenu(e,t){this.disposeAllMenus();let i=this.grid.getCellFromEvent(e);if(i){let r=this.grid.getDataItem(i.row),s=this.grid.getColumns()[i.cell];if(t=t||{},t.cell=i.cell,t.row=i.row,t.column=s,t.dataContext=r,t.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,t))return;this._menuElm=this.createParentMenu(e),this._menuElm&&e.preventDefault(),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}addMenuCustomCommands(e){let t=[],i=this.sharedService&&this.sharedService.gridOptions||{},r=i?.contextMenu,s=this.sharedService?.dataView,o=li(i);if(r&&!r.hideCopyCellValueCommand){let a="copy";e.some(l=>l!=="divider"&&l.hasOwnProperty("command")&&l.command===a)||t.push({iconCssClass:r.iconCopyCellValueCommand||"fa fa-clone",titleKey:`${o}COPY`,disabled:!1,command:a,positionOrder:50,action:(l,u)=>{this.copyToClipboard(u)},itemUsabilityOverride:l=>{let u=l?.column,h=l?.dataContext;if(typeof u.queryFieldNameGetterFn=="function"){let f=Cs(u,h,"");if(f!==""&&f!==void 0)return!0}else if(u&&h.hasOwnProperty(u.field))return h[u.field]!==""&&h[u.field]!==null&&h[u.field]!==void 0;return!1}})}if(i?.enableTextExport&&r&&!r.hideExportCsvCommand){let a="export-csv";e.some(l=>l!=="divider"&&l.hasOwnProperty("command")&&l.command===a)||t.push({iconCssClass:r.iconExportCsvCommand||"fa fa-download",titleKey:`${o}EXPORT_TO_CSV`,disabled:!1,command:a,positionOrder:51,action:()=>{let u=(this.sharedService?.externalRegisteredResources||[]).find(h=>h.className==="TextExportService");if(u?.exportToFile)u.exportToFile({delimiter:Ln.comma,format:Ji.csv});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };")}})}if(i&&i.enableExcelExport&&r&&!r.hideExportExcelCommand){let a="export-excel";e.some(l=>l!=="divider"&&l.hasOwnProperty("command")&&l.command===a)||t.push({iconCssClass:r.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${o}EXPORT_TO_EXCEL`,disabled:!1,command:a,positionOrder:52,action:()=>{let u=(this.sharedService?.externalRegisteredResources||[]).find(h=>h.className==="ExcelExportService");if(u?.exportToExcel)u.exportToExcel();else throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };")}})}if(i?.enableTextExport&&r&&!r.hideExportTextDelimitedCommand){let a="export-text-delimited";e.some(l=>l!=="divider"&&l.hasOwnProperty("command")&&l.command===a)||t.push({iconCssClass:r.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${o}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:a,positionOrder:53,action:()=>{let u=(this.sharedService?.externalRegisteredResources||[]).find(h=>h.className==="TextExportService");if(u?.exportToFile)u.exportToFile({delimiter:Ln.tab,format:Ji.txt});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };")}})}if(i&&(i.enableGrouping||i.enableDraggableGrouping||i.enableTreeData)){if(r&&!r.hideCopyCellValueCommand&&t.push({divider:!0,command:"",positionOrder:54}),i&&!i.enableTreeData&&r&&!r.hideClearAllGrouping){let a="clear-grouping";e.some(l=>l!=="divider"&&l.hasOwnProperty("command")&&l.command===a)||t.push({iconCssClass:r.iconClearGroupingCommand||"fa fa-times",titleKey:`${o}CLEAR_ALL_GROUPING`,disabled:!1,command:a,positionOrder:55,action:()=>{s.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{let l=s&&s.getGrouping&&s.getGrouping();return Array.isArray(l)&&l.length>0}})}if(i&&r&&!r.hideCollapseAllGroups){let a="collapse-all-groups";e.some(l=>l!=="divider"&&l.hasOwnProperty("command")&&l.command===a)||t.push({iconCssClass:r.iconCollapseAllGroupsCommand||"fa fa-compress",titleKey:`${o}COLLAPSE_ALL_GROUPS`,disabled:!1,command:a,positionOrder:56,action:()=>{i.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):s.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(i.enableTreeData)return!0;let l=s&&s.getGrouping&&s.getGrouping();return Array.isArray(l)&&l.length>0}})}if(i&&r&&!r.hideExpandAllGroups){let a="expand-all-groups";e.some(l=>l!=="divider"&&l.hasOwnProperty("command")&&l.command===a)||t.push({iconCssClass:r.iconExpandAllGroupsCommand||"fa fa-expand",titleKey:`${o}EXPAND_ALL_GROUPS`,disabled:!1,command:a,positionOrder:57,action:()=>{i.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):s.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(i.enableTreeData)return!0;let l=s&&s.getGrouping&&s.getGrouping();return Array.isArray(l)&&l.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(t),t}copyToClipboard(e){try{if(e&&e.grid&&e.command){let t=this.sharedService?.gridOptions??{},i=e?.cell??0,r=e?.row??0,s=e?.column,o=e?.dataContext,a=this.sharedService?.slickGrid,l=t&&(t.excelExportOptions||t.textExportOptions),u=_w(r,i,s,o,a,l);typeof s.queryFieldNameGetterFn=="function"&&(u=Cs(s,o,""));let h=u;typeof u=="string"&&(h=u.replace(/^([·|⮞|⮟]\s*)|([·|⮞|⮟])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());let f=document.createElement("textarea");f&&document.body&&(f.style.position="absolute",f.style.opacity="0",f.value=h,document.body.appendChild(f),f.select(),document.execCommand("copy",!1,h)&&f.remove())}}catch{}}sortMenuItems(){let e=this.sharedService?.gridOptions?.contextMenu;e&&(this.extensionUtility.sortItems(e.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(e.optionItems||[],"positionOrder"))}};var vh=class{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._gridColumns=[],this._gridUid="",this._reorderedColumns=[],this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideGroupSortIcons:!1,hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this._bindingEventService=new qe,this._eventHandler=new Ce,this.onGroupChanged=new B}get addonOptions(){return this._addonOptions}get dataView(){return this.grid?.getData()??{}}get dropboxElement(){return this._dropzoneElm}get droppableInstance(){return this._droppableInstance}get sortableLeftInstance(){return this._sortableLeftInstance}get sortableRightInstance(){return this._sortableRightInstance}get eventHandler(){return this._eventHandler}get grid(){return this._grid??this.sharedService.slickGrid??{}}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridContainer(){return this.grid.getContainerNode()}init(e,t){if(this._addonOptions=D(D({},this._defaults),t),this._grid=e,e){if(this._gridUid=e.getUID(),this._gridColumns=e.getColumns(),this._dropzoneElm=e.getPreHeaderPanel(),this._dropzoneElm.classList.add("slick-dropzone"),!this._addonOptions.hideToggleAllButton){this._groupToggler=E("div",{className:"slick-group-toggle-all",title:this._addonOptions.toggleAllPlaceholderText??"",style:{display:"none"}});let i=E("span",{className:"slick-group-toggle-all-icon"},this._groupToggler);this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=this._addonOptions.toggleAllPlaceholderText??"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild(E("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropzoneElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",()=>this.toggleGroupToggler(i,!0,!1)),this.pubSubService.subscribe("onContextMenuExpandAllGroups",()=>this.toggleGroupToggler(i,!1,!1)))}this._dropzonePlaceholderElm=E("div",{className:"slick-draggable-dropzone-placeholder"},this._dropzoneElm),this.gridOptions.enableTranslate&&this._addonOptions?.dropPlaceHolderTextKey&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropzonePlaceholderElm.textContent=this._addonOptions?.dropPlaceHolderText??this._defaults.dropPlaceHolderText??"",this.setupColumnDropbox(),this._eventHandler.subscribe(e.onHeaderCellRendered,(i,r)=>{let s=r.node;if(!Sd(r.column?.grouping)&&s&&(s.style.cursor="pointer",this._addonOptions.groupIconCssClass)){let o=E("span",{className:"slick-column-groupable"},s);this._addonOptions.groupIconCssClass&&o.classList.add(...this._addonOptions.groupIconCssClass.split(" "))}}),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",()=>this.clearDroppedGroups()));for(let i of this._gridColumns){let r=i.field;e.updateColumnHeader(r)}}return this}dispose(){this.destroySortableInstances(),this._droppableInstance?.el&&this._droppableInstance?.destroy(),this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),De(this.gridContainer.querySelector(`.${this.gridUid} .slick-preheader-panel`))}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");let e=this._dropzoneElm.querySelectorAll(".slick-dropped-grouping");for(let t of Array.from(e))this._dropzoneElm.querySelector(".slick-groupby-remove")?.remove(),t?.remove();this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}destroySortableInstances(){this._sortableLeftInstance?.el&&this._sortableLeftInstance?.destroy(),this._sortableRightInstance?.el&&this._sortableRightInstance?.destroy()}setAddonOptions(e){this._addonOptions=D(D({},this._addonOptions),e)}setColumns(e){this._gridColumns=e}setDroppedGroups(e){this._dropzonePlaceholderElm.style.display="none";let t=Array.isArray(e)?e:[e];for(let i of t){let r=this.grid.getHeaderColumn(i);this.handleGroupByDrop(this._dropzoneElm,r)}}setupColumnReorder(e,t,i,r,s,o,a,l,u){this.destroySortableInstances();let h=e.getPreHeaderPanel(),f=h.querySelector(".slick-draggable-dropzone-placeholder"),m=h.querySelector(".slick-group-toggle-all"),v={animation:50,chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:()=>{f&&(f.style.display="inline-block"),h.querySelectorAll(".slick-dropped-grouping").forEach(S=>S.style.display="none"),m&&(m.style.display="none")},onEnd:w=>{h?.classList.remove("slick-dropzone-hover"),f?.parentElement?.classList.remove("slick-dropzone-placeholder-hover");let S=h.querySelectorAll(".slick-dropped-grouping");if(S.forEach(x=>x.style.display="flex"),S.length&&(f&&(f.style.display="none"),m&&(m.style.display="inline-block")),!e.getEditorLock().commitCurrentEdit())return;let P=this.sortableLeftInstance?.toArray()??[];if(t.length>1){let x=this._sortableRightInstance?.toArray()??[];for(let L of x)P.push(L)}let R=[],M=e.getColumns();for(let x of P)R.push(M[a.call(e,x)]);r.call(e,R),u.call(e,e.onColumnsReordered,{grid:e}),w.stopPropagation(),s.call(e)}};return this._sortableLeftInstance=fr.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-left`),v),this._sortableRightInstance=fr.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-right`),v),{sortableLeftInstance:this._sortableLeftInstance,sortableRightInstance:this._sortableRightInstance}}addColumnGroupBy(e){this.columnsGroupBy.push(e),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(e,t,i,r){this._bindingEventService.bind(t,"click",()=>{let s=this._bindingEventService.boundedEvents.filter(o=>o.element===t);for(let o of s)this._bindingEventService.unbind(o.element,"click",o.listener);this.removeGroupBy(e,i,r)})}addGroupSortClickHandler(e,t){let{grouping:i,type:r}=e;this._bindingEventService.bind(t,"click",()=>{if(this.toggleGroupAll(e,!1),i){let s=i.sortAsc?st.desc:st.asc;i.comparer=(o,a)=>Fr(r||"text",o.value,a.value,s,e,this.gridOptions),this.getGroupBySortIcon(t,!i.sortAsc),this.updateGroupBy("sort-group"),i.sortAsc=!i.sortAsc,this.grid.invalidate()}})}getGroupBySortIcon(e,t=!0){t?this._addonOptions.sortAscIconCssClass?(e.classList.remove(...this._addonOptions.sortDescIconCssClass?.split(" ")??""),e.classList.add(...this._addonOptions.sortAscIconCssClass.split(" "))):(e.classList.add("slick-groupby-sort-asc-icon"),e.classList.remove("slick-groupby-sort-desc-icon")):this._addonOptions.sortDescIconCssClass?(e.classList.remove(...this._addonOptions.sortAscIconCssClass?.split(" ")??""),e.classList.add(...this._addonOptions.sortDescIconCssClass.split(" "))):this._addonOptions.sortDescIconCssClass||(e.classList.add("slick-groupby-sort-desc-icon"),e.classList.remove("slick-groupby-sort-asc-icon"))}handleGroupByDrop(e,t){let i=t.getAttribute("data-id")?.replace(this._gridUid,""),r=!0;for(let s of this.columnsGroupBy)s.id===i&&(r=!1);if(r){for(let s of this._gridColumns)if(s.id===i&&s.grouping&&!Sd(s.grouping)){let o=t.querySelector(".slick-column-name"),a=E("div",{id:`${this._gridUid}_${s.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${s.id}`}});E("div",{className:"slick-dropped-grouping-title",style:{display:"inline-flex"},textContent:o?o.textContent:t.textContent},a);let l=E("div",{className:"slick-groupby-remove"});this._addonOptions.deleteIconCssClass&&l.classList.add(...this._addonOptions.deleteIconCssClass.split(" ")),this._addonOptions.deleteIconCssClass||l.classList.add("slick-groupby-remove-icon");let u;this._addonOptions?.hideGroupSortIcons!==!0&&s.sortable&&(s.grouping?.sortAsc===void 0&&(s.grouping.sortAsc=!0),u=E("div",{className:"slick-groupby-sort"},a),this.getGroupBySortIcon(u,s.grouping.sortAsc)),a.appendChild(l),a.appendChild(document.createElement("div")),e.appendChild(a),this._groupToggler&&this.columnsGroupBy.length===0&&this.toggleGroupAll(s),this.addColumnGroupBy(s),this.addGroupByRemoveClickHandler(s.id,l,t,a),u&&this.addGroupSortClickHandler(s,u)}this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-block")}}toggleGroupAll({grouping:e},t){let i=this._groupToggler?.querySelector(".slick-group-toggle-all-icon");t===!0||e?.collapsed?(i?.classList.add("collapsed"),i?.classList.remove("expanded")):(i?.classList.add("expanded"),i?.classList.remove("collapsed"))}removeFromArray(e,t){if(Array.isArray(e)){let i=e.findIndex(r=>r.id===t.id);i>=0&&e.splice(i,1)}return e}removeGroupBy(e,t,i){i.remove();let r=[];this._gridColumns.forEach(s=>r[s.id]=s),this.removeFromArray(this.columnsGroupBy,r[e]),this.columnsGroupBy.length===0&&(this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}addDragOverDropzoneListeners(){let e=this._dropzoneElm.querySelector(".slick-draggable-dropzone-placeholder");e&&this._dropzoneElm&&(this._bindingEventService.bind(e,"dragover",t=>t.preventDefault()),this._bindingEventService.bind(e,"dragenter",()=>this._dropzoneElm.classList.add("slick-dropzone-hover")),this._bindingEventService.bind(e,"dragleave",()=>this._dropzoneElm.classList.remove("slick-dropzone-hover")))}setupColumnDropbox(){let e=this._dropzoneElm;this._droppableInstance=fr.create(e,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:t=>{let i=t.item;i.getAttribute("id")?.replace(this._gridUid,"")&&this.handleGroupByDrop(e,fr.utils.clone(t.item)),i.parentNode?.removeChild(i)},onUpdate:()=>{let t=this._droppableInstance?.toArray()??[],i=[];for(let r of t)for(let s of this.columnsGroupBy)if(s.id===r){i.push(s);break}this.columnsGroupBy=i,this.updateGroupBy("sort-group")}}),this.addDragOverDropzoneListeners(),this._groupToggler&&this._bindingEventService.bind(this._groupToggler,"click",t=>{let i=t.target.classList.contains("slick-group-toggle-all-icon")?t.target:t.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(i,i?.classList.contains("expanded"))})}toggleGroupToggler(e,t=!0,i=!0){e&&(t===!0?(e.classList.add("collapsed"),e.classList.remove("expanded"),i&&this.dataView.collapseAllGroups()):(e.classList.remove("collapsed"),e.classList.add("expanded"),i&&this.dataView.expandAllGroups()))}updateGroupBy(e){if(this.columnsGroupBy.length===0){this.dataView.setGrouping([]),this._dropzonePlaceholderElm.style.display="inline-block",this.triggerOnGroupChangedEvent({caller:e,groupColumns:[]});return}let t=[];this.columnsGroupBy.forEach(i=>t.push(i.grouping)),this.dataView.setGrouping(t),this._dropzonePlaceholderElm.style.display="none",this.triggerOnGroupChangedEvent({caller:e,groupColumns:t})}triggerOnGroupChangedEvent(e){this._addonOptions&&typeof this._addonOptions.onGroupChanged=="function"&&this._addonOptions.onGroupChanged(new Xe,e),this.onGroupChanged.notify(e)}};var _h=class extends pr{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new qe,this._eventHandler=new Ce,this.init(i.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(e){this._addonOptions=D(D({},this._defaults),e),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach(e=>e.remove())}handleHeaderCellRendered(e,t){let i=t.column;if(i.header?.buttons&&Array.isArray(i.header.buttons)){let r=i.header.buttons.length;for(;r--;){let s=i.header.buttons[r],o=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,s,t,this.handleButtonClick.bind(this));o&&s.handler&&!s.disabled&&this._bindEventService.bind(o,"click",a=>s.handler.call(this,a)),o&&(this._buttonElms.push(o),t.node.appendChild(o))}}}handleBeforeHeaderCellDestroy(e,t){if(t.column.header?.buttons&&this._addonOptions?.buttonCssClass){let r=(this._addonOptions?.buttonCssClass||"").replace(/(\s+)/g,".");r&&t.node.querySelectorAll(`.${r}`).forEach(s=>s.remove())}}handleButtonClick(e,t,i,r,s){if(i.command&&!i.disabled){let o=i.command||"",a={grid:this.grid,column:s,button:i};o&&(a.command=o),typeof i.action=="function"&&!i.disabled&&i.action.call(this,e,a),o!==null&&!i.disabled&&this._addonOptions?.onCommand&&(this.pubSubService.publish("onHeaderButtonCommand",a),this._addonOptions.onCommand(e,a),s?.id&&this.grid.updateColumnHeader(s.id))}e.preventDefault(),e.stopPropagation()}};var Ch=class extends pr{constructor(e,t,i,r,s){super(e,i,r),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=r,this.sortService=s,this._subMenuParentId="",this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:"",subMenuOpenByEvent:"mouseover"},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(r.gridOptions.headerMenu)}init(e){this._addonOptions=D(D({},this._defaults),e),this._eventHandler.subscribe(this.grid.onBeforeSetColumns,(t,i)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(i.newColumns)}),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}dispose(){super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),this._menuElm?.remove(),this._activeHeaderColumnElm=void 0}hideColumn(e){if(this.sharedService?.slickGrid?.getColumnIndex){let t=this.sharedService.slickGrid.getColumnIndex(e.id),i=this.sharedService.slickGrid.getColumns(),r=this.sharedService.gridOptions.frozenColumn??-1;r>=0&&r>=t&&(this.sharedService.gridOptions.frozenColumn=r-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));let s=Zl(i,t);this.sharedService.visibleColumns=s,this.sharedService.slickGrid.setColumns(s),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:s,hiddenColumn:e})}}hideMenu(){this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=void 0,this._activeHeaderColumnElm?.classList.remove("slick-header-column-active")}repositionSubMenu(e,t,i,r){let s=this.createCommandMenu(t.commandItems||[],r,i+1,t);document.body.appendChild(s),this.repositionMenu(e,s)}repositionMenu(e,t){let i=e.target,r=t.classList.contains("slick-submenu"),s=r?e.target.closest(".slick-menu-item"):i,o=wg(this.sharedService.gridContainerElement,i),a=this.grid.getGridPosition(),l=t.offsetWidth,u=at(s),h=r?u?.left??0:o?.left??0,f=r?u?.top??0:(o?.top??0)+(this.addonOptions?.menuOffsetTop??0)+i.clientHeight;if(r){let m=t?.clientHeight||0,{bottom:v,top:w}=oo(s);(v<m&&w>v?"top":"bottom")==="top"?(t.classList.remove("dropdown"),t.classList.add("dropup"),f-=m-s.clientHeight):(t.classList.remove("dropup"),t.classList.add("dropdown"))}if(r&&s){let m=h+Number(l)+s.clientWidth,v=document.documentElement.clientWidth;(m>=a.width||m>=v?"left":"right")==="left"?(t.classList.remove("dropright"),t.classList.add("dropleft"),h-=l):(t.classList.remove("dropleft"),t.classList.add("dropright"),h+=s.offsetWidth)}else h=o?.left??0,this.addonOptions.autoAlign&&a?.width&&h+(t.clientWidth??0)>=a.width&&(h=h+i.clientWidth-t.clientWidth+(this.addonOptions?.autoAlignOffset||0));t.style.top=`${f}px`,t.style.left=`${h}px`,this._activeHeaderColumnElm=this.grid.getContainerNode().querySelector(":not(.slick-preheader-panel) >.slick-header-columns"),this._activeHeaderColumnElm&&this._activeHeaderColumnElm.classList.add("slick-header-column-active")}translateHeaderMenu(){this.sharedService.gridOptions?.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(e,t){let r=t.column.header?.menu;if(r&&t.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,t))return;let s=E("div",{className:"slick-header-menu-button",ariaLabel:"Header Menu"},t.node);this.addonOptions.buttonCssClass&&s.classList.add(...this.addonOptions.buttonCssClass.split(" ")),this.addonOptions.tooltip&&(s.title=this.addonOptions.tooltip),this._bindEventService.bind(s,"click",o=>{this.disposeAllMenus(),this.createParentMenu(o,t.column,r)})}}handleBeforeHeaderCellDestroy(e,t){t.column.header?.menu&&t.node.querySelectorAll(".slick-header-menu-button").forEach(r=>r.remove())}handleBodyMouseDown(e){if(this.menuElement){let t=!1,i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this._menuElm!==e.target&&!t&&!e.defaultPrevented||e.target.className==="close"&&i)&&this.hideMenu()}}handleMenuItemCommandClick(e,t,i,r=0,s){if(i!=="divider"&&!i.disabled&&!i.divider)if((i.command||"")&&!i.commandItems){let a={grid:this.grid,command:i.command,column:s,item:i};this.executeHeaderMenuInternalCommands(e,a),this.pubSubService.publish("onHeaderMenuCommand",a),typeof this.addonOptions?.onCommand=="function"&&this.addonOptions.onCommand(e,a),typeof i.action=="function"&&i.action.call(this,e,a),e.defaultPrevented||this.hideMenu(),e.preventDefault(),e.stopPropagation()}else i.commandItems&&this.repositionSubMenu(e,i,r,s)}handleMenuItemMouseOver(e,t,i,r=0,s){i!=="divider"&&!i.disabled&&!i.divider&&(i.commandItems?this.repositionSubMenu(e,i,r,s):r===0&&this.disposeSubMenus())}addHeaderMenuCustomCommands(e){let t=this.sharedService.gridOptions,i=t.headerMenu||{},r=li(t);return Array.isArray(e)&&t.enableHeaderMenu&&e.forEach(s=>{if(s&&!s.excludeFromHeaderMenu){s.header?s.header.menu||(s.header.menu={commandItems:[]}):s.header={menu:{commandItems:[]}};let o=s?.header?.menu?.commandItems??[],a=!1;i&&!i.hideFreezeColumnsCommand&&(a=!0,o.some(l=>l!=="divider"&&l?.command==="freeze-columns")||o.push({iconCssClass:i.iconFreezeColumns||"fa fa-thumb-tack",titleKey:`${r}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:47})),i&&!i.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(a=!0,o.some(l=>l!=="divider"&&l?.command==="column-resize-by-content")||o.push({iconCssClass:i.iconColumnResizeByContentCommand||"fa fa-arrows-h",titleKey:`${r}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:48})),a&&!o.some(l=>l!=="divider"&&l.positionOrder===49)&&o.push({divider:!0,command:"",positionOrder:49}),t.enableSorting&&s.sortable&&i&&!i.hideSortCommands&&(o.some(l=>l!=="divider"&&l?.command==="sort-asc")||o.push({iconCssClass:i.iconSortAscCommand||"fa fa-sort-asc",titleKey:`${r}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),o.some(l=>l!=="divider"&&l?.command==="sort-desc")||o.push({iconCssClass:i.iconSortDescCommand||"fa fa-sort-desc",titleKey:`${r}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),o.some(l=>l!=="divider"&&l.positionOrder===52)||o.push({divider:!0,command:"",positionOrder:52}),!i.hideClearSortCommand&&!o.some(l=>l!=="divider"&&l?.command==="clear-sort")&&o.push({iconCssClass:i.iconClearSortCommand||"fa fa-unsorted",titleKey:`${r}REMOVE_SORT`,command:"clear-sort",positionOrder:54})),t.enableFiltering&&s.filterable&&i&&!i.hideFilterCommand&&!i.hideClearFilterCommand&&!o.some(l=>l!=="divider"&&l?.command==="clear-filter")&&o.push({iconCssClass:i.iconClearFilterCommand||"fa fa-filter",titleKey:`${r}REMOVE_FILTER`,command:"clear-filter",positionOrder:53}),i&&!i.hideColumnHideCommand&&!o.some(l=>l!=="divider"&&l?.command==="hide-column")&&o.push({iconCssClass:i.iconColumnHideCommand||"fa fa-times",titleKey:`${r}HIDE_COLUMN`,command:"hide-column",positionOrder:55}),this.extensionUtility.translateMenuItemsFromTitleKey(o),this.extensionUtility.sortItems(o,"positionOrder")}}),i}clearColumnFilter(e,t){t?.column&&this.filterService.clearFilterByColumnId(e,t.column.id)}clearColumnSort(e,t){t?.column&&this.sharedService&&this.sortService.clearSortByColumnId(e,t.column.id)}executeHeaderMenuInternalCommands(e,t){if(t?.command)switch(t.command){case"hide-column":this.hideColumn(t.column),this.sharedService.gridOptions?.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(e,t);break;case"clear-sort":this.clearColumnSort(e,t);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:t.column.id});break;case"freeze-columns":let i=[...this.sharedService.visibleColumns],s={frozenColumn:i.findIndex(u=>u.id===t.column.id),enableMouseWheelScrollHandler:!0},o=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(s,!1,!0),this.sharedService.gridOptions.frozenColumn=s.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=s.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=t.column.id,this.sharedService.hasColumnsReordered||Array.isArray(i)&&Array.isArray(this.sharedService.allColumns)&&i.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(i):this.sharedService.slickGrid.setColumns(o),this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":let l=t.command==="sort-asc";this.sortColumn(e,t,l);break;default:break}}createParentMenu(e,t,i){let r={grid:this.grid,column:t,menu:i};typeof e.stopPropagation=="function"&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",r),typeof this.addonOptions?.onBeforeMenuShow=="function"&&this.addonOptions?.onBeforeMenuShow(e,r)===!1)||(this._menuElm=this.createCommandMenu(i.commandItems,t),this.grid.getContainerNode()?.appendChild(this._menuElm),this.repositionMenu(e,this._menuElm),this.pubSubService.publish("onHeaderMenuAfterMenuShow",r),!(typeof this.addonOptions?.onAfterMenuShow=="function"&&this.addonOptions?.onAfterMenuShow(e,r)===!1)&&(e.preventDefault(),e.stopPropagation()))}createCommandMenu(e,t,i=0,r){let s=r?.command,o=i===1&&s?s.replace(/\s/g,""):"";o&&(this._subMenuParentId=o),i>1&&(o=this._subMenuParentId);let a=`${this.menuCssClass} slick-menu-level-${i} ${this.gridUid}`,l=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${i}${this.gridUidSelector}`);if(l){if(l.dataset.subMenuParent===o)return l;this.disposeSubMenus()}let u=E("div",{ariaExpanded:"true",ariaLabel:i>1?"SubMenu":"Header Menu",role:"menu",className:a,style:{minWidth:`${this.addonOptions.minWidth}px`}});i>0&&(u.classList.add("slick-submenu"),o&&(u.dataset.subMenuParent=o));let h=E("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},u),f={grid:this.grid,column:t,level:i,menu:{commandItems:e}};return r&&i>0&&this.addSubMenuTitleWhenExists(r,h),this.populateCommandOrOptionItems("command",this.addonOptions,h,e,f,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),i++,u}resetHeaderMenuTranslations(e){e.forEach(t=>{if(t?.header?.menu?.commandItems&&!t.excludeFromHeaderMenu){let i=t.header.menu.commandItems||[];this.extensionUtility.translateMenuItemsFromTitleKey(i)}})}sortColumn(e,t,i=!0){if(t?.column){let r=t.column,s=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(r.id+""):[],o=ft.local;s.push({columnId:r.id,sortCol:r,sortAsc:i}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:s,grid:this.sharedService.slickGrid}),o=ft.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,s),o=ft.local):t.grid.onSort.notify(s);let a=s.map(l=>({columnId:l?.sortCol?.id??"",sortAsc:l?.sortAsc??!0}));if(this.sharedService.slickGrid.setSortColumns(a),o){let l=[];a.forEach(u=>{l.push({columnId:`${u.columnId}`,direction:u.sortAsc?"ASC":"DESC"})}),this.sortService.emitSortChanged(o,l)}}}};var _c=class{constructor(e){this.pubSubService=e,this.onBeforeMoveRows=new B,this.onMoveRows=new B,this.pluginName="RowMoveManager",this._dragging=!1,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this._eventHandler=new Ce}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}init(e,t){this._addonOptions=D(D({},this._defaults),t),this._grid=e,this._canvas=this._grid.getCanvasNode(),typeof this._addonOptions?.usabilityOverride=="function"&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){this._eventHandler?.unsubscribeAll()}create(e,t){if(this._addonOptions=D(D({},this._defaults),t.rowMoveManager),Array.isArray(e)&&t){let i=this.getColumnDefinition();if(!e.some(r=>r.id===i.id)){let r=Array.isArray(e)&&e.find(a=>a?.behavior==="selectAndMove"),s=r||i,o=t?.rowMoveManager?.columnIndexPosition??0;o>0?e.splice(o,0,s):e.unshift(s),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){let e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:"",behavior:"selectAndMove",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:e,resizable:!1,selectable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(e){this._usabilityOverride=e}setOptions(e){this._addonOptions=D(D({},this._addonOptions),e)}handleDragInit(e){e.stopImmediatePropagation()}handleDragEnd(e,t){if(this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),t.guide?.remove(),t.selectionProxy?.remove(),t.clonedSlickRow?.remove(),t.canMove)){let i={grid:this._grid,rows:t.selectedRows,insertBefore:t.insertBefore};typeof this._addonOptions.onMoveRows=="function"&&this._addonOptions.onMoveRows(e,i),this.onMoveRows.notify(i)}}handleDrag(e,t){if(this._dragging){e.stopImmediatePropagation();let i=e.getNativeEvent(),s=(i?.touches?.[0]??i).pageY-(at(this._canvas)?.top??0);t.selectionProxy.style.top=`${s-5}px`,t.selectionProxy.style.display="block",t.clonedSlickRow&&(t.clonedSlickRow.style.top=`${s-6}px`,t.clonedSlickRow.style.display="block");let o=Math.max(0,Math.min(Math.round(s/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(o!==t.insertBefore){let a={grid:this._grid,rows:t.selectedRows,insertBefore:o};if(this._addonOptions?.onBeforeMoveRows?.(i,a)===!1||this.onBeforeMoveRows.notify(a).getReturnValue()===!1?t.canMove=!1:t.canMove=!0,this._usabilityOverride&&t.canMove){let l=this._grid.getDataItem(o);t.canMove=this.checkUsabilityOverride(o,l,this._grid)}t.canMove?t.guide.style.top=`${o*(this.gridOptions.rowHeight||0)}px`:t.guide.style.top="-1000px",t.insertBefore=o}}}handleDragStart(e,t){let i=this._grid.getCellFromEvent(e)||{cell:-1,row:-1},r=i.row,s=this._grid.getDataItem(r);if(this.checkUsabilityOverride(r,s,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[i.cell].behavior||""))return!1;if(this._dragging=!0,e.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){let l=this._grid.getCellNode(i.row,i.cell)?.closest(".slick-row");l&&(t.clonedSlickRow=l.cloneNode(!0),t.clonedSlickRow.classList.add("slick-reorder-shadow-row"),t.clonedSlickRow.style.display="none",t.clonedSlickRow.style.marginLeft=tn(this._addonOptions?.rowMoveShadowMarginLeft,"0px"),t.clonedSlickRow.style.marginTop=tn(this._addonOptions?.rowMoveShadowMarginTop,"0px"),t.clonedSlickRow.style.opacity=`${this._addonOptions?.rowMoveShadowOpacity??.95}`,t.clonedSlickRow.style.transform=`scale(${this.addonOptions?.rowMoveShadowScale??.75})`,this._canvas.appendChild(t.clonedSlickRow))}let o=this._addonOptions.singleRowMove?[i.row]:this._grid.getSelectedRows();(o.length===0||!o.some(l=>l===i.row))&&(o=[i.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(o));let a=this.gridOptions.rowHeight;t.selectedRows=o,t.selectionProxy=E("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:`${a*o.length}px`}},this._canvas),t.guide=E("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}},this._canvas),t.insertBefore=-1}}checkUsabilityOverride(e,t,i){return typeof this._usabilityOverride=="function"?this._usabilityOverride(e,t,i):!0}moveIconFormatter(e,t,i,r,s,o){if(this.checkUsabilityOverride(e,s,o)){let a=document.createElement("div");return a.className=this._addonOptions.cssClass||"",{addClasses:`cell-reorder dnd ${this._addonOptions.cssClass||""}`,html:a}}else return""}};var yh=class{get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}constructor(e,t,i,r,s,o,a){this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=r,this.sortService=s,this.treeDataService=o,this.translaterService=a,this._extensionCreatedList={},this._extensionList={}}dispose(){this.sharedService.visibleColumns=[];for(let e of Object.keys(this._extensionList))if(this._extensionList.hasOwnProperty(e)){let t=this._extensionList[e];t?.instance?.dispose&&t.instance.dispose()}for(let e of Object.keys(this._extensionList))delete this._extensionList[e];this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList=null}addExtensionToList(e,t){this._extensionList[e]=t}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(e){if(this._extensionCreatedList?.hasOwnProperty(e))return this._extensionCreatedList[e]}getExtensionByName(e){return this._extensionList?.[e]}getExtensionInstanceByName(e){return this.getExtensionByName(e)?.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableAutoTooltip){let e=new sh(this.gridOptions?.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(e),this._extensionList[Re.autoTooltip]={name:Re.autoTooltip,instance:e}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new oh,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),this.gridOptions.excelCopyBufferOptions?.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[Re.cellExternalCopyManager]={name:Re.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new ch(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.cellMenu?.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[Re.cellMenu]={name:Re.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){let e=this.gridOptions.rowSelectionOptions??{};this.gridOptions.enableRowMoveManager&&this.gridOptions.rowMoveManager?.dragToSelect!==!1&&(e.dragToSelect=!0),this._rowSelectionModel=new mr(e),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[Re.rowSelection]={name:Re.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new vc(this.pubSubService,this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);let e=this.getCreatedExtensionByName(Re.checkboxSelector);e&&e.instance&&(this._extensionList[Re.checkboxSelector]={name:Re.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new po(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.columnPicker?.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[Re.columnPicker]={name:Re.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new gh(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),this.gridOptions.contextMenu?.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[Re.contextMenu]={name:Re.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),this.gridOptions.draggableGrouping?.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[Re.contextMenu]={name:Re.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[Re.draggableGrouping]={name:Re.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new ka(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.gridMenu?.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[Re.gridMenu]={name:Re.gridMenu,instance:this._gridMenuControl}),this.gridOptions.enableHeaderButton){let e=new _h(this.extensionUtility,this.pubSubService,this.sharedService);this.gridOptions.headerButton?.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(e),this._extensionList[Re.headerButton]={name:Re.headerButton,instance:e}}this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new Ch(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.headerMenu?.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[Re.headerMenu]={name:Re.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager&&(this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new _c(this.pubSubService),this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager),this.getCreatedExtensionByName(Re.rowMoveManager)?.instance&&(this._extensionList[Re.rowMoveManager]={name:Re.rowMoveManager,instance:this._rowMoveManagerPlugin}))}}createExtensionsBeforeGridCreation(e,t){let i=[];t.enableCheckboxSelector&&(this.getCreatedExtensionByName(Re.checkboxSelector)||(this._checkboxSelectColumn=new vc(this.pubSubService,this.sharedService.gridOptions.checkboxSelector),i.push({name:Re.checkboxSelector,extension:this._checkboxSelectColumn,columnIndexPosition:t?.checkboxSelector?.columnIndexPosition??i.length}))),t.enableRowMoveManager&&(this.getCreatedExtensionByName(Re.rowMoveManager)||(this._rowMoveManagerPlugin=new _c(this.pubSubService),i.push({name:Re.rowMoveManager,extension:this._rowMoveManagerPlugin,columnIndexPosition:t?.rowMoveManager?.columnIndexPosition??i.length}))),this.createExtensionByTheirColumnIndex(i,e,t),t.enableDraggableGrouping&&(this.getCreatedExtensionByName(Re.draggableGrouping)||(this._draggleGroupingPlugin=new vh(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(t.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder.bind(this._draggleGroupingPlugin),this._extensionCreatedList[Re.draggableGrouping]={name:Re.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(e){if(typeof this.sharedService?.slickGrid?.getColumns=="function"){let t=this.sharedService.slickGrid.getColumnIndex(e.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),t),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(e){this.extensionUtility.refreshBackendDataset(e)}removeColumnByIndex(e,t){return Array.isArray(e)?e.filter((i,r)=>t!==r):e}translateAllExtensions(){this.translateCellMenu(),this.translateColumnHeaders(),this.translateColumnPicker(),this.translateContextMenu(),this.translateGridMenu(),this.translateHeaderMenu()}translateCellMenu(){this._cellMenuPlugin?.translateCellMenu?.()}translateColumnPicker(){this._columnPickerControl?.translateColumnPicker&&this._columnPickerControl.translateColumnPicker()}translateContextMenu(){this._contextMenuPlugin?.translateContextMenu?.()}translateGridMenu(){this._gridMenuControl?.translateGridMenu?.()}translateHeaderMenu(){this._headerMenuPlugin?.translateHeaderMenu?.()}translateColumnHeaders(e,t){if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');e&&this.translaterService?.use&&this.translaterService.use(e);let i=t;i||(i=this.sharedService.columnDefinitions),this.translateItems(i,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.renderColumnHeaders(i,Array.isArray(t)),this._gridMenuControl?.translateGridMenu?.()}renderColumnHeaders(e,t=!1){let i=e;i||(i=this.sharedService.columnDefinitions),Array.isArray(i)&&this.sharedService.slickGrid&&this.sharedService.slickGrid.setColumns&&((i.length>this.sharedService.allColumns.length||t)&&(this.sharedService.allColumns=i),this.sharedService.slickGrid.setColumns(i)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=this.sharedService.allColumns??[],this._gridMenuControl.recreateGridMenu())}createExtensionByTheirColumnIndex(e,t,i){e.sort((r,s)=>r.columnIndexPosition-s.columnIndexPosition),e.forEach(r=>{let s=r.extension.create(t,i);s&&(this._extensionCreatedList[r.name]={name:r.name,instance:s})})}translateItems(e,t,i){if(this.gridOptions?.enableTranslate&&!this.translaterService?.translate)throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(Array.isArray(e))for(let r of e)r[t]&&(r[i]=this.translaterService?.translate(r[t]))}};var Cw=Object.prototype.hasOwnProperty;function ji(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&ji(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(Cw.call(n,t)&&++i&&!Cw.call(e,t)||!(t in e)||!ji(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function mv(n,e,t){if(t&&(n?.hasOwnProperty(t)||e?.hasOwnProperty(t)))return n[t]===e||n===e[t]||n[t]===e[t];for(let i in n)if(n.hasOwnProperty(i)&&n[i]!==e[i])return!1;return!0}function yw(n){switch(n&&n.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}var Wi=(n,e,t)=>{switch(n.toUpperCase()){case"<":case"LT":return e<t;case"<=":case"LE":return e<=t;case">":case"GT":return e>t;case">=":case"GE":return e>=t;case"!=":case"<>":case"NE":return e!==t;case"=":case"==":case"EQ":return e===t;case"IN":return t&&Array.isArray(t)?t.includes(e):!1;case"NIN":case"NOT_IN":return t&&Array.isArray(t)?!t.includes(e):!1;case"IN_CONTAINS":return t&&Array.isArray(t)&&typeof e=="string"?t.some(i=>e.split(/[,]+/).map(r=>r.trim()).includes(i)):!1;case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return t&&Array.isArray(t)&&typeof e=="string"?!t.some(i=>e.split(/[,]+/).map(r=>r.trim()).includes(i)):!1;case"IN_COLLECTION":return e&&t&&Array.isArray(e)&&Array.isArray(t)?t.some(i=>e.includes(i)):!1;case"NOT_IN_COLLECTION":return e&&t&&Array.isArray(e)&&Array.isArray(t)?!t.some(i=>e.includes(i)):!1}return!0};var bh=(n,e)=>{let[t,i]=e;if(t===void 0&&!n.operator)return!0;n.cellValue=n.cellValue===void 0||n.cellValue===null?"":n.cellValue.toString();let r=n?.ignoreAccentOnStringFilterAndSort?Es(n.cellValue,!0):n.cellValue.toLowerCase();if(typeof t=="string"&&(t=n?.ignoreAccentOnStringFilterAndSort?Es(t,!0):t.toLowerCase()),typeof i=="string"&&(i=n?.ignoreAccentOnStringFilterAndSort?Es(i,!0):i.toLowerCase()),t!==void 0&&i!==void 0){let o=n?.operator??n.defaultFilterRangeOperator;o!==ne.rangeInclusive&&o!==ne.rangeExclusive&&(o=n.defaultFilterRangeOperator);let a=o===ne.rangeInclusive,l=gv(a?">=":">",r,t,n.searchInputLastChar),u=gv(a?"<=":"<",r,i,n.searchInputLastChar);return l&&u}return gv(n.operator,r,t,n.searchInputLastChar)};function bw(n){let e="",t=Array.isArray(n)&&n||[e],i=[],r,s;if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){let o=t.length===2?t:t[0].split("..");r=`${Array.isArray(o)?o[0]:""}`,s=`${Array.isArray(o)?o[1]:""}`}else{let o=Array.isArray(n)&&n.length>0?n[0]:"";r=o==null?"":`${o}`}return r!==void 0&&s!==void 0?i.push(r,s):r!==void 0&&i.push(r),i}function gv(n,e,t,i){return n==="*"||n===ne.endsWith||n==="*z"?e.endsWith(t):n===""&&i==="*"||n===ne.startsWith||n==="a*"?e.startsWith(t):n===""||n===ne.contains?e.indexOf(t)>-1:n==="<>"||n===ne.notContains?e.indexOf(t)===-1:Wi(n||"==",e,t)}var Ew=(n,e)=>{if(e===void 0&&!n.operator)return!0;switch((n.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!mv(n.cellValue,e,n.dataKey);case"=":case"==":case"EQ":default:return mv(n.cellValue,e,n.dataKey)}};function ww(n){return(Array.isArray(n)&&n.length>0?n[0]:"")||""}var Eh=(n,e)=>{let t=parseFloat(n.cellValue),[i,r]=e;if(i===void 0&&!n.operator)return!0;if(i!==void 0&&r!==void 0){let s=n?.operator??n.defaultFilterRangeOperator;s!==ne.rangeInclusive&&s!==ne.rangeExclusive&&(s=n.defaultFilterRangeOperator);let o=s===ne.rangeInclusive,a=Wi(o?">=":">",t,+i),l=Wi(o?"<=":"<",t,+r);return a&&l}return Wi(n.operator||"==",t,+i)};function Sw(n){let t=Array.isArray(n)&&n||[0],i=[],r,s;if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){let o=t.length===2?t:t[0].split("..");r=parseFloat(Array.isArray(o)?o[0]:""),s=parseFloat(Array.isArray(o)?o[1]:"")}else r=parseFloat(t[0]);return Ue(r,!0)&&Ue(s,!0)?i.push(r,s):Ue(r,!0)&&i.push(r),i}var wh=(n,e)=>Jl(n.cellValue)===Jl(e);function Dw(n){let e=Array.isArray(n)&&n[0]||!1;return Jl(e)}var Sh=n=>{let e=n.operator,t;return Array.isArray(n.cellValue)&&(e==="IN_COLLECTION"||e==="NOT_IN_COLLECTION")?t=n.cellValue.length?n.cellValue.map(i=>`${i}`):[]:t=n.cellValue===void 0||n.cellValue===null?"":`${n.cellValue}`,Wi(e||"IN",t,n.searchTerms||[])};var Cc=dn(vs());function xw(n,e){let t=n&&(n.filterSearchType||n.fieldType)||b.dateIso,i=en(t),[r,s]=e,o=(0,Cc.default)(n.cellValue,i,!0);if(!r&&!s||!o.isValid())return!1;let a=i.toLowerCase().includes("h")?o.valueOf():o.clone().startOf("day").valueOf();if(r&&s){let u=n?.operator??n.defaultFilterRangeOperator;u!==ne.rangeInclusive&&u!==ne.rangeExclusive&&(u=n.defaultFilterRangeOperator);let h=u===ne.rangeInclusive,f=Wi(h?">=":">",a,r.valueOf()),m=Wi(h?"<=":"<",a,s.valueOf());return f&&m}let l=i.toLowerCase().includes("h")?r.valueOf():r.clone().startOf("day").valueOf();return Wi(n.operator||"==",a,l)}function Tw(n,e){let t=Array.isArray(n)&&n||[],i=e||b.dateIso,r=en(i),s=[];if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){let o=t.length===2?t:t[0].split(".."),a=Array.isArray(o)&&o[0]||"",l=Array.isArray(o)&&o[1]||"",u=(0,Cc.default)(a,r,!0),h=(0,Cc.default)(l,r,!0);if(!u.isValid()||!h.isValid())return[];s.push(u,h)}else{let o=(0,Cc.default)(t[0],r,!0);if(!o.isValid())return[];s.push(o)}return s}var Iw=(n,e)=>{if(yw(n.operator))return Sh(n);switch(Ow(n.filterSearchType||n.fieldType)){case"boolean":return wh(n,e);case"date":return xw(n,e||[]);case"number":return Eh(n,e||[]);case"object":return Ew(n,e);case"string":default:return bh(n,e||[])}};function yc(n,e){let t=Ow(e),i;switch(t){case"boolean":i=Dw(n);break;case"date":i=Tw(n,e);break;case"number":i=Sw(n);break;case"object":i=ww(n);break;case"string":i=bw(n);break}return i}function Ow(n){switch(n){case b.boolean:return"boolean";case b.date:case b.dateIso:case b.dateUtc:case b.dateTime:case b.dateTimeIso:case b.dateTimeIsoAmPm:case b.dateTimeIsoAM_PM:case b.dateTimeShortIso:case b.dateEuro:case b.dateEuroShort:case b.dateTimeShortEuro:case b.dateTimeEuro:case b.dateTimeEuroAmPm:case b.dateTimeEuroAM_PM:case b.dateTimeEuroShort:case b.dateTimeEuroShortAmPm:case b.dateTimeEuroShortAM_PM:case b.dateUs:case b.dateUsShort:case b.dateTimeShortUs:case b.dateTimeUs:case b.dateTimeUsAmPm:case b.dateTimeUsAM_PM:case b.dateTimeUsShort:case b.dateTimeUsShortAmPm:case b.dateTimeUsShortAM_PM:return"date";case b.integer:case b.float:case b.number:return"number";case b.object:return"object";case b.string:case b.text:case b.password:case b.readonly:default:return"string"}}var vv={executeFilterConditionTest:Iw,booleanFilter:wh,collectionSearchFilter:Sh,numberFilter:Eh,stringFilter:bh,testFilter:Wi};var Dh=class{constructor(e,t,i,r,s){this.filterFactory=e,this.pubSubService=t,this.sharedService=i,this.backendUtilities=r,this.rxjs=s,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new B,this._eventHandler=new Ce,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}get _dataView(){return this._grid?.getData()??{}}addRxJsResource(e){this.rxjs=e}init(e){this._grid=e,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let e=this._filtersMetadata.pop();for(;e;)typeof e?.destroy=="function"&&e.destroy(),e=this._filtersMetadata.pop()}}bindBackendOnFilter(e){this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{i.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(i,this._isFilterFirstRender),this._firstColumnIdRendered===""&&(this._firstColumnIdRendered=i.column.id)}),this.subscribeToOnHeaderRowCellRendered(e),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(e){this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,(t,i)=>kt(this,null,function*(){let r=i?.clearFilterTriggered??!1;r||(yield this.emitFilterChanged(ft.local,!0)),this._gridOptions.enableTreeData===!0&&(this._tmpPreFilteredData=this.preFilterTreeData(this._dataView.getItems(),this._columnFilters)),i.columnId!==null&&this._dataView.refresh(),r||(yield this.emitFilterChanged(ft.local)),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)})),this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{this.addFilterTemplateToHeaderRow(i)}),this.subscribeToOnHeaderRowCellRendered(e)}clearFilterByColumnId(e,t){return kt(this,null,function*(){yield this.pubSubService.publish("onBeforeFilterClear",{columnId:t},0);let i=this._gridOptions.backendServiceApi??!1,r=i?ft.remote:ft.local,s=Object.keys(this._columnFilters),o;Array.isArray(s)&&(o=s.find(l=>l===`${t}`));let a=this._filtersMetadata.find(l=>l.columnDef.id===t);return a?.clear&&a.clear(!0),i&&o!==void 0&&this.onBackendFilterChange(e,{grid:this._grid,columnFilters:this._columnFilters}),yield this.emitFilterChanged(r),!0})}clearFilters(e=!0){return kt(this,null,function*(){e&&(yield this.pubSubService.publish("onBeforeFilterClear",!0,0)),this._filtersMetadata.forEach(i=>{i?.clear&&i.clear(!1)}),this.removeAllColumnFiltersProperties(),Array.isArray(this._columnDefinitions)&&this._columnDefinitions.forEach(i=>{i.filter?.searchTerms&&delete i.filter.searchTerms}),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());let t=this._gridOptions.backendServiceApi;if(t&&e){let i={clearFilterTriggered:!0,shouldTriggerQuery:e,grid:this._grid,columnFilters:this._columnFilters},s=t.service.processOnFilterChanged(void 0,i),o=this._gridOptions.pagination?.totalItems??0;this.backendUtilities?.executeBackendCallback(t,s,i,new Date,o,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:a=>this._previousFilters=this.extractBasicFilterDetails(a.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this)})}else this._previousFilters=this.extractBasicFilterDetails(this._columnFilters);e&&this.pubSubService.publish("onFilterCleared",!0)})}customLocalFilter(e,t){let i=t?.grid,r=t?.columnFilters??{},s=this._gridOptions.enableTreeData??!1,o=this._gridOptions.treeDataOptions;if(s&&o){let a=o.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,l=o.parentPropName??V.treeDataProperties.PARENT_PROP,u=o?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,h=this._gridOptions.datasetIdPropertyName??"id",f=o.autoRecalcTotalsOnFilterChange??!1,m=!1;if(e[l]!==null){let v=this._dataView.getItemById(e[l]);for(;v;){if(v[a])if(f)m=!0;else return!1;v=this._dataView.getItemById(v[l])}}if(this._tmpPreFilteredData instanceof Set){let v=this._tmpPreFilteredData.has(e[h]);if(f){let w=so(this.sharedService.hierarchicalDataset,S=>S[h]===e[h],u);if(w&&(w.__filteredOut=!v),m)return!1}return v}}else if(typeof r=="object")for(let a of Object.keys(r)){let l=r[a],u=this.preProcessFilterConditionOnDataContext(e,l,i);if(typeof u=="boolean")return u;let h=l?.parsedSearchTerms;if(h===void 0&&(h=yc(l.searchTerms,l.columnDef.type||b.string),h!==void 0&&(l.parsedSearchTerms=h)),!vv.executeFilterConditionTest(u,h))return!1}return!0}parseFormInputFilterConditions(e,t){let i=Ca(e)||[],r=Array.isArray(i)&&i.length===1?i[0]:"",s=t.columnDef,o=s.filter?.type??s.type??b.string,a=null;o!==b.object&&(r=r==null?"":`${r}`,a=(s.autoParseInputFilterOperator??this._gridOptions.autoParseInputFilterOperator)!==!1?r.match(/^([<>!=\*]{0,2})(.*[^<>!=\*])?([\*]?)$/):[r,"",r,""]);let l=a?.[1]||t.operator,u=a?.[2]||"",h=a?.[3]||(l==="*z"?"*":"");return typeof r=="string"&&(r=r.replace("'","''"),l==="*"||l==="*z"?l=ne.endsWith:(l==="a*"||h==="*")&&(l=ne.startsWith)),Array.isArray(a)&&a.length>=1&&Array.isArray(i)&&i.length===1&&(i[0]=u),{dataKey:s.dataKey,fieldType:o,searchTerms:i||[],operator:l,searchInputLastChar:h,filterSearchType:s.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(e,t,i){let r=t.columnDef,s=t.columnId,o=i.getColumnIndex(s);if(!r&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(o=this.sharedService.allColumns.findIndex(m=>m.field===s)),!r)return!0;if(this._gridOptions.enableRowDetailView){let m=this._gridOptions.rowDetailView&&this._gridOptions.rowDetailView.keyPrefix||"__";e[`${m}isPadding`]&&e[`${m}parent`]&&(e=e[`${m}parent`])}let a=r.filter?.queryField||r.queryFieldFilter||r.queryField||r.field||"";typeof r.queryFieldNameGetterFn=="function"&&(a=r.queryFieldNameGetterFn(e));let l=r.filter?.type??r.type??b.string,u=e[a];a?.indexOf(".")>=0&&(u=At(e,a));let h=t.operator,f=t.searchTerms||[];if(!f||Array.isArray(f)&&(f.length===0||f.length===1&&h===f[0]))return!0;if(f&&Array.isArray(f)&&l!==b.object)for(let m=0,v=f.length;m<v;m++)f[m]=(f[m]===void 0||f[m]===null?"":f[m])+"";if(r?.params?.useFormatterOuputToFilter===!0){let m=i.getData(),v=this._gridOptions.datasetIdPropertyName||"id",w=m&&typeof m.getIdxById=="function"?m.getIdxById(e[v]):0,S=r&&typeof r.formatter=="function"?r.formatter(w||0,o,u,r,e,this._grid):"";u=ti(S)}return typeof u=="number"&&(u=u.toString()),{dataKey:r.dataKey,fieldType:l,searchTerms:f,cellValue:u,operator:h,searchInputLastChar:t.searchInputLastChar,filterSearchType:r.filterSearchType,ignoreAccentOnStringFilterAndSort:this._gridOptions.ignoreAccentOnStringFilterAndSort??!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(e,t){let i=this._gridOptions.treeDataOptions,r=i?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,s=i?.parentPropName??V.treeDataProperties.PARENT_PROP,o=i?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,a=this._gridOptions.datasetIdPropertyName??"id",l=this._gridOptions.presets?.treeData?.toggledItems,u=this._gridOptions.treeDataOptions?.initiallyCollapsed??!1,h=this._gridOptions.treeDataOptions?.columnId,f=this._gridOptions.treeDataOptions?.excludeChildrenWhenFilteringTree,m=!f&&this._gridOptions.treeDataOptions?.autoApproveParentItemWhenTreeColumnIsValid===!0,v={},w=new Set,S=new Map;if(Array.isArray(e)){for(let P of e)v[P[a]]=P,delete v[P[a]].__used;for(let P of Object.keys(t)){let R=t[P],M=R?.searchTerms?Ca(R.searchTerms):[],x=this.parseFormInputFilterConditions(M,R),L=R.columnDef,z=L?.filter?.type??L?.type??b.string,Y=yc(x.searchTerms,z);Y!==void 0&&(R.parsedSearchTerms=Y)}for(let P of e){let R=P[o],M=!0;for(let x of Object.keys(t)){let L=t[x],z=this.preProcessFilterConditionOnDataContext(P,L,this._grid);if(z){let Y=L?.parsedSearchTerms,U=typeof z=="boolean"?z:vv.executeFilterConditionTest(z,Y);if(U&&m&&R&&L.columnId===h){S.set(P[a],!0);break}if(U||!f&&S.get(P[s])===!0){if(R&&L.columnId===h&&S.set(P[a],!0),U||!f&&L.columnId===h)continue}else R&&S.get(P[s])!==!0&&L.columnId!==h&&S.set(P[a],!1)}M=!1}if(M){w.add(P[a]);let x=v[P[s]]??!1,L=!u;for(!this._isTreePresetExecuted&&Array.isArray(l)&&l.some(z=>z.itemId===x.id&&z.isCollapsed===L)&&(x[r]=L);x;)x.__used??w.add(x[a]),v[x[a]].__used=!0,x=v[x[s]]??!1}}}return this._isTreePresetExecuted=!0,w}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){let e=[];if(this._columnFilters)for(let t of Object.keys(this._columnFilters)){let i=this._columnFilters[t],r={columnId:t||""},o=this.sharedService.allColumns.find(a=>a.id===r.columnId)?.filter?.emptySearchTermReturnAllValues??!0;i?.searchTerms&&(r.searchTerms=i.searchTerms),i.operator&&(r.operator=i.operator),i.targetSelector&&(r.targetSelector=i.targetSelector),Array.isArray(r.searchTerms)&&r.searchTerms.length>0&&(!o||r.searchTerms[0]!=="")&&e.push(r)}return e}emitFilterChanged(e,t=!1){let i=t?"onBeforeFilterChange":"onFilterChanged";if(e===ft.remote&&this._gridOptions.backendServiceApi){let r=[],s=this._gridOptions.backendServiceApi.service;return s?.getCurrentFilters&&(r=s.getCurrentFilters()),this.pubSubService.publish(i,r)}else if(e===ft.local)return this.pubSubService.publish(i,this.getCurrentLocalFilters())}onBackendFilterChange(e,t){return kt(this,null,function*(){let i=t?.shouldTriggerQuery;if(i&&(yield this.emitFilterChanged(ft.remote,!0)),!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');let r=this._gridOptions.backendServiceApi;if(!r||!r.process||!r.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');let s=new Date;if(r.preProcess&&r.preProcess(),i){let o=yield r.service.processOnFilterChanged(e,t),a=this._gridOptions.pagination?.totalItems??0;this.backendUtilities?.executeBackendCallback(r,o,t,s,a,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:l=>this._previousFilters=this.extractBasicFilterDetails(l.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this),httpCancelRequestSubject:this.httpCancelRequests$})}})}populateColumnFilterSearchTermPresets(e){return Array.isArray(e)&&(this._columnDefinitions.forEach(t=>{t.filter?.searchTerms&&delete t.filter.searchTerms;let i=e.find(r=>r.columnId===t.id);i&&Array.isArray(i?.searchTerms)&&(t.filter=t.filter||{},t.filter.operator=i.operator||t.filter.operator||"",t.filter.searchTerms=i.searchTerms)}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(e){let t=e??this._dataView?.getItems()??[];this._dataView&&this._gridOptions.enableTreeData&&t.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(t,this._columnFilters),this._dataView.refresh()):t.length===0&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&setTimeout(()=>this.refreshTreeDataFilters())}disableFilterFunctionality(e=!0,t=!0){let r=!this._gridOptions.enableFiltering;r!==e&&(t&&e&&this.clearFilters(),this.disableAllFilteringCommands(e),this._grid.setOptions({enableFiltering:r},!1,!0),this._grid.setHeaderRowVisibility(r),this._gridOptions.enableFiltering=!e,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(e=!0){let t=this._gridOptions.enableFiltering;this.disableFilterFunctionality(t,e)}toggleHeaderFilterRow(){let e=this._gridOptions.showHeaderRow??!1;e=!e,this._grid.setHeaderRowVisibility(e),e===!0&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)}updateFilters(e,t=!0,i=!0,r=!1){return kt(this,null,function*(){if(!this._filtersMetadata||this._filtersMetadata.length===0||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(e)){this.clearFilters(!1),e.forEach(a=>{let l=this._filtersMetadata.find(u=>a.columnId===u.columnDef.id);if(a&&l){let u=a.operator||l.defaultOperator;this.updateColumnFilters(a.searchTerms,l.columnDef,u),l.setValues(a.searchTerms||[],u),(r||this._gridOptions.enableTreeData)&&this.callbackSearchEvent(void 0,{columnDef:l.columnDef,operator:u,searchTerms:a.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}});let s=this._gridOptions.backendServiceApi,o=s?ft.remote:ft.local;if(t&&(yield this.emitFilterChanged(o,!0)),this._dataView.refresh(),s){let a=s?.service;a?.updateFilters&&(a.updateFilters(e,!0),i&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}t&&(yield this.emitFilterChanged(o))}return!0})}updateSingleFilter(e,t=!0,i=!0){return kt(this,null,function*(){let r=this.sharedService.allColumns.find(s=>s.id===e.columnId);if(r&&e.columnId){this._columnFilters={};let s=r.filter?.emptySearchTermReturnAllValues??!0;Array.isArray(e.searchTerms)&&(e.searchTerms.length>1||e.searchTerms.length===1&&(!s||e.searchTerms[0]!==""))&&(this._columnFilters[e.columnId]={columnId:e.columnId,operator:e.operator,searchTerms:e.searchTerms,columnDef:r,type:r.type??b.string});let o=this._gridOptions.backendServiceApi,a=o?ft.remote:ft.local;if(t&&(yield this.emitFilterChanged(a,!0)),o){let l=o?.service;l?.updateFilters&&(l.updateFilters(this._columnFilters,!0),i&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}else this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._dataView.refresh();t&&(yield this.emitFilterChanged(a))}return!0})}drawFilterTemplate(e,t){let i;if(typeof t=="string"){if(i=document.querySelector(t),i===null)return null}else i=t;let r=typeof e=="string"?this.sharedService.allColumns.find(o=>o.id===e):e;if((r?.id??"")!=="selector"&&r?.filterable){let o,a,l=this.filterFactory.createFilter(r.filter);a=r&&r.filter&&r.filter.operator||l&&l.operator,this._columnFilters[r.id]?(o=this._columnFilters[r.id].searchTerms||void 0,a=this._columnFilters[r.id].operator||void 0):r.filter&&(o=r.filter.searchTerms||void 0,this.updateColumnFilters(o,r,a));let u={grid:this._grid,operator:a,searchTerms:o,columnDef:r,filterContainerElm:i,callback:this.callbackSearchEvent.bind(this)};return l&&(l.init(u),o&&l.setValues&&l.setValues(o,a)),l}return null}addFilterTemplateToHeaderRow(e,t=!0){let i=e.column,r=i?.id??"";if(r!=="selector"&&i?.filterable){let s,o,a=this.filterFactory.createFilter(i.filter);o=i&&i.filter&&i.filter.operator||a&&a.operator,this._columnFilters[i.id]?(s=this._columnFilters[i.id].searchTerms||void 0,o=this._columnFilters[i.id].operator||void 0):i.filter&&(s=i.filter.searchTerms||void 0,this.updateColumnFilters(s,i,o));let l={grid:this._grid,operator:o,searchTerms:s,columnDef:i,filterContainerElm:this._grid.getHeaderRowColumn(r),callback:this.callbackSearchEvent.bind(this)};if(a){a.init(l,t);let u=this._filtersMetadata.findIndex(h=>a.columnDef.id===h.columnDef.id);u===-1?this._filtersMetadata.push(a):this._filtersMetadata[u]=a,s&&a.setValues&&a.setValues(s,o)}}}callbackSearchEvent(e,t){if(t){let i=e?.target?e.target.value:void 0,r=t.searchTerms&&Array.isArray(t.searchTerms)?t.searchTerms:i?[i]:void 0,s=t.columnDef||null,o=s?.id??"",a=s?.filter?.type??s?.type??b.string,l=t.operator||void 0,u=r&&Array.isArray(r),h=u&&r&&r.length,f=D({},this._columnFilters),m=s.filter?.emptySearchTermReturnAllValues??!0,v;if(s&&o)if(!u||h===0||h===1&&Array.isArray(r)&&m&&r[0]==="")delete this._columnFilters[o];else{let P=`${o}`,R={columnId:P,columnDef:s,parsedSearchTerms:[],type:a,targetSelector:this.getSelectorStringFromElement(e?.target)},M=this.parseFormInputFilterConditions(r,R);R.operator=l||M.operator||bd(a),v=yc(M.searchTerms,a),v!==void 0&&(R.parsedSearchTerms=v),R.searchTerms=M.searchTerms||[],this._columnFilters[P]=R}let w=e&&typeof e.isPropagationStopped!="function"?A.extend({},new Xe,e):e,S=e?.key;if(this._onSearchChange&&(t.forceOnSearchChangeEvent||S==="Enter"||!ji(f,this._columnFilters))){let P={clearFilterTriggered:t.clearFilterTriggered,shouldTriggerQuery:t.shouldTriggerQuery,columnId:o,columnDef:s,columnFilters:this._columnFilters,operator:l||bd(a),searchTerms:r,parsedSearchTerms:v,grid:this._grid,target:e?.target};this.pubSubService.publish("onBeforeSearchChange",P)===!1?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(P,w)}}}disableAllFilteringCommands(e=!0){let t=this._grid.getColumns();t.forEach(r=>{r?.header?.menu&&r.header.menu.commandItems?.forEach(s=>{s&&typeof s!="string"&&s.command==="clear-filter"&&(s.hidden=e)})});let i=this._gridOptions.gridMenu?.commandItems;return i&&i.forEach(r=>{if(r&&typeof r!="string"){let s=r.command;(s==="clear-filter"||s==="toggle-filter")&&(r.hidden=e)}}),t}extractBasicFilterDetails(e){let t=[];if(e&&typeof e=="object")for(let i of Object.keys(e)){let{operator:r,searchTerms:s}=e[`${i}`];t.push({columnId:i,operator:r,searchTerms:s})}return t}getSelectorStringFromElement(e){return e?.localName?e?.className?`${e.localName}.${Array.from(e.classList).join(".")}`:e.localName:""}removeAllColumnFiltersProperties(){if(typeof this._columnFilters=="object")for(let e in this._columnFilters)e&&this._columnFilters[e]&&delete this._columnFilters[e]}subscribeToOnHeaderRowCellRendered(e){this._eventHandler.subscribe(e.onBeforeHeaderRowCellDestroy,(t,i)=>{this._filtersMetadata.find(s=>s.columnDef.id===i.column.id)?.destroy?.()})}updateColumnFilters(e,t,i){let r=t.filter?.type??t.type??b.string,s=yc(e,r);e&&t&&(this._columnFilters[t.id]={columnId:t.id,columnDef:t,searchTerms:e,operator:i,parsedSearchTerms:s,type:r})}};var xh={skipError:!1,triggerEvent:!0},bc={highlightRow:!0,resortGrid:!1,selectRow:!1,scrollRowIntoView:!0,skipError:!1,triggerEvent:!0},_v={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},Aw={autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1},Th=class{constructor(e,t,i,r,s,o,a){this.gridStateService=e,this.filterService=t,this.pubSubService=i,this.paginationService=r,this.sharedService=s,this.sortService=o,this.treeDataService=a}get _dataView(){return this._grid?.getData()}get _gridOptions(){return this._grid?.getOptions()??{}}dispose(){this.clearHighlightTimer(),this._rowSelectionPlugin?.dispose()}init(e){this._grid=e}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearHighlightTimer(){clearTimeout(this._highlightTimer),clearTimeout(this._highlightTimerEnd)}clearPinning(e=!0){let t=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),e&&Array.isArray(t)&&this.sharedService.slickGrid.setColumns(t)}setPinning(e,t=!0,i=!1,r=!0){Tg(e)?this.clearPinning():(this.sharedService.slickGrid.setOptions(e,i,r),this.sharedService.gridOptions=D(D({},this.sharedService.gridOptions),e)),t&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(e){if(!e||!e.grid||!e.grid.getColumns||!e.grid.getDataItem)throw new Error("[Slickgrid-Universal] To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error(`[Slickgrid-Universal] We could not find SlickGrid Grid object or it's "getDataItem" method`);return this._grid.getDataItem(e)}getItemRowMetadataToHighlight(e){return t=>{let i=this._dataView.getItem(t),r={cssClasses:""};return typeof e=="function"&&(r=e.call(this._dataView,t)),r||(r={cssClasses:""}),i&&i._dirty&&(r.cssClasses=(r&&r.cssClasses||"")+" dirty"),i&&i.rowClass&&r&&(r.cssClasses+=` ${i.rowClass}`,r.cssClasses+=` row${t}`),r}}getDataItemByRowIndex(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndexes(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');let t=[];return Array.isArray(e)&&e.forEach(i=>{t.push(this._grid.getDataItem(i))}),t}getSelectedRows(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');let e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)}hideColumnById(e,t){if(t=D(D({},Aw),t),this._grid&&this._grid.getColumns&&this._grid.setColumns){let i=this._grid.getColumns(),r=i.findIndex(s=>s.id===e);if(r>=0){let s=Zl(i,r);this.sharedService.visibleColumns=s,this._grid.setColumns(s);let o=this.sharedService.allColumns.findIndex(a=>a.id===e);return o&&(t?.hideFromColumnPicker&&(this.sharedService.allColumns[o].excludeFromColumnPicker=!0),t?.hideFromGridMenu&&(this.sharedService.allColumns[o].excludeFromGridMenu=!0)),t?.autoResizeColumns&&this._grid.autosizeColumns(),t?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:s}),r}}return-1}hideColumnByIds(e,t){if(t=D(D({},Aw),t),Array.isArray(e)){for(let i of e)this.hideColumnById(i,me(D({},t),{triggerEvent:!1,autoResizeColumns:!1}));t?.autoResizeColumns&&this._grid.autosizeColumns(),t?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:this.sharedService.visibleColumns})}}highlightRow(e,t=1500,i=300){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new mr(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),Array.isArray(e)?e.forEach(r=>this.highlightRowByMetadata(r,t,i)):this.highlightRowByMetadata(e,t,i)}highlightRowByMetadata(e,t=1500,i=300){this._dataView.getItemMetadata=this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);let r=this._dataView.getItem(e),s=this._gridOptions.datasetIdPropertyName||"id";r?.[s]!==void 0&&(r.rowClass="highlight",this._dataView.updateItem(r[s],r),this.renderGrid(),this.clearHighlightTimer(),this._highlightTimerEnd=setTimeout(()=>{r.rowClass="highlight-end",this._dataView.updateItem(r[s],r),this.renderGrid()},i),this._highlightTimer=setTimeout(()=>{r?.[s]!==void 0&&(delete r.rowClass,this._dataView.getIdxById(r[s])!==void 0&&(this._dataView.updateItem(r[s],r),this.renderGrid()))},t+i))}setSelectedRow(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows([e])}setSelectedRows(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows(e)}renderGrid(){this._grid&&typeof this._grid.invalidate=="function"&&(this._grid.invalidate(),this._grid.render())}resetGrid(e){if(this.clearPinning(!1),this._grid){let t=this.sharedService.allColumns||[];Array.isArray(t)&&t.length>0&&(this._grid.setColumns(t),this._gridOptions?.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}typeof this.filterService?.clearFilters=="function"&&this.filterService.clearFilters(),typeof this.sortService?.clearSorting=="function"&&this.sortService.clearSorting()}addItem(e,t){let i=D(D({},bc),t);if(!i?.skipError&&(!this._grid||!this._gridOptions||!this._dataView))throw new Error("[Slickgrid-Universal] We could not find SlickGrid Grid, DataView objects");let r=this._gridOptions.datasetIdPropertyName||"id";if(!i?.skipError&&(!e||!e.hasOwnProperty(r)))throw new Error(`[Slickgrid-Universal] Adding an item requires the item to include an "${r}" property`);if(this._gridOptions?.enableTreeData&&t?.position==="top")throw new Error('[Slickgrid-Universal] Please note that `addItem({ position: "top" })` is not supported when used with Tree Data because of the extra complexity.');let s=i?.position;s==="bottom"||this._gridOptions?.enableTreeData?this._dataView.addItem(e):this._dataView.insertItem(0,e);let o=0,a=e?.[r]??"";return this._gridOptions?.enableTreeData?(this.invalidateHierarchicalDataset(),o=this._dataView.getRowById(a),i.scrollRowIntoView&&this._grid.scrollRowIntoView(o??0,!1)):i.resortGrid?(this._dataView.reSort(),o=this._dataView.getRowById(a)):(o=s==="bottom"?this._dataView.getRowById(a):0,i.scrollRowIntoView&&this._grid.scrollRowIntoView(o??0)),i.highlightRow&&o!==void 0&&this.highlightRow(o),o!==void 0&&i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(o),i.triggerEvent&&this.pubSubService.publish("onItemAdded",e),!this._gridOptions?.backendServiceApi&&this._gridOptions.enablePagination&&(s==="bottom"?this.paginationService.goToLastPage():this.paginationService.goToFirstPage()),o}addItems(e,t){let i=D(D({},bc),t),r=this._gridOptions.datasetIdPropertyName||"id",s=i?.position,o=[];if(Array.isArray(e))this._dataView.beginUpdate(!0),s==="bottom"||this._gridOptions?.enableTreeData?this._dataView.addItems(e):this._dataView.insertItems(0,e),this._dataView.endUpdate();else return[this.addItem(e,i)||0];if(this._gridOptions?.enableTreeData){this.invalidateHierarchicalDataset();let a=e[0]?.[r]??"",l=this._dataView.getRowById(a);i.scrollRowIntoView&&this._grid.scrollRowIntoView(l??0,!1)}else i.resortGrid&&this._dataView.reSort();return s&&i.scrollRowIntoView&&!this._gridOptions?.enableTreeData&&(s==="bottom"?this._grid.navigateBottom():this._grid.navigateTop()),e.forEach(a=>o.push(this._dataView.getRowById(a[r]))),i.highlightRow&&this.highlightRow(o),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(o),i.triggerEvent&&this.pubSubService.publish("onItemAdded",e),o}deleteItem(e,t){t=D(D({},xh),t);let i=this._gridOptions.datasetIdPropertyName||"id";if(!t?.skipError&&(!e||!e.hasOwnProperty(i)))throw new Error(`[Slickgrid-Universal] Deleting an item requires the item to include an "${i}" property`);return this.deleteItemById(e[i],t)}deleteItems(e,t){t=D(D({},xh),t);let i=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return this.deleteItem(e,t),[e[i]];this._dataView.beginUpdate(!0);let r=[];return e.forEach(s=>{s?.[i]!==void 0&&r.push(s[i])}),this._dataView.deleteItems(r),this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),r}deleteItemById(e,t){if(t=D(D({},xh),t),!t?.skipError&&e==null)throw new Error('[Slickgrid-Universal] Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}deleteItemByIds(e,t){if(t=D(D({},xh),t),Array.isArray(e)){this._dataView.beginUpdate(!0);for(let i=0;i<e.length;i++)e[i]!==null&&this.deleteItemById(e[i],{triggerEvent:!1});return this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}return[]}updateItem(e,t){t=D(D({},_v),t);let i=this._gridOptions.datasetIdPropertyName||"id",r=!e||!e.hasOwnProperty(i)?void 0:e[i];if(!t?.skipError&&r===void 0)throw new Error(`[Slickgrid-Universal] Calling Update of an item requires the item to include an "${i}" property`);return this.updateItemById(r,e,t)}updateItems(e,t){t=D(D({},_v),t);let i=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return[this.updateItem(e,t)];this._dataView.beginUpdate(!0);let r=[],s=[];return e.forEach(o=>{let a=!o||!o.hasOwnProperty(i)?void 0:o[i];if(s.push(a),this._dataView.getIdxById(a)!==void 0){let l=this._dataView.getRowById(a);l!==void 0&&(r.push(l),this._grid.updateRow(l))}}),this._dataView.updateItems(s,e),this._dataView.endUpdate(),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent&&this.pubSubService.publish("onItemUpdated",e),r}updateItemById(e,t,i){if(i=D(D({},_v),i),!i?.skipError&&e===void 0)throw new Error('[Slickgrid-Universal] Cannot update a row without a valid "id"');let r=this._dataView.getRowById(e);if(!i?.skipError&&!t&&!this._gridOptions.enablePagination)throw new Error(`[Slickgrid-Universal] The item to update in the grid was not found with id: ${e}`);return this._dataView.getIdxById(e)!==void 0&&(this._dataView.updateItem(e,t),r!==void 0&&this._grid.updateRow(r),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),i.scrollRowIntoView&&r!==void 0&&this._grid.scrollRowIntoView(r),i.highlightRow&&r!==void 0&&this.highlightRow(r),r!==void 0&&i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(r),i.triggerEvent&&this.pubSubService.publish("onItemUpdated",t)),r}upsertItem(e,t){t=D(D({},bc),t);let i=this._gridOptions.datasetIdPropertyName||"id",r=!e||!e.hasOwnProperty(i)?void 0:e[i];if(!t?.skipError&&r===void 0)throw new Error(`[Slickgrid-Universal] Calling Upsert of an item requires the item to include an "${i}" property`);return this.upsertItemById(r,e,t)}upsertItems(e,t){if(t=D(D({},bc),t),!Array.isArray(e))return[this.upsertItem(e,t)];this._dataView.beginUpdate(!0);let i=[];e.forEach(s=>{i.push(this.upsertItem(s,me(D({},t),{highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1})))}),this._dataView.endUpdate();let r=i.map(s=>s.added!==void 0?s.added:s.updated);if(t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent){this.pubSubService.publish("onItemUpserted",e);let s=i.filter(a=>a.added!==void 0);Array.isArray(s)&&s.length>0&&this.pubSubService.publish("onItemAdded",s);let o=i.filter(a=>a.updated!==void 0);Array.isArray(o)&&o.length>0&&this.pubSubService.publish("onItemUpdated",o)}return i}upsertItemById(e,t,i){let r=!1;if(i=D(D({},bc),i),!i?.skipError&&e===void 0&&!this.hasRowSelectionEnabled())throw new Error('[Slickgrid-Universal] Calling Upsert of an item requires the item to include a valid and unique "id" property');let s,o;return this._dataView.getRowById(e)===void 0?(s=this.addItem(t,i),r=!0):(o=this.updateItem(t,{highlightRow:i.highlightRow,selectRow:i.selectRow,triggerEvent:i.triggerEvent}),r=!1),i.triggerEvent&&(this.pubSubService.publish("onItemUpserted",t),r?this.pubSubService.publish("onItemAdded",t):this.pubSubService.publish("onItemUpdated",t)),{added:s,updated:o}}invalidateHierarchicalDataset(e){if(this._gridOptions?.enableTreeData&&this.treeDataService){let t=e??this._dataView.getItems(),i=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(t||[],this.sharedService.allColumns,this._gridOptions);this.sharedService.hierarchicalDataset=i.hierarchical,this.filterService.refreshTreeDataFilters(e),this._dataView.setItems(i.flat),this._grid.invalidate()}}hasRowSelectionEnabled(){let e=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&e}};var Ih=class{get eventHandler(){return this._eventHandler}constructor(){this._eventHandler=new Ce}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(e){let t=e?.getData();this._eventHandler.subscribe(e.onBeforeEditCell,(i,r)=>{if(!i||!r||!e||r.cell===void 0||!e.getColumns||!e.getDataItem)return;let s=e.getColumns()[r.cell];if(typeof s.onBeforeEditCell=="function"){let o={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(r.row)};s.onBeforeEditCell(i,o)}})}bindOnCellChange(e){let t=e?.getData();this._eventHandler.subscribe(e.onCellChange,(i,r)=>{if(!i||!r||!e||r.cell===void 0||!e.getColumns||!e.getDataItem)return;let s=e.getColumns()[r.cell];if(typeof s.onCellChange=="function"){let o={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(r.row)};s.onCellChange(i,o)}})}bindOnClick(e){let t=e?.getData();this._eventHandler.subscribe(e.onClick,(i,r)=>{if(!i||!r||!e||r.cell===void 0||!e.getColumns||!e.getDataItem)return;let s=e.getColumns()[r.cell];if(typeof s.onCellClick=="function"){let o={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(r.row)};s.onCellClick(i,o)}})}};var Oh=class{constructor(e,t,i,r,s,o){this.extensionService=e,this.filterService=t,this.pubSubService=i,this.sharedService=r,this.sortService=s,this.treeDataService=o,this._eventHandler=new Ce,this._columns=[],this._subscriptions=[],this._selectedRowIndexes=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0}get _dataView(){return this._grid?.getData()??{}}get _gridOptions(){return this._grid?.getOptions()??{}}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(e){this._selectedRowDataContextIds=e}init(e){this._grid=e,this.subscribeToAllGridChanges(e)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(e,t=!0,i=!1){if(Array.isArray(e)&&e.length>0){let r=this.getAssociatedGridColumns(this._grid,e);if(r&&Array.isArray(r)&&r.length>0){if(Array.isArray(this.sharedService.allColumns)){let s=[];if(this._gridOptions.enableCheckboxSelector){let o=this._gridOptions?.checkboxSelector?.columnIndexPosition??0;s.push({columnId:"_checkbox_selector",columnIndexPosition:o})}if(this._gridOptions.enableRowDetailView){let o=this._gridOptions?.rowDetailView?.columnIndexPosition??0;s.push({columnId:"_detail_selector",columnIndexPosition:o})}if(this._gridOptions.enableRowMoveManager){let o=this._gridOptions?.rowMoveManager?.columnIndexPosition??0;s.push({columnId:"_move",columnIndexPosition:o})}this.addColumnDynamicWhenFeatureEnabled(s,this.sharedService.allColumns,r)}r.forEach(s=>s.originalWidth=s.width||s.originalWidth),this._grid.setColumns(r),this.sharedService.visibleColumns=r,t?this._grid.autosizeColumns():(i||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(){let{frozenColumn:e,frozenRow:t,frozenBottom:i}=this.sharedService.gridOptions,r={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:e,frozenRow:t,frozenBottom:i}},s=this.getCurrentPagination();if(s&&(r.pagination=s),this.hasRowSelectionEnabled()){let o=this.getCurrentRowSelections();o&&(r.rowSelection=o)}if(this._gridOptions?.enableTreeData){let o=this.getCurrentTreeDataToggleState();o&&(r.treeData=o)}return r}getColumns(){return this._columns}getAssociatedCurrentColumns(e){let t=[];return e&&Array.isArray(e)&&e.forEach(i=>{i?.id&&t.push({columnId:i.id,cssClass:i.cssClass||"",headerCssClass:i.headerCssClass||"",width:i.width||0})}),t}getAssociatedGridColumns(e,t){let i=[],r=this.sharedService.allColumns||e.getColumns();return t&&Array.isArray(t)&&t.forEach(s=>{let o=r.find(a=>a.id===s.columnId);o?.id&&i.push(me(D({},o),{cssClass:s.cssClass||o.cssClass,headerCssClass:s.headerCssClass||o.headerCssClass,width:s.width}))}),this._columns=i,i}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){if(this._gridOptions?.backendServiceApi){let e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService?.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){if(this._gridOptions?.enablePagination)if(this._gridOptions.backendServiceApi){let e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentPagination)return e.getCurrentPagination()}else return this.sharedService.currentPagination;return null}getCurrentRowSelections(){return this._grid&&this._dataView&&this.hasRowSelectionEnabled()?{gridRowIndexes:this._grid.getSelectedRows()||[],dataContextIds:this._dataView.getAllSelectedIds()||[],filteredDataContextIds:this._dataView.getAllSelectedFilteredIds()||[]}:null}getCurrentSorters(){if(this._gridOptions?.backendServiceApi){let e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService?.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){return this._gridOptions?.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){let e=!1;if(this._gridOptions?.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){let t=this._gridOptions.dataView.syncGridSelection;typeof t=="boolean"?e=this._gridOptions.dataView.syncGridSelection:typeof t=="object"&&(e=t.preserveHidden||t.preserveHiddenOnSelectionChange),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e}resetColumns(e){let t=e||this._columns,i=this.getAssociatedCurrentColumns(t);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:_i.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(e=!0){this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,e&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this.extensionService?.getExtensionByName?.(Re.rowSelection)?.instance&&this._grid.setSelectedRows([])}subscribeToAllGridChanges(e){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",t=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:_i.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:_i.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",t=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:_i.sorter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:_i.sorter},gridState:this.getCurrentGridState()})})),this.bindExtensionAddonEventToGridStateChange(Re.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(Re.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",e),this.bindSlickGridOnSetOptionsEventToGridStateChange(e),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,(t,i)=>{let r=(this._selectedRowIndexes||[]).slice(),s=(this.selectedRowDataContextIds||[]).slice();if(this.selectedRowDataContextIds=i.filteredIds,this._selectedRowIndexes=i.rows,!ji(this.selectedRowDataContextIds,s)||!ji(this._selectedRowIndexes,r)){let o={gridRowIndexes:this._selectedRowIndexes||[],dataContextIds:i.selectedRowIds,filteredDataContextIds:i.filteredIds};this.pubSubService.publish("onGridStateChanged",{change:{newValues:o,type:_i.rowSelection},gridState:this.getCurrentGridState()})}}),this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuHideColumns",t=>{let i=this.getAssociatedCurrentColumns(t);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:_i.columns},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",t=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:_i.treeData},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",t=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:_i.treeData},gridState:this.getCurrentGridState()})}))}addColumnDynamicWhenFeatureEnabled(e,t,i){e.sort((r,s)=>r.columnIndexPosition-s.columnIndexPosition),e.forEach(r=>{let s=t.findIndex(a=>a.id===r.columnId),o=i.findIndex(a=>a.id===r.columnId);if(s>=0&&o===-1){let a=t[s];s===0?i.unshift(a):i.splice(s,0,a)}})}bindExtensionAddonEventToGridStateChange(e,t){let r=this.extensionService?.getExtensionByName?.(e)?.instance?.[t];r&&typeof r.subscribe=="function"&&this._eventHandler.subscribe(r,(s,o)=>{let a=o?.columns,l=this.getAssociatedCurrentColumns(a);this.pubSubService.publish("onGridStateChanged",{change:{newValues:l,type:_i.columns},gridState:this.getCurrentGridState()})})}bindSlickGridColumnChangeEventToGridStateChange(e,t){let i=t?.[e];i&&typeof i.subscribe=="function"&&this._eventHandler.subscribe(i,()=>{let r=t.getColumns(),s=this.getAssociatedCurrentColumns(r);this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:_i.columns},gridState:this.getCurrentGridState()})})}bindSlickGridOnSetOptionsEventToGridStateChange(e){let t=e.onSetOptions;this._eventHandler.subscribe(t,(i,r)=>{let{frozenBottom:s,frozenColumn:o,frozenRow:a}=r.optionsBefore,{frozenBottom:l,frozenColumn:u,frozenRow:h}=r.optionsAfter;if(s!==l||o!==u||a!==h){let f={frozenBottom:l,frozenColumn:u,frozenRow:h},m=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:f,type:_i.pinning},gridState:m})}})}hasRowSelectionEnabled(){let e=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&e}};var Ah=class{constructor(e,t){this.extensionUtility=e,this.pubSubService=t,this._subscriptions=[],this._eventHandler=new Ce}get _dataView(){return this._grid?.getData()??{}}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}init(e){if(this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel){this._gridOptions.enableTranslate&&this.translateGroupingAndColSpan(),this._eventHandler.subscribe(e.onSort,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onRendered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onAutosizeColumns,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsResized,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsReordered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(this._dataView.onRowCountChanged,()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this._subscriptions.push(this.pubSubService.subscribe("onColumnPickerColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onHeaderMenuHideColumns",()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this.pubSubService.subscribe("onGridMenuColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onGridMenuMenuClose",()=>this.renderPreHeaderRowGroupingTitles()));let t=e.getPluginByName("Resizer");t?.onGridAfterResize&&this._eventHandler.subscribe(t.onGridAfterResize,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onSetOptions,(i,r)=>{r?.optionsBefore?.frozenColumn!==r?.optionsAfter?.frozenColumn&&this.delayRenderPreHeaderRowGroupingTitles(0)}),this.delayRenderPreHeaderRowGroupingTitles(75)}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}delayRenderPreHeaderRowGroupingTitles(e=0){setTimeout(()=>this.renderPreHeaderRowGroupingTitles(),e)}renderPreHeaderRowGroupingTitles(){if(this._gridOptions&&this._gridOptions.frozenColumn!==void 0&&this._gridOptions.frozenColumn>=0){let e=this._grid.getPreHeaderPanelLeft();this.renderHeaderGroups(e,0,this._gridOptions.frozenColumn+1),e=this._grid.getPreHeaderPanelRight(),this.renderHeaderGroups(e,this._gridOptions?.frozenColumn+1,this._columnDefinitions.length)}else{let e=this._grid.getPreHeaderPanel();this.renderHeaderGroups(e,0,this._columnDefinitions.length)}}renderHeaderGroups(e,t,i){De(e),e.className="slick-header-columns",e.style.left="-1000px",e.style.width=`${this._grid.getHeadersWidth()}px`,e.parentElement&&e.parentElement.classList.add("slick-header");let r=this._grid.getHeaderColumnWidthDiff(),s,o=null,a="",l=0,u=this._gridOptions?.frozenHeaderWidthCalcDifferential??0,h=this._gridOptions?.frozenColumn!==void 0&&this._gridOptions.frozenColumn>=0;for(let f=t;f<i;f++)s=this._columnDefinitions[f],s&&(a===s.columnGroup&&f>0?(l+=s.width||0,o?.style&&(o.style.width=`${l-r-u}px`)):(l=s.width||0,o=E("div",{className:`ui-state-default slick-header-column ${h?"frozen":""}`,style:{width:`${l-r}px`}}),E("span",{className:"slick-column-name",textContent:s.columnGroup||""},o),e.appendChild(o)),a=s.columnGroup||"")}translateGroupingAndColSpan(){let e=this._grid.getColumns();this.extensionUtility.translateItems(e,"columnGroupKey","columnGroup"),this._grid.setColumns(e),this.renderPreHeaderRowGroupingTitles()}};var Rh=class{constructor(e,t,i,r){this.pubSubService=e,this.sharedService=t,this.backendUtilities=i,this.rxjs=r,this._eventHandler=new Ce,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[],this._isCursorBased=!1}get dataView(){return this.grid?.getData()??{}}set paginationOptions(e){this._paginationOptions=e}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this._initialized&&this.refreshPagination()}get isCursorBased(){return this._isCursorBased}addRxJsResource(e){this.rxjs=e}init(e,t,i){if(this._availablePageSizes=t.pageSizes,this.grid=e,this._backendServiceApi=i,this._paginationOptions=t,this._isLocalGrid=!i,this._pageNumber=t.pageNumber||1,this._isCursorBased=i?.options?.useCursor??!1,i&&(!i.service||!i.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,(s,o)=>{this._totalItems!==o.totalRows&&(this.updateTotalItems(o.totalRows),this._previousPagination={pageNumber:o.pageNum,pageSize:o.pageSize,pageSizes:this.availablePageSizes,totalItems:o.totalRows})}),setTimeout(()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))})),this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",()=>this.resetPagination())),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>this.resetPagination())),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",s=>this.processOnItemAddedOrRemoved(s,!0))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",s=>this.processOnItemAddedOrRemoved(s,!1)))),this.refreshPagination(!1,!1,!0);let r=this.getFullPagination();this._previousPagination={pageNumber:r.pageNumber,pageSize:r.pageSize,pageSizes:r.pageSizes,totalItems:this.totalItems},this._initialized=!0}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(e,t,i=!0){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/e),this._itemsPerPage=e,i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToFirstPage(e,t=!0){return this._pageNumber=1,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToLastPage(e,t=!0){return this._pageNumber=this._pageCount||1,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToNextPage(e,t=!0){return this._pageNumber<this._pageCount?(this._pageNumber++,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage,after:this._cursorPageInfo.endCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(e,t,i=!0){if(this.isCursorBased)return console.assert(!0,"Cursor based navigation cannot navigate to arbitrary page"),Promise.resolve(!1);let r=this._pageNumber;return e<1?this._pageNumber=1:e>this._pageCount?this._pageNumber=this._pageCount:this._pageNumber=e,this._pageNumber!==r?i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(e,t=!0){return this._pageNumber>1?(this._pageNumber--,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage,before:this._cursorPageInfo.startCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(e=!1,t=!0,i=!1){let r=D({},this.getFullPagination());if(this._paginationOptions){let o=this._paginationOptions;this._itemsPerPage||(this._isLocalGrid?this._itemsPerPage=o.pageSize:this._itemsPerPage=+(this._backendServiceApi?.options?.paginationOptions?.first?this._backendServiceApi.options.paginationOptions.first:o.pageSize)),(e||this._totalItems!==o.totalItems)&&(e?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&o.pageNumber&&o.pageNumber>1&&(this._pageNumber=o.pageNumber||1),this._pageNumber===1&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=o.pageSizes,!this._totalItems&&o.totalItems&&(this._totalItems=o.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),t&&!ji(r,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),i&&!ji(r,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());let s=this.getFullPagination();this._previousPagination={pageNumber:s.pageNumber,pageSize:s.pageSize,pageSizes:s.pageSizes,totalItems:this.totalItems}}resetPagination(e=!0){this._isLocalGrid&&this.dataView&&this.sharedService?.gridOptions?.enablePagination&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this._cursorPageInfo=void 0,this.refreshPagination(!0,e)}togglePaginationVisibility(e){if(this.grid&&this.sharedService?.gridOptions){let t=e!==void 0?e:!this.sharedService.gridOptions.enablePagination;if(t&&this.goToFirstPage(),this._isLocalGrid&&this.dataView){let i=e?this._itemsPerPage:0;this.dataView.setPagingOptions({pageSize:i,pageNum:0})}this.sharedService.gridOptions.enablePagination=t,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:t})}}processOnPageChanged(e,t,i){return console.assert(!this.isCursorBased||i,"Configured for cursor based pagination - cursorArgs expected"),this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())===!1?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise((r,s)=>{if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:e-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),r(this.getFullPagination());else{let o=+this._itemsPerPage,a=new Date;if(this._backendServiceApi?.preProcess&&this._backendServiceApi.preProcess(),this._backendServiceApi?.process){let l=this.isCursorBased&&i?this._backendServiceApi.service.processOnPaginationChanged(t,i):this._backendServiceApi.service.processOnPaginationChanged(t,{newPage:e,pageSize:o}),u=this._backendServiceApi.process(l);u instanceof Promise?u.then(h=>{this.backendUtilities?.executeBackendProcessesCallback(a,h,this._backendServiceApi,this._totalItems);let f=this.getFullPagination();this._previousPagination={pageNumber:f.pageNumber,pageSize:f.pageSize,pageSizes:f.pageSizes,totalItems:this.totalItems},r(this.getFullPagination())}).catch(h=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(h,this._backendServiceApi),(!this._backendServiceApi?.onError||!this.backendUtilities?.onBackendError)&&s(u)}):this.rxjs?.isObservable(u)&&this._subscriptions.push(u.subscribe(h=>{let f=this.getFullPagination();this._previousPagination={pageNumber:f.pageNumber,pageSize:f.pageSize,pageSizes:f.pageSizes,totalItems:this.totalItems},r(this.backendUtilities?.executeBackendProcessesCallback(a,h,this._backendServiceApi,this._totalItems))},h=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(h,this._backendServiceApi),(!this._backendServiceApi?.onError||!this.backendUtilities?.onBackendError)&&s(u)})),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}})}recalculateFromToIndexes(){this._totalItems===0?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),this._pageNumber=this._totalItems>0&&this._pageNumber===0?1:this._pageNumber,this._dataTo>this._totalItems?this._dataTo=this._totalItems:this._totalItems<this._itemsPerPage&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){let e=this._previousPagination?.pageNumber!==this.getFullPagination().pageNumber,t=this._previousPagination?.pageSize!==this.getFullPagination().pageSize;t&&this.changeItemPerPage(this._previousPagination?.pageSize??0,null,!1),e&&this.goToPageNumber(this._previousPagination?.pageNumber??0,null,!1),(e||t)&&(this.refreshPagination(),this._backendServiceApi?.service?.updatePagination?.(this._previousPagination?.pageNumber??0,this._previousPagination?.pageSize??0))}setCursorBased(e){this._isCursorBased=e,e&&this.setCursorPageInfo({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1}),this.goToFirstPage(),this.pubSubService.publish("onPaginationSetCursorBased",{isCursorBased:e})}setCursorPageInfo(e){this._cursorPageInfo=e}updateTotalItems(e,t=!1){this._totalItems=e,this._paginationOptions&&(this._paginationOptions.totalItems=e,this.refreshPagination(!1,t))}processOnItemAddedOrRemoved(e,t=!0){if(e!==null){let i=this._dataTo,r=Array.isArray(e)?e.length:1,s=t?+r:-r;this._totalItems+=s,this.recalculateFromToIndexes(),this._dataTo=i+s,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}};var QR=20,ZR=25,JR=35,eM=180,tM=300,iM=200,Mh=class{get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get dataView(){return this._grid?.getData()}get gridUid(){return this._grid?.getUID()??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(e){this._intervalRetryDelay=e}get resizeByContentOptions(){return this.gridOptions?.resizeByContentOptions??{}}constructor(e){this.pubSubService=e,this._intervalRetryDelay=iM,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new Ce,this._bindingEventService=new qe}dispose(){this._eventHandler?.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._intervalId&&clearInterval(this._intervalId),clearTimeout(this._timer),this.gridOptions.autoResize?.resizeDetection==="container"&&this._resizeObserver&&this._resizeObserver.disconnect(),this._bindingEventService.unbindAll()}init(e,t){if(!e||!this.gridOptions||!t)throw new Error(`
      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.
      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid() once.`);this._grid=e,this._gridContainerElm=t;let i=this.gridOptions?.gridHeight||this.gridOptions?.gridWidth?{height:this.gridOptions?.gridHeight,width:this.gridOptions?.gridWidth}:void 0;this._autoResizeOptions=this.gridOptions?.autoResize??{container:"grid1",bottomPadding:0},i?.width&&t?.style&&(t.style.width=typeof i.width=="string"?i.width:`${i.width}px`),this._gridDomElm=e?.getContainerNode(),typeof this._autoResizeOptions.container=="string"?this._pageContainerElm=typeof this._autoResizeOptions.container=="string"?document.querySelector(this._autoResizeOptions.container):this._autoResizeOptions.container:this._pageContainerElm=this._autoResizeOptions.container,i&&(this._fixedHeight=i.height,this._fixedWidth=i.width),this.gridOptions&&this.gridOptions.enableAutoResize&&this.bindAutoResizeDataGrid(),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",()=>this.resizeColumnsByCellContent(!0))),this.gridOptions?.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",r=>{this.handleSingleColumnResizeByContent(r.columnId)})),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,(r,s)=>{this.handleSingleColumnResizeByContent(s.triggeredByColumn)}))}bindAutoResizeDataGrid(e){if(this.gridOptions.autoResize?.resizeDetection==="container"){if(!this._pageContainerElm||!this._pageContainerElm)throw new Error(`
          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"
          You can fix this by setting your gridOption.autoResize.container`);this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>this.resizeObserverCallback())),this._resizeObserver.observe(this._pageContainerElm)}else{if(this._gridDomElm===void 0||at(this._gridDomElm)===void 0)return null;this.resizeGrid().then(()=>this.resizeGridWhenStylingIsBrokenUntilCorrected()).catch(t=>console.log("Error:",t)),this.resizeGrid(10,e),this._bindingEventService.bind(window,"resize",this.handleResizeGrid.bind(this,e))}}handleResizeGrid(e){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,e),this.resizeGrid(0,e))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}calculateGridNewDimensions(e){let t=e?.autoResize??{},i=at(this._gridDomElm);if(!window||i===void 0)return null;let r=t?.bottomPadding!==void 0?t.bottomPadding:QR;if(r&&e.enablePagination&&(r+=JR),r&&e.showCustomFooter){let S=this.gridOptions?.customFooterOptions?.footerHeight??ZR;r+=parseInt(`${S}`,10)}let s=0,o=0;t.calculateAvailableSizeBy==="container"?s=_a(this._pageContainerElm,"height")||0:(s=window.innerHeight||0,o=i?.top??0);let a=s-o-r,l=_a(this._pageContainerElm,"width")||window.innerWidth||0,u=t?.maxHeight,h=t?.minHeight??eM,f=t?.maxWidth,m=t?.minWidth??tM,v=a,w=t?.rightPadding?l-t.rightPadding:l;return v<h&&(v=h),u&&v>u&&(v=u),w<m&&(w=m),f&&w>f&&(w=f),{height:this._fixedHeight||v,width:this._fixedWidth||w}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(e){this._resizePaused=e}resizeGrid(e,t){return new Promise(i=>{e=e||0,e>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>i(this.resizeGridCallback(t)),e)):i(this.resizeGridCallback(t))})}resizeGridCallback(e){let t=this.resizeGridWithDimensions(e);return this.pubSubService.publish("onGridAfterResize",t),this.gridOptions.enableAutoResizeColumnsByCellContent&&(!this._lastDimensions?.width||t?.width!==this._lastDimensions?.width)&&this.resizeColumnsByCellContent(!1),this._lastDimensions=t,t}resizeGridWithDimensions(e){let t=this.calculateGridNewDimensions(this.gridOptions);if((e||t)&&this._gridDomElm){let i=e?.height?e.height:t?.height,r=e?.width?e.width:t?.width;this.gridOptions.autoHeight||(this._gridDomElm.style.height=`${i}px`),this._gridDomElm.style.width=`${r}px`,this._gridContainerElm&&(this._gridContainerElm.style.width=`${r}px`),this._grid?.resizeCanvas&&this._gridContainerElm&&this._grid.resizeCanvas(),this.gridOptions?.enableAutoSizeColumns&&this._grid.autosizeColumns?this.gridUid&&document.querySelector(this.gridUidSelector)&&this._grid.autosizeColumns():this.gridOptions.enableAutoResizeColumnsByCellContent&&(!this._lastDimensions?.width||r!==this._lastDimensions?.width)&&this.resizeColumnsByCellContent(!1),this._lastDimensions={height:i||0,width:r||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(e=!0){this._isStopResizeIntervalRequested=e}resizeColumnsByCellContent(e=!1){let t=this._grid.getColumns(),i=this.dataView.getItems(),r={},s=!1,o=0,a=this._gridContainerElm?.offsetWidth??0;if(!Array.isArray(i)||i.length===0||!e&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<a){this._grid.autosizeColumns();return}if(this._hasResizedByContentAtLeastOnce&&this.gridOptions?.resizeByContentOnlyOnFirstLoad&&!e)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),this._totalColumnsWidthByContent===0||e){for(let h of t)r[h.id]=h.originalWidth??h.minWidth??0;o=this.calculateCellWidthByReadingDataset(t,r,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let u=0;for(let h of t){let f=h.resizeAlwaysRecalculateWidth??this.resizeByContentOptions.alwaysRecalculateColumnWidth??!1;h.originalWidth&&!f?h.width=h.originalWidth:r[h.id]!==void 0&&(h.rerenderOnResize&&(s=!0),this.applyNewCalculatedColumnWidthByReference(h,r[h.id])),u+=h.width||0,this._totalColumnsWidthByContent=u}}this._grid.setColumns(t),this._hasResizedByContentAtLeastOnce=!0;let l={};for(let u of t)l[u.id]=u.width;this._totalColumnsWidthByContent>a?this._grid.reRenderColumns(s):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:o,calculateColumnWidths:l})}calculateCellWidthByReadingDataset(e,t,i=1e3,r){let s=Array.isArray(e)?e:[e],o=this.dataView.getItems(),a=0;for(let[l,u]of o.entries()){if(l>i)break;Array.isArray(s)&&typeof t=="object"&&s.forEach((h,f)=>{let m=this.calculateCellWidthByContent(u,h,l,r??f,t[h.id]);m!==void 0&&(t[h.id]=m)}),a=l+1}return a}calculateCellWidthByContent(e,t,i,r,s){let o=this.resizeByContentOptions.cellCharWidthInPx??7;if(!t.originalWidth){let a=t?.resizeCharWidthInPx??o,l=mo(t?.formatter,i,r,t,e,this._grid),u=ti(l),h=Math.ceil(u.length*a),f=t.resizeMaxWidthThreshold;t&&(s===void 0||h>s)&&(s=f!==void 0&&h>f?f:t.maxWidth!==void 0&&h>t.maxWidth?t.maxWidth:h)}return s}applyNewCalculatedColumnWidthByReference(e,t){let i=this.resizeByContentOptions.cellPaddingWidthInPx??6,r=this.resizeByContentOptions.formatterPaddingWidthInPx??6,s=e?.filter?.type??e?.type??b.string,o=t,a=e?.resizeCalcWidthRatio??this.resizeByContentOptions.defaultRatioForStringType??.9;o*=s==="string"?a:1,o+=i,e.resizeExtraWidthPadding&&(o+=e.resizeExtraWidthPadding),e.editor&&this.gridOptions.editable&&(o+=r),e.maxWidth!==void 0&&o>e.maxWidth&&(o=e.maxWidth),e.resizeMaxWidthThreshold!==void 0&&o>e.resizeMaxWidthThreshold&&(o=e.resizeMaxWidthThreshold),o=Math.ceil(o),(e.originalWidth===void 0||e.resizeAlwaysRecalculateWidth===!0||this.resizeByContentOptions.alwaysRecalculateColumnWidth===!0)&&(e.width=this.readjustNewColumnWidthWhenOverLimit(e,o))}handleSingleColumnResizeByContent(e){let t=this._grid.getColumns(),i=t.findIndex(r=>r.id===e);if(i>=0){let r=t[i],s={[e]:r.originalWidth??r.minWidth??0};r.originalWidth=void 0,this.calculateCellWidthByReadingDataset(r,s,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,i),this.applyNewCalculatedColumnWidthByReference(r,s[e]),this._grid.reRenderColumns(r?.rerenderOnResize??!1)}}readjustNewColumnWidthWhenOverLimit(e,t){let i=this.gridOptions.frozenColumn??-1,r=this._grid.getColumns().findIndex(o=>o.id===e.id)??0,s=t;if(i>=0&&r<=i){let o=Array.from(this._grid.getViewports());if(o){let a=o.find(m=>m.classList.contains("slick-viewport-left"))?.clientWidth??0,l=o.find(m=>m.classList.contains("slick-viewport-right"))?.clientWidth??0,u=a+l,h=a-(e.width??0);if(h+t>u){let m=this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment??50;s=a-h+l-m}}}return Math.ceil(s)}checkIsGridShown(){return!!(document.querySelector(`${this.gridUidSelector}`)?.offsetParent??!1)}resizeGridWhenStylingIsBrokenUntilCorrected(){let e=this.gridOptions?.autoFixResizeTimeout??18e3,t=this.gridOptions?.autoFixResizeRequiredGoodCount??5,i=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),r=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`),s=0,o=0;if(i&&r&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){let a=this.dataView.getItemCount(),l=this._grid.getColumns()||[];this._intervalId=setInterval(()=>kt(this,null,function*(){let h=at(i),f=h?.top??0;this.gridOptions&&this.gridOptions.enableFiltering&&this.gridOptions.headerRowHeight&&(f+=this.gridOptions.headerRowHeight),this.gridOptions&&this.gridOptions.createPreHeaderPanel&&this.gridOptions.showPreHeaderPanel&&this.gridOptions.preHeaderPanelHeight&&(f+=this.gridOptions.preHeaderPanelHeight),f+=44;let v=at(r)?.top??0,w=at(this._gridContainerElm),S=h?.top===0||f-v>2||w?.left===0&&w?.top===0,P=this._grid.getRenderedRange()?.rightPx??0;!S&&a>0&&P===0&&l.length>1&&(S=!0),this._isStopResizeIntervalRequested&&(S=!1,s=e),this.checkIsGridShown()&&(S||w?.left===0||w?.top===0)&&(yield this.resizeGrid(),this.checkIsGridShown()&&(S=!1)),this.checkIsGridShown()&&o++,this.checkIsGridShown()&&!S&&(o>=t||s++>=e)&&clearInterval(this._intervalId)}),this.intervalRetryDelay)}}};var Ph=class{constructor(){this._hasColumnsReordered=!1,this._hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(e){this._allColumns=e}get columnDefinitions(){return this._grid?.getColumns()??[]}get currentPagination(){return this._currentPagination}set currentPagination(e){this._currentPagination=e}get dataView(){return this._dataView}set dataView(e){this._dataView=e}get frozenVisibleColumnId(){return this._frozenVisibleColumnId}set frozenVisibleColumnId(e){this._frozenVisibleColumnId=e}get hasColumnsReordered(){return this._hasColumnsReordered}set hasColumnsReordered(e){this._hasColumnsReordered=e}get slickGrid(){return this._grid}set slickGrid(e){this._grid=e}get gridContainerElement(){return this._gridContainerElm}set gridContainerElement(e){this._gridContainerElm=e}get gridOptions(){return this._gridOptions||this._grid?.getOptions()||{}}set gridOptions(e){this._gridOptions=e}get groupItemMetadataProvider(){return this._groupItemMetadataProvider}set groupItemMetadataProvider(e){this._groupItemMetadataProvider=e}get hideHeaderRowAfterPageLoad(){return this._hideHeaderRowAfterPageLoad}set hideHeaderRowAfterPageLoad(e){this._hideHeaderRowAfterPageLoad=e}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(e){this._externalRegisteredResources=e}get visibleColumns(){return this._visibleColumns}set visibleColumns(e){this._visibleColumns=e}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(e){this._hierarchicalDataset=e}};var Nh=class{constructor(e,t,i,r){this.sharedService=e,this.pubSubService=t,this.backendUtilities=i,this.rxjs=r,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new Ce,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}dispose(){this._eventHandler?.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(e){this.rxjs=e}bindBackendOnSort(e){this._isBackendGrid=!0,this._grid=e,this._dataView=e?.getData(),this._eventHandler.subscribe(e.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(e){this._isBackendGrid=!1,this._grid=e,this._dataView=e?.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(e.onSort,this.handleLocalOnSort.bind(this))}handleLocalOnSort(e,t){let i=t.multiColumnSort?t.sortCols:new Array({columnId:t.sortCol?.id??"",sortAsc:t.sortAsc,sortCol:t.sortCol});this._currentLocalSorters=[],Array.isArray(i)&&i.forEach(r=>{r.sortCol&&this._currentLocalSorters.push({columnId:r.sortCol.id,direction:r.sortAsc?sr.ASC:sr.DESC})}),this.onLocalSortChanged(this._grid,i),this.emitSortChanged(ft.local)}clearSortByColumnId(e,t){let i=this.getCurrentColumnSorts(),r=this.getCurrentColumnSorts(`${t}`);if(Array.isArray(i)&&Array.isArray(r)&&i.length!==r.length){if(this._gridOptions.backendServiceApi)this.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:r,grid:this._grid});else if(this._dataView)this.onLocalSortChanged(this._grid,r,!0,!0);else{let a=this._gridOptions?.multiColumnSort??!1?r:r[0];this._grid.onSort.notify(a)}let s=r.map(o=>({columnId:o?.sortCol?.id??"",sortAsc:o?.sortAsc,sortCol:o?.sortCol}));this._grid.setSortColumns(s)}Array.isArray(r)&&r.length===0&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(e=!0){if(this._grid&&this._gridOptions&&this._dataView){if(this._grid.setSortColumns([]),e)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){let t=this._gridOptions?.backendServiceApi?.service;t?.clearSorters&&t.clearSorters()}}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(e=!0,t=!0){let r=!this._gridOptions.enableSorting;this._gridOptions.enableSorting=r;let s;e?(t&&this.clearSorting(),this._eventHandler.unsubscribeAll(),s=this.disableAllSortingCommands(!0)):(s=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,(o,a)=>this.handleLocalOnSort(o,a))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(s)}toggleSortFunctionality(e=!0){let t=this._gridOptions.enableSorting;this.disableSortFunctionality(t,e)}emitSortChanged(e,t){if(e===ft.remote&&this._gridOptions?.backendServiceApi){let i=[],r=this._gridOptions.backendServiceApi.service;r?.getCurrentSorters&&(i=r.getCurrentSorters()),this.pubSubService.publish("onSortChanged",i)}else e===ft.local&&(t&&(this._currentLocalSorters=t),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(e){if(this._grid){let t=this._grid.getSortColumns();if(Array.isArray(t))return t.reduce((r,s)=>(s&&(!e||s.columnId!==e)&&r.push({columnId:s.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(s.columnId||"")],sortAsc:s.sortAsc}),r),[])}return[]}loadGridSorters(e){this._currentLocalSorters=[];let t=[];return Array.isArray(e)&&((this._gridOptions.multiColumnSort?e:e.slice(0,1)).forEach(r=>{let s=this._columnDefinitions.find(o=>o.id===r.columnId);if(s){if(!s.sortable){let o="[Slickgrid-Universal] Cannot add sort icon to a column that is not sortable, please add `sortable: true` to your column or remove it from your list of columns to sort.";throw this._gridOptions.enableTreeData&&(o+=" Also note that TreeData feature requires the column holding the tree (expand/collapse icons) to be sortable."),new Error(o)}t.push({columnId:s.id,sortAsc:r.direction.toUpperCase()===sr.ASC,sortCol:s}),this._currentLocalSorters.push({columnId:String(s.id),direction:r.direction.toUpperCase()})}}),this.onLocalSortChanged(this._grid,t),this._grid.setSortColumns(t.map(r=>({columnId:r.columnId,sortAsc:r.sortAsc})))),t}processTreeDataInitialSort(){if(this._gridOptions?.enableTreeData&&this._gridOptions.treeDataOptions){let e=this._gridOptions.treeDataOptions,t=this._columnDefinitions.find(i=>i.id===e.columnId);if(t){let i=sr.ASC,r={columnId:e.columnId,sortCol:t,sortAsc:!0};if(e?.initialSort?.columnId){let s=e.initialSort.columnId,o=this._columnDefinitions.find(a=>a.id===s);i=(e.initialSort.direction||sr.ASC).toUpperCase(),r={columnId:s,sortCol:o,sortAsc:i===sr.ASC}}r?.columnId&&this.sharedService?.hierarchicalDataset&&this.updateSorting([{columnId:r.columnId||"",direction:i}])}}}onBackendSortChanged(e,t){if(!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');let i=t.grid?.getOptions()??{},r=i.backendServiceApi;if(!r||!r.process||!r.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');let s=new Date;r.preProcess&&r.preProcess();let o=r.service.processOnSortChanged(e,t),a=i?.pagination?.totalItems||0;this.backendUtilities?.executeBackendCallback(r,o,t,s,a,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{this._grid.setSortColumns(t.previousSortColumns||[]);let l=t.previousSortColumns?.map(u=>({columnId:u.columnId,sortAsc:u.sortAsc,sortCol:this._columnDefinitions.find(h=>h.id===u.columnId)}));r?.service?.updateSorters?.(l||[])},httpCancelRequestSubject:this.httpCancelRequests$})}onLocalSortChanged(e,t,i=!1,r=!1){return kt(this,null,function*(){let s=this._gridOptions?.datasetIdPropertyName??"id",o=this._gridOptions?.enableTreeData??!1,a=e.getData();if(yield this.pubSubService.publish("onBeforeSortChange",{sortColumns:t},0),e&&a){if(i&&!o&&a.reSort(),o&&this.sharedService&&Array.isArray(this.sharedService.hierarchicalDataset)){let l=this.sortHierarchicalDataset(this.sharedService.hierarchicalDataset,t);this._dataView.setItems(l.flat,s),this._dataView.onRowCountChanged.notify({previous:this._dataView.getFilteredItemCount(),current:this._dataView.getLength(),itemCount:this._dataView.getItemCount(),dataView:this._dataView,callingOnRowsChanged:!0})}else a.sort(this.sortComparers.bind(this,t));e.invalidate(),r&&this.emitSortChanged(ft.local,t.map(l=>({columnId:l.sortCol?.id??"id",direction:l.sortAsc?sr.ASC:sr.DESC})))}})}sortHierarchicalDataset(e,t,i=!1){this.sortTreeData(e,t);let r=this._gridOptions?.datasetIdPropertyName??"id",s=this._gridOptions?.treeDataOptions??{columnId:""},o=me(D({},s),{identifierPropName:s.identifierPropName??r,shouldAddTreeLevelNumber:!0}),a=Cg(e,o);if(i){this._currentLocalSorters=[];for(let u of t)this._currentLocalSorters.push({columnId:u.columnId,direction:u.sortAsc?"ASC":"DESC"});let l=this._gridOptions?.backendServiceApi?ft.remote:ft.local;this.emitSortChanged(l)}return{hierarchical:e,flat:a}}sortLocalGridByDefaultSortFieldId(){let e=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",t={id:e,field:e};this.onLocalSortChanged(this._grid,new Array({columnId:t.id,sortAsc:!0,sortCol:t,clearSortTriggered:!0}),!1,!0)}sortComparers(e,t,i){if(Array.isArray(e))for(let r of e){let s=this.sortComparer(r,t,i);if(s!==void 0)return s}return st.neutral}sortComparer(e,t,i,r){if(e?.sortCol){let s=e.sortCol,o=e.sortAsc?st.asc:st.desc,a=r||s.queryFieldSorter||s.queryField||s.field,l=a,u=s.type||b.string;typeof s.queryFieldNameGetterFn=="function"&&(a=s.queryFieldNameGetterFn(t),l=s.queryFieldNameGetterFn(i));let h=t[a],f=i[l];if(a?.indexOf(".")>=0&&(h=At(t,a)),l?.indexOf(".")>=0&&(f=At(i,l)),s.sortComparer){let m=s.sortComparer(h,f,o,s,this._gridOptions);if(m!==st.neutral)return m}else{let m=Fr(u,h,f,o,s,this._gridOptions);if(m!==st.neutral)return m}}}sortTreeData(e,t){if(Array.isArray(t))for(let i of t)this.sortTreeChildren(e,i,0)}sortTreeChildren(e,t,i){let s=this._gridOptions?.treeDataOptions?.childrenPropName??"children";e.sort((o,a)=>this.sortComparer(t,o,a)??st.neutral);for(let o of e)o&&o.hasOwnProperty(s)&&Array.isArray(o[s])&&(i++,this.sortTreeChildren(o[s],t,i),i--)}updateSorting(e,t=!0,i=!0){if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(e)){let r=this._gridOptions?.backendServiceApi;if(r){let s=r?.service;s?.updateSorters&&(s.updateSorters(void 0,e),i&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}else this.loadGridSorters(e);if(t){let s=r?ft.remote:ft.local;this.emitSortChanged(s)}}}disableAllSortingCommands(e=!0){let t=this._grid.getColumns();t.forEach(r=>{typeof r.sortable!==void 0&&(r.sortable=!e),r?.header?.menu&&r.header.menu.commandItems?.forEach(s=>{if(s&&typeof s!="string"){let o=s.command;(o==="sort-asc"||o==="sort-desc"||o==="clear-sort")&&(s.hidden=e)}})});let i=this._gridOptions?.gridMenu?.commandItems;return i&&i.forEach(r=>{r&&typeof r!="string"&&r.command==="clear-sorting"&&(r.hidden=e)}),t}};var Fh=class{constructor(e,t,i){this.pubSubService=e,this.sharedService=t,this.sortService=i,this._currentToggledItems=[],this._isLastFullToggleCollapsed=!1,this._isOneCpuCyclePassed=!1,this._isTreeDataEnabled=!1,this._subscriptions=[],this._treeDataRecalcHandler=null,this._eventHandler=new Ce,setTimeout(()=>this._isOneCpuCyclePassed=!0)}set currentToggledItems(e){this._currentToggledItems=e}get dataset(){return this.dataView?.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){return this._grid?.getData()}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(e){if(this._grid=e,this._isTreeDataEnabled=this.gridOptions?.enableTreeData??!1,this._isLastFullToggleCollapsed=this.treeDataOptions?.initiallyCollapsed??!1,this._currentToggledItems=this.gridOptions.presets?.treeData?.toggledItems??[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this._isTreeDataEnabled){if(this.gridOptions?.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!this.gridOptions?.enableFiltering)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if(this.gridOptions?.backendServiceApi||this.gridOptions?.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(e.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this))),this._treeDataRecalcHandler=this.setAutoRecalcTotalsCallbackWhenFeatEnabled(this.gridOptions),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{typeof this._treeDataRecalcHandler=="function"&&this._isOneCpuCyclePassed&&(clearTimeout(this._timer),this._timer=setTimeout(()=>this._treeDataRecalcHandler?.(),this.treeDataOptions?.autoRecalcTotalsDebounce??0))})}applyToggledItemStateChanges(e,t,i=!0,r=!1){if(Array.isArray(e)){let s=this.getTreeDataOptionPropName("collapsedPropName"),o=this.getTreeDataOptionPropName("hasChildrenPropName");this.dataView.beginUpdate(!0);let l=(t??this._lastToggleStateChange.previousFullToggleType)==="full-collapse";t&&(this._lastToggleStateChange.previousFullToggleType=t),i&&(this.dataView.getItems()||[]).forEach(u=>{u[o]&&(u[s]=l)}),this.dynamicallyToggleItemState(e,r)}}dynamicallyToggleItemState(e,t=!0){if(Array.isArray(e)){this.dataView.beginUpdate(!0);for(let i of e){let r=this.dataView.getItemById(i.itemId);if(this.updateToggledItem(r,i.isCollapsed),t){let s=this._currentToggledItems.findIndex(o=>o.itemId===i.itemId);s>=0?this._currentToggledItems[s].isCollapsed=i.isCollapsed:this._currentToggledItems.push({itemId:i.itemId,isCollapsed:i.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",me(D({},this._lastToggleStateChange),{fromItemId:i.itemId,toggledItems:this._currentToggledItems,type:i.isCollapsed?_s.toggleCollapse:_s.toggleExpand}))}}this.dataView.endUpdate(),this.dataView.refresh()}}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(e,t){let i=t?.treeDataOptions,r=i?.initialSort??{columnId:i?.columnId??"",direction:"ASC"},s=e.find(o=>o.id===r.columnId);return{columnId:r.columnId,sortAsc:r?.direction?.toUpperCase()!=="DESC",sortCol:s}}getItemCount(e){if(e!==void 0){let t=this.getTreeDataOptionPropName("levelPropName");return this.dataView.getItems().filter(i=>i[t]===e).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}getTreeDataOptionPropName(e){let t="";switch(e){case"childrenPropName":t=this.treeDataOptions?.childrenPropName??V.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":t=this.treeDataOptions?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":t=this.treeDataOptions?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":t=this.treeDataOptions?.identifierPropName??this.gridOptions?.datasetIdPropertyName??"id";break;case"levelPropName":t=this.treeDataOptions?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":t=this.treeDataOptions?.parentPropName??V.treeDataProperties.PARENT_PROP;break}return t}clearSorting(){let e=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:e.columnId,direction:e.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(e,t,i){let r=this.convertFlatParentChildToTreeDataset(e,i),s=this.getInitialSort(t,i),o=this.sortService.sortHierarchicalDataset(r,[s],!0);return this._grid?.setSortColumns([s]),o}convertFlatParentChildToTreeDataset(e,t){let i=t?.datasetIdPropertyName??"id",r=t?.treeDataOptions??{columnId:"id"},s=me(D({},r),{identifierPropName:r.identifierPropName??i,initiallyCollapsed:this._isLastFullToggleCollapsed});return yg(e,s)}enableAutoRecalcTotalsFeature(e=!0){e&&this._isTreeDataEnabled?this._treeDataRecalcHandler=this.recalculateTreeTotals.bind(this,this.gridOptions):this._treeDataRecalcHandler=null}recalculateTreeTotals(e){let t=e.treeDataOptions,i=t?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,r=t?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP;t?.aggregators&&(t.aggregators.forEach(s=>{va(this.sharedService.hierarchicalDataset||[],{childrenPropName:i,levelPropName:r,aggregator:s})}),this._grid.invalidate())}sortHierarchicalDataset(e,t){let i=t??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),r=Array.isArray(i)?i:[i];return this.sortService.sortHierarchicalDataset(e,r)}toggleTreeDataCollapse(e,t=!0){return kt(this,null,function*(){if(this.gridOptions?.enableTreeData){let r=this.getTreeDataOptionPropName("hasChildrenPropName");t&&(yield this.pubSubService.publish("onTreeFullToggleStart",{collapsing:e})),this.dataView.beginUpdate(!0),(this.dataView.getItems()||[]).forEach(s=>{s[r]&&this.updateToggledItem(s,e)}),this.dataView.endUpdate(),this.dataView.refresh(),this._isLastFullToggleCollapsed=e}let i=e?_s.fullCollapse:_s.fullExpand;this._lastToggleStateChange={type:i,previousFullToggleType:i,toggledItems:null},t&&this.pubSubService.publish("onTreeFullToggleEnd",this._lastToggleStateChange)})}handleOnCellClick(e,t){if(e&&t){let i=e.target||{},r=this.gridOptions.datasetIdPropertyName??"id",s=this.getTreeDataOptionPropName("collapsedPropName"),o=this.getTreeDataOptionPropName("childrenPropName");if(typeof i?.className=="string"&&(i.className.indexOf("toggle")>=0||!1)){let l=this.dataView.getItem(t.row);if(l){l[s]=!l[s];let u=l[s],h=l[r],f=this._currentToggledItems.findIndex(w=>w.itemId===h);f>=0?this._currentToggledItems[f].isCollapsed=u:this._currentToggledItems.push({itemId:h,isCollapsed:u}),this.dataView.updateItem(h,l);let m=w=>w[r]===h,v=so(this.sharedService.hierarchicalDataset||[],m,o);v&&(v[s]=u),this._grid.invalidate(),this._lastToggleStateChange={type:u?_s.toggleCollapse:_s.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",me(D({},this._lastToggleStateChange),{fromItemId:h}))}e.stopImmediatePropagation()}}}updateToggledItem(e,t){let i=this.gridOptions?.datasetIdPropertyName??"id",r=this.getTreeDataOptionPropName("childrenPropName"),s=this.getTreeDataOptionPropName("collapsedPropName");if(e){e[s]=t,this.dataView.updateItem(e[i],e);let o=l=>l[i]===e[i],a=so(this.sharedService.hierarchicalDataset||[],o,r);a&&(a[s]=t)}}setAutoRecalcTotalsCallbackWhenFeatEnabled(e){return e?.enableTreeData&&e?.treeDataOptions?.autoRecalcTotalsOnFilterChange&&e?.treeDataOptions?.aggregators?this.recalculateTreeTotals.bind(this,e):null}};var di=class{constructor(e){this.translaterService=e,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.inputFilterType="single",this.searchTerms=[],this._bindEventService=new qe}get columnFilter(){return this.columnDef?.filter??{}}get defaultOperator(){return ne.empty}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}get gridOptions(){return this.grid?.getOptions()??{}}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.inputFilterType==="compound"&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this._cellContainerElm=e.filterContainerElm;let t=this.gridOptions?.backendServiceApi;this._debounceTypingDelay=(t?t?.filterTypingDebounce??this.gridOptions?.defaultBackendServiceFilterTypingDebounce:this.gridOptions?.filterTypingDebounce)??0;let i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(i),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._filterInputElm,"wheel",this.onTriggerEvent.bind(this),{passive:!0}),this.inputFilterType==="compound"&&this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(e=!0){this._filterInputElm&&(this._shouldTriggerQuery=e,this.searchTerms=[],this._filterInputElm.value="",this._currentValue=void 0,this.inputFilterType==="compound"&&this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0,this._filterContainerElm.classList.remove("filled")),this._filterInputElm.classList.remove("filled"),this.onTriggerEvent(void 0,!0))}destroy(){this._bindEventService.unbindAll(),this._selectOperatorElm?.remove?.(),this._filterInputElm?.remove?.()}getValues(){return this._filterInputElm.value}setValues(e,t){let i=Array.isArray(e)?e:[e],r="";for(let s of i)this.inputFilterType==="single"?r=t?this.addOptionalOperatorIntoSearchString(s,t):s:r=`${s}`,this._filterInputElm.value=`${r??""}`,this._currentValue=this._filterInputElm.value;if(this.getValues()!==""?(this._filterContainerElm.classList.add("filled"),this._filterInputElm.classList.add("filled")):(this._filterContainerElm.classList.remove("filled"),this._filterInputElm.classList.remove("filled")),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){let s=Pr(this.operator);this._selectOperatorElm.value=s}}addOptionalOperatorIntoSearchString(e,t){let i="",r="",s=e==null?"":`${e}`;if(t&&s){switch(t){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":i=t;break;case"EndsWith":case"*z":i="*";break;case"StartsWith":case"a*":r="*";break}s=`${i}${s}${r}`}return s}getCompoundOperatorOptionValues(){let e=this.columnDef.type&&this.columnDef.type?this.columnDef.type:b.string,t=[];if(this.columnFilter?.compoundOperatorList)return this.columnFilter.compoundOperatorList;switch(e){case b.string:case b.text:case b.readonly:case b.password:t=VE(this.gridOptions,this.translaterService);break;default:t=wa(this.gridOptions,this.translaterService);break}return t}createDomFilterElement(e){let t=this.columnDef?.id??"";De(this._cellContainerElm);let i=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(i=this.columnFilter.placeholder);let r=`${e??""}`;if(this._filterInputElm=E("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",placeholder:i,ariaLabel:this.columnFilter?.ariaLabel??`${ci(t+"")} Search Filter`,className:`form-control filter-${t}`,value:r,dataset:{columnid:`${t}`}}),e&&this._filterInputElm.classList.add("filled"),e!==void 0&&(this._currentValue=r),this.inputFilterType==="single")this._filterContainerElm=this._filterInputElm,this._filterInputElm.classList.add("search-filter"),this._cellContainerElm.appendChild(this._filterInputElm),this._cellContainerElm.appendChild(document.createElement("span"));else{this._filterInputElm.classList.add("compound-input"),this._selectOperatorElm=Ea(this.getCompoundOperatorOptionValues(),this.grid),this._filterContainerElm=E("div",{className:`form-group search-filter filter-${t}`});let s=E("div",{className:"input-group"},this._filterContainerElm);E("div",{className:"input-group-addon input-group-prepend operator"},s).appendChild(this._selectOperatorElm),s.appendChild(this._filterInputElm),s.appendChild(E("span")),this.operator&&(this._selectOperatorElm.value=Pr(this.operator)),this._filterContainerElm&&this._cellContainerElm.appendChild(this._filterContainerElm)}}onTriggerEvent(e,t=!1){if(t)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:t,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterContainerElm.classList.remove("filled");else{let i=e?.type??"",r=this._selectOperatorElm?.value??this.operator,s=this._filterInputElm.value,o=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof s=="string"&&o&&(s=s.trim()),e?.target?.tagName.toLowerCase()!=="select"&&(this._currentValue=s),s===""?this._filterContainerElm.classList.remove("filled"):this._filterContainerElm.classList.add("filled");let a={columnDef:this.columnDef,operator:r,searchTerms:s?[s]:null,shouldTriggerQuery:this._shouldTriggerQuery},l=i==="keyup"&&e?.key!=="Enter"?this._debounceTypingDelay:0,u=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput;(this.inputFilterType==="single"||!u||this._currentValue!==void 0)&&(l>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>this.callback(e,a),l)):this.callback(e,a))}this._shouldTriggerQuery=!0}};var Ec=class extends di{constructor(e){super(e),this.translaterService=e,this.inputType="text",this.inputFilterType="compound"}};var kh=class extends di{constructor(e){super(e),this.translaterService=e,this.inputType="number",this.inputFilterType="compound"}};var Lh=class extends di{constructor(e){super(e),this.translaterService=e,this.inputType="password",this.inputFilterType="compound"}};var Cv="#86bff8",Vh=0,nM=20,Os=class{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._sliderTrackFilledColor=Cv,this.sliderType="double",this.searchTerms=[],this._bindEventService=new qe}get columnFilter(){return this.columnDef?.filter??{}}get currentValue(){return this._currentValue}get currentValues(){return this._currentValues}get defaultOperator(){return this.sliderType==="compound"?ne.empty:this.sliderType==="single"?ne.greaterThanOrEqual:this.gridOptions.defaultFilterRangeOperator||ne.rangeInclusive}get gridOptions(){return this.grid?.getOptions()??{}}get sliderOptions(){return this._sliderOptions}get operator(){return this._operator||(this.columnFilter.operator??this.defaultOperator)}set operator(e){this._operator=e}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=e?.searchTerms??[],this._argFilterContainerElm=e.filterContainerElm,this._sliderTrackFilledColor=window.getComputedStyle(document.documentElement).getPropertyValue("--slick-slider-filter-filled-track-color")||Cv,this._filterElm=this.createDomFilterElement(this.searchTerms)}clear(e=!0){if(this._filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];let t=+(this.columnFilter.filterOptions?.sliderStartValue??V.SLIDER_DEFAULT_MIN_VALUE),i=+(this.columnFilter.filterOptions?.sliderEndValue??V.SLIDER_DEFAULT_MAX_VALUE);this.sliderType==="double"?(this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=`${t}`),this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${i}`),this._currentValues=[t,i],this._sliderLeftInputElm?.dispatchEvent(new Event("change")),this._sliderRightInputElm?.dispatchEvent(new Event("change"))):(this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${t}`),this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this._currentValue=t,this._sliderRightInputElm?.dispatchEvent(new Event("change"))),(this.columnFilter.filterOptions?.hideSliderNumber??this.columnFilter.filterOptions?.hideSliderNumbers)||(this.sliderType==="double"?this.renderSliderValues(t,i):this.renderSliderValues(void 0,t)),this._divContainerFilterElm.classList.remove("filled"),this._filterElm.classList.remove("filled"),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:e,searchTerms:[]})}}destroy(){this._bindEventService.unbindAll(),this._sliderTrackElm?.remove(),this._sliderLeftInputElm?.remove(),this._sliderRightInputElm?.remove()}renderSliderValues(e,t){this._leftSliderNumberElm?.textContent&&e&&(this._leftSliderNumberElm.textContent=e.toString()),this._rightSliderNumberElm?.textContent&&t&&(this._rightSliderNumberElm.textContent=t.toString())}getValues(){return this.sliderType==="double"?this._currentValues:this._currentValue}setValues(e,t){if(e){let s=[],o=Array.isArray(e)?e?.[0]:e;if(Array.isArray(e)&&e.length===2?s=e:typeof o=="string"&&o.indexOf("..")>0?(s=o.split(".."),this._currentValue=+(s?.[0]??0)):(ya(o)||o==="")&&(this._currentValue=o===null?void 0:+o,s=[o]),this.sliderType!=="double"&&this._sliderRightInputElm)this._sliderRightInputElm.value=typeof e=="string"?e:`${o}`,this.renderSliderValues(void 0,this._sliderRightInputElm.value);else if(Array.isArray(s)&&s.length===2&&!this.columnFilter.filterOptions?.hideSliderNumbers){let[a,l]=s;this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=String(a??V.SLIDER_DEFAULT_MIN_VALUE)),this._sliderRightInputElm&&(this._sliderRightInputElm.value=String(l??V.SLIDER_DEFAULT_MAX_VALUE)),this.renderSliderValues(...s)}}else this._currentValue=void 0,this._currentValues=void 0;let i=this.getValues();if((i===void 0?[]:Array.isArray(i)?i:[i]).length>0?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),t!==void 0&&(this.operator=t),this.operator&&this._selectOperatorElm){let s=Pr(this.operator);this._selectOperatorElm.value=s}}createDomFilterElement(e){let t=this.columnDef?.id??"",i=+(this.columnFilter.minValue??V.SLIDER_DEFAULT_MIN_VALUE),r=+(this.columnFilter.maxValue??V.SLIDER_DEFAULT_MAX_VALUE),s=+(this.columnFilter.valueStep??V.SLIDER_DEFAULT_STEP);De(this._argFilterContainerElm);let o=+((Array.isArray(e)&&e?.[0])??this.columnFilter.filterOptions?.sliderStartValue??i),a=+((Array.isArray(e)&&e?.[1])??this.columnFilter.filterOptions?.sliderEndValue??r);if(this._sliderRangeContainElm=E("div",{className:`filter-input filter-${t} slider-input-container slider-values`,title:this.sliderType==="double"?`${o} - ${a}`:`${o}`}),this._sliderTrackElm=E("div",{className:"slider-track"}),this.sliderType==="compound"){let f=E("span",{className:"input-group-addon input-group-prepend operator"});this._selectOperatorElm=Ea(this.getOperatorOptionValues(),this.grid),f.appendChild(this._selectOperatorElm)}this.sliderType==="double"&&(this._sliderLeftInputElm=E("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${ci(t+"")} Search Filter`,defaultValue:`${o}`,value:`${o}`,min:`${i}`,max:`${r}`,step:`${s}`}));let l=this.sliderType==="double"?a:o;this._sliderRightInputElm=E("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${ci(t+"")} Search Filter`,defaultValue:`${l}`,value:`${l}`,min:`${i}`,max:`${r}`,step:`${s}`});let u=this.columnFilter.filterOptions?.hideSliderNumber??this.columnFilter.filterOptions?.hideSliderNumbers,h=u?"":"input-group";if(this._divContainerFilterElm=E("div",{className:`${h} search-filter slider-container slider-values filter-${t}`.trim()}),this._sliderRangeContainElm.appendChild(this._sliderTrackElm),this.sliderType==="double"&&this._sliderLeftInputElm&&this._sliderRangeContainElm.appendChild(this._sliderLeftInputElm),this._sliderRangeContainElm.appendChild(this._sliderRightInputElm),u)this._divContainerFilterElm.appendChild(this._sliderRangeContainElm);else{let f;this.sliderType==="compound"&&this._selectOperatorElm?(f=E("span",{className:"input-group-addon input-group-prepend operator"}),f.appendChild(this._selectOperatorElm)):this.sliderType==="double"&&(f=E("div",{className:"input-group-addon input-group-prepend slider-range-value"}),this._leftSliderNumberElm=E("span",{className:`input-group-text lowest-range-${t}`,textContent:`${o}`}),f.appendChild(this._leftSliderNumberElm));let m=E("div",{className:"input-group-addon input-group-append slider-range-value"});this._rightSliderNumberElm=E("span",{className:`input-group-text highest-range-${t}`,textContent:`${l}`},m),f&&this._divContainerFilterElm.appendChild(f),this._divContainerFilterElm.appendChild(this._sliderRangeContainElm),this._divContainerFilterElm.appendChild(m)}return this._sliderOptions={minValue:i,maxValue:r,step:s},this._currentValues=[o,a],Array.isArray(e)&&e.length>0&&e[0]!==""&&(this._divContainerFilterElm.classList.add("filled"),this._currentValue=o),(this.columnFilter.filterOptions?.sliderStartValue!==void 0||this.columnFilter.minValue!==void 0)&&(this._currentValue=o),this._argFilterContainerElm.appendChild(this._divContainerFilterElm),this.updateTrackFilledColorWhenEnabled(),this._bindEventService.bind(this._sliderTrackElm,"click",this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["input","change"],this.slideRightInputChanged.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this)),this.sliderType==="compound"&&this._selectOperatorElm?this._bindEventService.bind(this._selectOperatorElm,["change"],this.onValueChanged.bind(this)):this.sliderType==="double"&&this._sliderLeftInputElm&&(this._bindEventService.bind(this._sliderLeftInputElm,["input","change"],this.slideLeftInputChanged.bind(this)),this._bindEventService.bind(this._sliderLeftInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this))),this._divContainerFilterElm}getOperatorOptionValues(){return this.columnFilter.compoundOperatorList?this.columnFilter.compoundOperatorList:wa(this.gridOptions,this.translaterService)}onValueChanged(e){let t=parseInt(this._sliderRightInputElm?.value??"",10),i,r;if(this.sliderType==="compound"||this.sliderType==="single")e?.target?.tagName?.toLowerCase()!=="select"&&(this._currentValue=+t),i=this._currentValue,r=[i||"0"];else if(this.sliderType==="double"){let o=[parseInt(this._sliderLeftInputElm?.value??"",10),t];i=o.join(".."),r=o}if(this._clearFilterTriggered)this._filterElm.classList.remove("filled"),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery});else{let s=this._selectOperatorElm?.value??this.operator;i===""?this._filterElm.classList.remove("filled"):this._filterElm.classList.add("filled");let o=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput;(this.sliderType!=="compound"||!o||this._currentValue!==void 0)&&this.callback(e,{columnDef:this.columnDef,operator:s||"",searchTerms:r,shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.changeBothSliderFocuses(!1),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},me(D({},new Xe),{target:this._argFilterContainerElm}))}changeBothSliderFocuses(e){let t=e?"add":"remove";this._sliderLeftInputElm?.classList[t]("focus"),this._sliderRightInputElm?.classList[t]("focus")}slideLeftInputChanged(){let e=parseInt(this._sliderLeftInputElm?.value??"",10),t=parseInt(this._sliderRightInputElm?.value??"",10);this._sliderLeftInputElm&&t-e<=(this.columnFilter.filterOptions?.stopGapBetweenSliderHandles??Vh)&&(this._sliderLeftInputElm.value=String(e-(this.columnFilter.filterOptions?.stopGapBetweenSliderHandles??Vh))),this._sliderLeftInputElm&&this._sliderRightInputElm&&(+this._sliderLeftInputElm.value>=+this._sliderRightInputElm.value-nM?(this._sliderLeftInputElm.style.zIndex="1",this._sliderRightInputElm.style.zIndex="0"):(this._sliderLeftInputElm.style.zIndex="0",this._sliderRightInputElm.style.zIndex="1")),this.sliderLeftOrRightChanged(e,t)}slideRightInputChanged(){let e=parseInt(this._sliderLeftInputElm?.value??"",10),t=parseInt(this._sliderRightInputElm?.value??"",10);this.sliderType==="double"&&this._sliderRightInputElm&&t-e<=(this.columnFilter.filterOptions?.stopGapBetweenSliderHandles??Vh)&&(this._sliderRightInputElm.value=String(e+(this.columnFilter.filterOptions?.stopGapBetweenSliderHandles??Vh))),this.sliderLeftOrRightChanged(e,t)}sliderLeftOrRightChanged(e,t){this.updateTrackFilledColorWhenEnabled(),this.changeBothSliderFocuses(!0),this._sliderRangeContainElm.title=this.sliderType==="double"?`${e} - ${t}`:`${t}`,(this.columnFilter.filterOptions?.hideSliderNumber??this.columnFilter.filterOptions?.hideSliderNumbers)||(this._leftSliderNumberElm?.textContent&&(this._leftSliderNumberElm.textContent=this._sliderLeftInputElm?.value??""),this._rightSliderNumberElm?.textContent&&(this._rightSliderNumberElm.textContent=this._sliderRightInputElm?.value??"")),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},me(D({},new Xe),{target:this._argFilterContainerElm}))}sliderTrackClicked(e){e.preventDefault();let t=e.offsetX,i=this._sliderTrackElm.offsetWidth,r=(t+0)*100/i;this._sliderRightInputElm&&this.sliderType!=="double"?(this._sliderRightInputElm.value=`${r}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))):this._sliderLeftInputElm&&this._sliderRightInputElm&&(r<=50?(this._sliderLeftInputElm.value=`${r}`,this._sliderLeftInputElm.dispatchEvent(new Event("change"))):(this._sliderRightInputElm.value=`${r}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))))}updateTrackFilledColorWhenEnabled(){if(this.columnFilter.filterOptions?.enableSliderTrackColoring&&this._sliderRightInputElm){let e=0;this._sliderLeftInputElm&&(e=(+this._sliderLeftInputElm.value-+this._sliderLeftInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderLeftInputElm.min)*100);let t=(+this._sliderRightInputElm.value-+this._sliderRightInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderRightInputElm.min)*100,i="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,this.columnFilter.filterOptions?.sliderTrackFilledColor||this._sliderTrackFilledColor||Cv).replace(/%p1/g,`${e}%`).replace(/%p2/g,`${t}%`);this._sliderTrackElm.style.background=i,this._sliderOptions.sliderTrackBackground=i}}};var Hh=class extends Os{constructor(e){super(e),this.translaterService=e,this.sliderType="compound"}};var Bh=class extends xa{constructor(e){super(e),this.translaterService=e,this.inputFilterType="range"}};var Uh=class extends di{constructor(e){super(e),this.translaterService=e,this._inputMask="",this.inputType="text"}get inputMask(){return this._inputMask}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this._cellContainerElm=e.filterContainerElm,this.columnDef?.params?.mask?this._inputMask=this.columnDef.params.mask:this.columnFilter?.params?.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error(`[Slickgrid-Universal] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params
        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]`);let t=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(t),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this))}onTriggerEvent(e,t=!1){let i="";if(e?.target?.value){let r=e?.target?.value??"",s=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof r=="string"&&s&&(r=r.trim());let o=this.unmaskValue(r),a=this.maskValue(o);i=o,e?.keyCode>=48&&(this._filterInputElm.value=a,e.preventDefault())}t?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:t,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterInputElm.classList.remove("filled")):(this._filterInputElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[i],shouldTriggerQuery:this._shouldTriggerQuery})),this._shouldTriggerQuery=!0}maskValue(e){let t=0,i="";return this._inputMask&&(i=this._inputMask.replace(/[09A]/gi,r=>((r==="0"||r==="9")&&/\d+/g.test(e[t])||r.toUpperCase()==="A"&&/[^\d]+/gi.test(e[t]))&&e[t++]||"")),i}unmaskValue(e){let t=e.replace(/[^0-9a-z]*/gi,""),i=this._inputMask.replace(/[^0-9a-z]*/gi,""),r="";for(let s=0;s<i.length;s++)t[s]&&((i[s]==="0"||i[s]==="9")&&/\d+/g.test(t[s])||i[s].toUpperCase()==="A"&&/[^\d]+/gi.test(t[s]))&&(r+=t[s]);return r}};var zh=class extends di{constructor(e){super(e),this.translaterService=e,this.inputType="number"}};var $h=class extends di{constructor(e){super(e),this.translaterService=e,this.inputType="password"}};var rM=Object.defineProperty,sM=(n,e,t)=>e in n?rM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,be=(n,e,t)=>(sM(n,typeof e!="symbol"?e+"":e,t),t),oM=class{constructor(n){be(this,"_distinctEvent"),be(this,"_boundedEvents",[]),this._distinctEvent=n?.distinctEvent??!1}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(n,e,t,i,r=""){let s=Array.isArray(e)?e:[e];if(typeof n?.forEach=="function")n.forEach(o=>{for(let a of s)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(o,a))&&(o.addEventListener(a,t,i),this._boundedEvents.push({element:o,eventName:a,listener:t,groupName:r}))});else for(let o of s)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(n,o))&&(n.addEventListener(o,t,i),this._boundedEvents.push({element:n,eventName:o,listener:t,groupName:r}))}hasBinding(n,e){return this._boundedEvents.some(t=>t.element===n&&(!e||t.eventName===e))}unbind(n,e,t){if(n){let i=Array.isArray(n)?n:[n],r=Array.isArray(e)?e||"":[e||""];for(let s of i){t||(t=this._boundedEvents.find(o=>{if(o.element===s&&(!e||o.eventName===e))return o.listener}));for(let o of r)s?.removeEventListener?.(o,t)}}}unbindAll(n){if(n){let e=Array.isArray(n)?n:[n];for(let t=this._boundedEvents.length-1;t>=0;--t){let i=this._boundedEvents[t];if(e.some(r=>r===i.groupName)){let{element:r,eventName:s,listener:o}=i;this.unbind(r,s,o),this._boundedEvents.splice(t,1)}}}else for(;this._boundedEvents.length>0;){let e=this._boundedEvents.pop(),{element:t,eventName:i,listener:r}=e;this.unbind(t,i,r)}}},Nw=typeof window<"u"&&window.multipleSelect!==void 0?window.multipleSelect:{locales:{}};Nw.locales={"en-US":{formatSelectAll(){return"[Select all]"},formatAllSelected(){return"All selected"},formatCountSelected(n,e){return`${n} of ${e} selected`},formatNoMatchesFound(){return"No matches found"},formatOkButton(){return"OK"}}};var Fw=Nw.locales,aM=50,lM=4,kw={name:"",placeholder:"",classes:"",classPrefix:"",data:void 0,locale:void 0,selectAll:!0,single:void 0,singleRadio:!1,multiple:!1,hideOptgroupCheckboxes:!1,multipleWidth:80,width:void 0,dropWidth:void 0,maxHeight:250,maxHeightUnit:"px",position:"bottom",displayValues:!1,displayTitle:!1,displayDelimiter:", ",minimumCountSelected:3,ellipsis:!1,isOpen:!1,keepOpen:!1,openOnHover:!1,container:null,filter:!1,filterGroup:!1,filterPlaceholder:"",filterAcceptOnEnter:!1,filterByDataLength:void 0,customFilter(n){let{text:e,label:t,search:i}=n;return(t||e||"").includes(i)},showClear:!1,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoAdjustDropWidthByTextSize:!1,adjustedHeightPadding:10,useSelectOptionLabel:!1,useSelectOptionLabelToHtml:!1,cssStyler:()=>null,styler:()=>!1,textTemplate:n=>n.innerHTML.trim(),labelTemplate:n=>n.label,onOpen:()=>!1,onClose:()=>!1,onCheckAll:()=>!1,onUncheckAll:()=>!1,onFocus:()=>!1,onBlur:()=>!1,onOptgroupClick:()=>!1,onBeforeClick:()=>!0,onClick:()=>!1,onFilter:()=>!1,onClear:()=>!1,onAfterCreate:()=>!1,onDestroy:()=>!1,onAfterDestroy:()=>!1,onDestroyed:()=>!1},cM=["init","getOptions","refreshOptions","getSelects","setSelects","enable","disable","open","close","check","uncheck","checkAll","uncheckAll","checkInvert","focus","blur","refresh","destroy"];Object.assign(kw,Fw["en-US"]);var uM={BLOCK_ROWS:aM,CLUSTER_BLOCKS:lM,DEFAULTS:kw,METHODS:cM},Hn=uM;function dM(n,e,t=!1){let i=Object.keys(n),r=Object.keys(e);if(t&&i.length!==r.length)return!1;for(let s of i)if(r.includes(s)&&n[s]!==e[s])return!1;return!0}function Sv(n){let e=()=>{let r={};for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=Sv(n[s]));return r},t=()=>n.map(r=>Sv(r)),i=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();return i==="object"?e():i==="array"?t():n}function yv(n){return n!=null&&n!==""}function hM(n,e){return typeof n=="object"?Object.fromEntries(e?Object.entries(n).filter(([t,i])=>!yv(i)&&!e.includes(t)||yv(i)):Object.entries(n).filter(([t,i])=>yv(i))):n}function fM(n){let e=0;return n.forEach((t,i)=>{t.type==="optgroup"?(t._key=`group_${i}`,t.visible=typeof t.visible>"u"?!0:t.visible,t.children.forEach((r,s)=>{r&&(r.visible=typeof r?.visible>"u"?!0:r.visible,r.divider||(r._key=`option_${i}_${s}`,e+=1))})):(t.visible=typeof t.visible>"u"?!0:t.visible,t.divider||(t._key=`option_${i}`,e+=1))}),e}function jh(n,e,t){if(Array.isArray(n))for(let i of n){if(i[e]===t||i[e]===`${+i[e]}`&&+i[e]===t)return i;if(i.type==="optgroup"){for(let r of i.children)if(r&&(r[e]===t||r[e]===`${+r[e]}`&&+r[e]===t))return r}}}function pM(n){return n.replace(/(\b)(on[a-z]+)(\s*)=([^>]*)|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;|&#60;)(\/*)(script|script defer)(.*)(&#62;|&gt;|&gt;">)/gi,"")}function bv(n){return Object.keys(n).forEach(e=>n[e]===void 0?delete n[e]:""),n}function mM(n){return n.replace(/[\W_]+(.)/g,(e,t)=>t.toUpperCase())}function Ha(n){return typeof n!="string"?n:n.normalize?n.normalize("NFD").replace(/[\u0300-\u036F]/g,""):[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}].reduce((e,{letters:t,base:i})=>e.replace(t,i),n)}function Rw(n){let e={};if(n){let t=n.replace(/\s/g,"").split(";");for(let i of t){let[r,s]=i.trim().split(":");r&&(e[mM(r)]=s.trim())}console.warn("[multiple-select-vanilla] Please note that `styler` is deprecated, please migrate to `cssStyler` when possible.")}return e}function Ev(n){let e=0,t=0,i=0,r=0,s=window.innerHeight??0,o=window.innerWidth??0,a=vM(),l=a.top,u=a.left,h=Tv(n);if(h){let f=h.top??0,m=h.left??0;t=f-l,e=s-(f-l),i=m-u,r=o-(m-u)}return{top:t,bottom:e,left:i,right:r}}function Gi(n,e,t){let i=document.createElement(n);return e&&Object.keys(e).forEach(r=>{let s=e[r];typeof s=="object"?Object.assign(i[r],s):i[r]=e[r]}),t?.appendChild&&t.appendChild(i),i}function Lw(n,e,t){let i="";n.props?.innerHTML&&(i=n.props.innerHTML,delete n.props.innerHTML);let r=Gi(n.tagName,hM(n.props,["className","title","style"]),e),s=t;if(s||(s=r),i&&(r.innerHTML=i),n.attrs)for(let o of Object.keys(n.attrs))r.setAttribute(o,n.attrs[o]);if(n.children)for(let o of n.children)Lw(o,r,s);return e?.appendChild(r),r}function Dv(n){return n.hasOwnProperty("tagName")?Lw(n):document.createElement("li")}function xv(n){for(;n?.firstChild;)n.lastChild&&n.removeChild(n.lastChild);return n}function Tv(n){if(!n)return;let e=n?.getBoundingClientRect?.(),t=0,i=0,r=0,s=0;return e?.top!==void 0&&e.left!==void 0&&(t=e.top+window.pageYOffset,i=e.left+window.pageXOffset,s=e.right,r=e.bottom),{top:t,left:i,bottom:r,right:s}}function Wh(n,e,t){let i=parseFloat(n.style[t]);if(!i||isNaN(i)){switch(e){case"outer":i=n[t==="width"?"offsetWidth":"offsetHeight"];break;case"scroll":i=n[t==="width"?"scrollWidth":"scrollHeight"];break;case"inner":default:i=n[t==="width"?"clientWidth":"clientHeight"];break}i=n.getBoundingClientRect()[t]}if(!i||isNaN(i)){let r=n.style.display,s=n.style.position;n.style.display="block",n.style.position="absolute";let o=window.getComputedStyle(n)[t];i=parseFloat(o),isNaN(i)&&(i=0),n.style.display=r,n.style.position=s}return i||0}function Mw(n,e){let t=null,i=n?.parentElement;for(;i;){let[r,s,o,a]=e.match(/^([a-z]*)([#.]{1})([a-z\-]+)$/i)||[];if(o&&a)for(let l of a.replace(o,"").split(" "))i.classList.contains(l)&&(s?i?.tagName.toLowerCase()===s&&(t=i):t=i);i=i.parentElement}return t}function gM(n,e){n.parentNode?.insertBefore(e,n.nextSibling)}function Pw(n,e){n?.style&&(n.style.display=n.style.display==="none"&&e!==!1||e===!0?"block":"none")}function vM(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}var _M=class{constructor(n){be(this,"cache"),be(this,"clusterRows"),be(this,"dataStart"),be(this,"dataEnd"),be(this,"rows"),be(this,"scrollEl"),be(this,"blockHeight"),be(this,"clusterHeight"),be(this,"contentEl"),be(this,"parentEl"),be(this,"itemHeight"),be(this,"lastCluster"),be(this,"scrollTop"),be(this,"destroy"),be(this,"callback"),be(this,"sanitizer"),this.rows=n.rows,this.scrollEl=n.scrollEl,this.contentEl=n.contentEl,this.parentEl=n.contentEl?.parentElement,this.callback=n.callback,this.cache={},this.scrollTop=this.scrollEl.scrollTop,this.initDOM(this.rows),this.scrollEl.scrollTop=this.scrollTop,this.lastCluster=0;let e=()=>{this.lastCluster!==(this.lastCluster=this.getNum())&&(this.initDOM(this.rows),this.callback())};this.scrollEl.addEventListener("scroll",e,!1),this.destroy=()=>{xv(this.contentEl),this.scrollEl.removeEventListener("scroll",e,!1)}}initDOM(n){if(typeof this.clusterHeight>"u"){this.cache.scrollTop=this.scrollEl.scrollTop;let s=Dv(n[0]);this.contentEl.appendChild(s),this.contentEl.appendChild(s),this.contentEl.appendChild(s),this.cache.data=[n[0]],this.getRowsHeight()}let e=this.initData(n,this.getNum()),t=this.checkChanges("data",e.rows),i=this.checkChanges("top",e.topOffset),r=this.checkChanges("bottom",e.bottomOffset);xv(this.contentEl),t&&i?(e.topOffset&&this.contentEl.appendChild(this.getExtra("top",e.topOffset)),e.rows.forEach(s=>this.contentEl.appendChild(Dv(s))),e.bottomOffset&&this.contentEl.appendChild(this.getExtra("bottom",e.bottomOffset))):r&&this.contentEl.lastChild&&(this.contentEl.lastChild.style.height=`${e.bottomOffset}px`)}getRowsHeight(){if(typeof this.itemHeight>"u"){let n=this.parentEl?.style.display||"";this.parentEl&&(n===""||n==="none")&&(this.parentEl.style.display="block");let e=this.contentEl.children,t=e[Math.floor(e.length/2)];this.itemHeight=t.offsetHeight,this.parentEl&&(this.parentEl.style.display=n)}this.blockHeight=this.itemHeight*Hn.BLOCK_ROWS,this.clusterRows=Hn.BLOCK_ROWS*Hn.CLUSTER_BLOCKS,this.clusterHeight=this.blockHeight*Hn.CLUSTER_BLOCKS}getNum(){this.scrollTop=this.scrollEl.scrollTop;let n=(this.clusterHeight||0)-(this.blockHeight||0);return n&&Math.floor(this.scrollTop/n)||0}initData(n,e){if(n.length<Hn.BLOCK_ROWS)return{topOffset:0,bottomOffset:0,rowsAbove:0,rows:n};let t=Math.max((this.clusterRows-Hn.BLOCK_ROWS)*e,0),i=t+this.clusterRows,r=Math.max(t*this.itemHeight,0),s=Math.max((n.length-i)*this.itemHeight,0),o=[],a=t;r<1&&a++;for(let l=t;l<i;l++)n[l]&&o.push(n[l]);return this.dataStart=t,this.dataEnd=i,{topOffset:r,bottomOffset:s,rowsAbove:a,rows:o}}checkChanges(n,e){let t=e!==this.cache[n];return this.cache[n]=e,t}getExtra(n,e){let t=document.createElement("li");return t.className=`virtual-scroll-${n}`,e&&(t.style.height=`${e}px`),t}},CM=class{constructor(n,e){this.elm=n,be(this,"_bindEventService"),be(this,"allSelected",!1),be(this,"fromHtml",!1),be(this,"choiceElm"),be(this,"closeElm"),be(this,"closeSearchElm"),be(this,"filterText",""),be(this,"updateData",[]),be(this,"data",[]),be(this,"dataTotal"),be(this,"dropElm"),be(this,"okButtonElm"),be(this,"filterParentElm"),be(this,"lastFocusedItemKey",""),be(this,"ulElm"),be(this,"parentElm"),be(this,"labelElm"),be(this,"selectAllParentElm"),be(this,"selectAllElm"),be(this,"searchInputElm"),be(this,"selectGroupElms"),be(this,"selectItemElms"),be(this,"noResultsElm"),be(this,"options"),be(this,"selectAllName",""),be(this,"selectGroupName",""),be(this,"selectItemName",""),be(this,"tabIndex"),be(this,"updateDataStart"),be(this,"updateDataEnd"),be(this,"virtualScroll"),be(this,"locales",{}),this.options=Object.assign({},Hn.DEFAULTS,this.elm.dataset,e),this._bindEventService=new oM({distinctEvent:!0})}get isRenderAsHtml(){return this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml}init(){this.initLocale(),this.initContainer(),this.initData(),this.initSelected(!0),this.initFilter(),this.initDrop(),this.initView(),this.options.onAfterCreate()}destroy(n=!0){this.elm&&this.parentElm&&(this.options.onDestroy({hardDestroy:n}),n&&this.options.onHardDestroy(),this.elm.parentElement&&this.parentElm.parentElement&&this.elm.parentElement.insertBefore(this.elm,this.parentElm.parentElement.firstChild),this.elm.classList.remove("ms-offscreen"),this._bindEventService.unbindAll(),this.tabIndex&&(this.elm.tabIndex=+this.tabIndex),this.virtualScroll?.destroy(),this.dropElm?.remove(),this.parentElm.parentNode?.removeChild(this.parentElm),this.fromHtml&&(delete this.options.data,this.fromHtml=!1),this.options.onAfterDestroy({hardDestroy:n}),n&&(this.options.onAfterHardDestroy?.(),Object.keys(this.options).forEach(e=>delete this[e])))}initLocale(){if(this.options.locale){let n=window.multipleSelect.locales,e=this.options.locale.split(/-|_/);if(e[0]=e[0].toLowerCase(),e[1]&&(e[1]=e[1].toUpperCase()),n[this.options.locale])Object.assign(this.options,n[this.options.locale]);else if(n[e.join("-")])Object.assign(this.options,n[e.join("-")]);else if(n[e[0]])Object.assign(this.options,n[e[0]]);else throw new Error(`[multiple-select-vanilla] invalid locales "${this.options.locale}", make sure to import it before using it`)}}initContainer(){let n=this.elm.getAttribute("name")||this.options.name||"";this.options.classes&&this.elm.classList.add(this.options.classes),this.options.classPrefix&&(this.elm.classList.add(this.options.classPrefix),this.options.size&&this.elm.classList.add(`${this.options.classPrefix}-${this.options.size}`)),this.elm.style.display="none",this.labelElm=this.elm.closest("label"),!this.labelElm&&this.elm.id&&(this.labelElm=document.createElement("label"),this.labelElm.htmlFor=this.elm.id),this.labelElm?.querySelector("input")&&(this.labelElm=null),typeof this.options.single>"u"&&(this.options.single=!this.elm.multiple),this.parentElm=Gi("div",{className:`ms-parent ${this.elm.className||""} ${this.options.classes}`,dataset:{test:"sel"}});let e=this.elm.getAttribute("title")||"";e&&(this.parentElm.title=e),this.options.placeholder=this.options.placeholder||this.elm.getAttribute("placeholder")||"",this.tabIndex=this.elm.tabIndex;let t;this.tabIndex!==null&&(this.elm.tabIndex=-1,t=this.tabIndex),this.choiceElm=Gi("button",{className:"ms-choice",type:"button"},this.parentElm),t!==void 0&&(this.choiceElm.tabIndex=t),this.choiceElm.appendChild(Gi("span",{className:"ms-placeholder",textContent:this.options.placeholder})),this.options.showClear&&this.choiceElm.appendChild(Gi("div",{className:"icon-close"})),this.choiceElm.appendChild(Gi("div",{className:"icon-caret"})),this.dropElm=Gi("div",{className:`ms-drop ${this.options.position}`,ariaExpanded:"false"},this.parentElm),n&&(this.dropElm.dataset.name=n);let i=this.elm.getAttribute("data-test")||this.options.dataTest;i&&(this.parentElm.dataset.test=i,this.dropElm.dataset.test=i),this.closeElm=this.choiceElm.querySelector(".icon-close"),this.options.dropWidth&&(this.dropElm.style.width=typeof this.options.dropWidth=="string"?this.options.dropWidth:`${this.options.dropWidth}px`),gM(this.elm,this.parentElm),this.elm.disabled&&this.choiceElm.classList.add("disabled"),this.selectAllName=`selectAll${n}`,this.selectGroupName=`selectGroup${n}`,this.selectItemName=`selectItem${n}`,this.options.keepOpen||(this._bindEventService.unbindAll("body-click"),this._bindEventService.bind(document.body,"click",r=>{r.target===this.choiceElm||Mw(r.target,".ms-choice")===this.choiceElm||(r.target===this.dropElm||Mw(r.target,".ms-drop")!==this.dropElm&&r.target!==this.elm)&&this.options.isOpen&&this.close()},void 0,"body-click"))}initData(){let n=[];if(this.options.data){if(Array.isArray(this.options.data))this.data=this.options.data.map(e=>typeof e=="string"||typeof e=="number"?{text:e,value:e}:e);else if(typeof this.options.data=="object"){for(let[e,t]of Object.entries(this.options.data))n.push({value:e,text:`${t}`});this.data=n}}else this.elm.childNodes.forEach(e=>{let t=this.initRow(e);t&&n.push(t)}),this.options.data=n,this.data=n,this.fromHtml=!0;this.dataTotal=fM(this.data||[])}initRow(n,e){let t={};return n.tagName?.toLowerCase()==="option"?(t.type="option",t.text=this.options.textTemplate(n),t.value=n.value,t.visible=!0,t.selected=!!n.selected,t.disabled=e||n.disabled,t.classes=n.getAttribute("class")||"",t.title=n.getAttribute("title")||"",n.dataset.value&&(t._value=n.dataset.value),Object.keys(n.dataset).length&&(t._data=n.dataset,t._data.divider&&(t.divider=t._data.divider)),t):n.tagName?.toLowerCase()==="optgroup"?(t.type="optgroup",t.label=this.options.labelTemplate(n),t.visible=!0,t.selected=!!n.selected,t.disabled=n.disabled,t.children=[],Object.keys(n.dataset).length&&(t._data=n.dataset),n.childNodes.forEach(i=>{t.children.push(this.initRow(i,t.disabled))}),t):null}initDrop(){this.initList(),this.update(!0),this.options.isOpen&&this.open(10),this.options.openOnHover&&this.parentElm&&(this._bindEventService.bind(this.parentElm,"mouseover",()=>this.open(null)),this._bindEventService.bind(this.parentElm,"mouseout",()=>this.close()))}initFilter(){if(this.filterText="",this.options.filter||!this.options.filterByDataLength)return;let n=0;for(let e of this.data||[])e.type==="optgroup"?n+=e.children.length:n+=1;this.options.filter=n>this.options.filterByDataLength}initList(){if(this.options.filter&&(this.filterParentElm=Gi("div",{className:"ms-search"},this.dropElm),this.filterParentElm.appendChild(Gi("input",{autocomplete:"off",autocapitalize:"off",spellcheck:!1,type:"text",placeholder:this.options.filterPlaceholder||"\u{1F50E}\uFE0E"})),this.options.showSearchClear&&this.filterParentElm.appendChild(Gi("span",{className:"icon-close"}))),this.options.selectAll&&!this.options.single){let n=this.elm.getAttribute("name")||this.options.name||"";this.selectAllParentElm=Gi("div",{className:"ms-select-all",tabIndex:0});let e=document.createElement("label");Gi("input",{type:"checkbox",ariaChecked:String(this.allSelected),checked:this.allSelected,dataset:{name:`selectAll${n}`},tabIndex:-1},e),e.appendChild(Gi("span",{textContent:this.formatSelectAll()})),this.selectAllParentElm.appendChild(e),this.dropElm.appendChild(this.selectAllParentElm)}this.ulElm=document.createElement("ul"),this.dropElm.appendChild(this.ulElm),this.options.showOkButton&&!this.options.single&&(this.okButtonElm=Gi("button",{className:"ms-ok-button",type:"button",textContent:this.formatOkButton()},this.dropElm)),this.initListItems()}initListItems(){let n=0,e=this.getListRows();if(this.options.selectAll&&!this.options.single&&(n=-1),e.length>Hn.BLOCK_ROWS*Hn.CLUSTER_BLOCKS){this.virtualScroll?.destroy();let t=this.dropElm.style.display!=="none";t||(this.dropElm.style.left="-10000",this.dropElm.style.display="block",this.dropElm.ariaExpanded="true");let i=()=>{this.virtualScroll&&(this.updateDataStart=this.virtualScroll.dataStart+n,this.updateDataEnd=this.virtualScroll.dataEnd+n,this.updateDataStart<0&&(this.updateDataStart=0),this.updateDataEnd>this.getDataLength()&&(this.updateDataEnd=this.getDataLength()))};this.ulElm&&(this.virtualScroll=new _M({rows:e,scrollEl:this.ulElm,contentEl:this.ulElm,sanitizer:this.options.sanitizer,callback:()=>{i(),this.events()}})),i(),t||(this.dropElm.style.left="0",this.dropElm.style.display="none",this.dropElm.ariaExpanded="false")}else this.ulElm&&(xv(this.ulElm),e.forEach(t=>this.ulElm.appendChild(Dv(t)))),this.updateDataStart=0,this.updateDataEnd=this.updateData.length,this.virtualScroll=null;return this.events(),e}getListRows(){let n=[];return this.updateData=[],this.data?.forEach(e=>n.push(...this.initListItem(e))),n.push({tagName:"li",props:{className:"ms-no-results",textContent:this.formatNoMatchesFound(),tabIndex:0}}),n}initListItem(n,e=0){let t=n?.title||"",i=this.options.multiple?"multiple":"",r=this.options.single?"radio":"checkbox",s="";if(!n?.visible)return[];if(this.updateData.push(n),this.options.single&&!this.options.singleRadio&&(s="hide-radio "),n.selected&&(s+="selected "),n.type==="optgroup"){let v=[],w=this.options.hideOptgroupCheckboxes||this.options.single?{tagName:"span",props:{dataset:{name:this.selectGroupName,key:n._key}}}:{tagName:"input",props:{type:"checkbox",dataset:{name:this.selectGroupName,key:n._key},ariaChecked:String(n.selected||!1),checked:!!n.selected,disabled:n.disabled,tabIndex:-1}};!s.includes("hide-radio")&&(this.options.hideOptgroupCheckboxes||this.options.single)&&(s+="hide-radio ");let S={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(S.props,n.label);let P={tagName:"li",props:{className:`group ${s}`.trim(),tabIndex:s.includes("hide-radio")||n.disabled?-1:0},children:[{tagName:"label",props:{className:`optgroup${this.options.single||n.disabled?" disabled":""}`},children:[w,S]}]},R=this.options.cssStyler(n),M=String(this.options.styler(n)||"");return M&&(P.props.style=Rw(M)),R&&(P.props.style=R),v.push(P),n.children.forEach(x=>v.push(...this.initListItem(x,1))),v}if(s+=n.classes||"",e&&this.options.single&&(s+=`option-level-${e} `),n.divider)return[{tagName:"li",props:{className:"option-divider"}}];let o=i||s?(i+s).trim():"",a=`${n.disabled?"disabled":""}`,l={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(l.props,n.text);let u={tagName:"input",props:{type:r,value:encodeURI(n.value),dataset:{key:n._key,name:this.selectItemName},ariaChecked:String(n.selected||!1),checked:!!n.selected,disabled:!!n.disabled,tabIndex:-1}};n.selected&&(u.attrs={checked:"checked"});let h={tagName:"li",props:{className:o,title:t,tabIndex:n.disabled?-1:0,dataset:{key:n._key}},children:[{tagName:"label",props:{className:a},children:[u,l]}]},f=this.options.cssStyler(n),m=String(this.options.styler(n)||"");return m&&(h.props.style=Rw(m)),f&&(h.props.style=f),[h]}initSelected(n=!1){let e=0;for(let t of this.data||[])if(t.type==="optgroup"){let i=t.children.filter(r=>r&&r.selected&&!r.disabled&&r.visible).length;t.children.length&&(t.selected=!this.options.single&&i&&i===t.children.filter(r=>r&&!r.disabled&&r.visible&&!r.divider).length),e+=i}else e+=t.selected&&!t.disabled&&t.visible?1:0;this.allSelected=this.data?.filter(t=>t.selected&&!t.disabled&&t.visible).length===this.data?.filter(t=>!t.disabled&&t.visible&&!t.divider).length,n||(this.allSelected?this.options.onCheckAll():e===0&&this.options.onUncheckAll())}initView(){let n;window.getComputedStyle?(n=window.getComputedStyle(this.elm).width,n==="auto"&&(n=Wh(this.dropElm,"outer","width")+20)):n=Wh(this.elm,"outer","width")+20,this.parentElm.style.width=`${this.options.width||n}px`,this.elm.classList.add("ms-offscreen")}events(){this._bindEventService.unbindAll(["ok-button","search-input","select-all-checkbox","input-checkbox-list","group-checkbox-list"]),this.closeSearchElm=this.filterParentElm?.querySelector(".icon-close"),this.searchInputElm=this.dropElm.querySelector(".ms-search input"),this.selectAllElm=this.dropElm.querySelector(`input[data-name="${this.selectAllName}"]`),this.selectGroupElms=this.dropElm.querySelectorAll(`input[data-name="${this.selectGroupName}"],span[data-name="${this.selectGroupName}"]`),this.selectItemElms=this.dropElm.querySelectorAll(`input[data-name="${this.selectItemName}"]:enabled`),this.noResultsElm=this.dropElm.querySelector(".ms-no-results");let n=t=>{t.preventDefault(),!t.target.classList.contains("icon-close")&&this[this.options.isOpen?"close":"open"]()};this.labelElm&&this._bindEventService.bind(this.labelElm,"click",t=>{t.target.nodeName.toLowerCase()==="label"&&(n(t),(!this.options.filter||!this.options.isOpen)&&this.focus(),t.stopPropagation())}),this._bindEventService.bind(this.choiceElm,"click",n),this.options.onFocus&&this._bindEventService.bind(this.choiceElm,"focus",this.options.onFocus),this.options.onBlur&&this._bindEventService.bind(this.choiceElm,"blur",this.options.onBlur),this._bindEventService.bind(this.parentElm,"keydown",t=>{t.code==="Escape"&&!this.options.keepOpen&&(this.close(),this.choiceElm.focus())}),this.closeElm&&this._bindEventService.bind(this.closeElm,"click",t=>{t.preventDefault(),this._checkAll(!1,!0),this.initSelected(!1),this.updateSelected(),this.update(),this.options.onClear()}),this.closeSearchElm&&this._bindEventService.bind(this.closeSearchElm,"click",t=>{t.preventDefault(),this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter()}),this.searchInputElm&&(this._bindEventService.bind(this.searchInputElm,"keydown",t=>{t.code==="Tab"&&t.shiftKey&&this.close()},void 0,"search-input"),this._bindEventService.bind(this.searchInputElm,"keyup",t=>{if(this.options.filterAcceptOnEnter&&["Enter","Space"].includes(t.code)&&this.searchInputElm?.value){if(this.options.single){let i=[];this.selectItemElms?.forEach(r=>{r.closest("li")?.style.display!=="none"&&i.push(r)}),i.length&&i[0].hasAttribute("data-name")&&this.setSelects([i[0].value])}else this.selectAllElm?.click();this.close(),this.focus();return}this.filter()},void 0,"search-input")),this.selectAllElm&&this._bindEventService.bind(this.selectAllElm,"click",t=>this._checkAll(t.currentTarget?.checked),void 0,"select-all-checkbox"),this.okButtonElm&&this._bindEventService.bind(this.okButtonElm,"click",t=>{n(t),t.stopPropagation()},void 0,"ok-button"),this._bindEventService.bind(this.selectGroupElms,"click",t=>{let i=t.currentTarget,r=i.checked,s=jh(this.data,"_key",i.dataset.key);this._checkGroup(s,r),this.options.onOptgroupClick(bv({label:s.label,selected:s.selected,data:s._data,children:s.children.map(o=>{if(o)return bv({text:o.text,value:o.value,selected:o.selected,disabled:o.disabled,data:o._data})})}))},void 0,"group-checkbox-list"),this._bindEventService.bind(this.selectItemElms,"click",t=>{let i=t.currentTarget,r=i.checked,s=jh(this.data,"_key",i.dataset.key),o=()=>{this.options.single&&this.options.isOpen&&!this.options.keepOpen&&this.close()};if(this.options.onBeforeClick(s)===!1){o();return}this._check(s,r),this.options.onClick(bv({text:s.text,value:s.value,selected:s.selected,data:s._data})),o()},void 0,"input-checkbox-list"),this.lastFocusedItemKey&&this.dropElm.querySelector(`li[data-key=${this.lastFocusedItemKey}]`)?.focus();let e=Array.from(this.dropElm.querySelectorAll("div.ms-select-all, li"));this._bindEventService.unbindAll("tabindex-arrow"),this._bindEventService.bind(this.dropElm,"keydown",t=>{let i=t.target.closest(".ms-select-all")||t.target.closest("li");if(this.dropElm.contains(i)){let r=0,s=e.length;for(r=0;r<s&&!e[r].isEqualNode(i);r++);switch(t.key){case"ArrowUp":t.preventDefault(),r>0&&(this.lastFocusedItemKey=this.focusOnUpDownItem(e,r,t.key)?.dataset.key||"");break;case"ArrowDown":t.preventDefault(),r<e.length-1&&(this.lastFocusedItemKey=this.focusOnUpDownItem(e,r,t.key)?.dataset.key||"");break;case"Enter":case" ":t.preventDefault(),i.querySelector("input")?.click(),this.options.single&&(this.choiceElm.focus(),this.lastFocusedItemKey=this.choiceElm?.dataset.key||"");break;default:}}},void 0,"tabindex-arrow")}focusOnUpDownItem(n,e,t){let i=e,r;for(;r=n[t==="ArrowUp"?i-1:i+1];){if(r.classList.contains("option-divider")){t==="ArrowUp"?i--:i++;continue}break}return r?(r.focus(),r):null}open(n=0){if(n!==null&&n>=0){let e;clearTimeout(e),e=setTimeout(()=>this.openDrop(),n)}else this.openDrop()}openDrop(){if(this.choiceElm?.classList.contains("disabled"))return;if(this.options.isOpen=!0,this.parentElm.classList.add("ms-parent-open"),this.choiceElm?.querySelector("div")?.classList.add("open"),this.dropElm.style.display="block",this.dropElm.ariaExpanded="true",this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="block"),this.noResultsElm&&(this.noResultsElm.style.display="none"),this.getDataLength()||(this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="none"),this.noResultsElm&&(this.noResultsElm.style.display="block")),this.options.container){let r=Tv(this.dropElm),s;this.options.container instanceof Node?s=this.options.container:typeof this.options.container=="string"&&(s=this.options.container==="body"?document.body:document.querySelector(this.options.container)),s.appendChild(this.dropElm),this.dropElm.style.top=`${r?.top??0}px`,this.dropElm.style.left=`${r?.left??0}px`,this.dropElm.style.minWidth="auto",this.dropElm.style.width=`${Wh(this.parentElm,"outer","width")}px`}let n=this.options.minHeight,e=this.options.maxHeight;this.options.maxHeightUnit==="row"&&(e=Wh(this.dropElm.querySelector("ul>li"),"outer","height")*this.options.maxHeight);let t=this.dropElm.querySelector("ul");t&&(n&&(t.style.minHeight=`${n}px`),t.style.maxHeight=`${e}px`),this.dropElm.querySelectorAll(".multiple").forEach(r=>r.style.width=`${this.options.multipleWidth}px`),this.getDataLength()&&this.options.filter&&(this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter(!0)),this.options.autoAdjustDropWidthByTextSize&&this.adjustDropWidthByText();let i=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){let{bottom:r,top:s}=Ev(this.dropElm),o=this.dropElm.getBoundingClientRect().height;i=r<o&&s>r?"top":"bottom"}this.adjustDropHeight(i)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(!0),this.options.onOpen()}close(){this.options.isOpen=!1,this.parentElm.classList.remove("ms-parent-open"),this.choiceElm?.querySelector("div")?.classList.remove("open"),this.dropElm.style.display="none",this.dropElm.ariaExpanded="false",this.options.container&&(this.parentElm.appendChild(this.dropElm),this.dropElm.style.top="auto",this.dropElm.style.left="auto"),this.options.onClose()}applyAsTextOrHtmlWhenEnabled(n,e){n||(n={}),this.isRenderAsHtml?n.innerHTML=typeof this.options.sanitizer=="function"?this.options.sanitizer(e):e:n.textContent=e}update(n=!1){let e=this.getSelects(),t=this.getSelects("text");this.options.displayValues&&(t=e);let i=this.choiceElm?.querySelector("span"),r=e.length,s=null,o=()=>{if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){let l=e.join(this.options.displayDelimiter);return this.options.useSelectOptionLabelToHtml?pM(l):l}return t.join(this.options.displayDelimiter)};if(i){if(r===0){let l=this.options.placeholder||"";i.classList.add("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(i,l)}else r<this.options.minimumCountSelected?s=o():this.formatAllSelected()&&r===this.dataTotal?s=this.formatAllSelected():this.options.ellipsis&&r>this.options.minimumCountSelected?s=`${t.slice(0,this.options.minimumCountSelected).join(this.options.displayDelimiter)}...`:this.formatCountSelected(r,this.dataTotal)&&r>this.options.minimumCountSelected?s=this.formatCountSelected(r,this.dataTotal):s=o();if(s!==null&&(i?.classList.remove("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(i,s)),this.options.displayTitle||this.options.addTitle){this.options.addTitle&&console.warn("[Multiple-Select-Vanilla] Please note that the `addTitle` option was deprecated and replaced by `displayTitle`.");let l=this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"value":"text";i.title=this.getSelects(l).join(this.options.displayDelimiter)}}let a=this.getSelects();this.options.single?this.elm.value=a.length?a[0]:"":Array.from(this.elm.options).forEach(l=>{l.selected=a.some(u=>u===l.value)}),n||this.elm.dispatchEvent(new Event("change"))}updateSelected(n){for(let t=this.updateDataStart;t<this.updateDataEnd;t++){let i=this.updateData[t],r=this.dropElm.querySelector(`input[data-key=${i._key}]`);if(r){r.checked=i.selected;let s=r.closest("li");s&&(i.selected&&!s.classList.contains("selected")?s.classList.add("selected"):i.selected||s.classList.remove("selected"))}}let e=this.data?.filter(t=>t.visible).length===0;this.selectAllElm&&(this.selectAllElm.checked=this.allSelected,Pw(this.selectAllElm.closest("li"),!e)),Pw(this.noResultsElm,e),this.virtualScroll&&(this.virtualScroll.rows=n??this.getListRows())}getData(){return this.options.data}getDataLength(){return this.data?.length??0}getOptions(n=!0){let e=Object.assign({},this.options);return delete e.data,n?Sv(e):this.options}refreshOptions(n){dM(this.options,n,!0)||(this.options=Object.assign(this.options,n),this.destroy(!1),this.init())}getDropElement(){return this.dropElm}getParentElement(){return this.parentElm}getSelects(n="value"){let e=[];for(let t of this.data||[])if(t.type==="optgroup"){let i=t.children.filter(r=>r?.selected);if(!i.length)continue;if(n==="value"||this.options.single)e.push(...i.map(r=>n==="value"&&r._value||r[n]));else{let r=[];r.push("["),r.push(t.label),r.push(`: ${i.map(s=>s[n]).join(", ")}`),r.push("]"),e.push(r.join(""))}}else t.selected&&e.push(n==="value"&&t._value||t[n]);return e}setSelects(n,e="value",t=!1){let i=!1,r=s=>{for(let o of s){let a=!1;if(e==="text"){let l=document.createElement("div");this.applyAsTextOrHtmlWhenEnabled(l,o.text),a=n.includes(l.textContent?.trim()??"")}else a=n.includes(o._value||o.value),!a&&o.value===`${+o.value}`&&(a=n.includes(+o.value));o.selected!==a&&(i=!0),o.selected=a}};for(let s of this.data||[])s.type==="optgroup"?r(s.children):r([s]);i&&(this.initSelected(t),this.updateSelected(),this.update(t))}enable(){this.choiceElm?.classList.remove("disabled")}disable(){this.choiceElm?.classList.add("disabled")}check(n){let e=jh(this.data,"value",n);e&&this._check(e,!0)}uncheck(n){let e=jh(this.data,"value",n);e&&this._check(e,!1)}_check(n,e){this.options.single&&this._checkAll(!1,!0),n.selected=e,this.initSelected(),this.updateSelected(),this.update()}checkAll(){this._checkAll(!0)}uncheckAll(){this._checkAll(!1)}_checkAll(n,e){for(let t of this.data||[])t.type==="optgroup"?this._checkGroup(t,n,!0):!t.disabled&&!t.divider&&(e||t.visible)&&(t.selected=n);e||(this.initSelected(),this.updateSelected(),this.update())}_checkGroup(n,e,t){n.selected=e,n.children.forEach(i=>{i&&!i.disabled&&!i.divider&&(t||i.visible)&&(i.selected=e)}),t||(this.initSelected(),this.updateSelected(),this.update())}checkInvert(){if(!this.options.single){for(let n of this.data||[])if(n.type==="optgroup")for(let e of n.children)e&&(e.divider||(e.selected=!e.selected));else n&&!n.divider&&(n.selected=!n.selected);this.initSelected(),this.updateSelected(),this.update()}}focus(){this.choiceElm?.focus(),this.options.onFocus()}blur(){this.choiceElm?.blur(),this.options.onBlur()}refresh(){this.destroy(!1),this.init()}filter(n){let e=this.searchInputElm?.value.trim()??"",t=e.toLowerCase();if(this.filterText===t)return;this.filterText=t;for(let r of this.data||[])if(r.type==="optgroup")if(this.options.filterGroup){let s=`${r?.label??""}`;if(r!=null){let o=this.options.customFilter({label:Ha(s.toString().toLowerCase()),search:Ha(t),originalLabel:s,originalSearch:e,row:r});r.visible=o;for(let a of r.children)a&&(a.visible=o)}}else{for(let s of r.children)if(s!=null){let o=`${s?.text??""}`;s.visible=this.options.customFilter({text:Ha(o.toString().toLowerCase()),search:Ha(t),originalText:o,originalSearch:e,row:s,parent:r})}r.visible=r.children.filter(s=>s?.visible).length>0}else{let s=`${r?.text??""}`;r.visible=this.options.customFilter({text:Ha(s.toString().toLowerCase()),search:Ha(t),originalText:s,originalSearch:e,row:r})}let i=this.initListItems();this.initSelected(n),this.updateSelected(i),n||this.options.onFilter(e)}adjustDropHeight(n){let e=n!=="top",t=this.filterParentElm?.getBoundingClientRect().height??0,i=this.okButtonElm?.getBoundingClientRect().height??0,r=this.options.single?0:this.selectAllParentElm?.getBoundingClientRect().height??0,s=t+i+r+5,{bottom:o,top:a}=Ev(this.parentElm),l=this.options.maxHeight;if(e?l=o-s-this.options.adjustedHeightPadding:l=a-s-this.options.adjustedHeightPadding,!this.options.maxHeight||this.options.maxHeight&&l<this.options.maxHeight){let u=this.dropElm?.querySelector("ul");return u&&(u.style.maxHeight=`${l}px`),!0}return!1}adjustDropPosition(n){let e="bottom";if(this.dropElm&&this.parentElm){let{bottom:t,top:i}=Ev(this.dropElm),{top:r,left:s}=Tv(this.parentElm),o=this.dropElm.getBoundingClientRect().height,a=this.dropElm.getBoundingClientRect().width,l=document.body.offsetWidth||window.innerWidth,u=this.parentElm.getBoundingClientRect().width;if(t>o)e="bottom";else if(o>t&&i>t){if(this.options.container){let h=r-o;h<0&&(h=0),(h>0||n)&&(e="top",this.dropElm.style.top=`${h<0?0:h}px`)}else e="top",this.dropElm.classList.add(e);this.dropElm.classList.remove("bottom")}l-a<s&&(this.dropElm.style.left=`${s-(a-u)}px`)}return e}adjustDropWidthByText(){let n=this.parentElm.scrollWidth;(this.options.dropWidth||this.options.width)&&(n=this.options.dropWidth||this.options.width||0);let e=this.dropElm.querySelector(".ms-select-all span"),t=this.dropElm.querySelector("ul"),i=26,r=e?.clientWidth??0+i,s=t.scrollHeight>t.clientHeight?this.getScrollbarWidth():0,o=0;this.dropElm.querySelectorAll("li label").forEach(a=>{a.scrollWidth>o&&(o=a.scrollWidth)}),o+=i+s,o<r&&(o=r),this.options.maxWidth&&o>this.options.maxWidth&&(o=this.options.maxWidth),this.options.minWidth&&o<this.options.minWidth&&(o=this.options.minWidth),(n==="100%"||+n<o)&&(this.dropElm.style.width=`${o}px`,this.dropElm.style.maxWidth=`${o}px`)}getScrollbarWidth(){let n=document.createElement("div");n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n);let e=n.offsetWidth;n.style.overflow="scroll";let t=document.createElement("div");t.style.width="100%",n.appendChild(t);let i=t.offsetWidth;return n.parentNode?.removeChild(n),e-i}formatAllSelected(){return this.options.allSelectedText||this.options.formatAllSelected()}formatCountSelected(n,e){return this.options.countSelectedText?this.options.countSelectedText.replace("#",`${n}`).replace("%",`${e}`):this.options.formatCountSelected(n,e)}formatNoMatchesFound(){return this.options.noMatchesFoundText||this.options.formatNoMatchesFound()}formatOkButton(){return this.options.okButtonText||this.options.formatOkButton()}formatSelectAll(){return this.options.selectAllText||this.options.formatSelectAll()}},go=function(n,e){return typeof n=="string"?wv(document.querySelectorAll(n),e):n instanceof Node?wv([n],e):wv(n,e)};function wv(n,e){let t=Array.from(n),i=[];for(let r=0;r<t.length;r++){let s=t[r];try{s._multipleSelect!==void 0&&(s._multipleSelect.destroy(),delete s._multipleSelect),s._multipleSelect=new CM(s,e||{}),s._multipleSelect.init();let o=s._multipleSelect.getOptions(!1);o.onHardDestroy=()=>delete s._multipleSelect,o.onAfterHardDestroyed=()=>i[r]=null,i.push(s._multipleSelect)}catch(o){console.error(o)}}return i.length===1?i[0]:i}go.defaults=Hn.DEFAULTS;go.locales=D({},Fw);go.methods=Hn.METHODS;typeof window<"u"&&(window.multipleSelect=go);var Ba=class{constructor(e,t,i,r=!0){this.translaterService=e,this.collectionService=t,this.rxjs=i,this._isMultipleSelect=!0,this._collectionLength=0,this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=r}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get columnFilter(){return this.columnDef?.filter??{}}get customStructure(){return this.columnDef?.filter?.customStructure}get gridOptions(){return this.grid?.getOptions()??{}}get defaultOperator(){return this.isMultipleSelect?ne.in:ne.equal}get isMultipleSelect(){return this._isMultipleSelect}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);if(this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this.optionLabel=this.customStructure?.optionLabel??"value",this.valueName=this.customStructure?.value??"value",this.enableTranslateLabel&&(!this.translaterService||typeof this.translaterService.translate!="function"))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=this.gridOptions?.locales??V.locales,this.initMultipleSelectTemplate();let t=this.gridOptions?.defaultFilterPlaceholder||"";this.columnFilter?.placeholder&&(t=this.columnFilter.placeholder),this.defaultOptions.placeholder=t||"",this._isMultipleSelect&&this.columnDef?.filter&&(this.columnDef.filter.emptySearchTermReturnAllValues=this.columnDef.filter?.emptySearchTermReturnAllValues??!1);let i=this.columnFilter.collection||[];return new Promise((r,s)=>kt(this,null,function*(){try{let o;this.columnFilter.collectionAsync&&!this.columnFilter.collection?(o=Od(this.columnFilter.collectionAsync,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),r(o)):(o=i,this.renderDomElement(i),r(i)),(this.columnFilter.collectionAsync||this.columnFilter.enableCollectionWatch)&&(yield o??this.columnFilter.collectionAsync,this.watchCollectionChanges())}catch(o){s(o)}}))}clear(e=!0){this._msInstance&&this._collectionLength>0&&(this._msInstance.setSelects([]),this.filterElm?.classList.remove("filled"),this._msInstance?.getParentElement()?.classList.remove("filled"),this.searchTerms=[],this._shouldTriggerQuery=e,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){typeof this._msInstance?.destroy=="function"&&this._msInstance.destroy(),this.filterElm?.remove(),ys(this.subscriptions)}getValues(){return this._msInstance?.getSelects()??[]}setValues(e,t){e!==void 0&&this._msInstance&&(e=Array.isArray(e)?e.every(i=>lo(i))?e.map(String):e:[e],this._msInstance.setSelects(e)),this.updateFilterStyle(this.getValues().length>0),this.operator=t||this.defaultOperator}filterCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){let i=this.columnFilter.collectionFilterBy,r=this.columnFilter.collectionOptions?.filterResultAfterEachPass||null;t=this.collectionService.filterCollection(t,i,r)}return t}sortCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){let i=this.columnFilter.collectionSortBy;t=this.collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t}watchCollectionChanges(){this.columnFilter?.collection&&(no(this.columnFilter.collection,this.watchCallback.bind(this)),Yl(this.columnFilter,"collection",this.propertyObserverCallback.bind(this)))}propertyObserverCallback(e){this.renderDomElement(e||[]),this.columnFilter.collection&&no(this.columnFilter.collection,this.watchCallback.bind(this))}watchCallback(e){this.renderDomElement(this.columnFilter.collection||e||[])}renderDomElement(e){if(!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty){let s=this.collectionOptions.collectionInsideObjectProperty;e=At(e,s||"")}if(!Array.isArray(e))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let t=[];if(e.length>0&&(t=[...e]),this.collectionOptions?.addBlankEntry&&Array.isArray(t)&&t.length>0&&t[0][this.valueName]!==""&&t.unshift(this.createBlankEntry()),this.collectionOptions?.addCustomFirstEntry&&Array.isArray(t)&&t.length>0&&t[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&t.unshift(this.collectionOptions.addCustomFirstEntry),this.collectionOptions?.addCustomLastEntry&&Array.isArray(t)&&t.length>0){let s=t.length-1;t[s][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&t.push(this.collectionOptions.addCustomLastEntry)}let i=t;i=this.filterCollection(i),i=this.sortCollection(i);let r=Bg("filter",i,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=r.hasFoundSearchTerm,this.createFilterElement(r.selectElement,r.dataCollection),this._collectionLength=i.length}createBlankEntry(){let e={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(e[this.labelPrefixName]=""),this.labelSuffixName&&(e[this.labelSuffixName]=""),e}createFilterElement(e,t){let i=this.columnDef?.id??"";this.elementName=`filter-${i}`,this.defaultOptions.name=this.elementName,De(this.filterContainerElm),this.filterElm=e,this.filterElm.dataset.columnId=`${i}`,this.updateFilterStyle(this.isFilled),this.filterContainerElm.appendChild(e);let r=this.columnFilter?this.columnFilter.filterOptions:{};this.filterElmOptions=me(D(D({},this.defaultOptions),r),{data:t}),this._msInstance=go(e,this.filterElmOptions)}initMultipleSelectTemplate(){let e=this.gridOptions?.enableTranslate??!1,i={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,name:`${this.columnDef?.id??""}`,container:"body",filter:!1,maxHeight:275,single:!0,renderOptionLabelAsHtml:this.columnFilter?.enableRenderHtml??!1,sanitizer:r=>cr(this.gridOptions,r),onClose:()=>this.onTriggerEvent()};if(this._isMultipleSelect){i.single=!1,i.showOkButton=!0,i.displayTitle=!0;let r=li(this.gridOptions);i.countSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${r}X_OF_Y_SELECTED`):this._locales?.TEXT_X_OF_Y_SELECTED,i.allSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${r}ALL_SELECTED`):this._locales?.TEXT_ALL_SELECTED,i.noMatchesFoundText=e&&this.translaterService?.translate?this.translaterService.translate(`${r}NO_MATCHES_FOUND`):this._locales?.TEXT_NO_MATCHES_FOUND,i.okButtonText=e&&this.translaterService?.translate?this.translaterService.translate(`${r}OK`):this._locales?.TEXT_OK,i.selectAllText=e&&this.translaterService?.translate?this.translaterService.translate(`${r}SELECT_ALL`):this._locales?.TEXT_SELECT_ALL}this.defaultOptions=i}onTriggerEvent(){if(this._msInstance){let e=this.getValues();this.updateFilterStyle(Array.isArray(e)&&e.length>1||e.length===1&&e[0]!==""),this.searchTerms=e,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(e){e?(this.isFilled=!0,this.filterElm?.classList.add("filled"),this._msInstance?.getParentElement()?.classList.add("filled")):(this.isFilled=!1,this.filterElm?.classList.remove("filled"),this._msInstance?.getParentElement()?.classList.remove("filled"))}};var Gh=class extends Ba{constructor(e,t,i){super(e,t,i,!0),this.translaterService=e,this.collectionService=t,this.rxjs=i}};var Yh=class{constructor(e){this.translater=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._currentValues=[],this.searchTerms=[],this._bindEventService=new qe}get columnFilter(){return this.columnDef?.filter??{}}get defaultOperator(){return ne.equal}get gridOptions(){return this.grid?.getOptions()??{}}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection)throw new Error('[Slickgrid-Universal] You need to pass a "collection" for the Native Select Filter to work correctly.');if(this.columnFilter.enableTranslateLabel&&!this.gridOptions.enableTranslate&&(!this.translater||typeof this.translater.translate!="function"))throw new Error('The I18N Service is required for the Native Select Filter to work correctly when "enableTranslateLabel" is set.');let t=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";(typeof t=="boolean"||typeof t=="number")&&(t=`${t??""}`),this.filterElm=this.createFilterElement(t),this._bindEventService.bind(this.filterElm,"change",this.handleOnChange.bind(this))}clear(e=!0){this.filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._currentValues=[],this.filterElm.value="",this.filterElm.classList.remove("filled"),this.filterElm.dispatchEvent(new Event("change")))}destroy(){this._bindEventService.unbindAll(),this.filterElm?.remove?.()}getValues(){return this._currentValues||[]}setValues(e,t){Array.isArray(e)?(this.filterElm.value=`${e[0]??""}`,this._currentValues=e):e&&(this.filterElm.value=`${e??""}`,this._currentValues=[e]),this.getValues().length>0?this.filterElm.classList.add("filled"):this.filterElm.classList.remove("filled"),this.operator=t||this.defaultOperator}buildFilterSelectFromCollection(e){let t=this.columnDef?.id??"",i=E("select",{className:`form-control search-filter filter-${t}`,ariaLabel:this.columnFilter?.ariaLabel??`${ci(t+"")} Search Filter`}),r=this.columnFilter.customStructure?.label??"label",s=this.columnFilter.customStructure?.value??"value",o=this.columnFilter?.enableTranslateLabel??!1;if(e.every(a=>typeof a=="string"))for(let a of e)i.appendChild(E("option",{value:a,label:a,textContent:a}));else for(let a of e){if(!a||a[r]===void 0&&a.labelKey===void 0)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Native Select Filter list, for example:: { filter: model: Filters.select, collection: [ { value: '1', label: 'One' } ]')");let l=a.labelKey||a[r],u=(a.labelKey||o)&&typeof this.translater!==void 0&&this.translater.getCurrentLanguage?.()?this.translater.translate(l||" "):l;i.appendChild(E("option",{value:a[s],textContent:u}))}return i}createFilterElement(e){let t=this.columnDef?.id??"";De(this.filterContainerElm);let i=e||"",r=this.columnFilter?.collection??[];if(!Array.isArray(r))throw new Error('The "collection" passed to the Native Select Filter is not a valid array.');let s=this.buildFilterSelectFromCollection(r);return s.value=i,s.dataset.columnid=`${t||""}`,i&&(this._currentValues=[i]),this.filterContainerElm.appendChild(s),s}handleOnChange(e){let t=e&&e.target&&e.target.value||"";this._currentValues=[t],this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.filterElm.classList.remove("filled")):(t===""?this.filterElm.classList.remove("filled"):this.filterElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[t],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var qh=class extends Ba{constructor(e,t,i){super(e,t,i,!1),this.translaterService=e,this.collectionService=t,this.rxjs=i}};var Xh=class extends Os{constructor(e){super(e),this.translaterService=e,this.sliderType="single"}};var Kh=class extends Os{constructor(e){super(e),this.translaterService=e,this.sliderType="double"}};var Qh={autocompleter:Ad,compoundDate:Vd,compoundInput:Ec,compoundInputNumber:kh,compoundInputPassword:Lh,compoundInputText:Ec,compoundSlider:Hh,dateRange:Bh,input:di,inputMask:Uh,inputNumber:zh,inputPassword:$h,inputText:di,multipleSelect:Gh,select:Yh,singleSelect:qh,slider:Xh,sliderRange:Kh};var Zh=class{constructor(e,t,i,r){this.config=e,this.translaterService=t,this.collectionService=i,this.rxjs=r,this._options=this.config?.options??{}}addRxJsResource(e){this.rxjs=e}createFilter(e){let t;return e?.model&&(t=typeof e.model=="function"?new e.model(this.translaterService,this.collectionService,this.rxjs):e.model),!t&&this._options.defaultFilter&&(t=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),t}};var Hw={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:5*60*5,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoParseInputFilterOperator:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:Vw},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"fa fa-compress mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"fa fa-expand mdi mdi-arrow-expand",iconClearGroupingCommand:"fa fa-times mdi mdi-close",iconCopyCellValueCommand:"fa fa-clone mdi mdi-content-copy",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Qh.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"\u{1F50E}\uFE0E",defaultFilterRangeOperator:ne.rangeInclusive,defaultColumnSortFieldId:"id",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,autoDetectCellFormat:!0,exportWithFormatter:!1,filename:"export",format:Ji.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2B9E",groupExpandedSymbol:"\u2B9F",groupingAggregatorRowText:"",sanitizeDataExport:!0},textExportOptions:{delimiter:Ln.comma,exportWithFormatter:!1,filename:"export",format:Ji.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!0,useUtf8WithBom:!0},eventNamingStyle:Hi.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars mdi mdi-menu",iconClearAllFiltersCommand:"fa fa-filter mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconClearFrozenColumnsCommand:"fa fa-times mdi mdi-pin-off-outline",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",iconRefreshDatasetCommand:"fa fa-refresh mdi mdi-sync",iconToggleFilterCommand:"fa fa-random mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"fa fa-random mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:Vw},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"fa fa-filter mdi mdi mdi-filter-remove-outline",iconClearSortCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconFreezeColumns:"fa fa-thumb-tack mdi mdi-pin-outline",iconSortAscCommand:"fa fa-sort-amount-asc mdi mdi-flip-v mdi-sort-ascending",iconSortDescCommand:"fa fa-sort-amount-desc mdi mdi-flip-v mdi-sort-descending",iconColumnHideCommand:"fa fa-times mdi mdi-close",iconColumnResizeByContentCommand:"fa fa-arrows-h mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},sanitizerOptions:{ADD_ATTR:["level"],RETURN_TRUSTED_TYPE:!0},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\xB7"}};function Vw(n,e){let t=n?.columnGroup||"",i=e?.columnGroupSeparator??" - ";return t?t+i+n.name:n?.name??""}var yM=dn(Fg());var bM=dn(vs());var Bw=(n,e,t,i,r)=>{let s=i&&i.params||{},o=s.propertyNames,a=s?.includeTitle??!0,l=s.dataContextProperty;if(l||(l=i?.field?.split(".")[0]||""),!o||!Array.isArray(o)||!l)throw new Error(`Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.
      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: ['firtName'] }}.
      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.`);if(r[l]&&Array.isArray(r[l])&&Array.isArray(r[l])&&r[l].length>0){let u=[];r[l].forEach(m=>{let v=[];o.forEach(w=>{v.push(m[w])}),u.push(v.join(" "))});let h=u.join(", "),f=E("span",{textContent:h});return a&&(f.title=h),f}return t};var vo=(n,e,t)=>{if(Array.isArray(t)&&t.length>0){let i=t.join(", ");return E("span",{title:i,textContent:i})}return t};var Uw=(n,e,t)=>{let i=!1,r=Ue(t);return r&&(t=+t),(t===!0||r&&+t>0||typeof t=="string"&&t.length>0&&t.toLowerCase()!=="false"&&t!=="0")&&(i=!0),i?E("i",{className:"mdi mdi-18px mdi-check checkmark-icon",ariaHidden:"true"}):""};var zw=(n,e,t)=>{let i=!1,r=Ue(t);return r&&(t=+t),(t===!0||r&&+t>0||typeof t=="string"&&t.length>0&&t.toLowerCase()!=="false"&&t!=="0")&&(i=!0),i?E("i",{className:"fa fa-check checkmark-icon",ariaHidden:"true"}):""};var $w=(n,e,t,i,r,s)=>{if(!t||!i||!i.internalColumnEditor||!i.internalColumnEditor.collection||!i.internalColumnEditor.collection.length)return t;let{internalColumnEditor:o,internalColumnEditor:{collection:a}}=i,l=o.customStructure?o.customStructure.label:"label",u=o.customStructure?o.customStructure.value:"value";return Array.isArray(t)?a.every(h=>typeof h=="string")?vo(n,e,t.map(h=>or(a,f=>f===h)),i,r,s):vo(n,e,t.map(h=>or(a,f=>f[u]===h)[l]),i,r,s):or(a,h=>h[u]===t)[l]||""};var jw=(n,e,t,i,r,s)=>{if(!t||!i||!i.params||!i.params.collection||!i.params.collection.length)return t;let{params:o,params:{collection:a}}=i,l=o.customStructure?o.customStructure.label:"label",u=o.customStructure?o.customStructure.value:"value";return Array.isArray(t)?vo(n,e,t.map(h=>or(a,f=>f[u]===h)[l]),i,r,s):or(a,h=>h[u]===t)[l]||""};var Av=(n,e,t,i,r)=>{if(!i)return"";let s=i.params||{},o=s?.complexField??s?.complexFieldLabel??i.field;if(!o)throw new Error(`For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.
      There are 3 ways to provide it:
      1- via the generic "params" with a "complexField" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]
      2- via the generic "params" with a "complexField" and a "labelKey" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]
      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] `);if(i.labelKey&&r.hasOwnProperty(o))return r[o]?.[i.labelKey];if(typeof o=="string"&&o.indexOf(".")>0){let a=o.split(".").reduce((l,u)=>l?.hasOwnProperty(u)?l[u]:"",r);return(a==null||typeof a=="object"&&Object.entries(a).length===0&&!(a instanceof Date))&&(a=""),a}return t};var Ww=(n,e,t,i,r,s)=>{let{minDecimal:o,maxDecimal:a,numberPrefix:l,numberSuffix:u,decimalSeparator:h,thousandSeparator:f,wrapNegativeNumber:m}=tt(i,s,"decimal","cell");return Ue(t)?ot(t,o,a,m,l,u,h,f):t};var Gw=(n,e,t,i,r,s)=>{let{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:u,wrapNegativeNumber:h}=tt(i,s,"currency","cell");return Ue(t)?ot(t,o,a,h,"$","",l,u):t};var Yw=(n,e,t,i,r,s)=>{let{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:u,wrapNegativeNumber:h}=tt(i,s,"currency","cell");if(Ue(t)){let f=t>=0?"green":"red",m=ot(t,o,a,h,"$","",l,u),v=E("span",{ariaHidden:"true",textContent:m});return v.style.color=f,v}return t};var qw=(n,e,t,i,r,s)=>{let{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:u,wrapNegativeNumber:h}=tt(i,s,"currency","cell");if(Ue(t)){let f=t>=0?"green":"red",m=ot(t,o,a,h,"$","",l,u),v=E("span",{ariaHidden:"true",textContent:m});return v.style.color=f,v.style.fontWeight="bold",v}return t};var Xw=(n,e,t,i,r,s)=>{let{currencyPrefix:o,currencySuffix:a,minDecimal:l,maxDecimal:u,numberPrefix:h,numberSuffix:f,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:w}=tt(i,s,"decimal","cell");if(Ue(t)){let S=ot(t,l,u,w,o,a,m,v);return`${h}${S}${f}`}return t};var Kw=(n,e,t,i,r,s)=>{let o=i&&i.params||{},a=s?.getOptions()??{},l=o.hyperlinkText?o.hyperlinkText:t;l=cr(a,l);let u=o.hyperlinkUrl?o.hyperlinkUrl:t;u=cr(a,u);let h=u.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i);if(h&&Array.isArray(h)&&h.length>0){let f=h[0];return E("a",{href:f,textContent:l})}return t};var Qw=(n,e,t,i)=>{let s=(i?.params||{}).cssClass;if(!s)throw new Error('[Slickgrid-Universal] When using `Formatters.iconBoolean`, you must provide You must provide the "cssClass", e.g.: { formatter: Formatters.iconBoolean, params: { cssClass: "fa fa-check" }}');let o=!1,a=!isNaN(t);return(t===!0||a&&parseFloat(t)>0||!a&&typeof t=="string"&&t.toLowerCase()!=="false"&&t!=="0")&&(o=!0),o?E("i",{className:s,ariaHidden:"true"}):""};var Zw=(n,e,t,i)=>{let r=i?.params??{},s=r.iconCssClass||r.icon||r.formatterIcon;if((r.icon||r.formatterIcon)&&console.warn('[Slickgrid-Universal] deprecated params.icon or params.formatterIcon are deprecated when using `Formatters.icon` in favor of params.iconCssClass. (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "fa fa-search" }}`'),!s)throw new Error('[Slickgrid-Universal] When using `Formatters.icon`, you must provide the "iconCssClass" via the generic "params". (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "fa fa-search" }}`');return E("i",{className:s,ariaHidden:"true"})};var Jw=(n,e,t,i,r,s)=>{let a=(i.params||{}).mask;if(!a)throw new Error(`You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: '000-000' }}`);if(t){let l=0,u=t.toString(),f=(s.getOptions()||{})?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return f.textContent=a.replace(/[09A]/gi,()=>u[l++]||""),f}return t};var eS=(n,e,t,i,r,s)=>{let{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:u,wrapNegativeNumber:h}=tt(i,s,"percent","cell");if(Ue(t)){let f=t*100;return ot(f,o,a,h,"","%",l,u)}return t};var tS=(n,e,t)=>{if(!Ue(t))return"";let i="",r=parseFloat(t);return r>100&&(r=100),r<30?i="red":r<70?i="silver":i="green",E("span",{className:"percent-complete-bar",title:`${r}%`,style:{background:i,width:`${r}%`}})};var iS=(n,e,t)=>{if(!Ue(t))return"";let i="",r=parseFloat(t);return r>100&&(r=100),r<30?i="red":r<70?i="silver":i="green",E("div",{className:"percent-complete-bar-with-text",title:`${r}%`,textContent:`${r}%`,style:{background:i,width:`${r}%`}})};var nS=(n,e,t,i,r,s)=>{let{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:u,wrapNegativeNumber:h}=tt(i,s,"percent","cell");if(Ue(t)){let f=t<50?"red":"green",m=ot(t,o,a,h,"","%",l,u),v=t>100?"100%":m;return E("span",{textContent:v,style:{color:f}})}return t};var rS=(n,e,t,i,r,s)=>{let{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:u,wrapNegativeNumber:h}=tt(i,s,"percent","cell");return Ue(t)?ot(t,o,a,h,"","%",l,u):t};var sS=(n,e,t)=>{if(!Ue(t))return"";let i="",r=parseFloat(t);r>100&&(r=100),r<30?i="danger":r<70?i="warning":i="success";let s=E("div",{className:"progress"});return s.appendChild(E("div",{className:`progress-bar progress-bar-${i} bg-${i}`,role:"progressbar",ariaValueNow:String(r),ariaValueMin:"0",ariaValueMax:"100",textContent:`${r}%`,style:{minWidth:"2em",width:`${r}%`}})),s};var oS=(n,e,t,i,r,s)=>{let a=(s?.getOptions()??{}).translater||i&&i.params&&i.params.translater;if(!a||typeof a.translate!="function")throw new Error(`"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return t!=null&&typeof t!="string"&&(t=t+""),t?a.translate(t):""};var aS=(n,e,t,i,r,s)=>{let o=s.getOptions(),a=o?.treeDataOptions,l=a?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,u=a?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,h=a?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP,f=a?.exportIndentMarginLeft??5,m=a?.exportIndentationLeadingChar??".",v=a?.exportIndentationLeadingSpaceCount??3,w=o?.excelExportOptions?.groupCollapsedSymbol??"\u2B9E",S=o?.excelExportOptions?.groupExpandedSymbol??"\u2B9F",P=t;if(P=Cs(i,r,t),P==null||r===void 0)return"";if(!r.hasOwnProperty(h))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');let R=r?.[h]??0,M="",x=0;r[u]?(M=r?.[l]?w:S,x=R===0?0:f*R):x=f*(R===0?0:R+1);let L=wd(x);return a?.titleFormatter&&(P=mo(a.titleFormatter,n,e,i,r,s)),P=`${R===0&&M?"":R===0?`${m}${wd(v)}`:m}${L}${M} ${P}`,ti(P)};var lS=(n,e,t,i,r,s)=>{let o=s.getOptions(),a=o?.treeDataOptions,l=a?.indentMarginLeft??15,u=a?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,h=a?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,f=a?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP,m=t;if(m=Cs(i,r,t),m==null||r===void 0)return"";if(!r.hasOwnProperty(f))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');let v=r?.[f]??0,w=document.createElement("span");w.style.display="inline-block",w.style.width=`${l*v}px`;let S=`slick-tree-level-${v}`,P="";r[h]&&(P=r?.[u]?"collapsed":"expanded"),a?.titleFormatter&&(m=mo(a.titleFormatter,n,e,i,r,s));let R=`slick-group-toggle ${P}`.trim(),M=E("div",{className:R,ariaExpanded:String(P==="expanded")}),x=E("span",{className:"slick-tree-title"});s.applyHtmlCode(x,m),x.setAttribute("level",v);let L=o?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return L.appendChild(w),L.appendChild(M),L.appendChild(x),{addClasses:S,html:L}};var cS=(n,e,t,i,r,s)=>{let a=s.getOptions()?.treeDataOptions?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,{groupTotalsFormatter:l,treeTotalsFormatter:u,params:h}=i;if(!l&&!u)throw new Error('[Slickgrid-Universal] When using Formatters.treeParseTotals, you must provide a total formatter via "groupTotalsFormatter" or "treeTotalsFormatter".');if(r[a]&&r?.__treeTotals&&(l||u))return(u??l)(r?.__treeTotals,i,s);if(h.formatters){let f=t;for(let m of h.formatters)!r[a]&&!r?.__treeTotals&&typeof m=="function"&&(f=m(n,e,f,i,r,s)||t);return f}return t};var uS=(n,e,t,i,r,s)=>{let a=(s?.getOptions()??{}).translater||i&&i.params&&i.params.translater;if(!a||typeof a.translate!="function")throw new Error(`"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return t!=null&&typeof t!="string"&&(t=t+""),t?a.translate(t.toUpperCase()):""};var CK={arrayObjectToCsv:Bw,arrayToCsv:vo,checkmark:zw,checkmarkMaterial:Uw,complex:Av,complexObject:Av,collection:jw,collectionEditor:$w,currency:Xw,dateIso:Dt(b.dateIso,"-"),dateTimeIso:Dt(b.dateTimeIso,"-"),dateTimeShortIso:Dt(b.dateTimeShortIso,"-"),dateTimeIsoAmPm:Dt(b.dateTimeIsoAmPm,"-"),dateTimeIsoAM_PM:Dt(b.dateTimeIsoAM_PM,"-"),dateEuro:Dt(b.dateEuro,"/"),dateEuroShort:Dt(b.dateEuroShort,"/"),dateTimeEuro:Dt(b.dateTimeEuro,"/"),dateTimeEuroShort:Dt(b.dateTimeEuroShort,"/"),dateTimeShortEuro:Dt(b.dateTimeShortEuro,"/"),dateTimeEuroAmPm:Dt(b.dateTimeEuroAmPm,"/"),dateTimeEuroAM_PM:Dt(b.dateTimeEuroAM_PM,"/"),dateTimeEuroShortAmPm:Dt(b.dateTimeEuroShortAmPm,"/"),dateTimeEuroShortAM_PM:Dt(b.dateTimeEuroShortAM_PM,"/"),dateUs:Dt(b.dateUs,"/"),dateTimeUs:Dt(b.dateTimeUs,"/"),dateTimeShortUs:Dt(b.dateTimeShortUs,"/"),dateTimeUsAmPm:Dt(b.dateTimeUsAmPm,"/"),dateTimeUsAM_PM:Dt(b.dateTimeUsAM_PM,"/"),dateTimeUsShort:Dt(b.dateTimeUsShort,"/"),dateTimeUsShortAmPm:Dt(b.dateTimeUsShortAmPm,"/"),dateTimeUsShortAM_PM:Dt(b.dateTimeUsShortAM_PM,"/"),dateUsShort:Dt(b.dateUsShort,"/"),dateUtc:Dt(b.dateUtc,"-"),decimal:Ww,dollar:Gw,dollarColored:Yw,dollarColoredBold:qw,hyperlink:Kw,icon:Zw,iconBoolean:Qw,mask:Jw,multiple:Va,percent:eS,percentComplete:nS,percentCompleteBar:tS,percentCompleteBarWithText:iS,percentSymbol:rS,progressBar:sS,translate:oS,translateBoolean:uS,tree:lS,treeParseTotals:cS,treeExport:aS};var wc=class{constructor(){this.options=Hw}};var zQ=me(D(D(D(D(D({},pg),mg),bg),Mg),Ag),{deepAssign:Nr});var Ua=class{},dS=(()=>{class n extends Ua{getTranslation(t){return he({})}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ys(n)))(r||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),Sc=class{},hS=(()=>{class n{handle(t){return t.key}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function _o(n){return typeof n<"u"&&n!==null}function Rv(n){return n&&typeof n=="object"&&!Array.isArray(n)}function mS(n,e){let t=Object.assign({},n);return Rv(n)&&Rv(e)&&Object.keys(e).forEach(i=>{Rv(e[i])?i in n?t[i]=mS(n[i],e[i]):Object.assign(t,{[i]:e[i]}):Object.assign(t,{[i]:e[i]})}),t}var za=class{},fS=(()=>{class n extends za{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,i){let r;return typeof t=="string"?r=this.interpolateString(t,i):typeof t=="function"?r=this.interpolateFunction(t,i):r=t,r}getValue(t,i){let r=typeof i=="string"?i.split("."):[i];i="";do i+=r.shift(),_o(t)&&_o(t[i])&&(typeof t[i]=="object"||!r.length)?(t=t[i],i=""):r.length?i+=".":t=void 0;while(r.length);return t}interpolateFunction(t,i){return t(i)}interpolateString(t,i){return i?t.replace(this.templateMatcher,(r,s)=>{let o=this.getValue(i,s);return _o(o)?o:r}):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ys(n)))(r||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),$a=class{},pS=(()=>{class n extends $a{compile(t,i){return t}compileTranslations(t,i){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ys(n)))(r||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),Jh=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Ot;onLangChange=new Ot;onDefaultLangChange=new Ot},Mv=new Se("USE_STORE"),Pv=new Se("USE_DEFAULT_LANG"),Nv=new Se("DEFAULT_LANGUAGE"),Fv=new Se("USE_EXTEND"),Dc=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Ot;_onLangChange=new Ot;_onDefaultLangChange=new Ot;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}constructor(t,i,r,s,o,a=!0,l=!1,u=!1,h){this.store=t,this.currentLoader=i,this.compiler=r,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=l,this.extend=u,h&&this.setDefaultLang(h)}setDefaultLang(t){if(t===this.defaultLang)return;let i=this.retrieveTranslations(t);typeof i<"u"?(this.defaultLang==null&&(this.defaultLang=t),i.pipe(Li(1)).subscribe(r=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return he(this.translations[t]);let i=this.retrieveTranslations(t);return typeof i<"u"?(this.currentLang||(this.currentLang=t),i.pipe(Li(1)).subscribe(r=>{this.changeLang(t)}),i):(this.changeLang(t),he(this.translations[t]))}retrieveTranslations(t){let i;return(typeof this.translations[t]>"u"||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),i=this._translationRequests[t]),i}getTranslation(t){this.pending=!0;let i=this.currentLoader.getTranslation(t).pipe(su(1),Li(1));return this.loadingTranslations=i.pipe(Ge(r=>this.compiler.compileTranslations(r,t)),su(1),Li(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[t]=this.extend&&this.translations[t]?D(D({},r),this.translations[t]):r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),i}setTranslation(t,i,r=!1){i=this.compiler.compileTranslations(i,t),(r||this.extend)&&this.translations[t]?this.translations[t]=mS(this.translations[t],i):this.translations[t]=i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(i=>{this.langs.indexOf(i)===-1&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,i,r){let s;if(i instanceof Array){let o={},a=!1;for(let l of i)o[l]=this.getParsedResult(t,l,r),hn(o[l])&&(a=!0);if(a){let l=i.map(u=>hn(o[u])?o[u]:he(o[u]));return If(l).pipe(Ge(u=>{let h={};return u.forEach((f,m)=>{h[i[m]]=f}),h}))}return o}if(t&&(s=this.parser.interpolate(this.parser.getValue(t,i),r)),typeof s>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),r)),typeof s>"u"){let o={key:i,translateService:this};typeof r<"u"&&(o.interpolateParams=r),s=this.missingTranslationHandler.handle(o)}return typeof s<"u"?s:i}get(t,i){if(!_o(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(Ir(r=>(r=this.getParsedResult(r,t,i),hn(r)?r:he(r))));{let r=this.getParsedResult(this.translations[this.currentLang],t,i);return hn(r)?r:he(r)}}getStreamOnTranslationChange(t,i){if(!_o(t)||!t.length)throw new Error('Parameter "key" required');return xr(Tr(()=>this.get(t,i)),this.onTranslationChange.pipe($t(r=>{let s=this.getParsedResult(r.translations,t,i);return typeof s.subscribe=="function"?s:he(s)})))}stream(t,i){if(!_o(t)||!t.length)throw new Error('Parameter "key" required');return xr(Tr(()=>this.get(t,i)),this.onLangChange.pipe($t(r=>{let s=this.getParsedResult(r.translations,t,i);return hn(s)?s:he(s)})))}instant(t,i){if(!_o(t)||!t.length)throw new Error('Parameter "key" required');let r=this.getParsedResult(this.translations[this.currentLang],t,i);if(hn(r)){if(t instanceof Array){let s={};return t.forEach((o,a)=>{s[t[a]]=t[a]}),s}return t}else return r}set(t,i,r=this.currentLang){this.translations[r][t]=this.compiler.compile(i,r),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang==null&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;if(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof t>"u"))return t.indexOf("-")!==-1&&(t=t.split("-")[0]),t.indexOf("_")!==-1&&(t=t.split("_")[0]),t}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}static \u0275fac=function(i){return new(i||n)(ce(Jh),ce(Ua),ce($a),ce(za),ce(Sc),ce(Pv),ce(Mv),ce(Fv),ce(Nv))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();var gS=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:Ua,useClass:dS},t.compiler||{provide:$a,useClass:pS},t.parser||{provide:za,useClass:fS},t.missingTranslationHandler||{provide:Sc,useClass:hS},Jh,{provide:Mv,useValue:t.isolate},{provide:Pv,useValue:t.useDefaultLang},{provide:Fv,useValue:t.extend},{provide:Nv,useValue:t.defaultLanguage},Dc]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:Ua,useClass:dS},t.compiler||{provide:$a,useClass:pS},t.parser||{provide:za,useClass:fS},t.missingTranslationHandler||{provide:Sc,useClass:hS},{provide:Mv,useValue:t.isolate},{provide:Pv,useValue:t.useDefaultLang},{provide:Fv,useValue:t.extend},{provide:Nv,useValue:t.defaultLanguage},Dc]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ai({type:n});static \u0275inj=Oi({})}return n})();var ef=class{constructor(e){this.pubSubService=e,this.pluginName="RowDetailView",this.onAsyncEndUpdate=new B,this.onAsyncResponse=new B,this.onAfterRowDetailToggle=new B,this.onBeforeRowDetailToggle=new B,this.onRowBackToViewportRange=new B,this.onRowOutOfViewportRange=new B,this._dataViewIdProperty="id",this._expandableOverride=null,this._expandedRows=[],this._gridRowBuffer=0,this._gridUid="",this._keyPrefix="",this._lastRange=null,this._outsideRange=5,this._rowIdsOutOfViewport=[],this._visibleRenderedCellCount=0,this._defaults={alwaysRenderColumn:!0,columnId:"_detail_selector",field:"_detail_selector",cssClass:"detailView-toggle",collapseAllOnSort:!0,collapsedClass:void 0,expandedClass:void 0,keyPrefix:"_",loadOnce:!1,maxRows:void 0,saveDetailViewOnScroll:!0,singleRowExpand:!1,useSimpleViewportCalc:!1,toolTip:"",width:30},this._eventHandler=new Ce}get addonOptions(){return this._addonOptions}get dataView(){return this._grid?.getData()}get dataViewIdProperty(){return this._dataViewIdProperty}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()||{}}get gridUid(){return this._gridUid||this._grid?.getUID()||""}set lastRange(e){this._lastRange=e}set rowIdsOutOfViewport(e){this._rowIdsOutOfViewport=e}get visibleRenderedCellCount(){return this._visibleRenderedCellCount}init(e){if(this._grid=e,!e)throw new Error('[Slickgrid-Universal] RowDetailView Plugin requires the Grid instance to be passed as argument to the "init()" method.');this._grid=e,this._gridUid=e.getUID(),this._addonOptions||(this._addonOptions=ao(this.gridOptions.rowDetailView,this._defaults)),this._keyPrefix=this._addonOptions?.keyPrefix||"_",this._gridRowBuffer=this.gridOptions.minRowBuffer||0,this.gridOptions.minRowBuffer=this._addonOptions.panelRows+3,this._eventHandler.subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onBeforeEditCell,()=>this.collapseAll()).subscribe(this._grid.onScroll,this.handleScroll.bind(this)),this._addonOptions.collapseAllOnSort&&(this._eventHandler.subscribe(this._grid.onSort,this.collapseAll.bind(this)),this._expandedRows=[],this._rowIdsOutOfViewport=[]),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{this._grid.updateRowCount(),this._grid.render()}),this._eventHandler.subscribe(this.dataView.onRowsChanged,(t,i)=>{this._grid.invalidateRows(i.rows),this._grid.render()}),this._eventHandler.subscribe(this.onAsyncResponse,this.handleOnAsyncResponse.bind(this)),this._eventHandler.subscribe(this.dataView.onSetItemsCalled,()=>{this._dataViewIdProperty=this.dataView?.getIdPropertyName()||"id"}),this._addonOptions.useSimpleViewportCalc&&this._eventHandler.subscribe(this._grid.onRendered,(t,i)=>{i?.endRow&&(this._visibleRenderedCellCount=i.endRow-i.startRow)})}dispose(){this._eventHandler?.unsubscribeAll()}create(e,t){if(!t.rowDetailView)throw new Error('[Slickgrid-Universal] The Row Detail View requires options to be passed via the "rowDetailView" property of the Grid Options');if(this._addonOptions=ao(t.rowDetailView,this._defaults),typeof this._addonOptions.expandableOverride=="function"&&this.expandableOverride(this._addonOptions.expandableOverride),Array.isArray(e)&&t){let i=this.getColumnDefinition();if(!e.some(r=>r.id===i.id)){let r=Array.isArray(e)&&e.find(a=>a?.behavior==="selectAndMove"),s=r||i,o=t?.rowDetailView?.columnIndexPosition??0;o>0?e.splice(o,0,s):e.unshift(s),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(e){this._addonOptions=ao(e,this._addonOptions),this._addonOptions?.singleRowExpand&&this.collapseAll()}collapseAll(){this.dataView.beginUpdate();for(let e of this._expandedRows)this.collapseDetailView(e,!0);this.dataView.endUpdate()}collapseDetailView(e,t=!1){t||this.dataView.beginUpdate(),this._addonOptions.loadOnce&&this.saveDetailView(e),e[`${this._keyPrefix}collapsed`]=!0;for(let i=1;i<=e[`${this._keyPrefix}sizePadding`];i++)this.dataView.deleteItem(`${e[this._dataViewIdProperty]}.${i}`);e[`${this._keyPrefix}sizePadding`]=0,this.dataView.updateItem(e[this._dataViewIdProperty],e),this._expandedRows=this._expandedRows.filter(i=>i[this._dataViewIdProperty]!==e[this._dataViewIdProperty]),t||this.dataView.endUpdate()}expandDetailView(e){if(this._addonOptions?.singleRowExpand&&this.collapseAll(),e[`${this._keyPrefix}collapsed`]=!1,this._expandedRows.push(e),e[`${this._keyPrefix}detailContent`]||(e[`${this._keyPrefix}detailViewLoaded`]=!1),!e[`${this._keyPrefix}detailViewLoaded`]||this._addonOptions.loadOnce!==!0)e[`${this._keyPrefix}detailContent`]=this._addonOptions?.preTemplate?.(e);else{this.onAsyncResponse.notify({item:e,itemDetail:e,detailView:e[`${this._keyPrefix}detailContent`]}),this.applyTemplateNewLineHeight(e),this.dataView.updateItem(e[this._dataViewIdProperty],e);return}this.applyTemplateNewLineHeight(e),this.dataView.updateItem(e[this._dataViewIdProperty],e),this._addonOptions.process(e)}saveDetailView(e){let t=document.querySelector(`.${this.gridUid} .innerDetailView_${e[this._dataViewIdProperty]}`);if(t){let i=t.innerHTML;i!==void 0&&(e[`${this._keyPrefix}detailContent`]=i)}}handleOnAsyncResponse(e,t){if(!t||!t.item&&!t.itemDetail){console.error('SlickRowDetailView plugin requires the onAsyncResponse() to supply "args.item" property.');return}let i=t.item||t.itemDetail;i[`${this._keyPrefix}detailContent`]=t.detailView??this._addonOptions?.postTemplate?.(i),i[`${this._keyPrefix}detailViewLoaded`]=!0,this.dataView.updateItem(i[this._dataViewIdProperty],i),this.onAsyncEndUpdate.notify({grid:this._grid,item:i,itemDetail:i})}expandableOverride(e){this._expandableOverride=e}getExpandableOverride(){return this._expandableOverride}getColumnDefinition(){let e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,field:e,name:"",alwaysRenderColumn:this._addonOptions?.alwaysRenderColumn,cssClass:this._addonOptions.cssClass||"",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,formatter:this.detailSelectionFormatter.bind(this),resizable:!1,sortable:!1,toolTip:this._addonOptions.toolTip,width:this._addonOptions.width}}getExpandedRows(){return this._expandedRows}getOutOfViewportRows(){return this._rowIdsOutOfViewport}getFilterItem(e){return e[`${this._keyPrefix}isPadding`]&&e[`${this._keyPrefix}parent`]&&(e=e[`${this._keyPrefix}parent`]),e}resizeDetailView(e){if(!e)return;let t=document.querySelector(`.${this.gridUid} .detailViewContainer_${e[this._dataViewIdProperty]}`),i=document.querySelector(`.${this.gridUid} .cellDetailView_${e[this._dataViewIdProperty]}`),r=document.querySelector(`.${this.gridUid} .innerDetailView_${e[this._dataViewIdProperty]}`);if(!t||!i||!r)return;for(let f=1;f<=e[`${this._keyPrefix}sizePadding`];f++)this.dataView.deleteItem(`${e[this._dataViewIdProperty]}.${f}`);let s=this.gridOptions.rowHeight,o=13;t.style.minHeight="";let a=t.scrollHeight,l=Math.ceil(a/s);e[`${this._keyPrefix}sizePadding`]=Math.ceil(l*2*o/s),e[`${this._keyPrefix}height`]=a;let u=e[`${this._keyPrefix}sizePadding`]*s;this._addonOptions.maxRows!==void 0&&e[`${this._keyPrefix}sizePadding`]>this._addonOptions.maxRows&&(u=this._addonOptions.maxRows*s,e[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows),this.gridOptions.minRowBuffer<e[`${this._keyPrefix}sizePadding`]&&(this.gridOptions.minRowBuffer=e[`${this._keyPrefix}sizePadding`]+3),t.setAttribute("style",`min-height: ${e[this._keyPrefix+"height"]}px`),i&&i.setAttribute("style",`height: ${u}px; top: ${s}px`);let h=this.dataView.getIdxById(e[this._dataViewIdProperty]);for(let f=1;f<=e[`${this._keyPrefix}sizePadding`];f++)this.dataView.insertItem(h+f,this.getPaddingItem(e,f));this.saveDetailView(e)}applyTemplateNewLineHeight(e){let t=this._addonOptions.panelRows,i=13;e[`${this._keyPrefix}sizePadding`]=Math.ceil(t*2*i/this.gridOptions.rowHeight),e[`${this._keyPrefix}height`]=e[`${this._keyPrefix}sizePadding`]*this.gridOptions.rowHeight;let r=this.dataView.getIdxById(e[this._dataViewIdProperty]);for(let s=1;s<=e[`${this._keyPrefix}sizePadding`];s++)this.dataView.insertItem((r||0)+s,this.getPaddingItem(e,s))}calculateOutOfRangeViews(){if(this._grid){let e,t=this._grid.getRenderedRange();if(this._expandedRows.length>0&&(e="DOWN",this._lastRange)){if(this._lastRange.top===t.top&&this._lastRange.bottom===t.bottom)return;(this._lastRange.top>t.top||this._lastRange.top===0&&t.top===0&&this._lastRange.bottom>t.bottom)&&(e="UP")}this._expandedRows.forEach(i=>{let r=this.dataView.getRowById(i[this._dataViewIdProperty]),s=i[`${this._keyPrefix}sizePadding`],o=this._rowIdsOutOfViewport.some(a=>a===i[this._dataViewIdProperty]);e==="UP"?(this._addonOptions.saveDetailViewOnScroll&&r>=t.bottom-this._gridRowBuffer&&this.saveDetailView(i),o&&r-this._outsideRange<t.top&&r>=t.top?this.notifyBackToViewportWhenDomExist(i,i[this._dataViewIdProperty]):!o&&r+s>t.bottom&&this.notifyOutOfViewport(i,i[this._dataViewIdProperty])):e==="DOWN"&&(this._addonOptions.saveDetailViewOnScroll&&r<=t.top+this._gridRowBuffer&&this.saveDetailView(i),o&&r+s+this._outsideRange>t.bottom&&r<r+s?this.notifyBackToViewportWhenDomExist(i,i[this._dataViewIdProperty]):!o&&r<t.top&&this.notifyOutOfViewport(i,i[this._dataViewIdProperty]))}),this._lastRange=t}}calculateOutOfRangeViewsSimplerVersion(){if(this._grid){let e=this._grid.getRenderedRange();this._expandedRows.forEach(t=>{let i=this.dataView.getRowById(t[this._dataViewIdProperty]),r=this.checkIsRowOutOfViewportRange(i,e);!r&&this._rowIdsOutOfViewport.some(s=>s===t[this._dataViewIdProperty])?this.notifyBackToViewportWhenDomExist(t,t[this._dataViewIdProperty]):r&&this.notifyOutOfViewport(t,t[this._dataViewIdProperty])})}}checkExpandableOverride(e,t,i){return typeof this._expandableOverride=="function"?this._expandableOverride(e,t,i):!0}checkIsRowOutOfViewportRange(e,t){return Math.abs(t.bottom-this._gridRowBuffer-e)>this._visibleRenderedCellCount*2}getPaddingItem(e,t){let i={};for(let r in this.dataView)r&&(i[r]=null);return i[this._dataViewIdProperty]=`${e[this._dataViewIdProperty]}.${t}`,i[`${this._keyPrefix}collapsed`]=!0,i[`${this._keyPrefix}isPadding`]=!0,i[`${this._keyPrefix}parent`]=e,i[`${this._keyPrefix}offset`]=t,i}detailSelectionFormatter(e,t,i,r,s,o){if(this.checkExpandableOverride(e,s,o)){if(s[`${this._keyPrefix}collapsed`]===void 0&&(s[`${this._keyPrefix}collapsed`]=!0,s[`${this._keyPrefix}sizePadding`]=0,s[`${this._keyPrefix}height`]=0,s[`${this._keyPrefix}isPadding`]=!1,s[`${this._keyPrefix}parent`]=void 0,s[`${this._keyPrefix}offset`]=0),!s[`${this._keyPrefix}isPadding`])if(s[`${this._keyPrefix}collapsed`]){let a=`${this._addonOptions.cssClass||""} expand `;return this._addonOptions.collapsedClass&&(a+=this._addonOptions.collapsedClass),E("div",{className:a.trim()})}else{let a=this.gridOptions.rowHeight||0,l=(s[`${this._keyPrefix}sizePadding`]||0)*this.gridOptions.rowHeight;this._addonOptions.maxRows!==null&&(s[`${this._keyPrefix}sizePadding`]||0)>this._addonOptions.maxRows&&(l=this._addonOptions.maxRows*a,s[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows);let u=`${this._addonOptions.cssClass||""} collapse `;this._addonOptions.expandedClass&&(u+=this._addonOptions.expandedClass);let h=E("div",{className:`dynamic-cell-detail cellDetailView_${s[this._dataViewIdProperty]}`,style:{height:`${l}px`,top:`${a}px`}}),f=E("div",{className:`detail-container detailViewContainer_${s[this._dataViewIdProperty]}`}),m=E("div",{className:`innerDetailView_${s[this._dataViewIdProperty]}`});return m.innerHTML=this._grid.sanitizeHtmlString(s[`${this._keyPrefix}detailContent`]),f.appendChild(m),h.appendChild(f),{html:E("div",{className:u}),insertElementAfterTarget:h}}}else return"";return""}handleAccordionShowHide(e){e&&(e[`${this._keyPrefix}collapsed`]?this.expandDetailView(e):this.collapseDetailView(e))}handleClick(e,t){let i=this._grid.getDataItem(t.row);if(this.checkExpandableOverride(t.row,i,this._grid)){let r=this._grid.getColumns()[t.cell];if(this._addonOptions.useRowClick||r.id===this._addonOptions.columnId&&e.target.classList.contains(this._addonOptions.cssClass||"")){if(this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}this.onBeforeRowDetailToggle.notify({grid:this._grid,item:i}),this.toggleRowSelection(t.row,i),this.onAfterRowDetailToggle.notify({grid:this._grid,item:i,expandedRows:this._expandedRows}),e.stopPropagation(),e.stopImmediatePropagation()}}}handleScroll(){this._addonOptions.useSimpleViewportCalc?this.calculateOutOfRangeViewsSimplerVersion():this.calculateOutOfRangeViews()}notifyOutOfViewport(e,t){let i=e.rowIndex||this.dataView.getRowById(e[this._dataViewIdProperty]);this.onRowOutOfViewportRange.notify({grid:this._grid,item:e,rowId:t,rowIndex:i,expandedRows:this._expandedRows,rowIdsOutOfViewport:this.syncOutOfViewportArray(t,!0)})}notifyBackToViewportWhenDomExist(e,t){let i=e.rowIndex||this.dataView.getRowById(e[this._dataViewIdProperty]);setTimeout(()=>{document.querySelector(`.${this.gridUid} .cellDetailView_${e[this._dataViewIdProperty]}`)&&this.onRowBackToViewportRange.notify({grid:this._grid,item:e,rowId:t,rowIndex:i,expandedRows:this._expandedRows,rowIdsOutOfViewport:this.syncOutOfViewportArray(t,!1)})},100)}syncOutOfViewportArray(e,t){let i=this._rowIdsOutOfViewport.findIndex(r=>r===e);return t&&i<0?this._rowIdsOutOfViewport.push(e):!t&&i>=0&&this._rowIdsOutOfViewport.splice(i,1),this._rowIdsOutOfViewport}toggleRowSelection(e,t){this.checkExpandableOverride(e,t,this._grid)&&(this.dataView.beginUpdate(),this.handleAccordionShowHide(t),this.dataView.endUpdate())}};var Hv=dn(Id(),1);var tf=class{get gridOptions(){return this.grid?.getOptions()??{}}constructor(){this._warningLeftElement=null,this._warningRightElement=null,this.isPreviouslyShown=!1}init(e,t){this.grid=e,this.translaterService=t.get("TranslaterService")}dispose(){this._warningLeftElement?.remove(),this._warningRightElement?.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(e=!0,t){if(!this.grid||!this.gridOptions||this.isPreviouslyShown===e)return!1;this.isPreviouslyShown=e;let i=this.grid.getUID(),s=D(D({message:"No data to display."},this.gridOptions.emptyDataWarning),t),o=s?.className??"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${i} .${o}`);let a=document.querySelector(`.${i} .grid-canvas.grid-canvas-left`),l=document.querySelector(`.${i} .grid-canvas.grid-canvas-right`),u=s.leftViewportMarginLeft??0,h=s.rightViewportMarginLeft??0,f=s.frozenLeftViewportMarginLeft??0,m=s.frozenRightViewportMarginLeft??0,v=this.gridOptions?.frozenColumn!==void 0&&this.gridOptions.frozenColumn>=0,w=typeof u=="string"?u:`${u}px`,S=typeof h=="string"?h:`${h}px`;if(this.gridOptions.autoHeight){let R=document.querySelector(`.${i} .slick-pane.slick-pane-top.slick-pane-left`);if(R&&R.style&&a&&a.style){let M=parseInt(R.style.height,10)||0,x=this.gridOptions?.rowHeight??0,L=this.gridOptions.enableFiltering?this.gridOptions?.headerRowHeight??0:0,z=this.gridOptions.createPreHeaderPanel?this.gridOptions?.preHeaderPanelHeight??0:0;if(e){let Y=M!==null&&M<100?M:100;Y+=L+z,R.style.minHeight=`${Y}px`,a.style.minHeight=`${x}px`}}}let P=s.message;if(this.gridOptions.enableTranslate&&this.translaterService&&s?.messageKey&&(P=this.translaterService.translate(s.messageKey)),!this._warningLeftElement&&a&&l&&(this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(o),this._warningLeftElement.classList.add("left"),this.grid.applyHtmlCode(this._warningLeftElement,P),this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),l.appendChild(this._warningRightElement),a.appendChild(this._warningLeftElement)),this._warningLeftElement){let R=e?"block":"none";v&&e&&(R=s.hideFrozenLeftWarning?"none":"block"),this._warningLeftElement.style.display=R;let M=typeof f=="string"?f:`${f}px`;this._warningLeftElement.style.marginLeft=v?M:w}if(this._warningRightElement){let R=e?"block":"none";v&&e&&(R=s.hideFrozenRightWarning?"none":"block"),this._warningRightElement.style.display=R;let M=typeof m=="string"?m:`${m}px`;this._warningRightElement.style.marginLeft=v?M:S}return e}};var kv=dn(vs());var nf=class{get eventHandler(){return this._eventHandler}get gridUid(){return this.grid?.getUID()??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get gridOptions(){return this.grid?.getOptions()??{}}get locales(){return this.gridOptions?.locales??V.locales}set metrics(e){this.renderMetrics(e)}get leftFooterText(){return document.querySelector(`.slick-custom-footer${this.gridUidSelector} .left-footer`)?.textContent??""}set leftFooterText(e){this.renderLeftFooterText(e)}get rightFooterText(){return document.querySelector(`.slick-custom-footer${this.gridUidSelector} .right-footer`)?.textContent??""}set rightFooterText(e){this.renderRightFooterText(e)}constructor(e,t,i,r){if(this.grid=e,this.customFooterOptions=t,this.pubSubService=i,this.translaterService=r,this._enableTranslate=!1,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._subscriptions=[],this._bindingHelper=new ba,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new Ce,this._enableTranslate=this.gridOptions?.enableTranslate??!1,this._isLeftFooterOriginallyEmpty=!this.gridOptions.customFooterOptions?.leftFooterText,this._isRightFooterOriginallyEmpty=!this.gridOptions.customFooterOptions?.rightFooterText,this.registerOnSelectedRowsChangedWhenEnabled(t),this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translateCustomFooterTexts(),this._enableTranslate&&this.pubSubService?.subscribe){let s=this.translaterService?.eventName??"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(s,()=>this.translateCustomFooterTexts()))}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),this._footerElement?.remove()}renderFooter(e){this.translateCustomFooterTexts(),this.createFooterContainer(e)}renderMetrics(e){let t=(0,kv.default)(e.endTime).format(this.customFooterOptions.dateFormat);this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",t),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",e.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",e.totalItemCount),this.customFooterOptions.metricTexts?.lastUpdate&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(e){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",e)}renderRightFooterText(e){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",e)}translateCustomFooterTexts(){if(this.gridOptions.enableTranslate&&this.translaterService?.translate){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(let e of Object.keys(this.customFooterOptions.metricTexts))if(e.lastIndexOf("Key")>0){let t=e.substring(0,e.lastIndexOf("Key"));this.customFooterOptions.metricTexts[t]=this.translaterService.translate(this.customFooterOptions.metricTexts[e]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}else this.locales&&(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||this.locales?.TEXT_LAST_UPDATE||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||this.locales?.TEXT_ITEMS||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||this.locales?.TEXT_ITEMS_SELECTED||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||this.locales?.TEXT_OF||"TEXT_OF")}createFooterContainer(e){let t=E("div",{className:`slick-custom-footer ${this.gridUid}`,style:{width:"100%",height:`${this.customFooterOptions.footerHeight||20}px`}}),i=E("div",{className:`left-footer ${this.customFooterOptions.leftContainerClass}`});this.grid.applyHtmlCode(i,this.customFooterOptions.leftFooterText),t.appendChild(i),t.appendChild(this.createFooterRightContainer()),this._footerElement=t,e?.appendChild&&this._footerElement&&e.appendChild(this._footerElement)}createFooterRightContainer(){let e=E("div",{className:`right-footer ${this.customFooterOptions.rightContainerClass||""}`});if(!this._isRightFooterOriginallyEmpty)this.grid.applyHtmlCode(e,this.customFooterOptions.rightFooterText);else if(!this.customFooterOptions.hideMetrics){e.classList.add("metrics");let t=E("span",{className:"timestamp"},e);if(!this.customFooterOptions.hideLastUpdateTimestamp){let i=this.createFooterLastUpdate();i&&t.appendChild(i)}e.appendChild(E("span",{className:"item-count",textContent:`${this.metrics?.itemCount??"0"}`})),this.customFooterOptions.hideTotalItemCount||(e.appendChild(document.createTextNode(`\r
`)),e.appendChild(E("span",{className:"text-of",textContent:` ${this.customFooterOptions.metricTexts?.of??"of"} `})),e.appendChild(document.createTextNode(`\r
`)),e.appendChild(E("span",{className:"total-count",textContent:`${this.metrics?.totalItemCount??"0"}`}))),e.appendChild(document.createTextNode(`\r
`)),e.appendChild(E("span",{className:"text-items",textContent:` ${this.customFooterOptions.metricTexts?.items??"items"} `}))}return e}createFooterLastUpdate(){let e=this.customFooterOptions?.metricTexts?.lastUpdate??"Last Update",t=(0,kv.default)(this.metrics?.endTime).format(this.customFooterOptions.dateFormat),i=E("span");return i.appendChild(E("span",{className:"text-last-update",textContent:e})),i.appendChild(document.createTextNode(`\r
`)),i.appendChild(E("span",{className:"last-update-timestamp",textContent:t})),i.appendChild(E("span",{className:"separator",textContent:` ${this.customFooterOptions.metricSeparator||""} `})),i}registerOnSelectedRowsChangedWhenEnabled(e){if((this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&e&&!e.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty){this._isLeftFooterDisplayingSelectionRowCount=!0;let i=e.metricTexts?.itemsSelected??this.locales?.TEXT_ITEMS_SELECTED??"TEXT_ITEMS_SELECTED";e.leftFooterText=`0 ${i}`,this._eventHandler.subscribe(this.grid.onSelectedRowsChanged,(r,s)=>{this._selectedRowCount=s.rows.length;let o=e.metricTexts?.itemsSelected??this.locales?.TEXT_ITEMS_SELECTED??"TEXT_ITEMS_SELECTED";this.leftFooterText=`${this._selectedRowCount} ${o}`})}}};var rf=class{constructor(e,t,i,r){if(this.paginationService=e,this.pubSubService=t,this.sharedService=i,this.translaterService=r,this._enableTranslate=!1,this._subscriptions=[],this.firstButtonClasses="",this.lastButtonClasses="",this.prevButtonClasses="",this.nextButtonClasses="",this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page",this._bindingHelper=new ba,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this.currentPagination=this.paginationService.getFullPagination(),this._enableTranslate=this.gridOptions?.enableTranslate??!1,this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translatePaginationTexts(),this._enableTranslate&&this.pubSubService?.subscribe){let s=this.translaterService?.eventName??"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(s,()=>this.translatePaginationTexts()))}this._subscriptions.push(this.pubSubService.subscribe("onPaginationRefreshed",s=>{for(let a of Object.keys(s))this.currentPagination[a]=s[a];this.updatePageButtonsUsability();let o=document.querySelector(`.${this.gridUid} span.page-info-from-to`);o?.style&&(o.style.display=this.currentPagination.totalItems===0?"none":"")}),this.pubSubService.subscribe("onPaginationSetCursorBased",()=>{this.dispose(),this.renderPagination(this._gridParentContainerElm)}))}get availablePageSizes(){return this.paginationService.availablePageSizes||[]}get dataFrom(){return this.paginationService.dataFrom}get dataTo(){return this.paginationService.dataTo}get itemsPerPage(){return this.paginationService.itemsPerPage}set itemsPerPage(e){this.paginationService.changeItemPerPage(e)}get pageCount(){return this.paginationService.pageCount}get pageNumber(){return this.paginationService.pageNumber}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions}get gridUid(){return this.grid?.getUID()??""}get locales(){return this.gridOptions?.locales??V.locales}get totalItems(){return this.paginationService.totalItems}get isLeftPaginationDisabled(){return this.pageNumber===1||this.totalItems===0}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||this.totalItems===0}dispose(){this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),this._paginationElement.remove()}renderPagination(e){this._gridParentContainerElm=e;let t=this.createPaginationContainer(),i=E("div",{className:"slick-pagination-nav"}),r=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-first",aClass:"page-link icon-seek-first",ariaLabel:"First Page"},{liClass:"page-item seek-prev",aClass:"page-link icon-seek-prev",ariaLabel:"Previous Page"}]),s=this.createPageNumberSection(),o=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-next",aClass:"page-link icon-seek-next",ariaLabel:"Next Page"},{liClass:"page-item seek-end",aClass:"page-link icon-seek-end",ariaLabel:"Last Page"}]);t.appendChild(i),i.appendChild(r),i.appendChild(s),i.appendChild(o);let a=this.createPaginationSettingsSection();t.appendChild(i),t.appendChild(a),this._paginationElement.appendChild(t),e?.appendChild&&this._paginationElement&&e.appendChild(this._paginationElement),this.renderPageSizes(),this.addBindings(),this.addEventListeners(),this.updatePageButtonsUsability()}renderPageSizes(){let e=document.querySelector(`.${this.gridUid} .items-per-page`);if(e&&Array.isArray(this.availablePageSizes))for(let t of this.availablePageSizes)e.appendChild(E("option",{value:`${t}`,text:`${t}`}))}addBindings(){this._bindingHelper.addElementBinding(this,"firstButtonClasses","li.page-item.seek-first","className"),this._bindingHelper.addElementBinding(this,"prevButtonClasses","li.page-item.seek-prev","className"),this._bindingHelper.addElementBinding(this,"lastButtonClasses","li.page-item.seek-end","className"),this._bindingHelper.addElementBinding(this,"nextButtonClasses","li.page-item.seek-next","className"),this._bindingHelper.addElementBinding(this.currentPagination,"dataFrom","span.item-from","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"dataTo","span.item-to","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"totalItems","span.total-items","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageCount","span.page-count","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageSize","select.items-per-page","value"),this.paginationService.isCursorBased?this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","span.page-number","textContent"):this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","input.page-number","value","change",this.changeToCurrentPage.bind(this)),this._bindingHelper.addElementBinding(this,"textItems","span.text-items","textContent"),this._bindingHelper.addElementBinding(this,"textItemsPerPage","span.text-item-per-page","textContent"),this._bindingHelper.addElementBinding(this,"textOf","span.text-of","textContent"),this._bindingHelper.addElementBinding(this,"textPage","span.text-page","textContent")}addEventListeners(){this._bindingHelper.bindEventHandler(".icon-seek-first","click",this.changeToFirstPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-end","click",this.changeToLastPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-next","click",this.changeToNextPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-prev","click",this.changeToPreviousPage.bind(this)),this._bindingHelper.bindEventHandler("select.items-per-page","change",e=>this.itemsPerPage=+(e?.target?.value??0))}changeToFirstPage(e){this.isLeftPaginationDisabled||this.paginationService.goToFirstPage(e)}changeToLastPage(e){this.isRightPaginationDisabled||this.paginationService.goToLastPage(e)}changeToNextPage(e){this.isRightPaginationDisabled||this.paginationService.goToNextPage(e)}changeToPreviousPage(e){this.isLeftPaginationDisabled||this.paginationService.goToPreviousPage(e)}changeToCurrentPage(e){this.paginationService.goToPageNumber(+e)}translatePaginationTexts(){if(this._enableTranslate&&this.translaterService?.translate){let e=li(this.gridOptions);this.textItemsPerPage=this.translaterService.translate(`${e}ITEMS_PER_PAGE`),this.textItems=this.translaterService.translate(`${e}ITEMS`),this.textOf=this.translaterService.translate(`${e}OF`),this.textPage=this.translaterService.translate(`${e}PAGE`)}else this.locales&&(this.textItemsPerPage=this.locales.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=this.locales.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=this.locales.TEXT_OF||"TEXT_OF",this.textPage=this.locales.TEXT_PAGE||"TEXT_PAGE")}createPaginationContainer(){let e=E("div",{id:"pager",className:`slick-pagination-container ${this.gridUid} pager`,style:{width:"100%"}}),t=E("div",{className:"slick-pagination"});return e.appendChild(t),this._paginationElement=e,t}createPageNavigation(e,t){let i=E("nav",{ariaLabel:e}),r=E("ul",{className:"pagination"});for(let s of t)E("li",{className:s.liClass},r).appendChild(E("a",{className:s.aClass,ariaLabel:s.ariaLabel,role:"button"}));return i.appendChild(r),i}createPageNumberSection(){let e=E("div",{className:"slick-page-number"});return E("span",{className:"text-page",textContent:"Page"},e),e.appendChild(document.createTextNode(" ")),this.paginationService.isCursorBased?E("span",{className:"page-number",ariaLabel:"Page Number",dataset:{test:"page-number-label"},textContent:"1"},e):E("input",{type:"text",className:"form-control page-number",ariaLabel:"Page Number",value:"1",size:1,dataset:{test:"page-number-input"}},e),e.appendChild(document.createTextNode(" ")),E("span",{className:"text-of",textContent:"of"},e),e.appendChild(document.createTextNode(" ")),E("span",{className:"page-count",dataset:{test:"page-count"}},e),e}createPaginationSettingsSection(){let e=E("span",{className:"slick-pagination-settings"});E("select",{id:"items-per-page-label",ariaLabel:"Items per Page",className:"items-per-page"},e),e.appendChild(document.createTextNode(" ")),E("span",{className:"text-item-per-page",textContent:"items per page"},e),e.appendChild(document.createTextNode(", "));let t=E("span",{className:"slick-pagination-count"},e),i=E("span",{className:"page-info-from-to"},t);E("span",{className:"item-from",ariaLabel:"Page Item From",dataset:{test:"item-from"}},i),i.appendChild(document.createTextNode("-")),E("span",{className:"item-to",ariaLabel:"Page Item To",dataset:{test:"item-to"}},i),i.appendChild(document.createTextNode(" ")),E("span",{className:"text-of",textContent:"of"},i),i.appendChild(document.createTextNode(" "));let r=E("span",{className:"page-info-total-items"},t);return E("span",{className:"total-items",ariaLabel:"Total Items",dataset:{test:"total-items"}},r),r.appendChild(document.createTextNode(" ")),E("span",{className:"text-items",textContent:"items"},r),r.appendChild(document.createTextNode(" ")),e}updatePageButtonsUsability(){this.firstButtonClasses=this.isLeftPaginationDisabled?"page-item seek-first disabled":"page-item seek-first",this.prevButtonClasses=this.isLeftPaginationDisabled?"page-item seek-prev disabled":"page-item seek-prev",this.lastButtonClasses=this.isRightPaginationDisabled?"page-item seek-end disabled":"page-item seek-end",this.nextButtonClasses=this.isRightPaginationDisabled?"page-item seek-next disabled":"page-item seek-next"}};var sf=class{constructor(){this.className="RxJsResource"}get EMPTY(){return gi}createObservable(){return new Le}createSubject(){return new Jt}firstValueFrom(e){return Tf(e)}iif(e,t,i){return Of(e,t,i)}isObservable(e){return hn(e)}of(...e){return he(...e)}switchMap(e){return $t(e)}takeUntil(e){return ol(e)}};var Bv=(()=>{class n{vcr;constructor(t){this.vcr=t}createInteractiveAngularComponent(t,i,r,s){let o=this.vcr.createComponent(t,s);o?.instance&&r&&Object.assign(o.instance,r);let a=null,l=o.hostView;return l&&Array.isArray(l.rootNodes)&&l.rootNodes[0]&&(a=l.rootNodes[0],i&&a&&i.replaceChildren(o.location.nativeElement)),{componentRef:o,domElement:a}}createAngularComponent(t,i,r,s){let o=this.vcr.createComponent(t,s);o?.instance&&r&&(Object.assign(o.instance,r),o.changeDetectorRef.detectChanges());let a=null,l=o.hostView;return l&&Array.isArray(l.rootNodes)&&l.rootNodes[0]&&(a=l.rootNodes[0],i&&a&&(i.innerHTML=a.innerHTML)),{componentRef:o,domElement:a}}createAngularComponentAppendToDom(t,i,r,s){let o=this.createAngularComponent(t,i,r,s);return i?.replaceChildren?i.replaceChildren(o.domElement):document.body.appendChild(o.domElement),o}static \u0275fac=function(i){return new(i||n)(ce(ta))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),yS=(()=>{class n{dependencies=[];get(t){let i=this.dependencies.find(r=>r.key===t);return i?.instance?i.instance:null}dispose(){this.dependencies=[]}registerInstance(t,i){this.dependencies.some(s=>s.key===t)||this.dependencies.push({key:t,instance:i})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),vS=(()=>{class n{translateService;constructor(t){this.translateService=t}getCurrentLanguage(){return this.translateService?.currentLang??""}use(t){return kt(this,null,function*(){return this.translateService?.use?.(t)})}translate(t){return this.translateService?.instant?.(t||" ")}static \u0275fac=function(i){return new(i||n)(ce(Dc,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();var Lv="container_",_S="container_loading",Uv=class extends ef{angularUtilService;appRef;eventPubSubService;gridContainerElement;rxjs;rowDetailContainer;_preloadComponent;_views=[];_viewComponent;_subscriptions=[];_userProcessFn;constructor(e,t,i,r,s){super(i),this.angularUtilService=e,this.appRef=t,this.eventPubSubService=i,this.gridContainerElement=r,this.rxjs=s}get addonOptions(){return this.getOptions()}get datasetIdPropName(){return this.gridOptions.datasetIdPropertyName||"id"}get eventHandler(){return this._eventHandler}set eventHandler(e){this._eventHandler=e}get gridOptions(){return this._grid?.getOptions()||{}}get rowDetailViewOptions(){return this.gridOptions.rowDetailView}addRxJsResource(e){this.rxjs=e}dispose(){this.disposeAllViewComponents(),this._subscriptions=ys(this._subscriptions),super.dispose()}disposeAllViewComponents(){this._views.forEach(e=>this.disposeViewComponent(e)),this._views=[]}getAddonInstance(){return this}init(e){this._grid=e,super.init(this._grid),this.register(e?.getSelectionModel())}register(e){if(typeof this.gridOptions.rowDetailView?.process=="function")this._userProcessFn=this.gridOptions.rowDetailView.process,this.addonOptions.process=t=>this.onProcessing(t);else throw new Error('[Angular-Slickgrid] You need to provide a "process" function for the Row Detail Extension to work properly');return this._grid&&this.gridOptions?.rowDetailView&&(this.gridOptions.rowDetailView.preTemplate||(this._preloadComponent=this.gridOptions?.rowDetailView?.preloadComponent,this.addonOptions.preTemplate=()=>Hv.sanitize(`<div class="${_S}"></div>`)),this.gridOptions.rowDetailView.postTemplate||(this._viewComponent=this.gridOptions?.rowDetailView?.viewComponent,this.addonOptions.postTemplate=t=>Hv.sanitize(`<div class="${Lv}${t[this.datasetIdPropName]}"></div>`)),(!e||!this._grid.getSelectionModel())&&(e=new mr(this.gridOptions.rowSelectionOptions||{selectActiveRow:!0}),this._grid.setSelectionModel(e)),this._grid&&this.rowDetailViewOptions&&(this.rowDetailViewOptions.onExtensionRegistered&&this.rowDetailViewOptions.onExtensionRegistered(this),this.onAsyncResponse&&this.eventHandler.subscribe(this.onAsyncResponse,(t,i)=>{this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onAsyncResponse=="function"&&this.rowDetailViewOptions.onAsyncResponse(t,i)}),this.onAsyncEndUpdate&&this.eventHandler.subscribe(this.onAsyncEndUpdate,(t,i)=>{this.renderViewModel(i?.item),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onAsyncEndUpdate=="function"&&this.rowDetailViewOptions.onAsyncEndUpdate(t,i)}),this.onAfterRowDetailToggle&&this.eventHandler.subscribe(this.onAfterRowDetailToggle,(t,i)=>{this.renderPreloadView(),this.renderAllViewComponents(),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onAfterRowDetailToggle=="function"&&this.rowDetailViewOptions.onAfterRowDetailToggle(t,i)}),this.onBeforeRowDetailToggle&&this.eventHandler.subscribe(this.onBeforeRowDetailToggle,(t,i)=>{this.handleOnBeforeRowDetailToggle(t,i),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onBeforeRowDetailToggle=="function"&&this.rowDetailViewOptions.onBeforeRowDetailToggle(t,i)}),this.onRowBackToViewportRange&&this.eventHandler.subscribe(this.onRowBackToViewportRange,(t,i)=>{this.handleOnRowBackToViewportRange(t,i),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onRowBackToViewportRange=="function"&&this.rowDetailViewOptions.onRowBackToViewportRange(t,i)}),this.onRowOutOfViewportRange&&this.eventHandler.subscribe(this.onRowOutOfViewportRange,(t,i)=>{this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onRowOutOfViewportRange=="function"&&this.rowDetailViewOptions.onRowOutOfViewportRange(t,i)}),this.eventHandler.subscribe(this._grid.onColumnsReordered,this.redrawAllViewComponents.bind(this)),(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.eventHandler.subscribe(this._grid.onSelectedRowsChanged,this.redrawAllViewComponents.bind(this)),this.eventHandler.subscribe(this._grid.onSort,this.disposeAllViewComponents.bind(this)),this._subscriptions.push(this.eventPubSubService?.subscribe("onFilterChanged",this.redrawAllViewComponents.bind(this)),this.eventPubSubService?.subscribe("onGridMenuClearAllFilters",()=>setTimeout(()=>this.redrawAllViewComponents())),this.eventPubSubService?.subscribe("onGridMenuClearAllSorting",()=>setTimeout(()=>this.redrawAllViewComponents()))))),this}redrawAllViewComponents(){this._views.forEach(e=>{this.redrawViewComponent(e)})}renderAllViewComponents(){this._views.forEach(e=>{e?.dataContext&&this.renderViewModel(e.dataContext)})}redrawViewComponent(e){this.gridContainerElement.getElementsByClassName(`${Lv}${e.id}`)?.length>=0&&this.renderViewModel(e.dataContext)}renderPreloadView(){let e=this.gridContainerElement.getElementsByClassName(`${_S}`);this._preloadComponent&&e?.length>=0&&this.angularUtilService.createAngularComponentAppendToDom(this._preloadComponent,e[e.length-1])}renderViewModel(e){let t=this.gridContainerElement.getElementsByClassName(`${Lv}${e[this.datasetIdPropName]}`);if(this._viewComponent&&t?.length>0){let i=this.angularUtilService.createAngularComponentAppendToDom(this._viewComponent,t[t.length-1],{model:e,addon:this,grid:this._grid,dataView:this.dataView,parent:this.rowDetailViewOptions?.parent});if(i?.componentRef){let r=this._views.find(s=>s.id===e[this.datasetIdPropName]);return r&&(r.componentRef=i.componentRef),r}}}disposeViewComponent(e){let t=e?.componentRef;if(t)return this.appRef.detachView(t.hostView),t?.destroy&&t.destroy(),e}notifyTemplate(e){this.onAsyncResponse&&this.onAsyncResponse.notify({item:e,itemDetail:e},void 0,this)}onProcessing(e){return kt(this,null,function*(){if(e&&typeof this._userProcessFn=="function"){let t,r=yield this._userProcessFn(e);if(r.hasOwnProperty(this.datasetIdPropName)?t=r:(r&&r instanceof Le||r instanceof Promise)&&(t=yield Xl(this.rxjs,r)),!t||!t.hasOwnProperty(this.datasetIdPropName))throw new Error(`[Angular-Slickgrid] could not process the Row Detail, you must make sure that your "process" callback
          (a Promise or an HttpClient call returning an Observable) returns an item object that has an "${this.datasetIdPropName}" property`);this.notifyTemplate(t||{})}})}handleOnBeforeRowDetailToggle(e,t){if(t&&t.item&&t.item.__collapsed){let i={id:t.item[this.datasetIdPropName],dataContext:t.item},r=this.gridOptions.datasetIdPropertyName||"id";xg(this._views,i,r)}else{let i=this._views.findIndex(r=>r.id===t.item[this.datasetIdPropName]);if(i>=0&&this._views.hasOwnProperty(i)){let r=this._views[i].componentRef;r&&(this.appRef.detachView(r.hostView),r.destroy()),this._views.splice(i,1)}}}handleOnRowBackToViewportRange(e,t){t?.item&&this.redrawAllViewComponents()}},Vv={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel"},columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:CS},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCopyCellValueCommand:"fa fa-clone",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o text-success",iconExportTextDelimitedCommand:"fa fa-download"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{items:"items",itemsKey:"ITEMS",itemsSelected:"items selected",itemsSelectedKey:"ITEMS_SELECTED",of:"of",ofKey:"OF"}},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Qh.input,defaultBackendServiceFilterTypingDebounce:500,defaultColumnSortFieldId:"id",defaultFilterPlaceholder:"\u{1F50E}\uFE0E",defaultFilterRangeOperator:ne.rangeInclusive,editable:!1,enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableFilterTrimWhiteSpace:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",message:"No data to display.",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,eventNamingStyle:Hi.camelCase,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:Ji.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2B9E",groupExpandedSymbol:"\u2B9F",groupingAggregatorRowText:"",sanitizeDataExport:!1},textExportOptions:{delimiter:Ln.comma,exportWithFormatter:!1,filename:"export",format:Ji.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},filterTypingDebounce:0,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:0,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars",iconClearAllFiltersCommand:"fa fa-filter text-danger",iconClearAllSortingCommand:"fa fa-unsorted text-danger",iconClearFrozenColumnsCommand:"fa fa-times",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o text-success",iconExportTextDelimitedCommand:"fa fa-download",iconRefreshDatasetCommand:"fa fa-refresh",iconToggleFilterCommand:"fa fa-random",iconTogglePreHeaderCommand:"fa fa-random",menuWidth:16,resizeOnShowHeaderRow:!0,headerColumnValueExtractor:CS},headerMenu:{autoAlign:!0,autoAlignOffset:12,minWidth:140,iconClearFilterCommand:"fa fa-filter text-danger",iconClearSortCommand:"fa fa-unsorted",iconFreezeColumns:"fa fa-thumb-tack",iconSortAscCommand:"fa fa-sort-amount-asc",iconSortDescCommand:"fa fa-sort-amount-desc",iconColumnHideCommand:"fa fa-times",iconColumnResizeByContentCommand:"fa fa-arrows-h",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1},headerRowHeight:35,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{collapseAllOnSort:!0,cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!1,useSimpleViewportCalc:!0,saveDetailViewOnScroll:!1},rowHeight:35,topPanelHeight:35,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\xB7"}};function CS(n){let e=n&&n.columnGroup||"";return e?e+" - "+n.name:n&&n.name||""}var xM=(()=>{class n{static locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NO_ELEMENTS_FOUND:"Aucun \xE9l\xE9ment trouv\xE9",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"};static treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"};static VALIDATION_REQUIRED_FIELD="Field is required";static VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number";static VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number";static VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}";static VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}";static VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}";static VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}";static VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}";static VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}";static VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}";static VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}";static VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}";static VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}";static VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals";static VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters";static VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters";static VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters";static VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)";static VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)"}return n})(),bS=(()=>{class n{angularUtilService;appRef;cd;containerService;elm;translate;translaterService;forRootConfig;_dataset;_columnDefinitions;_currentDatasetLength=0;_eventHandler=new Ce;_eventPubSubService;_angularGridInstances;_hideHeaderRowAfterPageLoad=!1;_isGridInitialized=!1;_isDatasetInitialized=!1;_isDatasetHierarchicalInitialized=!1;_isPaginationInitialized=!1;_isLocalGrid=!0;_paginationOptions;_registeredResources=[];dataView;slickGrid;groupingDefinition={};groupItemMetadataProvider;backendServiceApi;locales;metrics;showPagination=!1;serviceList=[];totalItems=0;paginationData;subscriptions=[];slickEmptyWarning;slickFooter;slickPagination;slickRowDetailView;backendUtilityService;collectionService;extensionService;extensionUtility;filterFactory;filterService;gridEventService;gridService;gridStateService;groupingService;paginationService;resizerService;rxjs;sharedService;sortService;treeDataService;customDataView;gridId="";gridOptions;get paginationOptions(){return this._paginationOptions}set paginationOptions(t){t&&this._paginationOptions?this._paginationOptions=D(D(D({},this.gridOptions.pagination),this._paginationOptions),t):this._paginationOptions=t,this.gridOptions.pagination=this._paginationOptions??this.gridOptions.pagination,this.paginationService.updateTotalItems(this.gridOptions.pagination?.totalItems??0,!0)}set columnDefinitions(t){this._columnDefinitions=t,this._isGridInitialized&&this.updateColumnDefinitionsList(t),t.length>0&&this.copyColumnWidthsReference(t)}get columnDefinitions(){return this._columnDefinitions}columnDefinitionsChange=new Ot(!0);get dataset(){return(this.customDataView?this.slickGrid?.getData?.():this.dataView?.getItems?.())||[]}set dataset(t){let i=this._currentDatasetLength,r=ji(t,this._dataset||[]),s=t;this.slickGrid&&this.gridOptions?.enableTreeData&&Array.isArray(t)&&(t.length>0||t.length!==i||!r)&&(this._isDatasetHierarchicalInitialized=!1,s=this.sortTreeDataset(t,!r)),this._dataset=s,this.refreshGridData(s||[]),this._currentDatasetLength=(t||[]).length,this.gridOptions?.autoFitColumnsOnFirstLoad&&i===0&&this.slickGrid.autosizeColumns()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}set datasetHierarchical(t){let i=ji(t,this.sharedService?.hierarchicalDataset??[]),r=this._currentDatasetLength;this.sharedService.hierarchicalDataset=t,t&&this.columnDefinitions&&this.filterService?.clearFilters&&this.filterService.clearFilters(),t&&this.slickGrid&&this.sortService?.processTreeDataInitialSort&&(this.sortService.processTreeDataInitialSort(),setTimeout(()=>{let s=this.dataView.getItemCount();s>0&&(s!==r||!i)&&this.filterService.refreshTreeDataFilters()}),this._isDatasetHierarchicalInitialized=!0)}get elementRef(){return this.elm}get eventHandler(){return this._eventHandler}get gridContainerElement(){return document.querySelector(`#${this.gridOptions.gridContainerId||""}`)}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(t){this._isDatasetInitialized=t}set isDatasetHierarchicalInitialized(t){this._isDatasetHierarchicalInitialized=t}get registeredResources(){return this._registeredResources}constructor(t,i,r,s,o,a,l,u,h){this.angularUtilService=t,this.appRef=i,this.cd=r,this.containerService=s,this.elm=o,this.translate=a,this.translaterService=l,this.forRootConfig=u;let f=new wc;this._eventPubSubService=h?.eventPubSubService??new xd(this.elm.nativeElement),this._eventPubSubService.eventNamingStyle=Hi.camelCase,this.backendUtilityService=h?.backendUtilityService??new Gl,this.gridEventService=h?.gridEventService??new Ih,this.sharedService=h?.sharedService??new Ph,this.collectionService=h?.collectionService??new sc(this.translaterService),this.extensionUtility=h?.extensionUtility??new Hd(this.sharedService,this.backendUtilityService,this.translaterService),this.filterFactory=new Zh(f,this.translaterService,this.collectionService),this.filterService=h?.filterService??new Dh(this.filterFactory,this._eventPubSubService,this.sharedService,this.backendUtilityService),this.resizerService=h?.resizerService??new Mh(this._eventPubSubService),this.sortService=h?.sortService??new Nh(this.sharedService,this._eventPubSubService,this.backendUtilityService),this.treeDataService=h?.treeDataService??new Fh(this._eventPubSubService,this.sharedService,this.sortService),this.paginationService=h?.paginationService??new Rh(this._eventPubSubService,this.sharedService,this.backendUtilityService),this.extensionService=h?.extensionService??new yh(this.extensionUtility,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService,this.translaterService),this.gridStateService=h?.gridStateService??new Oh(this.extensionService,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=h?.gridService??new Th(this.gridStateService,this.filterService,this._eventPubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.groupingService=h?.groupingAndColspanService??new Ah(this.extensionUtility,this._eventPubSubService),this.serviceList=[this.containerService,this.extensionService,this.filterService,this.gridEventService,this.gridService,this.gridStateService,this.groupingService,this.paginationService,this.resizerService,this.sortService,this.treeDataService],this.containerService.registerInstance("ExtensionUtility",this.extensionUtility),this.containerService.registerInstance("FilterService",this.filterService),this.containerService.registerInstance("CollectionService",this.collectionService),this.containerService.registerInstance("ExtensionService",this.extensionService),this.containerService.registerInstance("GridEventService",this.gridEventService),this.containerService.registerInstance("GridService",this.gridService),this.containerService.registerInstance("GridStateService",this.gridStateService),this.containerService.registerInstance("GroupingAndColspanService",this.groupingService),this.containerService.registerInstance("PaginationService",this.paginationService),this.containerService.registerInstance("ResizerService",this.resizerService),this.containerService.registerInstance("SharedService",this.sharedService),this.containerService.registerInstance("SortService",this.sortService),this.containerService.registerInstance("EventPubSubService",this._eventPubSubService),this.containerService.registerInstance("PubSubService",this._eventPubSubService),this.containerService.registerInstance("TranslaterService",this.translaterService),this.containerService.registerInstance("TreeDataService",this.treeDataService)}ngAfterViewInit(){if(!this.gridOptions||!this.columnDefinitions)throw new Error("Using `<angular-slickgrid>` requires [gridOptions] and [columnDefinitions], it seems that you might have forgot to provide them since at least of them is undefined.");if(this.initialization(this._eventHandler),this._isGridInitialized=!0,this.gridOptions&&this.gridOptions.enableEmptyDataWarningMessage&&Array.isArray(this.dataset)){let t=this.dataset.length;this.displayEmptyDataWarning(t<1)}}ngOnDestroy(){this._eventPubSubService.publish("onBeforeGridDestroy",this.slickGrid),this.destroy(),this._eventPubSubService.publish("onAfterGridDestroyed",!0)}destroy(t=!1){if(this.serviceList.forEach(i=>{i&&i.dispose&&i.dispose()}),this.serviceList=[],this.disposeExternalResources(),this.slickEmptyWarning?.dispose(),this.slickFooter?.dispose(),this.slickPagination?.dispose(),this._eventHandler?.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this._eventPubSubService?.unsubscribeAll(),this.dataView&&(this.dataView.setItems([]),this.dataView.destroy()),this.slickGrid?.destroy&&this.slickGrid.destroy(t),this.backendServiceApi){for(let i of Object.keys(this.backendServiceApi))delete this.backendServiceApi[i];this.backendServiceApi=void 0}for(let i of Object.keys(this.columnDefinitions))this.columnDefinitions[i]=null;for(let i of Object.keys(this.sharedService))this.sharedService[i]=null;t&&this.emptyGridContainerElm(),this.subscriptions=ys(this.subscriptions),this._dataset=null,this.datasetHierarchical=void 0,this._columnDefinitions=[],this._angularGridInstances=void 0,this.slickGrid=void 0}disposeExternalResources(){if(Array.isArray(this._registeredResources))for(;this._registeredResources.length>0;){let t=this._registeredResources.pop();t?.dispose&&t.dispose()}this._registeredResources=[]}emptyGridContainerElm(){let t=this.gridOptions?.gridContainerId??"grid1",i=document.querySelector(`#${t}`);De(i)}createBackendApiInternalPostProcessCallback(t){let i=t&&t.backendServiceApi;if(i&&i.service){let r=i.service;typeof r.getDatasetName=="function"&&(i.internalPostProcess=s=>{let o=i&&r&&typeof r.getDatasetName=="function"?r.getDatasetName():"";if(s?.data[o]){let a=s.data[o].hasOwnProperty("nodes")?s.data[o].nodes:s.data[o],l=s.data[o].hasOwnProperty("totalCount")?s.data[o].totalCount:s.data[o].length;this.refreshGridData(a,l||0)}})}}initialization(t){if(this.gridOptions.translater=this.translaterService,this._eventHandler=t,this.gridOptions&&(this.gridOptions.frozenRow!==void 0&&this.gridOptions.frozenRow>=0||this.gridOptions.frozenColumn!==void 0&&this.gridOptions.frozenColumn>=0)&&this.gridOptions.enableMouseWheelScrollHandler===void 0&&(this.gridOptions.enableMouseWheelScrollHandler=!0),this._eventPubSubService.eventNamingStyle=this.gridOptions?.eventNamingStyle??Hi.camelCase,this._eventPubSubService.publish("onBeforeGridCreate",!0),this._dataset=this._dataset||[],this.gridOptions=this.mergeGridOptions(this.gridOptions),this._paginationOptions=this.gridOptions?.pagination,this.locales=this.gridOptions?.locales??xM.locales,this.backendServiceApi=this.gridOptions?.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this.createBackendApiInternalPostProcessCallback(this.gridOptions),!this.customDataView){let r=this.gridOptions?.dataView?.inlineFilters??!1,s=me(D({},this.gridOptions.dataView),{inlineFilters:r});(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new Ta,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,s=me(D({},s),{groupItemMetadataProvider:this.groupItemMetadataProvider})),this.dataView=new zd(s,this._eventPubSubService),this._eventPubSubService.publish("onDataviewCreated",this.dataView)}this.preRegisterResources(),this._columnDefinitions=this.swapInternalEditorToSlickGridFactoryEditor(this._columnDefinitions),this.gridOptions.autoAddCustomEditorFormatter&&vw(this._columnDefinitions,this.gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.subscriptions.push(this._eventPubSubService.subscribe("onPluginColumnsChanged",r=>{this._columnDefinitions=r.columns,this.columnDefinitionsChange.emit(this._columnDefinitions)})),this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this.gridOptions),this.gridOptions.presets?.pinning&&(this.gridOptions=D(D({},this.gridOptions),this.gridOptions.presets.pinning)),this.slickGrid=new rh(`#${this.gridId}`,this.customDataView||this.dataView,this._columnDefinitions,this.gridOptions,this._eventPubSubService),this.sharedService.dataView=this.dataView,this.sharedService.slickGrid=this.slickGrid,this.sharedService.gridContainerElement=this.elm.nativeElement,this.groupItemMetadataProvider&&this.slickGrid.registerPlugin(this.groupItemMetadataProvider),this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.slickGrid,this.gridOptions,this.dataView);let i=this.gridOptions.frozenColumn!==void 0?this.gridOptions.frozenColumn:-1;if(i>=0&&i<=this._columnDefinitions.length&&(this.sharedService.frozenVisibleColumnId=this._columnDefinitions[i].id||""),this.registerResources(),this.slickGrid.init(),this.gridContainerElement&&this.resizerService.init(this.slickGrid,this.gridContainerElement),!this.gridOptions.enablePagination&&this.gridOptions.showCustomFooter&&this.gridOptions.customFooterOptions&&this.gridContainerElement&&(this.slickFooter=new nf(this.slickGrid,this.gridOptions.customFooterOptions,this._eventPubSubService,this.translaterService),this.slickFooter.renderFooter(this.gridContainerElement)),!this.customDataView&&this.dataView){let r=this.gridOptions?.enableTreeData?this.sortTreeDataset(this._dataset):this._dataset;if(this.dataView.beginUpdate(),this.dataView.setItems(r||[],this.gridOptions.datasetIdPropertyName??"id"),this.dataView.endUpdate(),this.slickGrid?.getSelectionModel()&&this.gridOptions&&this.gridOptions.dataView&&this.gridOptions.dataView.hasOwnProperty("syncGridSelection")){let o=!1;this.gridOptions.backendServiceApi&&this.gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(o=this.gridOptions.dataView.syncGridSelectionWithBackendService);let a=this.gridOptions.dataView.syncGridSelection;if(typeof a=="boolean"){let l=a;this._isLocalGrid||(l=a&&o),this.dataView.syncGridSelection(this.slickGrid,l)}else typeof a=="object"&&this.dataView.syncGridSelection(this.slickGrid,a.preserveHidden,a.preserveHiddenOnSelectionChange)}(this.dataView.getLength()||this._dataset&&this._dataset.length||0)>0&&(!this._isDatasetInitialized&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0)}this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this._eventPubSubService.publish("onGridCreated",this.slickGrid),this.customDataView||this.executeAfterDataviewCreated(this.slickGrid,this.gridOptions),this.bindResizeHook(this.slickGrid,this.gridOptions),this.gridOptions?.backendServiceApi&&this.bindBackendCallbackFunctions(this.gridOptions),this.gridOptions?.enablePagination&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(this.dataset)),this._angularGridInstances={dataView:this.dataView,slickGrid:this.slickGrid,extensions:this.extensionService?.extensionList,destroy:this.destroy.bind(this),backendService:this.gridOptions?.backendServiceApi?.service,eventPubSubService:this._eventPubSubService,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.groupingService,extensionService:this.extensionService,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService},this._eventPubSubService.publish("onAngularGridCreated",this._angularGridInstances)}paginationChanged(t){let i=this.gridStateService?.needToPreserveRowSelection()??!1;this.slickGrid&&!i&&this.gridOptions?.backendServiceApi&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.slickGrid.setSelectedRows([]);let{pageNumber:r,pageSize:s}=t;this.sharedService&&s!==void 0&&r!==void 0&&(this.sharedService.currentPagination={pageNumber:r,pageSize:s}),this._eventPubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:r,pageSize:s},type:_i.pagination},gridState:this.gridStateService.getCurrentGridState()}),this.cd.markForCheck()}refreshGridData(t,i){if(this.gridOptions&&this.gridOptions.enableEmptyDataWarningMessage&&Array.isArray(t)){let r=i||t.length;this.displayEmptyDataWarning(r<1)}if(Array.isArray(t)&&this.slickGrid&&this.dataView?.setItems){if(this.dataView.setItems(t,this.gridOptions.datasetIdPropertyName??"id"),!this.gridOptions.backendServiceApi&&!this.gridOptions.enableTreeData&&this.dataView.reSort(),t.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this.gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),t&&this.slickGrid.invalidate(),this.showPagination=!!(this.gridOptions&&(this.gridOptions.enablePagination||this.gridOptions.backendServiceApi&&this.gridOptions.enablePagination===void 0)),this._paginationOptions&&this.gridOptions?.pagination&&this.gridOptions?.backendServiceApi){let r=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions),s=i!==void 0?i:this.gridOptions?.pagination?.totalItems;s!==void 0&&s!==this.totalItems&&(this.totalItems=+s),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(r)}if(this.slickGrid&&this.gridOptions.enableAutoResize){let r=this.gridOptions.autoResize&&this.gridOptions.autoResize.delay;this.resizerService.resizeGrid(r||10)}}}setPaginationOptionsWhenPresetDefined(t,i){return t.presets?.pagination&&i&&!this._isPaginationInitialized&&(i.pageSize=t.presets.pagination.pageSize,i.pageNumber=t.presets.pagination.pageNumber),i}updateColumnDefinitionsList(t){t=this.swapInternalEditorToSlickGridFactoryEditor(t),this.gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(!1,t):this.extensionService.renderColumnHeaders(t,!0),this.gridOptions?.enableAutoSizeColumns?this.slickGrid.autosizeColumns():this.gridOptions?.enableAutoResizeColumnsByCellContent&&this.resizerService?.resizeColumnsByCellContent&&this.resizerService.resizeColumnsByCellContent()}showHeaderRow(t=!0){return this.slickGrid.setHeaderRowVisibility(t),t===!0&&this._isGridInitialized&&this.slickGrid.setColumns(this.columnDefinitions),t}copyColumnWidthsReference(t){t.forEach(i=>i.originalWidth=i.width)}displayEmptyDataWarning(t=!0){this.slickEmptyWarning?.showEmptyDataMessage(t)}bindDifferentHooks(t,i,r){if(this.translate?.onLangChange&&(i.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys()),this.subscriptions.push(this.translate.onLangChange.subscribe(()=>{this._eventPubSubService.publish("onLanguageChange"),i.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys(),i.createPreHeaderPanel&&!i.enableDraggableGrouping&&this.groupingService.translateGroupingAndColSpan())}))),i.backendServiceApi){let s=i.backendServiceApi;s?.service?.init&&s.service.init(s.options,i.pagination,this.slickGrid,this.sharedService)}r&&t&&(this.gridEventService.bindOnCellChange(t),this.gridEventService.bindOnClick(t),r&&t&&(i.enableSorting&&(i.backendServiceApi&&!i.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(t):this.sortService.bindLocalOnSort(t)),i.enableFiltering&&(this.filterService.init(t),i.backendServiceApi&&!i.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(t):this.filterService.bindLocalOnFilter(t)),this._eventHandler.subscribe(t.onColumnsReordered,(s,o)=>{this.sharedService.hasColumnsReordered=!0,this.sharedService.visibleColumns=o.impactedColumns}),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized(),this._eventHandler.subscribe(r.onRowCountChanged,()=>{t.invalidate(),this.handleOnItemCountChanged(r.getFilteredItemCount()||0,r.getItemCount()||0)}),this._eventHandler.subscribe(r.onSetItemsCalled,(s,o)=>{this.handleOnItemCountChanged(r.getFilteredItemCount()||0,o.itemCount),o.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!this.gridOptions?.resizeByContentOnlyOnFirstLoad)}),i?.enableFiltering&&!i.enableRowDetailView&&this._eventHandler.subscribe(r.onRowsChanged,(s,o)=>{o?.rows&&Array.isArray(o.rows)&&(o.rows.forEach(a=>t.updateRow(a)),t.render())}))),i&&i.colspanCallback&&r&&r.getItem&&r.getItemMetadata&&(r.getItemMetadata=s=>{let o=null;return i.colspanCallback&&i.colspanCallback&&(o=i.colspanCallback(r.getItem(s))),o})}bindBackendCallbackFunctions(t){let i=t.backendServiceApi,r=i&&i.service,s=r?.options??{},o=s?s&&s.hasOwnProperty("executeProcessCommandOnInit")?s.executeProcessCommandOnInit:!0:!1;if(r){if(t&&t.presets){if(r.updateFilters&&Array.isArray(t.presets.filters)&&t.presets.filters.length>0&&r.updateFilters(t.presets.filters,!0),r.updateSorters&&Array.isArray(t.presets.sorters)&&t.presets.sorters.length>0){let a=this.gridOptions.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);r.updateSorters(void 0,a)}if(r.updatePagination&&t.presets.pagination){let{pageNumber:a,pageSize:l}=t.presets.pagination;r.updatePagination(a,l)}}else{let a=this.filterService.getColumnFilters();a&&r.updateFilters&&r.updateFilters(a,!1)}if(i&&r&&(i.onInit||o)){let a=typeof r.buildQuery=="function"?r.buildQuery():"",l=o?i.process&&i.process(a)||null:i.onInit&&i.onInit(a)||null;setTimeout(()=>{let u=this.backendUtilityService,h=new Date;i.preProcess&&i.preProcess();let f=this.gridOptions?.pagination?.totalItems??0;l instanceof Promise?l.then(m=>u.executeBackendProcessesCallback(h,m,i,f)).catch(m=>u.onBackendError(m,i)):l&&this.rxjs?.isObservable(l)&&this.subscriptions.push(l.subscribe({next:m=>u.executeBackendProcessesCallback(h,m,i,f),error:m=>u.onBackendError(m,i)}))})}}}bindResizeHook(t,i){if(i.autoFitColumnsOnFirstLoad&&i.autosizeColumnsByCellContentOnFirstLoad||i.enableAutoSizeColumns&&i.enableAutoResizeColumnsByCellContent)throw new Error('[Angular-Slickgrid] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');t&&i.autoFitColumnsOnFirstLoad&&i.enableAutoSizeColumns&&t.autosizeColumns(),i.gridHeight||i.gridWidth?this.resizerService.resizeGrid(0,{height:i.gridHeight,width:i.gridWidth}):this.resizerService.resizeGrid(),i.enableAutoResize&&t&&i.autoFitColumnsOnFirstLoad&&i.enableAutoSizeColumns&&t.autosizeColumns()}executeAfterDataviewCreated(t,i){if(i.enableSorting&&i.presets&&Array.isArray(i.presets.sorters)){let r=this.gridOptions.multiColumnSort?i.presets.sorters:i.presets.sorters.slice(0,1);this.sortService.loadGridSorters(r)}}handleOnItemCountChanged(t,i){this._currentDatasetLength=i,this.metrics={startTime:new Date,endTime:new Date,itemCount:t,totalItemCount:i},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&this.gridOptions?.enableEmptyDataWarningMessage&&this.displayEmptyDataWarning(t===0)}initializePaginationService(t){this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions,paginationService:this.paginationService},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.slickGrid,t,this.backendServiceApi),this.subscriptions.push(this._eventPubSubService.subscribe("onPaginationChanged",i=>{this.paginationChanged(i)}),this._eventPubSubService.subscribe("onPaginationVisibilityChanged",i=>{this.showPagination=i?.visible??!1,this.gridOptions?.backendServiceApi&&this.backendUtilityService?.refreshBackendDataset(this.gridOptions),this.renderPagination(this.showPagination)})),this.renderPagination(),this._isPaginationInitialized=!0),this.cd.detectChanges()}loadEditorCollectionAsync(t){let i=t&&t.editor&&t.editor.collectionAsync;i instanceof Le?this.subscriptions.push(i.subscribe(r=>this.updateEditorCollection(t,r))):i instanceof Promise&&i.then(r=>{Array.isArray(r)&&this.updateEditorCollection(t,r)})}insertDynamicPresetColumns(t,i){if(this._columnDefinitions){let r=this._columnDefinitions.findIndex(s=>s.id===t);if(r>=0){let s=this._columnDefinitions[r];s?.id===t&&!i.some(o=>o.id===t)&&(r>0?i.splice(r,0,s):i.unshift(s))}}}loadColumnPresetsWhenDatasetInitialized(){if(this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.columns)&&this.gridOptions.presets.columns.length>0){let t=this.gridStateService.getAssociatedGridColumns(this.slickGrid,this.gridOptions.presets.columns);if(t&&Array.isArray(t)&&t.length>0&&Array.isArray(this._columnDefinitions)){if(this.gridOptions.enableRowMoveManager){let i=this.gridOptions?.rowMoveManager?.columnId??"_move";this.insertDynamicPresetColumns(i,t)}if(this.gridOptions.enableCheckboxSelector){let i=this.gridOptions?.checkboxSelector?.columnId??"_checkbox_selector";this.insertDynamicPresetColumns(i,t)}if(this.gridOptions.enableRowDetailView){let i=this.gridOptions?.rowDetailView?.columnId??"_detail_selector";this.insertDynamicPresetColumns(i,t)}t.forEach(i=>i.originalWidth=i.width),this.slickGrid.setColumns(t),this.sharedService.visibleColumns=t}}}loadFilterPresetsWhenDatasetInitialized(){this.gridOptions&&!this.customDataView&&this.gridOptions.presets&&(Array.isArray(this.gridOptions.presets.filters)||Array.isArray(this.gridOptions.presets?.treeData?.toggledItems))&&this.filterService.populateColumnFilterSearchTermPresets(this.gridOptions.presets?.filters||[])}loadLocalGridPagination(t){if(this.gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(t)?t.length:0,this._paginationOptions&&this.dataView?.getPagingInfo){let r=this.dataView.getPagingInfo();r?.hasOwnProperty("totalRows")&&this._paginationOptions.totalItems!==r.totalRows&&(this.totalItems=r.totalRows||0)}this._paginationOptions.totalItems=this.totalItems;let i=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions);this.initializePaginationService(i)}}loadRowSelectionPresetWhenExists(){let t=this.gridOptions?.presets;if(this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&this.slickGrid?.getSelectionModel()&&t?.rowSelection&&(Array.isArray(t.rowSelection.gridRowIndexes)||Array.isArray(t.rowSelection.dataContextIds))){let r=t.rowSelection.dataContextIds,s=t.rowSelection.gridRowIndexes;Array.isArray(r)&&r.length>0?s=this.dataView.mapIdsToRows(r)||[]:Array.isArray(s)&&s.length>0&&(r=this.dataView.mapRowsToIds(s)||[]),this.slickGrid&&Array.isArray(s)&&(this.slickGrid.setSelectedRows(s),this.dataView.setSelectedIds(r||[],{isRowBeingAdded:!0,shouldTriggerEvent:!1,applyRowSelectionToGrid:!0}))}}mergeGridOptions(t){t.gridId=this.gridId,t.gridContainerId=`slickGridContainer-${this.gridId}`,t.enablePagination=(t.backendServiceApi&&t.enablePagination===void 0?!0:t.enablePagination)||!1;let i=A.extend(!0,{},Vv,this.forRootConfig,t);return i?.pagination&&(t.enablePagination||t.backendServiceApi)&&(this.forRootConfig.pagination||t.pagination)&&(i.pagination.pageSize=t.pagination?.pageSize??this.forRootConfig.pagination?.pageSize??Vv.pagination.pageSize,i.pagination.pageSizes=t.pagination?.pageSizes??this.forRootConfig.pagination?.pageSizes??Vv.pagination.pageSizes),this._hideHeaderRowAfterPageLoad=i.showHeaderRow===!1,i.enableFiltering&&!i.showHeaderRow&&(i.showHeaderRow=i.enableFiltering),i&&!i.enableFiltering&&i.enablePagination&&this._isLocalGrid&&(i.enableFiltering=!0,i.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService&&(this.sharedService.hideHeaderRowAfterPageLoad=!0)),i}registerExternalResources(t,i=!1){i&&this.disposeExternalResources(),t.forEach(r=>this._registeredResources.push(r)),this.initializeExternalResources(t)}resetExternalResources(){this._registeredResources=[]}preRegisterResources(){this._registeredResources=this.gridOptions?.externalResources||[],this.registerRxJsResource(new sf),this.gridOptions.enableRowDetailView&&(this.slickRowDetailView=new Uv(this.angularUtilService,this.appRef,this._eventPubSubService,this.elm.nativeElement,this.rxjs),this.slickRowDetailView.create(this.columnDefinitions,this.gridOptions),this._registeredResources.push(this.slickRowDetailView),this.extensionService.addExtensionToList(Re.rowDetailView,{name:Re.rowDetailView,instance:this.slickRowDetailView}))}initializeExternalResources(t){if(Array.isArray(t))for(let i of t)this.slickGrid&&typeof i.init=="function"&&i.init(this.slickGrid,this.containerService)}registerResources(){Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new tf,this._registeredResources.push(this.slickEmptyWarning),this.initializeExternalResources(this._registeredResources)}registerRxJsResource(t){this.rxjs=t,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.containerService.registerInstance("RxJsResource",this.rxjs)}renderPagination(t=!0){this.gridOptions?.enablePagination&&!this._isPaginationInitialized&&t?(this.slickPagination=new rf(this.paginationService,this._eventPubSubService,this.sharedService,this.translaterService),this.slickPagination.renderPagination(this.gridContainerElement),this._isPaginationInitialized=!0):t||(this.slickPagination&&this.slickPagination.dispose(),this._isPaginationInitialized=!1)}sortTreeDataset(t,i=!1){let r=this._currentDatasetLength,s,o=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(s=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),o=s.flat):Array.isArray(t)&&t.length>0&&(this.gridOptions?.treeDataOptions?.initialSort?(s=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(t,this._columnDefinitions,this.gridOptions),this.sharedService.hierarchicalDataset=s.hierarchical,o=s.flat):(this.sharedService.hierarchicalDataset=this.treeDataService.convertFlatParentChildToTreeDataset(t,this.gridOptions),o=t||[])),t.length>0&&(i||t.length!==r)&&this.filterService.refreshTreeDataFilters(o),o}swapInternalEditorToSlickGridFactoryEditor(t){return t.some(i=>`${i.id}`.includes("."))&&console.error('[Angular-Slickgrid] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),t.map(i=>(i?.editor?.collectionAsync&&this.loadEditorCollectionAsync(i),me(D({},i),{editor:i.editor?.model,internalColumnEditor:D({},i.editor)})))}translateColumnHeaderTitleKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name")}translateColumnGroupKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup")}updateEditorCollection(t,i){if(t.editor.collection=i,t.editor.disabled=!1,Array.isArray(this.columnDefinitions)){let s=this.columnDefinitions.find(o=>o.id===t.id);s&&(s.internalColumnEditor=t.editor)}let r=this.slickGrid.getCellEditor();r?.disable&&r?.renderDomElement&&(r.destroy(),r.disable(!1),r.renderDomElement(i))}static \u0275fac=function(i){return new(i||n)(vi(Bv),vi(ir),vi(Qs),vi(yS),vi(Ks),vi(Dc,8),vi(vS,8),vi("config"),vi("externalService"))};static \u0275cmp=Zo({type:n,selectors:[["angular-slickgrid"]],inputs:{customDataView:"customDataView",gridId:"gridId",gridOptions:"gridOptions",paginationOptions:"paginationOptions",columnDefinitions:"columnDefinitions",dataset:"dataset",datasetHierarchical:"datasetHierarchical"},outputs:{columnDefinitionsChange:"columnDefinitionsChange"},features:[rb([Bv,ir,vS])],decls:2,vars:2,consts:[[1,"gridPane",3,"id"],[1,"slickgrid-container",2,"width","100%"]],template:function(i,r){i&1&&(ia(0,"div",0),ds(1,"div",1),na()),i&2&&(om("id","slickGridContainer-",r.gridId,""),zu(1),$u("id",r.gridId))},encapsulation:2})}return n})(),ES=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:"config",useValue:t},{provide:"externalService",useValue:null},Bv,yS]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ai({type:n});static \u0275inj=Oi({imports:[Zu,gS]})}return n})();var wS=(()=>{let e=class e{constructor(){this.columnDefinitions=[],this.gridOptions={},this.dataset=[],this.title="AngularSlickgrid",this.prepareGrid()}prepareGrid(){this.columnDefinitions=[{id:"title",name:"Title",field:"title",sortable:!0},{id:"duration",name:"Duration (days)",field:"duration",sortable:!0},{id:"%",name:"% Complete",field:"percentComplete",sortable:!0},{id:"start",name:"Start",field:"start"},{id:"finish",name:"Finish",field:"finish"}],this.gridOptions={enableAutoResize:!0,enableSorting:!0},this.dataset=[{id:0,title:"Task 1",duration:45,percentComplete:5,start:"2001-01-01",finish:"2001-01-31"},{id:1,title:"Task 2",duration:33,percentComplete:34,start:"2001-01-11",finish:"2001-02-04"}]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Zo({type:e,selectors:[["app-root"]],decls:3,vars:3,consts:[[1,"container"],["gridId","grid1",3,"columnDefinitions","gridOptions","dataset"]],template:function(r,s){r&1&&(ia(0,"div",0),ds(1,"angular-slickgrid",1),na(),ds(2,"router-outlet")),r&2&&(zu(1),sm("columnDefinitions",s.columnDefinitions)("gridOptions",s.gridOptions)("dataset",s.dataset))},dependencies:[og,bS]});let n=e;return n})();var SS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ai({type:e,bootstrap:[wS]}),e.\u0275inj=Oi({imports:[Pb,wE,ES.forRoot()]});let n=e;return n})();Mb().bootstrapModule(SS).catch(n=>console.error(n));
